<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-US">
  <id>https://kigane.github.io/</id>
  <title>Leonhardt's Blog</title>
  <subtitle>æƒ³ï¼Œéƒ½æ˜¯é—®é¢˜ã€‚åšï¼Œæ‰æ˜¯ç­”æ¡ˆã€‚</subtitle>
  <author>
    <name>Leonhardt</name>
  </author>
  <updated>2021-12-18T06:00:58.696Z</updated>
  <generator>@mr-hope/vuepress-plugin-feed</generator>
  <link rel="self" href="https://kigane.github.io/atom.xml"/>
  <link rel="alternate" href="https://kigane.github.io/"/>
  <rights>Copyright by Leonhardt</rights>
  <category term="Python"/>
  <category term="C/C++"/>
  <category term="blog"/>
  <category term="ä½¿ç”¨æŒ‡å—"/>
  <category term="guide"/>
  <category term="CV"/>
  <category term="Thesis"/>
  <contributor>
    <name>Leonhardt</name>
  </contributor>
  <contributor>
    <name>Ms.Hope</name>
  </contributor>
  <entry>
    <title type="html">æˆ‘çš„åšå®¢</title>
    <id>https://kigane.github.io/blog/</id>
    <link href="https://kigane.github.io/blog/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="åè¨€è­¦å¥"> åè¨€è­¦å¥</h2>
<blockquote>
<p>ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œ</p>
</blockquote>
<blockquote>
<p>Keep It Simple, Stupid.</p>
</blockquote>
<blockquote>
<p>å¿«é€Ÿæ¨è¿›ï¼Œé€æ­¥ä¼˜åŒ–</p>
</blockquote>
<blockquote>
<p>Make it work. Make it right. Make it fast.</p>
</blockquote>
<blockquote>
<p>å‰é€”å¾ˆè¿œï¼Œä¹Ÿå¾ˆæš—ã€‚
ç„¶è€Œä¸è¦æ€•ï¼Œä¸æ€•çš„äººçš„é¢å‰æ‰æœ‰è·¯ã€‚</p>
</blockquote>
<blockquote>
<p>I want to create a collection of games during my career, so that when I am on my deathbed I can look back and see that I created all these wonderful things that brought people joy.</p>
</blockquote>
<blockquote>
<p>Less interests, more interest.</p>
</blockquote>
<blockquote>
<p>æƒ³ï¼Œéƒ½æ˜¯é—®é¢˜ã€‚åšï¼Œæ‰æ˜¯ç­”æ¡ˆã€‚</p>
</blockquote>
<blockquote>
<p>å½¢è€Œä¸Šè€…è°“ä¹‹é“ï¼Œå½¢è€Œä¸‹è€…è°“ä¹‹å™¨ï¼Œèƒ½èˆå™¨è€Œç›´æ¥è¿‘é“è€…ï¼Œå‡ ç¨€ï¼</p>
</blockquote>
<blockquote>
<p>æ¯”è¾ƒçš„å…³é”®ä¸åœ¨äºç›¸ä¼¼ç‰¹å¾çš„å¤šå°‘ï¼Œè€Œåœ¨äºç‰¹å¾æ˜¯ä¸æ˜¯æ­ç¤ºäº†äº‹ç‰©çš„æœ¬è´¨</p>
</blockquote>
<blockquote>
<p>Experience is what you get when you didn't get what you wanted.</p>
</blockquote>
<blockquote>
<p>&quot;luck&quot; is where preparation meets opportunity.</p>
</blockquote>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Effective Python</title>
    <id>https://kigane.github.io/blog/effective_python/</id>
    <link href="https://kigane.github.io/blog/effective_python/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç”¨-propertyæ›¿ä»£getter-setterå†™æ³•"> ç”¨@propertyæ›¿ä»£getter, setterå†™æ³•</h2>
<ul>
<li>ç”¨@propertyä¿®é¥°çš„æ–¹æ³•å¯ä»¥å½“åšå±æ€§ä½¿ç”¨ï¼Œè¢«ä¿®é¥°çš„æ–¹æ³•å¯çœ‹ä½œå±æ€§çš„getteræ–¹æ³•ã€‚</li>
<li>ç”¨@attr.setterä¿®é¥°çš„æ–¹æ³•ä¸ºå±æ€§çš„setteræ–¹æ³•ã€‚</li>
</ul>
<div><pre><code><span>class</span> <span>A</span><span>:</span>
    <span>def</span> <span>__init__</span><span>(</span>self<span>)</span> <span>-</span><span>></span> <span>None</span><span>:</span>
        self<span>.</span>_grade <span>=</span> <span>0</span>

    <span>@property</span>
    <span>def</span> <span>grade</span><span>(</span>self<span>)</span><span>:</span>
        <span>print</span><span>(</span><span>'getter triggered'</span><span>)</span>
        <span>return</span> self<span>.</span>_grade
    
    <span>@grade<span>.</span>setter</span>
    <span>def</span> <span>grade</span><span>(</span>self<span>,</span> val<span>)</span><span>:</span>
        self<span>.</span>_grade <span>=</span> val
        <span>print</span><span>(</span><span>'setter triggered'</span><span>)</span>
    
<span>if</span> __name__ <span>==</span> <span>'__main__'</span><span>:</span>
    a <span>=</span> A<span>(</span><span>)</span>
    a<span>.</span>grade <span>=</span> <span>5</span>
    <span>print</span><span>(</span>a<span>.</span>grade<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Python"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-16T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Hazel</title>
    <id>https://kigane.github.io/blog/hazel/</id>
    <link href="https://kigane.github.io/blog/hazel/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="eventsystem"> EventSystem</h2>
<ul>
<li>EntryPoint.h -- Game Main Loop
<ul>
<li>app = CreateApplicaiton();</li>
<li>app-&gt;run();</li>
<li>delete app;</li>
</ul>
</li>
<li>Application.h
<ul>
<li>Application(name)
<ul>
<li>åˆ›å»ºçª—å£ï¼Œè®¾ç½®å›è°ƒ</li>
<li>æ¸²æŸ“åˆå§‹åŒ–</li>
<li>åˆ›å»ºImGuiå±‚</li>
</ul>
</li>
<li>OnEvent(e)
<ul>
<li>Dispatch Event=&gt;function</li>
<li>Layer-&gt;OnEvent(e) ä¼ æ’­æœºåˆ¶</li>
</ul>
</li>
<li>Run() æ›´æ–°Layerså’ŒWindow</li>
</ul>
</li>
<li>Event.h
<ul>
<li>åˆ›å»ºäº‹ä»¶ Event</li>
<li>åˆ†å‘äº‹ä»¶ EventDispatcher</li>
<li>å…·ä½“äº‹ä»¶ç»§æ‰¿Event</li>
</ul>
</li>
</ul>
<p>ä¸€ä¸ªçª—å£äº‹ä»¶å‘ç”Ÿï¼Œæœ‰glfwWindowæ•è·ï¼Œäº§ç”Ÿglfwäº‹ä»¶ã€‚é€šè¿‡åœ¨åˆ›å»ºçª—å£æ—¶ï¼Œè®¾ç½®çš„å„ç§äº‹ä»¶å›è°ƒå‡½æ•°(glfwSetWindowSizeCallback(window,callback))ï¼Œå°†glfwäº‹ä»¶è½¬åŒ–ä¸ºHazeläº‹ä»¶ï¼Œå¹¶ç”¨Application::OnEventå›è°ƒå‡½æ•°å¤„ç†ã€‚</p>
<h2 id="precompiled-header"> precompiled header</h2>
<p>å½“é¡¹ç›®ä¸­cppæ–‡ä»¶å¤šäº†ä»¥åï¼Œæ¯ä¸ªcppæ–‡ä»¶ç¼–è¯‘æ—¶éƒ½éœ€è¦è§£æå…¶includeçš„å¤´æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰äº›å¤´æ–‡ä»¶å¯èƒ½è¢«å¤šä¸ªcppæ–‡ä»¶æ‰€å¼•ç”¨ï¼Œä½†æ¯ä¸ªç¼–è¯‘å•å…ƒ(cppæ–‡ä»¶)éƒ½è¦ç‹¬ç«‹è§£æå„è‡ªçš„å¤´æ–‡ä»¶ï¼Œæ•ˆç‡æ¯”è¾ƒä½ã€‚<br>
å› æ­¤ï¼Œå¯¹äºè¿™äº›å¸¸ç”¨çš„ï¼Œé€šå¸¸ä¸ä¼šæœ‰ä¿®æ”¹çš„å¤´æ–‡ä»¶(ä¾‹å¦‚ï¼Œiostream,vector,string....)ï¼Œå¯ä»¥é¢„å…ˆç¼–è¯‘å¥½ï¼Œå˜æˆä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚åœ¨åç»­cppæ–‡ä»¶ç¼–è¯‘ï¼Œé“¾æ¥æ—¶ï¼Œå¯ä»¥ç›´æ¥æŸ¥æ‰¾è¿™ä¸ªç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ•ˆç‡é«˜ã€‚</p>
<p>æ€ä¹ˆåšï¼Ÿ</p>
<ul>
<li>å»ºç«‹ä¸€ä¸ªpch.hå¤´æ–‡ä»¶ï¼Œå°†éœ€è¦é¢„ç¼–è¯‘çš„å¤´æ–‡ä»¶åŒ…å«è¿›æ¥</li>
<li>MSVCéœ€è¦å»ºç«‹ä¸€ä¸ªpch.cppï¼Œå†…å®¹ä»…éœ€include &quot;pch.h&quot;å³å¯ã€‚</li>
<li>VS2019ç›¸å…³è®¾ç½®
<ul>
<li>C/C++-&gt;precompiled headers-&gt;Precompiled Header è®¾ä¸º Use</li>
<li>C/C++-&gt;precompiled headers-&gt;Precompiled Header File è®¾ä¸º pch.h</li>
</ul>
</li>
<li>premakeè®¾ç½®(proejctä¸‹)
<ul>
<li>pchheader &quot;pch.h&quot;</li>
<li>pchsource &quot;src/pch.cpp&quot;</li>
</ul>
</li>
</ul>
<p>PS: å¦‚æœpch.hä¸­çš„å¤´æ–‡ä»¶æœ‰ä»»ä½•ä¸€ä¸ªæ”¹åŠ¨ï¼Œæ•´ä¸ªpch.héƒ½éœ€è¦é‡æ–°ç¼–è¯‘ã€‚æ‰€ä»¥ï¼Œä¸è¦å°†å¯èƒ½ç»å¸¸æ”¹åŠ¨çš„å¤´æ–‡ä»¶æ”¾å…¥é¢„ç¼–è¯‘å¤´ã€‚</p>
<h2 id="layers"> Layers</h2>
<ul>
<li>Layer &amp; LayerStack</li>
<li>LayerStackæ˜¯Layerçš„wrapper(ä¸€ä¸ªvector&lt;Layer&gt;)ï¼Œä¸»è¦ç”¨äºè®¾å®šæ¸²æŸ“é¡ºåºï¼Œä»¥åŠäº‹ä»¶çš„ä¼ æ’­é¡ºåº(å’Œæ¸²æŸ“é¡ºåºç›¸å)ï¼Œå°†ä¸åŒLayerçš„æ¸²æŸ“å’Œäº‹ä»¶å¤„ç†éš”ç¦»å¼€ã€‚</li>
<li>OnUpdate() åœ¨æ¯ä¸€å¸§æ¸²æŸ“æ—¶è°ƒç”¨</li>
<li>OnEvent() åœ¨åå‘ä¼ æ’­äº‹ä»¶</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="C/C++"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-13T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">æ¸¸æˆå¼•æ“æ€»è§ˆ</title>
    <id>https://kigane.github.io/blog/game-engine-overview/</id>
    <link href="https://kigane.github.io/blog/game-engine-overview/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å…¸å‹çš„æ¸¸æˆå›¢é˜Ÿç»“æ„"> å…¸å‹çš„æ¸¸æˆå›¢é˜Ÿç»“æ„</h2>
<ul>
<li>engineers
<ul>
<li>runtime programmer: engine&amp;game</li>
<li>tools programmer: offline tools for whole team</li>
</ul>
</li>
<li>artists
<ul>
<li>Concept artists: æ¦‚å¿µè®¾è®¡</li>
<li>3D modelers: å»ºæ¨¡å¸ˆ
<ul>
<li>foreground modelers: äººç‰©ï¼Œæ­¦å™¨ï¼Œäº¤é€šå·¥å…·ç­‰</li>
<li>background modelers: é™æ€èƒŒæ™¯å‡ ä½•ä½“ï¼Œå¦‚é«˜æ¥¼ï¼Œæ¡¥ç­‰</li>
</ul>
</li>
<li>Texture artists: çº¹ç†è‰ºæœ¯å®¶</li>
<li>Lighting artists: å…‰ç…§è‰ºæœ¯å®¶ï¼Œè°ƒæ•´å…‰ç…§ä»¥æœ€å¤§åŒ–è‰ºæœ¯å’Œæƒ…æ„Ÿä¸Šçš„å†²å‡»</li>
<li>Animators: åŠ¨ç”»å¸ˆ</li>
<li>Motion capture actors: åŠ¨æ•æ¼”å‘˜ï¼Œæä¾›ç²—ç•¥çš„è¿åŠ¨æ•°æ®ä¾›åŠ¨ç”»å¸ˆæ•´ç†å’Œè°ƒæ•´</li>
<li>Sound designers: å°†éŸ³æ•ˆå’ŒéŸ³ä¹æ··å…¥æ¸¸æˆ</li>
<li>Voice actors: è§’è‰²å£°ä¼˜</li>
<li>composers: ä½œæ›²å®¶ï¼Œè´Ÿè´£é…ä¹</li>
</ul>
</li>
<li>game designers: gameplay è®¾è®¡å¸ˆï¼Œè´Ÿè´£ç”¨æˆ·ä½“éªŒéƒ¨åˆ†
<ul>
<li>å®è§‚å±‚é¢ï¼š æ•…äº‹èµ°å‘ï¼Œäººç‰©å’Œå…³å¡çš„å®‰æ’ï¼Œç©å®¶çš„å®è§‚çš„ç›®æ ‡å’Œç»ˆç‚¹</li>
<li>å¾®è§‚å±‚é¢ï¼š åœºæ™¯è®¾è®¡ï¼Œå…³å¡è®¾è®¡ï¼Œè°œé¢˜è®¾è®¡</li>
<li>writers: ç¼–å‰§</li>
</ul>
</li>
<li>producers: åœ¨ä¸åŒå·¥ä½œå®¤ä¸­çš„èŒèƒ½ä¸å°½ç›¸åŒ
<ul>
<li>æœ‰äº›è´Ÿè´£æ—¥ç¨‹å®‰æ’å’ŒäººåŠ›èµ„æºç®¡ç†</li>
<li>æœ‰äº›è´Ÿè´£æ¸¸æˆè®¾è®¡</li>
<li>ä¹Ÿå¯èƒ½ä¼šè´Ÿè´£å›¢é˜Ÿä¹‹é—´(å¦‚å¼€å‘éƒ¨é—¨å’Œå•†ä¸šéƒ¨é—¨)çš„è”ç³»</li>
<li>å°å·¥ä½œå®¤å¯èƒ½ä¸éœ€è¦</li>
</ul>
</li>
<li>management&amp;support staff
<ul>
<li>æ‰§è¡Œç®¡ç†</li>
<li>å¸‚åœº</li>
<li>è¡Œæ”¿</li>
<li>IT</li>
</ul>
</li>
<li>Publisher and Studio
<ul>
<li>å‘è¡Œå•†ï¼šè´Ÿè´£æ¸¸æˆçš„è¥é”€ï¼Œç”Ÿäº§å’Œå‘è¡Œï¼Œå¦‚EA,Nitendo, Sonyç­‰</li>
<li>æ¸¸æˆå·¥ä½œå®¤
<ul>
<li>ç‹¬ç«‹çš„ï¼Œä¸ä¾é™„äºå‘è¡Œå•†ï¼Œåšå¥½æ¸¸æˆåäº¤ç»™å‘è¡Œå•†å‘è¡Œï¼Œä»·æ ¼è¯¦è°ˆã€‚</li>
<li>ä¾é™„äºå‘è¡Œå•†çš„</li>
<li>ç¬¬ä¸€æ–¹çš„ï¼šä¸ºç‰¹å®šå¹³å°å¼€å‘æ¸¸æˆï¼Œå¦‚Naughty Dog æ˜¯ Sony çš„ç¬¬ä¸€æ–¹å·¥ä½œå®¤ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯æ¸¸æˆ"> ä»€ä¹ˆæ˜¯æ¸¸æˆï¼Ÿ</h2>
<p>Kosteræ–­è¨€ï¼Œæ¸¸æˆâ€œä¹è¶£â€çš„æ ¸å¿ƒåœ¨äºâ€œå­¦ä¹ (learning)â€å’Œâ€œæŒæ¡(mastering)â€,å°±åƒç¬‘è¯åªæœ‰åœ¨ä½ â€œæ‡‚äº†(get-it)â€çš„æ—¶å€™æ‰æœ‰è¶£ã€‚</p>
<h3 id="soft-real-time-interactive-agent-based-computer-simulations"> soft real-time interactive agent-based computer simulations.</h3>
<ul>
<li>simulations: å¯¹ç°å®ä¸–ç•Œ(å³ä½¿æ˜¯æƒ³è±¡ä¸­çš„ç°å®)çš„è¿‘ä¼¼å’Œç®€åŒ–ã€‚</li>
<li>agent-based: æœ‰å¤§é‡ä¸åŒçš„å®ä½“(entity/agent)äº¤äº’</li>
<li>interactive -- interactive temporal simulations: äº¤äº’å¼æ—¶é—´æ¨¡æ‹Ÿã€‚æ¸¸æˆçŠ¶æ€éšç€æ—¶é—´çš„å˜åŒ–è€Œä¸æ–­æ”¹å˜ï¼Œå¹¶å¯¹æ— æ³•é¢„æµ‹çš„è¾“å…¥ä½œå‡ºå“åº”ã€‚</li>
<li>real-time: æ‰€æœ‰å®æ—¶ç³»ç»Ÿçš„æ ¸å¿ƒéƒ½æ˜¯&quot;deadline&quot;ã€‚ä¾‹å¦‚
<ul>
<li>å¤§å¤šæ•°æ¸¸æˆæ¸²æŸ“çš„å¸§ç‡ä¸º30/60å¸§æ¯ç§’ã€‚(NTSCæŒ‡å®šçš„æ˜¾ç¤ºå™¨åˆ·æ–°ç‡ä¸º29.97å¸§æ¯ç§’)</li>
<li>ç”µå½±çš„å¸§ç‡è‡³å°‘ä¸º24å¸§æ¯ç§’ã€‚(ä½¿ç”¨3:2 pulldownï¼Œå³è®©ä¸¤ä¸ªç”µå½±å¸§ï¼Œä¸€å¸§å 3ä¸ªè§†é¢‘å¸§ï¼Œå¦ä¸€å¸§å 2ä¸ªè§†é¢‘å¸§)</li>
<li>ç‰©ç†æ¨¡æ‹Ÿè¦ä¿æŒç¨³å®šï¼Œä¸€ç§’è¦è®¡ç®—120æ¬¡ã€‚</li>
<li>è§’è‰²AIè‡³å°‘ä¸€ç§’è¿è¡Œä¸€æ¬¡</li>
<li>éŸ³é¢‘ä¹Ÿè¦æ¯1/60 sè°ƒç”¨ä¸€æ¬¡ä»¥ä¿æŒaudio bufferå……æ»¡ï¼Œé˜²æ­¢å¬è§‰æ•…éšœã€‚</li>
</ul>
</li>
<li>soft: è¡¨ç¤ºå³ä½¿é”™è¿‡äº†deadlineä¹Ÿä¸ä¼šå¸¦æ¥ç¾éš¾æ€§çš„åæœã€‚ä¸ä¹‹ç›¸åçš„æ˜¯hard real-time system ï¼Œå¦‚ç›´å‡æœºçš„èˆªç©ºç”µå­ç³»ç»Ÿï¼Œæ ¸ç”µç«™çš„æ§åˆ¶æ†ç³»ç»Ÿã€‚ä¸€æ—¦é”™è¿‡deadlineï¼Œæ“ä½œè€…å¯èƒ½ä¼šæ­»ã€‚</li>
</ul>
<h3 id="æ¸¸æˆä¸­çš„æ•°å­¦æ¨¡å‹"> æ¸¸æˆä¸­çš„æ•°å­¦æ¨¡å‹</h3>
<p>åˆ†æå‹ï¼šæœ‰é—­å¼å…¬å¼ã€‚å¯ä»¥æ±‚å¾—ä»»æ„æ—¶åˆ»çš„çŠ¶æ€ã€‚åªèƒ½è§£å†³ä¸€å°éƒ¨åˆ†é—®é¢˜ã€‚<br>
æ•°å€¼å‹ï¼šé€šè¿‡ä¸æ–­æ±‚å¯¼ç­‰æ–¹æ³•ï¼Œä¼°è®¡ç¦»æ•£ç‚¹çš„æ•°å€¼ã€‚</p>
<p>é€šå¸¸åœ¨ä¸€ä¸ªæ¸¸æˆå¾ªç¯ä¸­ï¼Œæ¯æ¬¡è¿­ä»£éƒ½æœ‰æœºä¼šè¿›è¡Œç‰©ç†ç³»ç»Ÿï¼ŒAIï¼Œæ¸¸æˆé€»è¾‘çš„è®¡ç®—ï¼Œæœ€åæ ¹æ®è®¡ç®—ç»“æœè¿›è¡Œæ¸²æŸ“ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯æ¸¸æˆå¼•æ“"> ä»€ä¹ˆæ˜¯æ¸¸æˆå¼•æ“ï¼Ÿ</h2>
<p><img src="/assets/img/game-engine-reusability-gamut.png" alt="&quot;game-engine-reusability-gamut&quot;" /></p>
<p>æ¸¸æˆå¼•æ“ä¸æ¸¸æˆçš„åŒºåˆ«åœ¨äºæ•°æ®é©±åŠ¨çš„æ¶æ„ã€‚å›ºå®šçš„éƒ¨åˆ†è¶Šå¤šï¼Œå°±è¶Šéš¾ä¿®æ”¹ä¸ºå…¶ä»–çš„æ¸¸æˆã€‚å°±è¶Šæ¥è¿‘æ¸¸æˆè€Œéæ¸¸æˆå¼•æ“ã€‚
å¦å¤–ï¼Œä¸€ä¸ªæ¸¸æˆå¼•æ“æˆ–ä¸­é—´ä»¶è¶Šæ³›ç”¨ï¼Œå¯¹äºç‰¹å®šçš„æ¸¸æˆæˆ–å¹³å°ï¼Œå…¶æœ€ä¼˜æ€§å°±è¶Šä½ã€‚è¿™å¾ˆå®¹æ˜“ç†è§£ï¼Œæ¯ä¸ªè½¯ä»¶åœ¨è®¾è®¡çš„æ—¶å€™éƒ½éœ€è¦æƒè¡¡(trade-off)ï¼Œæƒè¡¡çš„åŸºå‡†å°±æ˜¯è½¯ä»¶å°†ä¼šå¦‚ä½•è¢«ä½¿ç”¨æˆ–å°†åœ¨å“ªä¸ªå¹³å°è¿è¡Œã€‚
å³ä½¿ç°åœ¨æ¸¸æˆå¼•æ“è¶Šæ¥è¶Šå¼ºå¤§ï¼Œä¸€èˆ¬æ€§ä¸æœ€ä¼˜æ€§çš„æƒè¡¡ä»ç„¶å­˜åœ¨ã€‚æ‰€ä»¥é¡¶å°–çš„æ¸¸æˆå·¥ä½œå®¤éƒ½ä¼šä½¿ç”¨è‡ªç ”å¼•æ“ã€‚</p>
<h2 id="ä¸åŒç±»å‹æ¸¸æˆçš„æ¸¸æˆå¼•æ“çš„åŒºåˆ«"> ä¸åŒç±»å‹æ¸¸æˆçš„æ¸¸æˆå¼•æ“çš„åŒºåˆ«</h2>
<h3 id="fps"> FPS</h3>
<p>é€šå¸¸FPSæ¸¸æˆç›®æ ‡æ˜¯ç»™ç©å®¶æ²‰æµ¸åœ¨å……æ»¡ç»†èŠ‚ï¼Œé«˜åº¦å†™å®çš„ä¸–ç•Œä¸­çš„æ„Ÿè§‰ã€‚æ˜¯æ‰€æœ‰æ¸¸æˆç±»å‹ä¸­æŠ€æœ¯æŒ‘æˆ˜æœ€å¤§çš„ã€‚æ¯«ä¸æ„å¤–çš„æ˜¯ï¼Œæ¸¸æˆè¡Œä¸šçš„å¤§å‹æŠ€æœ¯åˆ›æ–°éƒ½æ˜¯å‡ºäºFPSæ¸¸æˆã€‚</p>
<p>FPSæ¸¸æˆéœ€è¦çš„å…¸å‹æŠ€æœ¯æœ‰</p>
<ul>
<li>é«˜æ•ˆæ¸²æŸ“å¤§å‹3Dè™šæ‹Ÿä¸–ç•Œ</li>
<li>å“åº”å¼çš„é•œå¤´æ§åˆ¶å’Œç„å‡†æœºåˆ¶</li>
<li>é«˜ä¿çœŸçš„äººç‰©è‚¢ä½“åŠ¨ç”»å’Œæ­¦å™¨åŠ¨ç”»</li>
<li>å¤§é‡å¯æŒæœ‰çš„æ­¦å™¨</li>
<li>äººç‰©ç§»åŠ¨å’Œç¢°æ’æ¨¡å‹(å¯èƒ½ä¼šäº§ç”Ÿæ¼‚æµ®æ„Ÿ)</li>
<li>NPCçš„AIå’ŒåŠ¨ç”»</li>
<li>å°è§„æ¨¡å¤šäººå¯¹æˆ˜ï¼Œæ­»äº¡ç«æŠ€æ¨¡å¼</li>
</ul>
<p>FPSæ¸¸æˆä¸­çš„æ¸²æŸ“æŠ€æœ¯éœ€è¦é«˜åº¦ä¼˜åŒ–ä¸”æ ¹æ®æ‰€å¤„ç¯å¢ƒä»”ç»†è°ƒæ•´ã€‚ä¾‹å¦‚å®¤å†…å’Œå®¤å¤–ç¯å¢ƒï¼Œæ¸²æŸ“æŠ€æœ¯å¤§ä¸ç›¸åŒï¼Œå®¤å¤–æ¸²æŸ“ä¼˜åŒ–é€šå¸¸éœ€è¦é®æŒ¡å‰”é™¤ï¼Œç¦»çº¿æ¸¸æˆä¸–ç•ŒåŒºåŸŸåŒ–(å³æ‰‹åŠ¨æˆ–è‡ªåŠ¨æŒ‡å®šä»æºåŒºåŸŸå¯ä»¥çœ‹åˆ°å“ªäº›ç›®æ ‡åŒºåŸŸ)ã€‚</p>
<p>å½“ç„¶ï¼Œä¸ºäº†æ²‰æµ¸æ„Ÿï¼Œéœ€è¦çš„è¿œä¸æ­¢é«˜è´¨é‡çš„å›¾åƒä¼˜åŒ–æŠ€æœ¯ï¼Œè§’è‰²åŠ¨ç”»ï¼ŒéŸ³æ•ˆï¼ŒéŸ³ä¹ï¼Œåˆšä½“ç‰©ç†ï¼Œæ¸¸æˆè¿é•œç­‰ç­‰éƒ½è¦ä½¿ç”¨éå¸¸å‰æ²¿çš„æŠ€æœ¯ã€‚</p>
<h3 id="å¹³å°æ¸¸æˆå’Œå…¶ä»–ç¬¬ä¸‰äººç§°æ¸¸æˆ"> å¹³å°æ¸¸æˆå’Œå…¶ä»–ç¬¬ä¸‰äººç§°æ¸¸æˆ</h3>
<p>ä¸FPSç›¸æ¯”ï¼Œæ›´é‡è§†äººç‰©æ•´ä½“çš„åŠ¨ç”»ï¼Œè€Œéæ¼‚æµ®çš„æ‰‹(æ´—æ‰‹æ¶²æˆ˜ç¥EasonğŸ¤£)ã€‚ä¸»è§’ä¹Ÿé€šå¸¸æ˜¯æ›´åå¡é€šé£æ ¼ï¼Œåˆ†è¾¨ç‡ä¸ç”¨å¤ªé«˜ç±»äººå‹è§’è‰²ï¼Œæœ‰ä¸°å¯Œçš„åŠ¨ä½œå’ŒåŠ¨ç”»ã€‚</p>
<p>éœ€è¦çš„å…¸å‹æŠ€æœ¯æœ‰</p>
<ul>
<li>ç§»åŠ¨çš„å¹³å°ï¼Œæ¢¯å­ï¼Œç»³å­ï¼Œé½¿è½®å’Œå…¶ä»–æœ‰è¶£çš„ç§»åŠ¨æ–¹å¼</li>
<li>å¸¦æœ‰è°œé¢˜æ€§è´¨çš„ç¯å¢ƒå…ƒç´ </li>
<li>ç›¸æœºè·Ÿéšç©å®¶ï¼Œä¸”è§†è§’å¯å˜</li>
<li>å¤æ‚çš„ç›¸æœºç¢°æ’ç³»ç»Ÿï¼Œä¿è¯è§†ç‚¹ä¸ä¼šå¡è¿›èƒŒæ™¯å‡ ä½•ä½“æˆ–åŠ¨æ€å‰æ™¯ç‰©ä½“ã€‚</li>
</ul>
<h3 id="æ ¼æ–—æ¸¸æˆ"> æ ¼æ–—æ¸¸æˆ</h3>
<p>æŠ€æœ¯è¦ç‚¹</p>
<ul>
<li>ä¸°å¯Œçš„æˆ˜æ–—åŠ¨ç”»</li>
<li>ç²¾ç¡®çš„å‡»æ‰“æ£€æµ‹(hit detection)</li>
<li>æ£€æµ‹ç”¨æˆ·è¾“å…¥çš„å¤æ‚æŒ‰é”®</li>
<li>ç›¸å¯¹é™æ€çš„èƒŒæ™¯äººç¾¤</li>
</ul>
<p>å¯ä»¥ç”¨åˆ°æ›´é«˜æŠ€æœ¯æ°´å¹³çš„ç‰¹è‰²æœ‰</p>
<ul>
<li>é«˜æ¸…äººç‰©</li>
<li>çœŸå®çš„çš®è‚¤æ¸²æŸ“ï¼Œè¡¨é¢æ•£å°„å’Œæµæ±—æ•ˆæœ</li>
<li>photo-realistic lighting å’Œç²’å­æ•ˆæœ</li>
<li>é«˜ä¿çœŸè§’è‰²åŠ¨ç”»</li>
<li>åŸºäºç‰©ç†çš„è¡£æœæ•ˆæœï¼Œå¤´å‘æ¨¡æ‹Ÿ</li>
</ul>
<h3 id="ç«é€Ÿæ¸¸æˆ"> ç«é€Ÿæ¸¸æˆ</h3>
<p>å…¸å‹æŠ€æœ¯</p>
<ul>
<li>å¤§é‡ç”¨äºå¤„ç†è¿œæ™¯çš„&quot;æŠ€å·§&quot;ï¼Œå¦‚ç”¨è¿œå¤„çš„å±±ï¼Œæ ‘ç”¨äºŒç»´å¡ç‰‡ä»£æ›¿</li>
<li>èµ›é“é€šå¸¸ä¼šåˆ†è§£ä¸ºäºŒç»´çš„åŒºåŸŸ(sector)ä»¥å¸®åŠ©å†³å®šå¯è§åŒºåŸŸå’ŒAIçš„è‡ªåŠ¨å¯»è·¯</li>
<li>ç›¸æœºé€šå¸¸å¤„åœ¨è½½å…·åæˆ–é©¾é©¶åº§</li>
<li>å½“èµ›é“è¿›å…¥éå¸¸ç‹­å°çš„ç©ºé—´æ—¶ï¼Œéœ€è¦ä½œå‡ºå¾ˆå¤§çš„åŠªåŠ›æ¥ä¿è¯ç›¸æœºä¸ä¸èƒŒæ™¯å‡ ä½•ä½“ç¢°æ’</li>
</ul>
<h3 id="ç­–ç•¥æ¸¸æˆ"> ç­–ç•¥æ¸¸æˆ</h3>
<p>é€šå¸¸è§†è§’å›ºå®šï¼Œå¯¹ä¸æ¸²æŸ“ä¼˜åŒ–æ˜¯ä¸ªå¥½æ¶ˆæ¯ã€‚ä¸–ç•Œé€šå¸¸æ˜¯åŸºäºç½‘æ ¼æ„å»ºçš„ã€‚</p>
<p>å…¸å‹æŠ€æœ¯</p>
<ul>
<li>åŒå±å¯æ˜¾ç¤ºå¤§é‡å•ä½ï¼Œä»è€Œåˆ†è¾¨ç‡ä¼šç›¸å½“ä½</li>
<li>æ¸¸æˆè®¾è®¡å’Œæ¸¸ç©çš„ç”»å¸ƒé€šå¸¸æ˜¯Height-field terrain ğŸ˜•</li>
<li>ç©å®¶é€šå¸¸å¯ä»¥åœ¨é¢†åœŸä¸­å»ºé€ å»ºç­‘å’Œå†›é˜Ÿ</li>
<li>å•ä½çš„é€‰å–æ–¹å¼è¦å¤šæ ·</li>
</ul>
<h3 id="mmog"> MMOG</h3>
<p>æœåŠ¡å™¨ã€‚</p>
<h3 id="virtualreality-augumentedr-mixedr"> VirtualReality,AugumentedR,MixedR</h3>
<p>VRçš„éš¾ç‚¹</p>
<ul>
<li>ç«‹ä½“æ¸²æŸ“ï¼ŒåŒä¸€å¸§ç”»é¢è¦æ¸²æŸ“ä¸¤æ¬¡(å·¦å³çœ¼)</li>
<li>éœ€è¦é«˜å¸§ç‡ï¼Œè‡³å°‘90å¸§ï¼Œå¦åˆ™ä¼šå¼•å‘äººä½“ä¸é€‚</li>
<li>å¯¼èˆªé—®é¢˜ï¼Œåœ¨è™šæ‹Ÿç°å®ä¸–ç•Œä¸­å¦‚ä½•ç§»åŠ¨ï¼ŸåŸåœ°è¸æ­¥ï¼ŸWSADï¼Ÿæ‰‹æŸ„ï¼Ÿ</li>
</ul>
<p>å…¶ä»–ç•¥</p>
<h2 id="æœ‰åçš„æ¸¸æˆå¼•æ“"> æœ‰åçš„æ¸¸æˆå¼•æ“</h2>
<p>Quake/Quake2
<a href="https://github.com/id-Software/Quake-2" target="_blank" rel="noopener noreferrer">Quake2 æºç </a><br>
æ¶æ„åˆç†ä¸”å¹²å‡€ï¼Œä½†å¯èƒ½æœ‰ç‚¹è¿‡æ—¶ï¼Œä¸”å‡ ä¹æ˜¯ç”¨çº¯Cè¯­è¨€å†™çš„ã€‚
å¦‚æœæœ‰Quake2æ¸¸æˆï¼Œéå¸¸æ¨èä¸‹è½½æºç æ¥è·‘è·‘ï¼Œè®¾ç½®æ–­ç‚¹æ¥åˆ†æå¼•æ“å¦‚ä½•å·¥ä½œã€‚</p>
<p>Unreal Engine
å¼€æ”¾ï¼Œå¼€æºã€‚ä¸å¤šè¯´ã€‚</p>
<p>Source Engine
Half-Lifeç³»åˆ—ä½¿ç”¨çš„å¼•æ“ã€‚</p>
<p>DICEçš„Frostbiteå¼•æ“
è´¨é‡æ•ˆåº”ï¼Œæ˜Ÿçƒå¤§æˆ˜ï¼šå‰çº¿2ï¼Œé¾™è…¾ä¸–çºªï¼Œæå“é£è½¦(Need for Speed)ç³»åˆ—</p>
<p>Rockstar Advanced Game Engine(RAGE)
ç»™ä»–çˆ±ç³»åˆ—ã€‚è’é‡å¤§é•–å®¢ç³»åˆ—ã€‚</p>
<p>CryEngine
Far Cryç­‰</p>
<p>Sonyçš„PhyreEngine</p>
<p>å¾®è½¯çš„ XNA Game Studioï¼Œ2014å¹´æ²¡äº†</p>
<p>Unity
Unityçš„è®¾è®¡åˆè¡·æ˜¯ç®€åŒ–å¼€å‘å’Œè·¨å¹³å°ã€‚
ä»£è¡¨ä½œæ€å‡ºé‡å›´ï¼Œç©ºæ´éª‘å£«ï¼ŒèŒ¶æ¯å¤´ã€‚</p>
<h2 id="å¼€æºå¼•æ“åˆ—è¡¨"> å¼€æºå¼•æ“åˆ—è¡¨</h2>
<ul>
<li><a href="https://github.com/id-Software/Quake-2" target="_blank" rel="noopener noreferrer">Quake2</a></li>
<li><a href="https://www.ogre3d.org/" target="_blank" rel="noopener noreferrer">OGRE ä¸€ä¸ªæ¶æ„å¥½ï¼Œæ˜“å­¦æ˜“ç”¨çš„3Dæ¸²æŸ“å¼•æ“</a></li>
<li><a href="https://www.panda3d.org/" target="_blank" rel="noopener noreferrer">Panda3D a script-based engineï¼Œè®¾è®¡ç”¨äºå¿«é€Ÿæ–¹ä¾¿çš„åˆ¶ä½œ3Dæ¸¸æˆåŸå‹å’Œè™šæ‹Ÿä¸–ç•Œ</a></li>
<li>Crystal Space is a game engine with an extensible modular architecture.</li>
</ul>
<h2 id="è¿è¡Œæ—¶å¼•æ“æ¶æ„"> è¿è¡Œæ—¶å¼•æ“æ¶æ„</h2>
<p>æ¸¸æˆå¼•æ“æ˜¯ä¸ªå·¨å¤§çš„è½¯ä»¶ç³»ç»Ÿã€‚é€šå¸¸æ˜¯ä¸€å±‚å±‚(layers)æ„å»ºçš„ï¼Œä¸”ä¸Šå±‚ä¾èµ–äºä¸‹å±‚ã€‚</p>
<p><img src="/assets/img/game-engine-archtecture.png" alt="game-engine-archtecture" /></p>
<h3 id="ç›®æ ‡ç¡¬ä»¶"> ç›®æ ‡ç¡¬ä»¶</h3>
<p>Windows,Linux,MacOS-PCï¼Œç§»åŠ¨å¹³å°ï¼ŒPSVï¼ŒPS4ï¼ŒPS5ï¼ŒSwitchï¼ŒWiiï¼ŒNDSï¼ŒXBOXç­‰ç­‰ã€‚</p>
<h3 id="è®¾å¤‡é©±åŠ¨"> è®¾å¤‡é©±åŠ¨</h3>
<p>ç®¡ç†ç¡¬ä»¶èµ„æºå¹¶ä¸ºæ“ä½œç³»ç»Ÿå’Œå¼•æ“ä¸Šå±‚å±è”½æ— æ•°çš„ç¡¬ä»¶è®¾å¤‡ç»†èŠ‚ã€‚</p>
<h3 id="æ“ä½œç³»ç»Ÿ"> æ“ä½œç³»ç»Ÿ</h3>
<p>æ“ä½œç³»ç»Ÿä¸Šé€šå¸¸è¿è¡Œç€å¤šä¸ªç¨‹åº(åˆ†æ—¶æŠ¢å å¼å¤šä»»åŠ¡)ï¼Œè¿™æ„å‘³ç€PCæ¸¸æˆæ°¸è¿œæ— æ³•å‡è®¾å®ƒèƒ½å®Œå…¨æ§åˆ¶ç¡¬ä»¶ï¼Œæ•…å¿…é¡»ä¿è¯å®ƒèƒ½ä¸ç³»ç»Ÿä¸­çš„å…¶ä»–ç¨‹åºä¸€èµ·â€œplay niceâ€ã€‚
ç°åœ¨çš„æ¸¸æˆæœºä¸Šä¹Ÿæœ‰æ“ä½œç³»ç»Ÿäº†ã€‚å¼€å‘é€æ¸è¶‹è¿‘äºPCã€‚</p>
<h3 id="ç¬¬ä¸‰æ–¹sdk-software-development-kits-å’Œä¸­é—´ä»¶-middleware"> ç¬¬ä¸‰æ–¹SDK(software development kits)å’Œä¸­é—´ä»¶(Middleware)</h3>
<p>å¤§å¤šæ•°å¼•æ“éƒ½åˆ©ç”¨äº†å¤§é‡ç¬¬ä¸‰æ–¹SDKå’Œä¸­é—´ä»¶ï¼ŒSDKæä¾›çš„åŠŸèƒ½æˆ–ç±»æ¥å£ç»å¸¸è¢«å«åšAPIã€‚</p>
<h4 id="æ•°æ®ç»“æ„å’Œç®—æ³•"> æ•°æ®ç»“æ„å’Œç®—æ³•</h4>
<p>ä»»ä½•è½¯ä»¶çš„å¼€å‘éƒ½ç¦»ä¸å¼€å®¹å™¨å’Œç®—æ³•ã€‚å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“æœ‰</p>
<ul>
<li><a href="https://www.boost.org/" target="_blank" rel="noopener noreferrer">Boost</a></li>
<li>Folly:æ‰©å±•C++æ ‡å‡†åº“å’ŒBoostï¼Œæ³¨é‡æœ€å¤§åŒ–ä»£ç æ€§èƒ½</li>
<li>Lokiï¼šå¼ºå¤§çš„æ³›å‹æ¨¡æ¿ç¼–ç¨‹åº“</li>
</ul>
<h4 id="å›¾å½¢"> å›¾å½¢</h4>
<ul>
<li>OpenGL</li>
<li>DirectX</li>
<li>Vulkan</li>
<li>libgcm</li>
<li>...</li>
</ul>
<h4 id="ç¢°æ’å’Œç‰©ç†"> ç¢°æ’å’Œç‰©ç†</h4>
<ul>
<li>Havok</li>
<li>PhysX</li>
<li>ODE(Open Dynamic Engine)</li>
</ul>
<h4 id="è§’è‰²åŠ¨ç”»"> è§’è‰²åŠ¨ç”»</h4>
<ul>
<li>Grannyï¼šä½œè€…è®¤ä¸ºè®¾è®¡æœ€å¥½ï¼ŒAPIä¹Ÿæœ€ç¬¦åˆé€»è¾‘çš„åº“ã€‚å¤„ç†é€Ÿåº¦ä¹Ÿå¿«ã€‚</li>
<li>Havok Animation</li>
<li>OrbisAnim</li>
<li>Endorphin and Euphoria:ä½¿ç”¨çœŸå®çš„äººç±»ç§»åŠ¨ç”Ÿç‰©åŠ›å­¦æ¨¡å‹æ¥æ¨¡æ‹Ÿäººç‰©ç§»åŠ¨</li>
</ul>
<h3 id="å¹³å°æ— å…³å±‚"> å¹³å°æ— å…³å±‚</h3>
<p>å°†æ›´åº•å±‚çš„APIå°è£…ä¸€å±‚æˆä¸ºä½ çš„æ¸¸æˆå¼•æ“æ›´ä¸Šå±‚ä½¿ç”¨çš„APIã€‚ä»¥å±è”½å¹³å°åº•å±‚çš„å·®å¼‚ã€‚å¦å¤–ï¼Œä»¥åè¦å°†æŸä¸ªåŠŸèƒ½çš„å®ç°åº“æ¢äº†ï¼Œå¦‚ç‰©ç†/ç¢°æ’æ£€æµ‹çš„åº“ï¼Œä¸Šå±‚çš„ä»£ç ä¹Ÿä¸ç”¨åŠ¨ã€‚</p>
<h3 id="æ ¸å¿ƒç³»ç»Ÿ"> æ ¸å¿ƒç³»ç»Ÿ</h3>
<p>æ¸¸æˆå¼•æ“æ˜¯ä¸€ä¸ªå·¨å¤§ä¸”å¤æ‚çš„C++åº”ç”¨ï¼Œéœ€è¦ä¸€ç³»åˆ—æœ‰ç”¨çš„è½¯ä»¶å·¥å…·ï¼Œæˆ‘ä»¬å°†å…¶åˆ†ç±»ä¸ºæ ¸å¿ƒç³»ç»Ÿ(core system)ã€‚</p>
<p>å…¸å‹çš„æ ¸å¿ƒç³»ç»Ÿå±‚è§æ¶æ„å›¾ã€‚</p>
<p>æ ¸å¿ƒç³»ç»Ÿå±‚é€šå¸¸æä¾›çš„å·¥å…·ï¼Œä¾‹å¦‚</p>
<ul>
<li>æ–­è¨€(Assertion)ï¼šç”¨äºæ£€æŸ¥ä»£ç çš„é€»è¾‘é”™è¯¯å’Œè¿åç¨‹åºå‘˜æ„å›¾çš„è¡Œä¸ºã€‚é€šå¸¸ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆçš„æ¸¸æˆäº§å“ä¸­ã€‚</li>
<li>å†…å­˜ç®¡ç†(Memeory management)ï¼šå‡ ä¹æ¯ä¸ªæ¸¸æˆå¼•æ“éƒ½ä¼šå®ç°è‡ªèº«çš„å†…å­˜åˆ†é…ç³»ç»Ÿä»¥ä¿è¯é«˜é€Ÿå†…å­˜åˆ†é…å’Œé™åˆ¶å†…å­˜ç¢ç‰‡çš„å‰¯ä½œç”¨ã€‚</li>
<li>æ•°å­¦åº“ï¼šé€šå¸¸éœ€è¦æä¾›é«˜æ•ˆçš„å‘é‡å’ŒçŸ©é˜µè¿ç®—ï¼Œå››å…ƒæ•°æ—‹è½¬ï¼Œä¸‰è§’å­¦ï¼Œç›´çº¿çš„é›†åˆæ“ä½œï¼Œå…‰çº¿ï¼Œçƒä½“ç­‰ï¼Œé½¿è½®æ“ä½œ(spline manipulation)ï¼Œæ•°å€¼è®¡ç®—ï¼Œè§£æ–¹ç¨‹ç»„ç­‰ç­‰ã€‚</li>
<li>è‡ªå®šä¹‰æ•°æ®ç»“æ„å’Œç®—æ³•ï¼šä¸»è¦æ˜¯ä¸ºäº†æœ€å°åŒ–æˆ–æ¶ˆé™¤åŠ¨æ€å†…å­˜åˆ†é…å¹¶ä¿è¯åœ¨ç›®æ ‡å¹³å°ä¸Šçš„æœ€ä¼˜è¿è¡Œæ—¶æ€§èƒ½ã€‚</li>
</ul>
<h3 id="èµ„æºç®¡ç†å™¨"> èµ„æºç®¡ç†å™¨</h3>
<p>ä¸ºè·å–æ‰€æœ‰ç±»å‹çš„æ¸¸æˆèµ„æº(game assets)å’Œæ¸¸æˆå…¥æ•°æ®æä¾›ç»Ÿä¸€çš„æ¥å£ã€‚æœ‰äº›å¼•æ“ä»¥é«˜åº¦ä¸­å¿ƒåŒ–å’Œä¸€è‡´çš„æ–¹å¼ç®¡ç†èµ„æºï¼Œå¦‚Unrealçš„packageï¼ŒOGREå’ŒResourceManagerç±»ã€‚å…¶ä»–ä¸€äº›å¼•æ“é‡‡å–ä¸€ç§ä¸´æ—¶çš„æ–¹å¼ ï¼Œå°†èµ„æºçš„å¤„ç†ç•™ç»™æ¸¸æˆç¨‹åºå‘˜ï¼Œè®©ç¨‹åºå‘˜å¯ä»¥ç›´æ¥è®¿é—®ç¡¬ç›˜ä¸Šçš„åŸæ–‡ä»¶æˆ–å‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶ï¼Œå¦‚Quakeçš„PAKæ–‡ä»¶ã€‚å…¸å‹ç»“æ„è§æ¶æ„å›¾ã€‚</p>
<h3 id="æ¸²æŸ“å¼•æ“"> æ¸²æŸ“å¼•æ“</h3>
<p>æ¸¸æˆå¼•æ“ä¸­æœ€å¤§ï¼Œæœ€å¤æ‚çš„ç»„ä»¶ã€‚æ¸²æŸ“å™¨çš„æ¶æ„æ–¹æ³•å¤šç§å¤šæ ·ï¼Œä¸”ç›®å‰æ²¡æœ‰ç»Ÿä¸€çš„æ ‡å‡†ã€‚</p>
<h4 id="åº•å±‚æ¸²æŸ“å™¨-low-level-renderer"> åº•å±‚æ¸²æŸ“å™¨(low-level renderer)</h4>
<p>åŒ…å«æ‰€æœ‰å¼•æ“çš„æ‰€æœ‰åŸå§‹æ¸²æŸ“èƒ½åŠ›ã€‚åœ¨è¿™ä¸€å±‚ï¼Œè®¾è®¡ç›®æ ‡ä¸»è¦æ˜¯å°½å¯èƒ½å¿«åœ°æ¸²æŸ“ä¸€ç³»åˆ—å‡ ä½•å›¾å…ƒï¼Œä¸è€ƒè™‘å…¶åœ¨åœºæ™¯ä¸­æ˜¯å¦å¯è§ã€‚è¿™ä¸ªç»„ä»¶å¯ä»¥ç»†åˆ†ä¸ºå¤§é‡å­ç»„ä»¶ï¼Œä¾‹å¦‚</p>
<ul>
<li>å›¾å½¢è®¾å¤‡æ¥å£(Graphics Device Interface):å›¾å½¢SDKï¼Œå¦‚DirectXï¼ŒOpenGLï¼ŒVulkanç­‰çš„ä½¿ç”¨éƒ½éœ€è¦å¤§é‡çš„ä»£ç ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ï¼Œèµ„æºè·å–å’Œç»‘å®šç­‰ç­‰ã€‚å…¸å‹çš„ç”¨äºå¤„ç†è¿™äº›çš„ç»„ä»¶ç§°ä¸ºGDI(æ¯ä¸ªå¼•æ“çš„æœ¯è¯­å¯èƒ½ä¸åŒ)ã€‚</li>
<li>å…¶ä»–ï¼šå…‰ç…§ï¼Œçº¹ç†ï¼Œè§†å£ï¼Œå‡ ä½•å›¾å…ƒçš„æäº¤ï¼Œæè´¨ï¼Œç›¸æœºç­‰ç­‰ã€‚</li>
</ul>
<h4 id="å‰”é™¤ä¼˜åŒ–-culling-optimization-åœºæ™¯å›¾-scene-graph"> å‰”é™¤ä¼˜åŒ–(Culling Optimization)/åœºæ™¯å›¾(Scene Graph)</h4>
<p>ç”¨äºæ ¹æ®æŸç§å¯è§æ€§åˆ¤æ–­æ ‡å‡†æ¥é™åˆ¶éœ€è¦æ¸²æŸ“çš„å›¾å…ƒæ•°é‡ã€‚å¯¹äºå°å‹çš„ä¸–ç•Œï¼Œæœ€ç®€å•çš„frustum cullï¼Œå³å°†ç›¸æœºè§†é”¥å¤–çš„å›¾å½¢å‰”é™¤ã€‚å¯¹å¤§å‹çš„ä¸–ç•Œï¼Œéœ€è¦æ›´é«˜çº§çš„æ•°æ®ç»“æ„spatial subdivisionæ¥æé«˜æ¸²æŸ“æ•ˆç‡ï¼Œé€šè¿‡spatial subdivisionå¯ä»¥éå¸¸å¿«é€Ÿçš„ç¡®å®šæ½œåœ¨å¯è§ç‰©ä½“é›†(the Potentila Visiable Set of Object, PVS)ã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">PyQt5 Image Viewerç¤ºä¾‹</title>
    <id>https://kigane.github.io/blog/image_viewer/</id>
    <link href="https://kigane.github.io/blog/image_viewer/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç”¨labelæ˜¾ç¤ºå›¾ç‰‡"> ç”¨Labelæ˜¾ç¤ºå›¾ç‰‡</h2>
<div><pre><code>self<span>.</span>imageLabel <span>=</span> QLabel<span>(</span><span>)</span>
<span># å®šä¹‰ç»„ä»¶è°ƒè‰²æ¿ä¸­çš„åˆ·å­ç”¨äºå‘ˆç°èƒŒæ™¯</span>
self<span>.</span>imageLabel<span>.</span>setBackgroundRole<span>(</span>QPalette<span>.</span>Base<span>)</span>
self<span>.</span>imageLabel<span>.</span>setSizePolicy<span>(</span>QSizePolicy<span>.</span>Ignored<span>,</span> QSizePolicy<span>.</span>Ignored<span>)</span>
<span># å°†ç¼©æ”¾PIXMAPä»¥å¡«å……å¯ç”¨ç©ºé—´ã€‚</span>
self<span>.</span>imageLabel<span>.</span>setScaledContents<span>(</span><span>True</span><span>)</span>

<span># QLabelçš„pixmapå±æ€§ç”¨äºè®¾ç½®å›¾åƒ</span>
image <span>=</span> QImage<span>(</span>fileName<span>)</span>
self<span>.</span>imageLabel<span>.</span>setPixmap<span>(</span>QPixmap<span>.</span>fromImage<span>(</span>image<span>)</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><ul>
<li>QSizePolicy::Fixedï¼šå›ºå®šå°ºå¯¸ä¸èƒ½å˜</li>
<li>QSizePolicy::Minimumï¼šå¯ä»¥æ”¾å¤§</li>
<li>QSizePolicy::Maximumï¼šå¯ä»¥ç¼©å°</li>
<li>QSizePolicy::Preferredï¼šå¯ä»¥æ”¾å¤§ä¹Ÿå¯ä»¥ç¼©å°</li>
<li>QSizePolicy::Expandingï¼šè‡ªåŠ¨æ”¾å¤§å’Œç¼©å°</li>
<li>QSizePolicy::MinimumExpandingï¼šè‡³å°‘ä¸ºç»™å®šå°ºå¯¸ï¼Œå¯ä»¥è‡ªåŠ¨æ”¾å¤§</li>
<li>QSizePolicy::Ignoredï¼šå¿½ç•¥ç»™å®šå°ºå¯¸ã€‚ç»„ä»¶çš„å¤§å°ä¸å—é™åˆ¶ã€‚</li>
</ul>
<h2 id="æ‰“å¼€æ–‡ä»¶-qfiledialog"> æ‰“å¼€æ–‡ä»¶--QFileDialog</h2>
<h3 id="static-æˆå‘˜"> static æˆå‘˜</h3>
<ul>
<li>getExistingDirectory() -&gt; dirpath</li>
<li>getExistingDirectoryUrl() -&gt; QUrl('file:///F:/xxx/xx')</li>
<li>getOpenFileName() -&gt; filepath, filter_str</li>
<li>getOpenFileNames()-&gt; filepath_list, filter_str</li>
<li>getOpenFileUrl()</li>
<li>getOpenFileUrls()</li>
<li>getSaveFileName() -&gt; filepath, filter_str åªè¿”å›ä¸€ä¸ªç”¨æˆ·è¾“å…¥çš„æ–‡ä»¶åï¼Œå¹¶æ²¡æœ‰çœŸçš„åˆ›å»ºæ–‡ä»¶</li>
<li>getSaveFileUrl()</li>
<li>å‚æ•°è¯´æ˜
<ul>
<li>caption='Dialog Title'</li>
<li>directory='F:/' åˆå§‹è·¯å¾„</li>
<li><code>filter='Images (*.png *.xpm *.jpg);;Text files (*.txt);;All Files (*)'</code> è¿‡æ»¤å™¨ã€‚å¤šä¸ªè¿‡æ»¤å™¨ç”¨ä¸¤ä¸ªåˆ†å·éš”å¼€ã€‚</li>
</ul>
</li>
</ul>
<h3 id="signals"> signals</h3>
<ul>
<li>currentChanged(QString)ï¼š å½“å‰æ–‡ä»¶æ”¹å˜äº†ã€‚å‚æ•°ä¸ºæ–°æ–‡ä»¶åã€‚</li>
<li>currentUrlChanged(QUrl)ï¼šå½“å‰æ–‡ä»¶æ”¹å˜äº†ã€‚å‚æ•°ä¸ºæ–°æ–‡ä»¶URLã€‚</li>
<li>directoryEntered(QString)ï¼šç”¨æˆ·è¿›å…¥æŸä¸ªç›®å½•</li>
<li>directoryUrlEntered(QUrl)</li>
<li>fileSelected(QString)ï¼šé€‰æ‹©æ–‡ä»¶å˜åŒ–æ—¶ã€‚å‚æ•°ä¸ºé€‰ä¸­çš„æ–‡ä»¶ã€‚</li>
<li>filterSelected(QString)</li>
<li>urlSelected(QUrl)</li>
<li><code>urlsSelected(QList&lt;QUrl&gt;)</code></li>
<li>filesSelected(QStringList)ï¼šç”¨æˆ·é€‰æ‹©è¿‡æ»¤å™¨æ—¶ã€‚</li>
</ul>
<h2 id="scrollarea"> ScrollArea</h2>
<div><pre><code><span># æ£€æŸ¥Actionæ˜¯å¦è¢«å‹¾é€‰</span>
fitToWindow <span>=</span> self<span>.</span>fitToWindowAct<span>.</span>isChecked<span>(</span><span>)</span> 
<span># WidgetResizableä¸ºfalseï¼ŒscrollAreaæ‹¥æœ‰Widgetçš„å¤§å°</span>
<span># ä¸ºTrueï¼Œåˆ™scrollAreaä¼šè°ƒæ•´Widgetå¤§å°ä»¥å°½é‡é¿å…æ»šåŠ¨æ¡ï¼Œæˆ–æ›´å……åˆ†åˆ©ç”¨ç©ºé—´ã€‚</span>
self<span>.</span>scrollArea<span>.</span>setWidgetResizable<span>(</span>fitToWindow<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><ul>
<li>self.scrollArea.horizontalScrollBar() è·å–æ°´å¹³æ»šåŠ¨æ¡</li>
<li>self.scrollArea.verticalScrollBar()</li>
<li>scrollBar.value()</li>
<li>scrollBar.setValue() è®¾ç½®æ»šåŠ¨æ¡çš„ä½ç½®</li>
</ul>
<h2 id="qpainter"> QPainter</h2>
<div><pre><code>self<span>.</span>printer <span>=</span> QPrinter<span>(</span><span>)</span>

dialog <span>=</span> QPrintDialog<span>(</span>self<span>.</span>printer<span>,</span> self<span>)</span>
<span>if</span> dialog<span>.</span>exec_<span>(</span><span>)</span><span>:</span>
    painter <span>=</span> QPainter<span>(</span>self<span>.</span>printer<span>)</span>
    rect <span>=</span> painter<span>.</span>viewport<span>(</span><span>)</span>
    size <span>=</span> self<span>.</span>imageLabel<span>.</span>pixmap<span>(</span><span>)</span><span>.</span>size<span>(</span><span>)</span>
    size<span>.</span>scale<span>(</span>rect<span>.</span>size<span>(</span><span>)</span><span>,</span> Qt<span>.</span>KeepAspectRatio<span>)</span>
    painter<span>.</span>setViewport<span>(</span>rect<span>.</span>x<span>(</span><span>)</span><span>,</span> rect<span>.</span>y<span>(</span><span>)</span><span>,</span>
                        size<span>.</span>width<span>(</span><span>)</span><span>,</span> size<span>.</span>height<span>(</span><span>)</span><span>)</span>
    painter<span>.</span>setWindow<span>(</span>self<span>.</span>imageLabel<span>.</span>pixmap<span>(</span><span>)</span><span>.</span>rect<span>(</span><span>)</span><span>)</span>
    painter<span>.</span>drawPixmap<span>(</span><span>0</span><span>,</span> <span>0</span><span>,</span> self<span>.</span>imageLabel<span>.</span>pixmap<span>(</span><span>)</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="ä»£ç "> ä»£ç </h2>
<p><a href="https://gist.github.com/acbetter/32c575803ec361c3e82064e60db4e3e0" target="_blank" rel="noopener noreferrer">æŸ¥çœ‹å®Œæ•´ä»£ç </a></p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Python"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-15T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">numpyç”¨æ³•</title>
    <id>https://kigane.github.io/blog/numpy/</id>
    <link href="https://kigane.github.io/blog/numpy/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç´¢å¼•"> ç´¢å¼•</h2>
<h3 id="é‡‡æ ·"> é‡‡æ ·</h3>
<p>xæ˜¯ä¸€ç»´æ•°ç»„ï¼Œ<code>x[i]</code>ï¼Œä¸ºxçš„ç¬¬iä¸ªå…ƒç´ ï¼Œnpæ”¯æŒæ•°ç»„ç´¢å¼•ï¼Œ<code>x[[i, j, k]]</code>ï¼Œå¾—åˆ°<code>[x[i], x[j], x[k]]</code>ã€‚å¦‚æœ<code>x[]</code>ä¸­ä¼ å…¥çš„æ•°ç»„å¤§äºä¸€ç»´ï¼Œå¾—åˆ°çš„ç»“æœç±»ä¼¼äºå°†æ•°ç»„flattenåä½œä¸ºç´¢å¼•ï¼Œå¾—åˆ°çš„ç»“æœå†reshapeæˆç´¢å¼•æ•°ç»„çš„å½¢çŠ¶ã€‚</p>
<div><pre><code>x <span>=</span> np<span>.</span>arange<span>(</span><span>12</span><span>)</span>
y <span>=</span> np<span>.</span>array<span>(</span><span>[</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>]</span><span>,</span> <span>[</span><span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>7</span><span>]</span><span>]</span><span>)</span>
x<span>[</span>y<span>]</span> <span># yå¿…é¡»æ˜¯npæ•°ç»„æ‰è¡Œ</span>
<span># array([[1, 2, 3, 4],</span>
<span>#        [2, 3, 4, 7]])</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h2 id="np-clip"> np.clip</h2>
<div><pre><code><span># numpy.clip(a, a_min, a_max, out=None, **kwargs)</span>
a <span>=</span> np<span>.</span>arange<span>(</span><span>5</span><span>)</span>
np<span>.</span>clip<span>(</span>a<span>,</span> <span>1</span><span>,</span> <span>3</span><span>)</span> <span># [1,1,2,3,3]</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h2 id="np-random-shuffle"> np.random.shuffle</h2>
<p>åŸåœ°æ‰“ä¹±æ•°ç»„å…ƒç´ çš„é¡ºåº</p>
<div><pre><code>x <span>=</span> np<span>.</span>arange<span>(</span><span>10</span><span>)</span>
np<span>.</span>random<span>.</span>shuffle<span>(</span>x<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><h2 id="np-cumsum"> np.cumsum</h2>
<p>è®¡ç®—åˆ—è¡¨å…ƒç´ çš„ç´¯ç§¯å’Œ</p>
<div><pre><code>a <span>=</span> np<span>.</span>array<span>(</span><span>[</span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>]</span><span>,</span> <span>[</span><span>4</span><span>,</span><span>5</span><span>,</span><span>6</span><span>]</span><span>]</span><span>)</span>
<span># æœªæŒ‡å®šaxisåˆ™ä¼šå…ˆflattenï¼Œå†è®¡ç®—cumsum</span>
np<span>.</span>cumsum<span>(</span>a<span>)</span> <span># 1, 3, 6, 10, 15, 21</span>
<span># æ²¿æŒ‡å®šè½´è®¡ç®— </span>
np<span>.</span>cumsum<span>(</span>a<span>,</span>axis<span>=</span><span>0</span><span>)</span> <span># [[1, 2, 3], [5, 7, 9]]</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h2 id="np-diff"> np.diff</h2>
<p>è®¡ç®—åˆ—è¡¨ç›¸é‚»å…ƒç´ ä¹‹é—´çš„å·®å€¼</p>
<div><pre><code><span># numpy.diff(a, n=1, axis=-1, prepend=&lt;no value>, append=&lt;no value>)</span>
x <span>=</span> np<span>.</span>array<span>(</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>4</span><span>,</span> <span>7</span><span>,</span> <span>0</span><span>]</span><span>)</span>
np<span>.</span>diff<span>(</span>x<span>)</span> <span># [1, 2, 3, -7]</span>
<span># nè¡¨ç¤ºé€’å½’åœ°åšnæ¬¡diff</span>
np<span>.</span>diff<span>(</span>x<span>,</span> n<span>=</span><span>2</span><span>)</span> <span># [1, 1, -10]</span>
<span># prepend=1è¡¨ç¤ºåœ¨açš„æœ€åä¸€ç»´çš„æ‰€æœ‰åˆ—è¡¨å‰æ·»åŠ ä¸€ä¸ª1ï¼Œå†è®¡ç®—cumsumã€‚appendåŒç†</span>
np<span>.</span>diff<span>(</span>x<span>,</span> prepend<span>=</span><span>1</span><span>)</span> <span># [0, 1, 2, 3, -7]</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id="np-ma-masked-where"> np.ma.masked_where</h2>
<p>å¾—åˆ°åˆ—è¡¨ä¸­æ»¡è¶³æ¡ä»¶çš„å…ƒç´ è¢«è®¾ä¸ºTrueçš„æ©ç </p>
<div><pre><code><span># ma.masked_where(condition, a, copy=True)</span>
a <span>=</span> np<span>.</span>arange<span>(</span><span>4</span><span>)</span>
c <span>=</span> ma<span>.</span>masked_where<span>(</span>a <span>&lt;=</span> <span>2</span><span>,</span> a<span>)</span>
<span># c: masked_array(data=[--, --, --, 3],</span>
<span>#              mask=[ True,  True,  True, False],</span>
<span>#        fill_value=999999)</span>
c<span>[</span><span>0</span><span>]</span><span>=</span><span>99</span>
<span># masked_array(data=[99, --, --, 3],</span>
<span>#              mask=[False,  True,  True, False],</span>
<span>#        fill_value=999999)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><ul>
<li>masked_equal(a, value, copy=True)</li>
<li>masked_less_equal(a, value, copy=True)</li>
<li>masked_inside(a, v1, v2, copy=True)</li>
<li>ma.masked_invalid(a, copy=True)</li>
<li>...</li>
</ul>
<p>å¡«å……è¢«maskedçš„ä½ç½®ï¼Œä½¿ç”¨np.ma.filled</p>
<div><pre><code>x <span>=</span> np<span>.</span>ma<span>.</span>array<span>(</span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>4</span><span>,</span><span>5</span><span>]</span><span>,</span> mask<span>=</span><span>[</span><span>0</span><span>,</span><span>0</span><span>,</span><span>1</span><span>,</span><span>0</span><span>,</span><span>1</span><span>]</span><span>,</span> fill_value<span>=</span><span>-</span><span>999</span><span>)</span>
x<span>.</span>filled<span>(</span><span>)</span>
<span># array([   1,    2, -999,    4, -999])</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Python"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-05T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">katex å¸¸ç”¨å†™æ³•</title>
    <id>https://kigane.github.io/blog/katex-cheatsheet/</id>
    <link href="https://kigane.github.io/blog/katex-cheatsheet/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å¸¸ç”¨ç¬¦å·"> å¸¸ç”¨ç¬¦å·</h2>
<table>
<thead>
<tr>
<th style="text-align:center">ç¬¦å·</th>
<th style="text-align:center">å†™æ³•</th>
<th style="text-align:center">ç¬¦å·</th>
<th style="text-align:center">å†™æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8889em;vertical-align:-0.1944em;"></span><span>Ï•</span></span></span></span></td>
<td style="text-align:center">\phi</td>
<td style="text-align:center"><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span>Î¦</span></span></span></span></td>
<td style="text-align:center">\Phi</td>
</tr>
<tr>
<td style="text-align:center"><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.4306em;"></span><span style="margin-right:0.03588em;">Ï‰</span></span></span></span></td>
<td style="text-align:center">\omega</td>
<td style="text-align:center"><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span>Î©</span></span></span></span></td>
<td style="text-align:center">\Omega</td>
</tr>
</tbody>
</table>
<h2 id="ç¯å¢ƒ"> ç¯å¢ƒ</h2>
<p><img src="/assets/img/katex-environments.png" alt="ç¯å¢ƒ" /></p>
<p>å¤šè¡Œå…¬å¼åœ¨vuepressä¸­æ— æ•ˆï¼Œä½¿ç”¨alignedç¯å¢ƒæ›¿ä»£ã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">PyQt5è®°å½•</title>
    <id>https://kigane.github.io/blog/pyqt5/</id>
    <link href="https://kigane.github.io/blog/pyqt5/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="qtdesigner"> QtDesigner</h2>
<ul>
<li>è®¾è®¡ç•Œé¢ï¼Œäº§ç”Ÿä¸€ä¸ªxxx.uiæ–‡ä»¶</li>
<li><code>pyuic5 -x -o yyy.py xxx.ui</code>
<ul>
<li>-oåé¢ä¸ºè¾“å‡ºæ–‡ä»¶å</li>
<li>-xè¡¨ç¤ºåœ¨pyæ–‡ä»¶ä¸­ç”Ÿæˆæµ‹è¯•ä»£ç </li>
</ul>
</li>
</ul>
<h2 id="æ­£ç¡®ä½¿ç”¨uiæ–‡ä»¶"> æ­£ç¡®ä½¿ç”¨uiæ–‡ä»¶</h2>
<ul>
<li>ä½¿ç”¨ç±»ç»§æ‰¿ï¼Œè€Œéç›´æ¥åœ¨ç”Ÿæˆçš„pyæ–‡ä»¶ä¸Šä¿®æ”¹ã€‚</li>
<li>æˆ–ç›´æ¥ç”¨uicæ¨¡å—å¾—åˆ°éœ€è¦çš„ç±»</li>
</ul>
<CodeGroup>
<CodeGroupItem title="ç¼–è¯‘åå¯¼å…¥">
<div><pre><code><span># å¼•å…¥ç”Ÿæˆçš„ç±»</span>
<span>from</span> ui<span>.</span>login <span>import</span> Ui_Form
<span>from</span> PyQt5 <span>import</span> QtWidgets <span>as</span> qtw

<span># é€šè¿‡ç»§æ‰¿å–å¾—ç±»å±æ€§</span>
<span>class</span> <span>LoginWindow</span><span>(</span>qtw<span>.</span>QWidget<span>,</span> Ui_Form<span>)</span><span>:</span>
    <span>def</span> <span>__init__</span><span>(</span>self<span>)</span><span>:</span>
        <span>super</span><span>(</span>LoginWindow<span>,</span> self<span>)</span><span>.</span>__init__<span>(</span><span>)</span>
        <span># è°ƒç”¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå‡†å¤‡å¥½ ui</span>
        self<span>.</span>setupUi<span>(</span>self<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="ä½¿ç”¨uicæ¨¡å—">
<div><pre><code><span>from</span> PyQt5 <span>import</span> uic
Ui_Form<span>,</span> BaseClass <span>=</span> uic<span>.</span>loadUiType<span>(</span><span>'login.ui'</span><span>)</span>

<span># é€šè¿‡ç»§æ‰¿å–å¾—ç±»å±æ€§</span>
<span>class</span> <span>LoginWindow</span><span>(</span>BaseClass<span>,</span> Ui_Form<span>)</span><span>:</span>
    <span>def</span> <span>__init__</span><span>(</span>self<span>)</span><span>:</span>
        <span>super</span><span>(</span>LoginWindow<span>,</span> self<span>)</span><span>.</span>__init__<span>(</span><span>)</span>
        <span># è°ƒç”¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå‡†å¤‡å¥½ ui</span>
        self<span>.</span>setupUi<span>(</span>self<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div></CodeGroupItem>
</CodeGroup>
<p>æ³¨æ„åˆ°ï¼Œç”Ÿæˆçš„pyæ–‡ä»¶ä¸­ï¼ŒUIç±»æ˜¯objectçš„å­ç±»ï¼Œè€ŒéQWigetçš„å­ç±»ã€‚è¿™æ˜¯å‡ºäºåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œç»å¸¸ä¼šä¿®æ”¹ç•Œé¢çš„è€ƒè™‘ï¼Œé€šè¿‡æä¾›setupUiæ–¹æ³•å®ç°ç•Œé¢å¤–è§‚ï¼Œæ˜“äºä¿®æ”¹(Mixin)ã€‚ä½†ç¼ºç‚¹æ˜¯ç»§æ‰¿åï¼Œä¸èƒ½ç›´è§‚åœ°çœ‹åˆ°æœ‰å“ªäº›å±æ€§ï¼Œå±æ€§çš„ç±»å‹ä¹Ÿè¢«éšè—äº†ï¼Œç¼–ç¨‹ä¼šå˜å¾—ä¸æ–¹ä¾¿ã€‚</p>
<h2 id="åŸºæœ¬çš„qtç¨‹åº"> åŸºæœ¬çš„Qtç¨‹åº</h2>
<div><pre><code><span>import</span> sys
<span>from</span> PyQt5 <span>import</span> QtWidgets <span>as</span> qtw
<span>from</span> PyQt5 <span>import</span> QtCore <span>as</span> qtc
<span>from</span> PyQt5 <span>import</span> QtGui <span>as</span> qtg

<span>class</span> <span>MainWindow</span><span>(</span>qtw<span>.</span>QWidget<span>)</span><span>:</span>

    <span>def</span> <span>__init__</span><span>(</span>self<span>,</span> <span>*</span>args<span>,</span> <span>**</span>kwargs<span>)</span><span>:</span>
        <span>super</span><span>(</span><span>)</span><span>.</span>__init__<span>(</span><span>*</span>args<span>,</span> <span>**</span>kwargs<span>)</span>
        <span># Your code will go here</span>

        <span># Your code ends here</span>
        self<span>.</span>show<span>(</span><span>)</span>


<span>if</span> __name__ <span>==</span> <span>'__main__'</span><span>:</span>
    <span># æ¥å—å‘½ä»¤è¡Œå‚æ•°</span>
    app <span>=</span> qtw<span>.</span>QApplication<span>(</span>sys<span>.</span>argv<span>)</span> 
    w <span>=</span> MainWindow<span>(</span><span>)</span>
    <span># ç»™ç¨‹åºä¸€ä¸ªé€€å‡ºçŠ¶æ€</span>
    sys<span>.</span>exit<span>(</span>app<span>.</span>exec_<span>(</span><span>)</span><span>)</span> 
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><h2 id="åŸºæœ¬å¸ƒå±€"> åŸºæœ¬å¸ƒå±€</h2>
<ul>
<li>qtw.QHBoxLayout()
<ul>
<li>layout.addWidget(widget)</li>
<li>æ‰€æœ‰ç»„ä»¶æ¨ªç€æ”¾</li>
</ul>
</li>
<li>qtw.VHBoxLayout()
<ul>
<li>layout.addWidget(widget)</li>
<li>æ‰€æœ‰ç»„ä»¶ç«–ç€æ”¾</li>
</ul>
</li>
<li>qtw.GridLayout()
<ul>
<li>layout.addWidget(widget, row, col)</li>
<li>æŠŠç»„ä»¶æ”¾å…¥ç›¸åº”ç½‘æ ¼ä¸­</li>
</ul>
</li>
<li>qtw.FormLayout()
<ul>
<li>layout.addRow('widget_label', widget)</li>
<li>ä¼šäº§ç”Ÿé€‚åˆä¸åŒå¹³å°çš„è¡¨æ ¼</li>
<li>è¦æ„é€ è¡¨æ ¼ç»„ä»¶æ—¶ï¼Œæ¨èç”¨è¯¥å¸ƒå±€</li>
</ul>
</li>
<li>å¸ƒå±€å¯ä»¥åµŒå¥—ï¼Œå³ä¸Šé¢çš„widgetä¹Ÿå¯ä»¥æ˜¯layoutã€‚</li>
<li>ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªQWidgetä½œä¸ºå¸ƒå±€ç»„ä»¶
<ul>
<li>w.setLayout(qtw.QHBoxLayout())</li>
<li>w.layout().addWidget(widget)</li>
</ul>
</li>
</ul>
<h2 id="signal-slot"> Signal &amp; Slot</h2>
<h3 id="åŸºæœ¬ç”¨æ³•"> åŸºæœ¬ç”¨æ³•</h3>
<p>signalæ˜¯Qtç»„ä»¶çš„å±æ€§ï¼Œå¯ä»¥å’Œslotè¿æ¥ï¼Œå½“signalè§¦å‘æ—¶ï¼Œæ‰§è¡Œslotã€‚slotå¯ä»¥æ˜¯ä»»ä½•python callableã€‚</p>
<p>Qtç»„ä»¶æœ‰ä¸€äº›å®šä¹‰å¥½çš„signalå’Œslotã€‚å…·ä½“çœ‹æ–‡æ¡£ã€‚å®šä¹‰å¥½çš„ä¿¡å·ï¼Œå¯ä»¥åœ¨ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­ç”¨å…³é”®è¯å‚æ•°æŒ‡å®šï¼Œæ•ˆæœå’Œæ‰‹åŠ¨è¿æ¥ç›¸åŒï¼Œå†™æ³•æ›´ç®€å•ã€‚</p>
<h3 id="signalå¯ä»¥æºå¸¦æ•°æ®"> signalå¯ä»¥æºå¸¦æ•°æ®</h3>
<ul>
<li>ä¾‹å¦‚textChanged signalè¿æ¥çš„slotçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰æ–‡æœ¬ã€‚</li>
<li>å¦‚æœä¿¡å·æºå¸¦äº†æ•°æ®ï¼Œå¯ç”¨è£…é¥°å™¨<code>@qtc.pyqtSlot(str)</code>å£°æ˜ï¼Œè¿™ä¼šæå‡ä¸€ç‚¹é€Ÿåº¦ï¼Œç”¨äºå¤šçº¿ç¨‹æ—¶æ›´å®‰å…¨ï¼Œæ­¤å¤–å¯ä»¥è®©ä½ ç¡®å®šå‚æ•°ç±»å‹ï¼Œå¦‚æœåœ¨è£…é¥°å™¨ä¸­å£°æ˜çš„å‚æ•°ç±»å‹å’Œä¿¡å·å®é™…æºå¸¦çš„ç±»å‹ä¸ç¬¦ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</li>
</ul>
<h3 id="è‡ªå®šä¹‰signal"> è‡ªå®šä¹‰signal</h3>
<div><pre><code>my_signal <span>=</span> qtc<span>.</span>pyqtSignal<span>(</span><span>str</span><span>)</span> <span># æºå¸¦ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°çš„ä¿¡å·</span>
my_signal<span>.</span>emit<span>(</span><span>'some content'</span><span>)</span> <span># åœ¨æŸä¸ªåœ°æ–¹è§¦å‘ä¿¡å·ï¼Œå¹¶ä¼ å…¥æ•°æ®</span>
my_signal<span>.</span>connect<span>(</span>some_callable<span>)</span> <span># è¿æ¥ä¿¡å·ä¸æ§½</span>

<span>def</span> <span>some_callable</span><span>(</span><span>str</span><span>)</span><span>:</span>
    <span>pass</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>è‡ªå®šä¹‰ä¿¡å·+æºå¸¦æ•°æ®=ä¸åŒçª—å£ä¹‹é—´ä¼ é€’æ•°æ®</p>
<h2 id="qwidget"> QWidget</h2>
<h3 id="signals"> signals</h3>
<ul>
<li>customContextMenuRequested(QPoint)</li>
<li>windowIconChanged(QIcon)</li>
<li>windowTitleChanged(QString)</li>
</ul>
<h3 id="slots"> slots</h3>
<ul>
<li>close()</li>
<li>hide() == setVisible(false)</li>
<li>lower() å°†Widgetæ”¾åˆ°çˆ¶Widgetå †æ ˆçš„åº•éƒ¨</li>
<li>raise() å°†Widgetæ”¾åˆ°çˆ¶Widgetå †æ ˆçš„é¡¶éƒ¨</li>
<li>repaint() å¯èƒ½ä¼šå¯¼è‡´æ— é™é€’å½’ã€‚é™¤äº†åšåŠ¨ç”»ï¼Œå…¶ä»–æƒ…å†µupdate()æ›´å¥½ã€‚</li>
<li>setDisabled(bool) ç¦æ­¢è¾“å…¥</li>
<li>setEnabled(bool)</li>
<li>setFocus() è·å¾—ç„¦ç‚¹</li>
<li>setHidden(bool) =  setVisible(!bool).</li>
<li>setStyleSheet(QString)</li>
<li>setVisible(bool)</li>
<li>setWindowModified(bool) è®¾ç½®çª—å£æœ‰æ²¡æœ‰æœªä¿å­˜çš„å˜åŒ–</li>
<li>setWindowTitle(QString)</li>
<li>show()</li>
<li>showFullScreen()</li>
<li>showMaximized()</li>
<li>showMinimized()</li>
<li>showNormal()</li>
<li>update()</li>
<li>adjustSize() è°ƒæ•´åˆ°åˆå§‹è®¾å®šçš„å¤§å°</li>
</ul>
<h2 id="qmainwindow"> QMainWindow</h2>
<ul>
<li>Central Widget
<ul>
<li>é€‰æ‹©ä¸€ä¸ªç»„ä»¶</li>
</ul>
</li>
<li>MenuBar
<ul>
<li>QMenuBar(): menu = self.menuBar()</li>
<li>QMenu('name'): file_menu = menu.addMenu('File')</li>
<li>QAction('name', callable, shortcut): save_act = file_menu.addAction('Save', self.save)
<ul>
<li>ç¬¬äºŒä¸ªå‚æ•°triggered=xx,è®¾ç½®å’Œtriggeredä¿¡å·ç»‘å®šçš„æ§½</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°shortcut=xx,è®¾ç½®å¿«æ·é”®ï¼Œé¢„å®šä¹‰åœ¨qtg.QKeySequenceä¸­ï¼Œæˆ–ç›´æ¥ç”¨å­—ç¬¦ä¸²'Ctrl+t'</li>
<li>enabled=bool åˆå§‹æ˜¯å¦å¯ç”¨</li>
<li>checkable=bool æ˜¯å¦å¯æ‰“âˆš</li>
<li>act.setEnabled()</li>
<li>act.isChecked()</li>
</ul>
</li>
</ul>
</li>
<li>StatusBar
<ul>
<li>self.statusBar().showMessage(msg, last_time)</li>
<li>last_timeå•ä½ms</li>
</ul>
</li>
<li>ToolBar
<ul>
<li>edit_toolbar = self.addToolBar('Edit') å¢åŠ ä¸€ä¸ªå·¥å…·æ </li>
<li>edit_toolbar.addAction(qtg.QIcon(qtg.QPixmap('action.svg')), 'action_name', callable)</li>
<li>edit_toolbar.addAction('copy', self.textedit.copy)</li>
<li>æœ‰å›¾æ ‡çš„æ—¶å€™ä¸æ˜¾ç¤ºæ–‡å­—ï¼Œåªæœ‰æœªè®¾ç½®å›¾æ ‡æˆ–å›¾æ ‡ç¼ºå¤±æ—¶æ˜¾ç¤ºæ–‡å­—</li>
</ul>
</li>
<li>Dockable widget
<ul>
<li>search_dock = qtw.QDockWidget('Search')</li>
<li>self.addDockWidget(qtc.Qt.RightDockWidgetArea,search_dock) æ·»åŠ åˆ°ä¸»çª—å£å¹¶è®¾ç½®åœé ä½ç½®</li>
<li>search_dock.setFeatures(
qtw.QDockWidget.DockWidgetClosable |
qtw.QDockWidget.DockWidgetMovable |
qtw.QDockWidget.DockWidgetFloatable
) è®¾ç½®ç‰¹æ€§</li>
<li>search_dock.setWidget(widget) åœ¨åœé çª—å£ä¸­æ·»åŠ è‡ªå®šä¹‰ç»„ä»¶</li>
</ul>
</li>
</ul>
<h2 id="å›¾ç‰‡å’Œå›¾æ ‡"> å›¾ç‰‡å’Œå›¾æ ‡</h2>
<h3 id="qpixmap"> QPixmap</h3>
<p>ç”¨äºåœ¨å±å¹•ä¸Šå±•ç¤ºå›¾åƒ</p>
<ul>
<li>size()-&gt; QSize, width(), height(), rect()-&gt;QRect(x,y,w,h):å·¦ä¸Š+å®½é«˜</li>
<li>hasAlphaChannel()</li>
<li>depth()-&gt;bits per pixel,bpp</li>
<li>toImage() -&gt; QImage</li>
<li>fromImage()</li>
<li>copy(), scaled(size, aspect_ratio_mode), scaledToWidth(), scaledToHeight()</li>
<li>transformed(QTransform, mode)
<ul>
<li>Qtransfrom(m11, m12, m21, m22, dx=0, dy=0)</li>
<li>modeæœ‰ä¸¤ä¸ªï¼Œé»˜è®¤çš„0æ˜¯å¿«é€Ÿå˜æ¢ï¼Œ1æ˜¯ä½¿ç”¨äº†åŒçº¿æ€§æ’å€¼çš„å˜æ¢</li>
</ul>
</li>
<li>scroll(dx,dy,(x,y,w,h)) å¤åˆ¶å›¾åƒçš„éƒ¨åˆ†å¹¶ç§»åŠ¨dx,dyã€‚åŸå›¾ä»åœ¨ï¼Œå¹¶ä¼šè¢«é®æŒ¡ã€‚</li>
</ul>
<h3 id="qbitmap"> QBitmap</h3>
<p>å•bitç‰¹åŒ–çš„QPixmap</p>
<h3 id="qimage"> QImage</h3>
<p>å¯¹I/Oæœ‰å’Œåƒç´ çº§å¤„ç†æœ‰ä¼˜åŒ–ã€‚</p>
<ul>
<li>è¯»å†™
<ul>
<li>æ„é€ å‡½æ•°</li>
<li>load()</li>
<li>loadFromData()</li>
<li>static fromData()</li>
<li>save()</li>
</ul>
</li>
<li>å‡ ä½•ä¿¡æ¯
<ul>
<li>size(), width(), height(), dotsPerMeterX(), dotsPerMeterY(), rect()</li>
<li>valid() åˆ¤æ–­ç»™å®šåæ ‡æ˜¯å¦åœ¨å›¾åƒrectèŒƒå›´å†…</li>
<li>offset(), setOffset() é€šè¿‡ç›¸å¯¹äºå…¶ä»–å›¾åƒå®šä½æ—¶ï¼Œè®¾ç½®å›¾åƒç›¸å¯¹äºå…¶ä»–å›¾åƒåç§»çš„åƒç´ æ•°ã€‚</li>
</ul>
</li>
<li>é¢œè‰²
<ul>
<li>pixel(pos) è¿”å›æŸåƒç´ ç‚¹çš„QRgbå€¼</li>
<li>pixelIndex(pos) + color() = pixel(pos)</li>
<li>colorCount(), colorTable() å›¾åƒç”¨åˆ°çš„é¢œè‰²åˆ—è¡¨</li>
<li>isGrayscale()</li>
</ul>
</li>
<li>æ–‡æœ¬
<ul>
<li>text(key)</li>
<li>setText(key, text)</li>
<li>textKeys() è·å–å›¾åƒçš„text key</li>
</ul>
</li>
<li>ä½çº§ä¿¡æ¯
<ul>
<li>depth() æ¯åƒç´ å ç”¨æ¯”ç‰¹æ•°</li>
<li>bitPlaneCount() æ¯åƒç´ å®é™…ä½¿ç”¨çš„æ¯”ç‰¹æ•°</li>
<li>format()</li>
<li>bytesPerLine()</li>
<li>sizeInBytes()</li>
</ul>
</li>
</ul>
<h3 id="qpicture"> QPicture</h3>
<p>ä¸€ç§ç»˜åˆ¶è®¾å¤‡ï¼Œå¯è®°å½•å’Œé‡æ”¾QPainterå‘½ä»¤</p>
<h3 id="qicon-qpixmap"> QIcon(QPixmap)</h3>
<p>å›¾æ ‡</p>
<h2 id="æ–‡ä»¶ä½ç½®å¤„ç†"> æ–‡ä»¶ä½ç½®å¤„ç†</h2>
<div><pre><code><span>import</span> os
BASE_DIR <span>=</span> os<span>.</span>path<span>.</span>dirname<span>(</span>__file__<span>)</span>
img_path <span>=</span> os<span>.</span>path<span>.</span>join<span>(</span>BASE_DIR<span>,</span> path<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h2 id="qss"> QSS</h2>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Python"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-14T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">PyQt5çš„Model/Viewç»„ä»¶</title>
    <id>https://kigane.github.io/blog/pyqt_model_view/</id>
    <link href="https://kigane.github.io/blog/pyqt_model_view/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="æ€»è§ˆ"> æ€»è§ˆ</h2>
<p>å‡ ç§Viewçš„æ ·å¼</p>
<p><img src="/assets/img/pyqt_model_view.png" alt="å›¾ç‰‡" /></p>
<h2 id="model"> Model</h2>
<p>åœ¨PyQt5ä¸­ï¼Œæ‰€æœ‰æ•°æ®æ¨¡å‹ç±»éƒ½ä»QAbstractItemModelç»§æ‰¿è€Œæ¥ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä»¥è¡¨æ ¼çš„å±‚æ¬¡ç»“æ„ç»„ç»‡çš„ï¼Œè§†å›¾ç»„ä»¶é€šè¿‡è¿™ç§è§„åˆ™æ¥å­˜å–æ•°æ®ã€‚å¦‚ä¸‹å›¾å³ä¾§<br>
<img src="/assets/img/pyqt_view_index.png" alt="å›¾ç‰‡" /></p>
<h3 id="æ¨¡å‹ç´¢å¼•-qmodelindexã€‚"> æ¨¡å‹ç´¢å¼•--QModelIndexã€‚</h3>
<ul>
<li>é€šè¿‡æ•°æ®æ¨¡å‹å­˜å–çš„æ¯ä¸ªIteméƒ½æœ‰ä¸€ä¸ªæ¨¡å‹ç´¢å¼•ï¼Œè§†å›¾ç»„ä»¶å’Œä»£ç†éƒ½è¦é€šè¿‡ç´¢å¼•æ¥è·å–æ•°æ®</li>
<li>ä¸€ä¸ªæ¨¡å‹ç´¢å¼•ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ
<ul>
<li>è¡Œå· index.row()</li>
<li>åˆ—å· index.column()</li>
<li>çˆ¶é¡¹çš„æ¨¡å‹ç´¢å¼• index.parent()</li>
<li>æ•°æ® index.data()</li>
<li>åˆ›å»ºç´¢å¼•ï¼šmodel.index(row, col, QModelIndex())</li>
<li>é€šå¸¸é¡¶å±‚èŠ‚ç‚¹ç”¨QModelIndex()è¡¨ç¤º</li>
</ul>
</li>
</ul>
<h3 id="item-roles"> Item Roles</h3>
<p><img src="/assets/img/qt_item_roles.png" alt="å›¾ç‰‡" />
æ¯ä¸€ä¸ªæ•°æ®å¯ä»¥æœ‰å¤šç§è§’è‰²ï¼Œæœ‰ä¸åŒç”¨é€”ï¼Œå¦‚(qtc.Qt.ItemDataRole.)</p>
<ul>
<li>DisplayRole: æ˜¾ç¤ºçš„å­—ç¬¦ä¸²</li>
<li>DecorationRole: è£…é¥°æ˜¾ç¤º</li>
<li>ToolTipRole: é¼ æ ‡æç¤ºæ¶ˆæ¯</li>
<li>FontRole: æ˜¯å­—ä½“æ ·å¼</li>
<li>BackgroundRole: æ˜¯èƒŒæ™¯è®¾ç½®</li>
<li>TextAlignmentRole: æ˜¯å¯¹é½è®¾ç½®</li>
<li>CheckStateRole: æ˜¯æ•°æ®å‰åŠ checkçŠ¶æ€</li>
<li>UserRole: è‡ªå®šä¹‰æ•°æ®</li>
</ul>
<h3 id="modelçš„ä½¿ç”¨"> Modelçš„ä½¿ç”¨</h3>
<p>Modeléœ€è¦ç»§æ‰¿QAbstractItemModelæˆ–å…¶æŸä¸ªå­ç±»ã€‚é€šè¿‡å®ç°è™šå‡½æ•°æ¥å¤„ç†æ•°æ®çš„å­˜å–ã€‚</p>
<h3 id="ç»§æ‰¿qabstractitemmodel"> ç»§æ‰¿QAbstractItemModel</h3>
<ul>
<li>ä¿¡å·
<ul>
<li>dataChanged(topleft_index, botright_index, role)</li>
<li>è¡Œåˆ—æ’å…¥ï¼Œç§»åŠ¨ï¼Œåˆ é™¤ï¼ŒåŠå…¶å‡†å¤‡é˜¶æ®µåŠ¨æœ‰ç›¸åº”ä¿¡å·</li>
</ul>
</li>
<li>rowCount(self, index): è¿”å›éœ€è¦æ˜¾ç¤ºçš„è¡Œæ•°</li>
<li>columnCount(self, index): è¿”å›éœ€è¦æ˜¾ç¤ºçš„åˆ—æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ„Ÿè§‰æ²¡å•¥ç”¨</li>
<li><strong>data(self, index, role)</strong>=**: å–æ•°æ®çš„æ ¸å¿ƒæ–¹æ³•
<ul>
<li>index è¡¨ç¤ºæ­£è¦å–çš„æ•°æ®çš„ç´¢å¼•</li>
<li>role é€šè¿‡indexåˆ¤æ–­å“ªäº›æ•°æ®å•å…ƒéœ€è¦ä½œå“ªäº›è®¾ç½®</li>
<li>åŒä¸€ä¸ªindexä¼šè®¿é—®å¤šæ¬¡ï¼Œæ¯”å¦‚é€šè¿‡DisplayRoleå–å­—ç¬¦ä¸²ï¼Œé€šè¿‡FontRoleå–è¯¥å­—ç¬¦ä¸²çš„å­—ä½“è®¾ç½®......</li>
<li>C++ä¸­ç”¨switchè¯­å¥å¤„ç†å¤§é‡åˆ†æ”¯ï¼Œä½†pythonæ²¡æœ‰switchè¯­å¥ã€‚</li>
<li>æœ€åè¿”å›ä¸€ä¸ªqtc.QVariant()</li>
</ul>
</li>
<li><strong>headerData(self, section, orientation, role)</strong>
<ul>
<li>sectionæ˜¯ç´¢å¼•</li>
<li>orientationè¡¨ç¤ºè¡Œæˆ–åˆ—</li>
<li>roleåŒä¸Š</li>
</ul>
</li>
<li>flags(self, index) è®¾ç½®æ˜¾ç¤ºå•å…ƒçš„ç‰¹æ€§ã€‚å¦‚è®©å•å…ƒæ ¼å¯ç¼–è¾‘ã€‚è§qtc.Qt.ItemFlagã€‚</li>
<li><strong>setData(self, index, value, role)</strong>
<ul>
<li>indexä¸ºç´¢å¼•</li>
<li>valueä¸ºè¾“å…¥å€¼</li>
<li>roleåŒä¸Š</li>
</ul>
</li>
</ul>
<h3 id="qstandarditemmodel"> QStandardItemModel</h3>
<p>å¤„ç†å±‚çº§æ•°æ®çš„å®¹å™¨ï¼Œæ•°æ®é¡¹å¿…é¡»ä¸ºQStandardItemï¼Œå®ƒèƒ½å¤Ÿä¿ç•™æ–‡æœ¬ï¼Œå­—ä½“ï¼Œå¤é€‰æ¡†æˆ–ç”»ç¬”ç­‰æ•°æ®é¡¹çš„æ‰€æœ‰æ ‡å‡†å±æ€§ã€‚</p>
<ul>
<li>ä¿¡å·: itemChanged(QStandardItem) ä»»ä½•ä¸€é¡¹æ•°æ®æ”¹å˜æ—¶è§¦å‘</li>
<li>è¦åˆ›å»ºListæˆ–Tree
<ul>
<li>å…ˆåˆ›å»ºQStandardItemModel()</li>
<li>ä½¿ç”¨appendRow(item)|appendRow(item_list)æ·»åŠ æ•°æ®</li>
<li>ç”¨item(row, col)è·å–æ•°æ®</li>
</ul>
</li>
<li>è¦åˆ›å»ºTable
<ul>
<li>å…ˆåˆ›å»ºQStandardItemModel(row_count, col_count)</li>
<li>ä½¿ç”¨setItem()å­˜æ”¾æ•°æ®</li>
<li>ç”¨item(row, col)è·å–æ•°æ®</li>
</ul>
</li>
<li>æ”¹å˜æ¨¡å‹æ˜¾ç¤ºçš„æ•°æ®æ•°ä½¿ç”¨setRowCount(), setColumnCount()</li>
<li>æ’å…¥insertRow(), insertColumn()</li>
<li>åˆ é™¤removeRow(), removeColumn()</li>
<li>è®¾ç½®è¡¨å¤´ä½¿ç”¨setHorizontalHeaderLabels(header_list), setVerticalHeaderLabels(header_list)</li>
<li>æŸ¥æ‰¾æ•°æ®é¡¹ä½¿ç”¨findItems(text, flag)</li>
<li>æ’åºä½¿ç”¨sort(column, order)
<ul>
<li>æŒ‰æŸåˆ—æ’åº</li>
<li>Qt::AscendingOrder, Qt::DescendingOrder</li>
</ul>
</li>
<li>åˆ é™¤æ‰€æœ‰æ•°æ®ä½¿ç”¨clear()</li>
</ul>
<p>ä¿¡å·ä¸æ§½ä½¿ç”¨QModelIndexï¼Œæ‰€ä»¥éœ€è¦itemå’Œindexçš„ç›¸äº’è½¬åŒ–ã€‚</p>
<ul>
<li>itemFromIndex()</li>
<li>indexFromItem() ç›¸å½“äº QStandardItem::index()</li>
</ul>
<p><img src="/assets/img/pyqt_find_flag.png" alt="find_flag" /></p>
<h3 id="qstandarditem"> QStandardItem</h3>
<p>Itemé€šå¸¸åŒ…æ‹¬æ–‡æœ¬ï¼Œå›¾æ ‡å’Œcheckboxã€‚</p>
<ul>
<li>èƒŒæ™¯åˆ·å­ç”¨setBackground()</li>
<li>å­—ä½“ç”¨setFont()</li>
<li>æ–‡æœ¬é¢œè‰²ç”¨setForeground()</li>
<li>Itemçš„ç‰¹æ€§ç”¨setFlags()è®¾ç½®ï¼Œåˆå§‹ä¸ºenabled, editable, selectable, checkable, ä¸”å¯æ‹–åŠ¨ã€‚
<ul>
<li>checkableçš„Itemå¯ä»¥ç”¨setCheckState()è®¾ç½®çŠ¶æ€</li>
</ul>
</li>
<li>å¯ä»¥ç”¨setData(val, role)å®Œæˆä»¥ä¸Šè®¾ç½®</li>
<li>æ¯ä¸ªé¡¹ç›®éƒ½å¯ä»¥å…·æœ‰ä¸€ä¸ªäºŒç»´å­é¡¹è¡¨ã€‚è¿™æ ·å¯ä»¥æ„å»ºé¡¹ç›®çš„å±‚æ¬¡ç»“æ„ã€‚å…¸å‹çš„å±‚æ¬¡ç»“æ„æ˜¯æ ‘ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­è¡¨æ˜¯ä¸€ä¸ªå…·æœ‰å•åˆ—ï¼ˆåˆ—è¡¨ï¼‰çš„è¡¨ã€‚
<ul>
<li>å­è¡¨æ“ä½œç±»ä¼¼QStandardItemModel</li>
<li>è®¾ç½®æ•°æ®ä½¿ç”¨setChild(row, col, item)</li>
<li>è·å–æ•°æ®ä½¿ç”¨child(row, col)</li>
<li>sortChildren(col, order)</li>
</ul>
</li>
</ul>
<h2 id="view"> View</h2>
<p>Viewä¸ºè§†å›¾ç»„ä»¶ï¼Œè´Ÿè´£æ•°æ®çš„æ˜¾ç¤ºã€‚éœ€è¦é€šè¿‡setModel()æ–¹æ³•å’Œç›¸åº”çš„æ•°æ®æ¨¡å‹å…³è”èµ·æ¥ã€‚</p>
<div><pre><code>table_view <span>=</span> qtw<span>.</span>QTableView<span>(</span><span>)</span>
my_model <span>=</span> MyModel<span>(</span><span>)</span>
table_view<span>.</span>setModel<span>(</span>my_model<span>)</span>

<span># éšè—æ ‡é¢˜æ </span>
<span># table_view.horizontalHeader().hide()</span>
<span># table_view.verticalHeader().hide()</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>è§†å›¾ç”¨ä¸€ä¸ªå•ç‹¬çš„é€‰æ‹©æ¨¡å‹ç®¡ç†Itemé€‰æ‹©é—®é¢˜ã€‚</p>
<ul>
<li>å¯ç”¨SelectsModel()æ–¹æ³•è·å–è¯¥é€‰æ‹©æ¨¡å‹ï¼Œä»¥ä¾¿å°†æ’æ§½è¿æ¥åˆ°selectionChanged(selected, deselected)ä¿¡å·ã€‚</li>
<li>è·å–è¢«é€‰ä¸­çš„ç´¢å¼•: treeView.selectionModel().currentIndex()</li>
<li>å¯ç”¨SelectsModel()æ–¹æ³•è·å–é€‰æ‹©æ¨¡å‹ï¼Œå†ç”¨setSelectionModel()æ–¹æ³•ä¸ºå¤šä¸ªViewè®¾ç½®åŒä¸€ä¸ªé€‰æ‹©æ¨¡å‹ï¼Œä»¥å®ç°é€‰æ‹©åœ¨å¤šä¸ªè§†å›¾ä¸­çš„åŒæ­¥ã€‚</li>
</ul>
<h2 id="delegate"> Delegate</h2>
<p>Delegateç”¨äºå¤„ç†æ¯ä¸€ä¸ªItemï¼Œå¹¶å®é™…å°†å…¶ç»˜åˆ¶å‡ºæ¥ã€‚<br>
Viewæœ‰ä¸€ä¸ªsetItemDelegate()æ–¹æ³•ï¼Œç”¨äºæ›¿æ¢é»˜è®¤çš„Delegateã€‚è‡ªå®šä¹‰çš„Delegateå¯ä»¥ä»ç»§æ‰¿QStyledItemDelegate(ç»§æ‰¿è‡ªQAbstractItemDelegate)ã€‚</p>
<h2 id="ç¤ºä¾‹"> ç¤ºä¾‹</h2>
<details><summary>Table View</summary>
<div><pre><code><span>import</span> sys
<span>from</span> PyQt5 <span>import</span> QtWidgets <span>as</span> qtw
<span>from</span> PyQt5 <span>import</span> QtCore <span>as</span> qtc
<span>from</span> PyQt5 <span>import</span> QtGui <span>as</span> qtg

<span>class</span> <span>MyModel</span><span>(</span>qtc<span>.</span>QAbstractTableModel<span>)</span><span>:</span>
    editCompleted <span>=</span> qtc<span>.</span>pyqtSignal<span>(</span><span>str</span><span>)</span>

    <span>def</span> <span>__init__</span><span>(</span>self<span>)</span><span>:</span>
        <span>super</span><span>(</span><span>)</span><span>.</span>__init__<span>(</span><span>)</span>
        self<span>.</span>cnt <span>=</span> <span>0</span>
        self<span>.</span>timer <span>=</span> qtc<span>.</span>QTimer<span>(</span><span>)</span>
        self<span>.</span>timer<span>.</span>setInterval<span>(</span><span>1000</span><span>)</span> <span># ms</span>
        self<span>.</span>timer<span>.</span>timeout<span>.</span>connect<span>(</span>self<span>.</span>time_hit<span>)</span>
        self<span>.</span>timer<span>.</span>start<span>(</span><span>)</span>
        self<span>.</span>editCompleted<span>.</span>connect<span>(</span>self<span>.</span>show<span>)</span>
    
    <span>@qtc<span>.</span>pyqtSlot</span><span>(</span><span>str</span><span>)</span>
    <span>def</span> <span>show</span><span>(</span>self<span>,</span> <span>str</span><span>)</span><span>:</span>
        <span>print</span><span>(</span><span>str</span><span>)</span>
    
    <span>def</span> <span>time_hit</span><span>(</span>self<span>)</span><span>:</span>
        <span># topright = qtc.QAbstractItemModel.createIndex(self, 0, 2)</span>
        topright <span>=</span> self<span>.</span>index<span>(</span><span>0</span><span>,</span> <span>2</span><span>,</span> qtc<span>.</span>QModelIndex<span>(</span><span>)</span><span>)</span> <span># é¡¶å±‚èŠ‚ç‚¹ç”¨qtc.QModelIndex()è¡¨ç¤º</span>
        <span># å‘é€æ•°æ®æ”¹å˜ä¿¡å·ï¼Œä»æ–°è¯»å–æŒ‡å®šçŸ©å½¢å±€åŸŸæ•°æ®</span>
        self<span>.</span>dataChanged<span>.</span>emit<span>(</span>topright<span>,</span> topright<span>,</span> <span>[</span>qtc<span>.</span>Qt<span>.</span>DisplayRole<span>]</span><span>)</span>
    
    <span>def</span> <span>rowCount</span><span>(</span>self<span>,</span> index<span>)</span><span>:</span>
        <span>return</span> <span>2</span>
    
    <span>def</span> <span>columnCount</span><span>(</span>self<span>,</span> index<span>)</span><span>:</span>
        <span>return</span> <span>3</span>

    <span># è®¾ç½®è¡¨æ ¼å†…å®¹å’Œæ ·å¼</span>
    <span>def</span> <span>data</span><span>(</span>self<span>,</span> index<span>,</span> role<span>)</span><span>:</span>
        row <span>=</span> index<span>.</span>row<span>(</span><span>)</span>
        col <span>=</span> index<span>.</span>column<span>(</span><span>)</span>
        self<span>.</span>cnt <span>+=</span> <span>1</span>
        <span># print(f'Rows: {row+1}, Columns: {col+1}, Role: {role}, Count: {self.cnt}')</span>
        <span>if</span> role <span>==</span> qtc<span>.</span>Qt<span>.</span>ItemDataRole<span>.</span>DisplayRole<span>:</span>
            <span>if</span> row <span>==</span> <span>0</span> <span>and</span> col <span>==</span> <span>0</span><span>:</span>
                <span>return</span> <span>'Left&lt;--'</span>
            <span>if</span> row <span>==</span> <span>0</span> <span>and</span> col <span>==</span> <span>2</span><span>:</span>
                <span>return</span> qtc<span>.</span>QTime<span>.</span>currentTime<span>(</span><span>)</span><span>.</span>toString<span>(</span><span>)</span>
            <span>return</span> <span><span>f'Rows</span><span><span>{</span>row<span>+</span><span>1</span><span>}</span></span><span>, Columns</span><span><span>{</span>col<span>+</span><span>1</span><span>}</span></span><span>'</span></span>
        <span>elif</span> role <span>==</span> qtc<span>.</span>Qt<span>.</span>ItemDataRole<span>.</span>FontRole<span>:</span>
            <span>if</span> row <span>==</span> <span>0</span> <span>and</span> col <span>==</span> <span>1</span><span>:</span>
                fnt <span>=</span> qtg<span>.</span>QFont<span>(</span><span>'Open Sans'</span><span>,</span> <span>16</span><span>)</span>
                fnt<span>.</span>setBold<span>(</span><span>True</span><span>)</span>
                <span>return</span> fnt
        <span>elif</span> role <span>==</span> qtc<span>.</span>Qt<span>.</span>ItemDataRole<span>.</span>BackgroundRole<span>:</span>
            <span>if</span> row <span>==</span> <span>1</span> <span>and</span> col <span>==</span> <span>1</span><span>:</span>
                <span>return</span> qtg<span>.</span>QBrush<span>(</span>qtc<span>.</span>Qt<span>.</span>GlobalColor<span>.</span>cyan<span>)</span>
        <span>elif</span> role <span>==</span> qtc<span>.</span>Qt<span>.</span>ItemDataRole<span>.</span>CheckStateRole<span>:</span>
            <span>if</span> row <span>==</span> <span>1</span> <span>and</span> col <span>==</span> <span>0</span><span>:</span>
                <span>return</span> qtc<span>.</span>Qt<span>.</span>CheckState<span>.</span>Checked
        <span>elif</span> role <span>==</span> qtc<span>.</span>Qt<span>.</span>ItemDataRole<span>.</span>TextAlignmentRole<span>:</span>
            <span>if</span> row <span>==</span> <span>0</span> <span>and</span> col <span>==</span> <span>1</span><span>:</span>
                <span>return</span> <span>int</span><span>(</span>qtc<span>.</span>Qt<span>.</span>AlignmentFlag<span>.</span>AlignRight <span>|</span> qtc<span>.</span>Qt<span>.</span>AlignmentFlag<span>.</span>AlignVCenter<span>)</span>
        
        <span>return</span> qtc<span>.</span>QVariant<span>(</span><span>)</span>

    <span># è®¾ç½®è¡¨æ ¼ Header</span>
    <span># æœ‰äº†è¿™ä¸ªæ–¹æ³•ï¼Œé»˜è®¤çš„Headerå°±ä¸ä¼šç”Ÿæˆäº†ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸¤ä¸ªæ–¹å‘çš„éƒ½è¦ï¼Œåˆ™ä¸¤ä¸ªæ–¹å‘éƒ½è¦æœ‰æ•°æ®</span>
    <span>def</span> <span>headerData</span><span>(</span>self<span>,</span> section<span>,</span> orientation<span>,</span> role<span>)</span><span>:</span>
        <span>if</span> <span>(</span>role <span>==</span> qtc<span>.</span>Qt<span>.</span>ItemDataRole<span>.</span>DisplayRole 
            <span>and</span> orientation <span>==</span> qtc<span>.</span>Qt<span>.</span>Horizontal<span>)</span><span>:</span>
            header_rows <span>=</span> <span>[</span><span>'first'</span><span>,</span> <span>'second'</span><span>,</span> <span>'third'</span><span>]</span>
            <span>return</span> header_rows<span>[</span>section<span>]</span>

        <span>return</span> qtc<span>.</span>QVariant<span>(</span><span>)</span>

    <span># è®¾ç½®Itemçš„ç‰¹æ€§ã€‚è¿™é‡Œè®©å…¶å¯ç¼–è¾‘</span>
    <span>def</span> <span>flags</span><span>(</span>self<span>,</span> index<span>)</span><span>:</span>
        <span>return</span> qtc<span>.</span>Qt<span>.</span>ItemFlag<span>.</span>ItemIsEditable <span>|</span> <span>super</span><span>(</span><span>)</span><span>.</span>flags<span>(</span>index<span>)</span>

    <span># ç¼–è¾‘æ•°æ®</span>
    <span>def</span> <span>setData</span><span>(</span>self<span>,</span> index<span>,</span> value<span>,</span> role<span>)</span><span>:</span>
        <span>if</span> role <span>==</span> qtc<span>.</span>Qt<span>.</span>ItemDataRole<span>.</span>EditRole<span>:</span>
            <span>if</span> <span>not</span> self<span>.</span>checkIndex<span>(</span>index<span>)</span><span>:</span>
                <span>return</span> <span>False</span>
        self<span>.</span>editCompleted<span>.</span>emit<span>(</span>value<span>)</span>
        <span>return</span> <span>True</span>

<span>class</span> <span>TableView</span><span>(</span>qtw<span>.</span>QMainWindow<span>)</span><span>:</span>
    <span>def</span> <span>__init__</span><span>(</span>self<span>)</span><span>:</span>
        <span>super</span><span>(</span><span>)</span><span>.</span>__init__<span>(</span><span>)</span>
        table_view <span>=</span> qtw<span>.</span>QTableView<span>(</span><span>)</span>
        <span># éšè—æ ‡é¢˜æ </span>
        <span># table_view.horizontalHeader().hide()</span>
        <span># table_view.verticalHeader().hide()</span>
        my_model <span>=</span> MyModel<span>(</span><span>)</span>
        table_view<span>.</span>setModel<span>(</span>my_model<span>)</span>
        self<span>.</span>setCentralWidget<span>(</span>table_view<span>)</span>
        self<span>.</span>setWindowTitle<span>(</span><span>"Table View App"</span><span>)</span>
        self<span>.</span>resize<span>(</span><span>800</span><span>,</span> <span>600</span><span>)</span>
        self<span>.</span>show<span>(</span><span>)</span>


<span>if</span> __name__ <span>==</span> <span>'__main__'</span><span>:</span>
    app <span>=</span> qtw<span>.</span>QApplication<span>(</span>sys<span>.</span>argv<span>)</span>
    w <span>=</span> TableView<span>(</span><span>)</span>
    sys<span>.</span>exit<span>(</span>app<span>.</span>exec_<span>(</span><span>)</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br></div></div></details>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Python"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-15T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">python</title>
    <id>https://kigane.github.io/blog/python/</id>
    <link href="https://kigane.github.io/blog/python/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å†…ç½®æ–¹æ³•"> å†…ç½®æ–¹æ³•</h2>
<ul>
<li><code>any(lst)</code>: lstä¸­ä»»æ„å…ƒç´ ä¸ºTrueåˆ™è¿”å›Trueã€‚å³åˆ—è¡¨æ‰€æœ‰å…ƒç´ å–orã€‚</li>
<li><code>all(lst)</code>: lstä¸­æ‰€æœ‰å…ƒç´ ä¸ºTrueæ‰è¿”å›Trueã€‚å³åˆ—è¡¨æ‰€æœ‰å…ƒç´ å–andã€‚</li>
</ul>
<h2 id="æšä¸¾"> æšä¸¾</h2>
<ul>
<li>from enum import Enum, IntEnum, Flag, IntFlag, unique, auto</li>
<li>Flag å¯åˆ›å»ºå¯ä¸ä½è¿ç®—ç¬¦æ­é…ä½¿ç”¨ï¼Œåˆä¸ä¼šå¤±å» Flag æˆå‘˜èµ„æ ¼çš„æšä¸¾å¸¸é‡çš„åŸºç±»ã€‚</li>
<li>@uniqueè£…é¥°å™¨ï¼Œå¯ç¡®ä¿æˆå‘˜å€¼å”¯ä¸€</li>
<li>auto() å¦‚æœå€¼ä¸é‡è¦ï¼Œå¯ç”¨autoç”Ÿæˆ</li>
</ul>
<h2 id="import"> import</h2>
<h3 id="module"> module</h3>
<ul>
<li>dir(): æ— å‚æ•°ï¼ŒæŸ¥çœ‹å…¨å±€å‘½åç©ºé—´çš„å˜é‡</li>
<li>dir(module): æŸ¥çœ‹æŒ‡å®šæ¨¡å—çš„å˜é‡</li>
<li>ä¸€ä¸ª.pyæ–‡ä»¶å¯çœ‹ä½œä¸€ä¸ªæ¨¡å—
<ul>
<li>import module (as alias) å¼•å…¥moduleï¼Œå¯ä½¿ç”¨moduleå‘½åç©ºé—´åŠå…¶å†…çš„å˜é‡</li>
<li>from module import var å°†varä»moduleä¸­å¯¼å…¥å…¨å±€å‘½åç©ºé—´</li>
</ul>
</li>
</ul>
<h3 id="package"> package</h3>
<ul>
<li>ä¸€ä¸ªç›®å½•ï¼ŒåŒ…å«ç›®å½•å’Œå­æ¨¡å—ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªpackageéœ€è¦åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>__init__.py</code></li>
<li>éœ€è¦åœ¨<code>__init__.py</code>ä¸­å¼•å…¥å­æ¨¡å—ï¼Œå¦åˆ™import packageæ—¶ç©ºæœ‰å‘½åç©ºé—´ï¼Œè€Œæ— å†…å®¹</li>
</ul>
<h3 id="æ¨¡å—æŸ¥æ‰¾é¡ºåº"> æ¨¡å—æŸ¥æ‰¾é¡ºåº</h3>
<ul>
<li>sys.module</li>
<li>pythonæ ‡å‡†åº“</li>
<li>sys.path</li>
</ul>
<h3 id="ç›¸å¯¹å¯¼å…¥"> ç›¸å¯¹å¯¼å…¥</h3>
<ul>
<li><code>.</code>ï¼Œå½“å‰ç›®å½•, <code>..</code>ä¸Šä¸€çº§ç›®å½•, <code>...</code>ä¸Šä¸Šä¸€çº§ç›®å½•ã€‚</li>
</ul>
<h3 id="importlib-æ¨¡å—"> importlib æ¨¡å—</h3>
<ul>
<li><code>import_module('module_name', package=__name__)</code> è¿”å›å€¼å³æ¨¡å—</li>
<li>packageç”¨äºè€ƒè™‘ç›¸å¯¹å¯¼å…¥</li>
</ul>
<h2 id="è§£åŒ…-è‡ªåŠ¨"> è§£åŒ…(è‡ªåŠ¨)</h2>
<ul>
<li>ç­‰å·å³è¾¹çš„åºåˆ—å¯ä»¥ç›´æ¥è§£åŒ…ä¸ºå•ä¸ªå…ƒç´ ï¼Œåªè¦åœ¨å·¦è¾¹åˆ†é…åŒæ ·æ•°é‡çš„å˜é‡ã€‚</li>
<li>æ•°é‡å¿…é¡»ç›¸åŒï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
<li>å¯ä»¥éƒ¨åˆ†è§£åŒ…ï¼Œå³åœ¨ç­‰å·å·¦è¾¹æŸä¸ªå˜é‡å‰åŠ <code>*</code>å·ï¼Œåˆ™å…¶ä¼šæ¥å—æ‰€æœ‰ä¸ºæœªåˆ†é…çš„å€¼ï¼Œå¹¶å½¢æˆä¸€ä¸ªæ•°ç»„ã€‚(åºåˆ—å…ƒç´ æ•°é‡å¿…é¡»å¤šäºåˆ†é…çš„å˜é‡æ•°)ã€‚ä¾‹å¦‚ <code>a, *b, c = [1, 2, 3, 4, 5]</code>ï¼Œåˆ™æœ‰<code>b=[2,3,4]</code></li>
</ul>
<h2 id="å‹ç¼©-zip"> å‹ç¼©(zip)</h2>
<ul>
<li><code>zip(range(3), reverse(range(5))) -&gt; [(0, 4), (1, 3), (2, 2)]</code></li>
<li>åˆ›å»ºå­—å…¸æ—¶å¾ˆæœ‰ç”¨: dict(zip(keys, values))</li>
</ul>
<h2 id="itertools-chain"> itertools.chain</h2>
<ul>
<li>itertools.chain(range(3), range(4), range(5))</li>
<li>ä½œç”¨æ˜¯å°†ä¸‰ä¸ªç”Ÿæˆå™¨(range())åˆå¹¶æˆä¸€ä¸ªæ–°çš„ï¼Œç”Ÿæˆ<code>[0,1,2,0,1,2,3,0,1,2,3,4]</code></li>
</ul>
<h2 id="å‡½æ•°"> å‡½æ•°</h2>
<h3 id="å‚æ•°"> å‚æ•°</h3>
<ul>
<li><code>def add(*args)</code>: è¿™é‡Œ<code>*</code>ä½œç”¨æ˜¯å°†æ‰€æœ‰å‰©ä¸‹çš„æœªè§£æå‚æ•°æ‰“åŒ…åˆ°ä¸€ä¸ªå…ƒç»„ä¸­ï¼Œèµ‹ç»™argsã€‚è°ƒç”¨æ—¶å¯ä»¥ç”¨<code>*args</code>çš„åˆ°è§£åŒ…åçš„å€¼ã€‚</li>
<li><code>def init(**kwargs)</code>: è¿™é‡Œ<code>**</code>ä½œç”¨æ˜¯å°†æ‰€æœ‰å‰©ä¸‹æœªè§£æçš„å…³é”®å­—å‚æ•°æ‰“åŒ…æˆå­—å…¸ï¼Œèµ‹ç»™kwargsã€‚</li>
<li><code>def say(a, b, *, key=val...)</code>: è¿™é‡Œ<code>*</code>æ˜¯æ ‡è¯†ç¬¦ï¼Œå·¦è¾¹æ˜¯ä½ç½®å‚æ•°ï¼Œå³è¾¹æ˜¯å…³é”®å­—å‚æ•°ã€‚</li>
<li>å‚æ•°ç±»å‹çš„å£°æ˜é¡ºåº
<ul>
<li>å¿…é¡»å‚æ•°</li>
<li>å¯é€‰å‚æ•°(æä¾›é»˜è®¤å€¼çš„å‚æ•°)</li>
<li><code>*args</code></li>
<li><code>**kwargs</code></li>
</ul>
</li>
</ul>
<h3 id="å‡½æ•°æ³¨è§£"> å‡½æ•°æ³¨è§£</h3>
<ul>
<li>pythonä¸­å¯¹å‚æ•°ç±»å‹(å‚æ•°åçš„å†’å·éƒ¨åˆ†)å’Œè¿”å›å€¼ç±»å‹(å‡½æ•°æ‹¬å·åï¼Œè¡Œå°¾å†’å·å‰çš„<code>-&gt;xx</code>éƒ¨åˆ†)çš„æè¿°æ–¹æ³•</li>
<li><code>def prepend_rows(row:list, prefix:str) -&gt; list:</code></li>
<li>è¿™äº›éƒ¨åˆ†å±äºæ³¨è§£è€Œéè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å†…å®¹æ˜¯æ— é™åˆ¶çš„ã€‚</li>
</ul>
<h2 id="lambda"> lambda</h2>
<ul>
<li><code>f = lambda x: x*x</code></li>
<li>è¯­æ³•: <code>lambda params:body</code>, <code>lambda: body</code></li>
<li>bodyå¿…é¡»æ˜¯è¿”å›ä¸€ä¸ªå€¼çš„å•ä¸ªè¡¨è¾¾å¼</li>
</ul>
<h2 id="ç±»"> ç±»</h2>
<h3 id="åŸºç¡€"> åŸºç¡€</h3>
<ul>
<li>pythonç±»å£°æ˜çš„ä¸»ä½“æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œå¯ä»¥åŒ…å«ä»»ä½•æœ‰æ•ˆçš„pythonä»£ç </li>
<li>åœ¨ç±»å£°æ˜ä¸­å£°æ˜çš„å˜é‡ä¼šæˆä¸ºç±»å¯¹è±¡çš„ä¸€ä¸ªå±æ€§(å³ï¼Œç±»ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´è®°å½•è¿™äº›å˜é‡)</li>
<li>super(Class, instance, ...) ä½¿ç”¨instanceçš„MROï¼Œä»Classä½ç½®å¼€å§‹å‘ä¸Šæ‰¾ã€‚</li>
</ul>
<h3 id="åŠ¨æ€åŠ è½½"> åŠ¨æ€åŠ è½½</h3>
<ul>
<li>pythonæ‰€æœ‰çš„ç±»éƒ½æ˜¯type()çš„å­ç±»</li>
<li>type()ç”¨äºå®ä¾‹åŒ–ç±»çš„ä¸‰éƒ¨åˆ†ä¿¡æ¯:
<ul>
<li>ç±»åç§°</li>
<li>åŸºç±»</li>
<li>å‘½åç©ºé—´å­—å…¸ï¼Œåœ¨æ‰§è¡Œç±»çš„ä¸»ä½“æ—¶è¢«å¡«å……</li>
</ul>
</li>
<li>type()ç§°ä¸ºå…ƒç±»</li>
</ul>
<div><pre><code><span>class</span> <span>A</span><span>(</span><span>int</span><span>)</span><span>:</span>
    spam <span>=</span> <span>'eggs'</span>

<span># ç­‰ä»·äº</span>
<span># ç¬¬ä¸€ä¸ªAæ˜¯ä¸ºäº†åˆ›å»ºç±»ï¼Œ ç¬¬äºŒä¸ªAæ˜¯ç”¨äºå°†ç±»åç»‘å®šåˆ°å‘½åç©ºé—´ï¼Œä¸¤è€…å¯ä»¥ä¸åŒ(å®é™…ç”¨æ—¶ä¹Ÿç¡®å®æ˜¯ä¸åŒçš„)</span>
A <span>=</span> <span>type</span><span>(</span><span>'A'</span><span>,</span> <span>(</span><span>int</span><span>,</span><span>)</span><span>,</span> <span>{</span><span>'spam'</span><span>:</span> <span>'eggs'</span><span>}</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h4 id="è‡ªå®šä¹‰å…ƒç±»"> è‡ªå®šä¹‰å…ƒç±»</h4>
<div><pre><code><span># é€šè¿‡ç»§æ‰¿typeè‡ªå®šä¹‰å…ƒç±»</span>
<span>class</span> <span>SimpleMeta</span><span>(</span><span>type</span><span>)</span><span>:</span>
    <span>def</span> <span>__init__</span><span>(</span>cls<span>,</span> name<span>,</span> bases<span>,</span> attrs<span>)</span><span>:</span>
        <span>print</span><span>(</span>name<span>)</span>
        <span>super</span><span>(</span>SimpleMeta<span>,</span> cls<span>)</span><span>.</span>__init__<span>(</span>name<span>,</span> bases<span>,</span> attrs<span>)</span>

<span># ä½¿ç”¨å…ƒç±»ï¼Œæ•ˆæœæ˜¯ï¼špythonä¼šè‡ªåŠ¨å°†ç±»å®šä¹‰ä¼ é€’ç»™å…ƒç±»è¿›è¡Œå¤„ç†</span>
<span>class</span> <span>Example</span><span>(</span>metaclass<span>=</span>SimpleMeta<span>)</span><span>:</span>
    <span>pass</span> <span># æ•ˆæœå’Œæ ‡å‡†ç±»å‹ä¸€æ ·</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><h3 id="æˆå‘˜å˜é‡"> æˆå‘˜å˜é‡</h3>
<ul>
<li>getattr() ç”¨åç§°æ£€ç´¢æˆå‘˜å˜é‡ è®¿é—®ç±»ä¸­ä¸å­˜åœ¨çš„æˆå‘˜å˜é‡æ—¶ä¼šè§¦å‘<code>__getattr__</code>(d['attr'])</li>
<li>setattr() ç”¨åç§°è®¾ç½®æˆå‘˜å˜é‡ è®¾ç½®ç±»æˆå‘˜æ—¶è§¦å‘<code>__setattr__</code>(d.attr = 'attr')</li>
<li>delattr() ç”¨åç§°åˆ é™¤æˆå‘˜å˜é‡ åˆ é™¤ç±»æˆå‘˜æ—¶è§¦å‘<code>__delattr__</code>(del d.attr)</li>
<li><code>__str__</code> toStringæ–¹æ³•</li>
<li><code>__repr__</code> åœ¨è§£é‡Šå™¨ä¸­å•ç‹¬å¼•ç”¨å¯¹è±¡æ—¶è§¦å‘</li>
</ul>
<h2 id="æ‰“åŒ…åˆ°pip"> æ‰“åŒ…åˆ°pip</h2>
<ul>
<li>æ–°å»ºæ–‡ä»¶å¤¹</li>
<li>å°†packageæ”¾è¿›å»(åŒ…å«__init__.py)</li>
<li>åœ¨æ ¹ç›®å½•æ–°å»ºsetup.py</li>
<li>åœ¨æ ¹ç›®å½•æ‰§è¡Œ
<ul>
<li>python setup.py bdist_wheel æ‰“åŒ…æˆwheel</li>
<li>python setup.py sdist æ‰“åŒ…æˆtar</li>
</ul>
</li>
<li>åœ¨æ‰“åŒ…å¥½çš„æ–‡ä»¶ç›®å½•ä¸‹pip install æ‰“åŒ…å¥½çš„æ–‡ä»¶å</li>
<li>pip uninstall setup.name å³å¯å¸è½½</li>
</ul>
<div><pre><code><span>from</span> setuptools <span>import</span> setup
<span>from</span> setuptools <span>import</span> find_packages

setup<span>(</span>name<span>=</span><span>'MySheet'</span><span>,</span>
      version<span>=</span><span>'0.1'</span><span>,</span>
      author<span>=</span><span>'hwk'</span><span>,</span>
      author_email<span>=</span><span>'abc@fg.com'</span><span>,</span>
      url<span>=</span><span>'https://hello.com'</span><span>,</span>
      packages<span>=</span>find_packages<span>(</span><span>)</span><span>,</span>
      zip_safe<span>=</span><span>False</span><span>,</span>
<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h2 id="anaconda"> anaconda</h2>
<h3 id="å¸¸ç”¨å‘½ä»¤"> å¸¸ç”¨å‘½ä»¤</h3>
<ul>
<li>conda list: æŸ¥çœ‹å®‰è£…äº†å“ªäº›åŒ…ã€‚</li>
<li>conda env list: æŸ¥çœ‹å½“å‰å­˜åœ¨å“ªäº›è™šæ‹Ÿç¯å¢ƒ</li>
<li>conda create -n your_env_name python=X.X: åˆ›å»ºpythonç‰ˆæœ¬ä¸ºX.Xã€åå­—ä¸ºyour_env_nameçš„è™šæ‹Ÿç¯å¢ƒã€‚your_env_nameæ–‡ä»¶å¯ä»¥åœ¨Anacondaå®‰è£…ç›®å½•envsæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°ã€‚</li>
<li>activate your_env_name: Windowsä¸‹æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</li>
<li>deactivate é€€å‡º</li>
<li>Linuxä¸‹ï¼Œæ¿€æ´»ï¼Œé€€å‡ºéƒ½åœ¨å¼€å¤´åŠ ä¸€ä¸ªsource</li>
<li>conda remove -n your_env_name --all: ç§»é™¤è™šæ‹Ÿç¯å¢ƒ</li>
<li>conda install package_name: åœ¨å½“å‰ç¯å¢ƒä¸­å®‰è£…åŒ…</li>
<li>conda install -n your_env_name package_name: åœ¨æŒ‡å®šç¯å¢ƒä¸­å®‰è£…åŒ…</li>
<li>update, removeè¯­æ³•å’Œinstallç›¸åŒ</li>
<li>conda search pname: æ¨¡ç³Šæœç´¢package</li>
<li>conda search --full-name pname: å…¨åæŸ¥æ‰¾</li>
<li>conda env export &gt; environment.yml: å¯¼å‡ºç¯å¢ƒé…ç½®</li>
<li>conda env create -f environment.yml: å¯¼å…¥ç¯å¢ƒé…ç½®</li>
</ul>
<h2 id="plt"> plt</h2>
<h3 id="markevery-æŒ‡å®šä¼šåœ¨å›¾ä¸Šæ ‡è®°çš„ç‚¹çš„ä½ç½®-é—´è·"> markevery--æŒ‡å®šä¼šåœ¨å›¾ä¸Šæ ‡è®°çš„ç‚¹çš„ä½ç½®ï¼Œé—´è·</h3>
<ul>
<li>markevery=3 æ¯ä¸‰ä¸ªæ•°æ®ç‚¹æ ‡è®°ä¸€ä¸ª(æ ‡è®°ï¼Œä¸æ ‡è®°ï¼Œä¸æ ‡è®°ï¼Œæ ‡è®°...)</li>
<li>markevery=(30, 3) ç¬¬30ä¸ªä¹‹åï¼Œæ¯ä¸‰ä¸ªæ•°æ®ç‚¹æ ‡è®°ä¸€ä¸ª</li>
<li><code>markevery=[1,2,3,4]</code> æ‰‹åŠ¨ç»™å‡ºéœ€è¦æ ‡è®°çš„ç‚¹</li>
<li>markevery=slice(30, 90, 3) åœ¨ç»™å®šçš„åŒºé—´(30, 90)å†…ï¼Œæ¯ä¸‰ä¸ªæ•°æ®ç‚¹æ ‡è®°ä¸€ä¸ª</li>
<li>æ•´å‹æ˜¯ä»¥æ•°æ®é¡ºåºä¸ºå‡†ï¼Œè‹¥æ˜¯æµ®ç‚¹å‹åˆ™ä»¥åæ ‡è½´é•¿åº¦ä¸ºå‡†ã€‚</li>
</ul>
<h3 id="æåæ ‡"> æåæ ‡</h3>
<ul>
<li>subplot_kw={'projection': 'polar'} æ˜ å°„åˆ°æåæ ‡ä¸Š</li>
</ul>
<h2 id="pytorch"> pytorch</h2>
<p>https://pytorch.org/get-started/locally/#windows-anaconda</p>
<h3 id="å¯é‡å¤æ€§"> å¯é‡å¤æ€§</h3>
<ul>
<li>torch.backends.cudnn.benchmark = False å›ºå®šcuDNNåœ¨ç¨‹åºè¿è¡Œæ—¶ä½¿ç”¨çš„å·ç§¯ç®—æ³•</li>
<li>torch.backends.cudnn.deterministic = True  ç¨‹åºè¿è¡Œæ—¶è®¾å®šçš„ç®—æ³•ä¹Ÿå¯èƒ½ä¸åŒï¼Œå°†å…¶ç¡®å®šä¸‹æ¥</li>
<li>torch.manual_seed(seed) è®¾ç½®CPUå’ŒCUDAçš„RNGç§å­</li>
<li>torch.cuda.manual_seed_all(seed) è®¾ç½®æ‰€æœ‰GPUçš„RNGç§å­</li>
<li>np.random.seed(seed) è®¾ç½®NumPyçš„å…¨å±€RNGç§å­</li>
</ul>
<h3 id="åŸºç¡€-2"> åŸºç¡€</h3>
<ul>
<li>å‡½æ•°ä»¥_ç»“å°¾ï¼Œè¯´æ˜å‡½æ•°ä¼šåŸåœ°ä¿®æ”¹è°ƒç”¨è€…</li>
<li>torch.matmul çŸ©é˜µä¹˜æ³•</li>
<li>torch.no_grad() ç¦æ­¢gradientæ“ä½œ</li>
<li>tensor.detach() å°†å¼ é‡ä»æ±‚æ¢¯åº¦æ—¶å»ºç«‹çš„è®¡ç®—å›¾ä¸­å»æ‰ï¼Œéœ€è¦å›ºå®šå‚æ•°æ—¶å¾ˆæœ‰ç”¨</li>
<li>tensor.cpu() åœ¨CPUå†…å­˜ä¸­è¿”å›å¯¹è±¡çš„copyï¼Œå¦‚æœå·²ç»åœ¨CPUäº†ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åš</li>
<li>tensor.item() å½“Tensoråªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè¿”å›ç›¸åº”çš„pythonåŸç”Ÿå¯¹è±¡</li>
<li>torch.mean(tensor) å¯ä»¥ç”¨dim=aixNumæŒ‡å®šè¦åœ¨å¤šç»´æ•°ç»„çš„é‚£ä¸ªç»´åº¦æ±‚mean, ç”¨keepdim=Trueå¯ä»¥è®©ç»“æœä»¥æŒ‡å®šçš„dimæ¶ˆå¤±ï¼Œä½†å…¶ä»–dimä¿ç•™çš„å½¢å¼æ˜¾ç¤ºã€‚</li>
<li>tensor.std()</li>
<li>tensor.squeeze(dim) å»é™¤æŒ‡å®šçš„åªæœ‰ä¸€ä¸ªå…ƒç´ çš„ç»´åº¦</li>
<li>tensor.unsqueeze(dim) æ·»åŠ ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„ç»´åº¦</li>
<li>dim=xï¼Œxä¸ºtensor.shapeçš„ç¬¬x+1ä¸ªå…ƒç´ </li>
<li>tensor.transpose(dim1, dim2) è½¬ç½®ä¸¤ä¸ªæŒ‡å®šç»´åº¦</li>
<li>torch.cat([x, y, z], dim=1) å°†å¼ é‡x,y,zåœ¨dim=1è½´ä¸Šåˆå¹¶</li>
<li>æ¨¡å‹çš„ä¿å­˜åŠ è½½
<ul>
<li>torch.save(model.state_dict(), PATH)</li>
<li>model = Model(*args, **kargs)</li>
<li>model.load_state_dict(torch.load(PATH))</li>
<li>model.eval()</li>
</ul>
</li>
<li>dataloader
<ul>
<li>drop_last=True å¦‚æœbatch_sizeä¸èƒ½è¢«æ ·æœ¬æ•°æ•´é™¤ï¼Œåˆ™ä¸¢å¼ƒæœ€åä¸€ä¸ªä¸å®Œæ•´çš„batchã€‚</li>
<li>pin_memory=True the data loader will copy Tensors into CUDA pinned memory(CUDAçš„å›ºå®šå†…å­˜ï¼Œå¯ç›´æ¥ç”¨ç‰©ç†åœ°å€è®¿é—®ï¼Œé€Ÿåº¦å¿«) before returning them.</li>
</ul>
</li>
</ul>
<ul>
<li>å¹¿æ’­æœºåˆ¶
<ul>
<li>æ¯ä¸ªå¼ é‡å¿…é¡»è‡³å°‘æœ‰1ç»´</li>
<li>ç»´æ•°éå†æ˜¯ä»æœ€åä¸€ç»´å¼€å§‹çš„ï¼Œå¯å¹¿æ’­çš„æ¡ä»¶æ˜¯ï¼Œä¸¤ä¸ªå¼ é‡ç›¸åº”çš„ç»´åº¦
<ul>
<li>ç›¸ç­‰</li>
<li>å…¶ä¸­ä¸€ä¸ªæ˜¯1</li>
<li>å…¶ä¸­ä¸€ä¸ªä¸å­˜åœ¨</li>
</ul>
</li>
<li>å…¶ä¸­
<ul>
<li>ç›¸ç­‰ï¼Œå°±æ˜¯æ­£å¸¸æƒ…å†µ</li>
<li>å…¶ä¸­ä¸€ä¸ªä¸å­˜åœ¨æ—¶ï¼Œå°±åŠ ä¸€ç»´ï¼Œä»¤å…¶æˆä¸º1</li>
<li>å…¶ä¸­ä¸€ä¸ªä¸º1ï¼Œä¼šå°†å…¶å¤åˆ¶æ‰©å¼ åˆ°å¦ä¸€ä¸ªå¼ é‡çš„å¤§å°</li>
</ul>
</li>
</ul>
</li>
<li>torch.normal(mean, std, size, *, out=None) â†’ Tensor ç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„éšæœºæ•°ç»„æˆçš„tensor</li>
</ul>
<h2 id="tqdm"> tqdm</h2>
<p>ç”¨åœ¨è¢«éå†çš„å¯è¿­ä»£å¯¹è±¡ä¸Šï¼Œè‡ªåŠ¨äº§ç”Ÿè¿›åº¦æ¡ã€‚</p>
<div><pre><code><span>from</span> tqdm <span>import</span> tqdm
<span>from</span> tqdm<span>.</span>notebook <span>import</span> tqdm_notebook
<span>import</span> time
<span>for</span> i <span>in</span> tqdm<span>(</span><span>range</span><span>(</span><span>20</span><span>)</span><span>,</span> desc<span>=</span><span>'Process Bar'</span><span>)</span><span>:</span>
    time<span>.</span>sleep<span>(</span><span>0.5</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Python"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">éšæœºæ•°</title>
    <id>https://kigane.github.io/blog/random/</id>
    <link href="https://kigane.github.io/blog/random/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å›ºå®šç§å­"> å›ºå®šç§å­</h2>
<p>np.random.seed(seed)</p>
<h2 id="å‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°"> å‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°</h2>
<h3 id="_0-1-å†…"> [0, 1)å†…</h3>
<div><pre><code><span># random.rand(d0, d1, ..., dn)</span>
np<span>.</span>random<span>.</span>rand<span>(</span><span>)</span> <span># è¿”å›å•ä¸ªéšæœºæ•°</span>
np<span>.</span>random<span>.</span>rand<span>(</span><span>3</span><span>,</span> <span>2</span><span>)</span> <span># è¿”å›(3, 2)çš„éšæœºæ•°æ•°ç»„</span>
<span>(</span>b <span>-</span> a<span>)</span> <span>*</span> np<span>.</span>random<span>.</span>rand<span>(</span><span>)</span> <span>+</span> a <span># [a, b)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="æŒ‡å®šèŒƒå›´å†…çš„ç¦»æ•£çš„"> æŒ‡å®šèŒƒå›´å†…çš„ç¦»æ•£çš„</h3>
<div><pre><code><span># random.randint(low, high=None, size=None, dtype=int)</span>
np<span>.</span>random<span>.</span>randint<span>(</span><span>1</span><span>,</span> <span>7</span><span>,</span> <span>(</span><span>6</span><span>,</span><span>)</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><h2 id="é«˜æ–¯åˆ†å¸ƒçš„éšæœºæ•°"> é«˜æ–¯åˆ†å¸ƒçš„éšæœºæ•°</h2>
<div><pre><code><span># random.randn(d0, d1, ..., dn)</span>
np<span>.</span>random<span>.</span>randn<span>(</span><span>)</span>
np<span>.</span>random<span>.</span>randn<span>(</span><span>3</span><span>,</span> <span>2</span><span>)</span>
mu <span>+</span> sigma <span>*</span> np<span>.</span>random<span>.</span>randn<span>(</span><span>3</span><span>,</span> <span>2</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h2 id="å…¶ä»–åˆ†å¸ƒ"> å…¶ä»–åˆ†å¸ƒ</h2>
<p>np.random.xx</p>
<ul>
<li>chisquare</li>
<li>gamma</li>
<li></li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="blog"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-05T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">ç»„ä»¶ç¦ç”¨</title>
    <id>https://kigane.github.io/guide/disable/</id>
    <link href="https://kigane.github.io/guide/disable/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <summary type="html"><![CDATA[<p>ä½ å¯ä»¥é€šè¿‡è®¾ç½®é¡µé¢çš„ Frontmatterï¼Œåœ¨é¡µé¢ç¦ç”¨ä¸€äº›åŠŸèƒ½ã€‚</p>
]]></summary>
    <content type="html"><![CDATA[<p>ä½ å¯ä»¥é€šè¿‡è®¾ç½®é¡µé¢çš„ Frontmatterï¼Œåœ¨é¡µé¢ç¦ç”¨ä¸€äº›åŠŸèƒ½ã€‚</p>

<p>æœ¬é¡µé¢åº”å½“ç¦ç”¨äº†:</p>
<ul>
<li>å¯¼èˆªæ </li>
<li>ä¾§è¾¹æ </li>
<li>è·¯å¾„å¯¼èˆª</li>
<li>é¡µé¢ä¿¡æ¯</li>
<li>è´¡çŒ®è€…</li>
<li>ç¼–è¾‘æ­¤é¡µé“¾æ¥</li>
<li>æ›´æ–°æ—¶é—´</li>
<li>ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡ é“¾æ¥</li>
<li>è¯„è®º</li>
<li>é¡µè„š</li>
<li>è¿”å›é¡¶éƒ¨æŒ‰é’®</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="ä½¿ç”¨æŒ‡å—"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">VuePress é»˜è®¤ä¸»é¢˜è®¾ç½®</title>
    <id>https://kigane.github.io/guide/configuration/</id>
    <link href="https://kigane.github.io/guide/configuration/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="frontmatter"> frontmatter</h2>
<p>å¿…é¡»åœ¨æ¯ä¸ª .md æ–‡ä»¶å¼€å¤´ï¼Œé€šå¸¸ä»¥ yaml æ ¼å¼è¡¨ç¤ºã€‚</p>
<div><pre><code><span>---</span>
<span>title</span><span>:</span> hello vuepress
<span>lang</span><span>:</span> zh<span>-</span>CN

<span>sidebarDepth</span><span>:</span> <span>2</span> 
<span>navbar</span><span>:</span> <span>false</span> 
<span>sidebar</span><span>:</span> <span>false</span>
<span>search</span><span>:</span> <span>false</span>
<span>tags</span><span>:</span>
  <span>-</span> configuration
  <span>-</span> theme
  <span>-</span> indexing
<span>prev</span><span>:</span> ./some<span>-</span>other<span>-</span>page
<span>next</span><span>:</span> <span>false</span>
<span>pageClass</span><span>:</span> custom<span>-</span>page<span>-</span>class
<span>layout</span><span>:</span> SpecialLayout
<span>---</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><ul>
<li>title ä¼šè‡ªåŠ¨ä½œä¸º sidebar çš„ä¸€çº§é“¾æ¥æ ‡é¢˜(ä¼˜å…ˆçº§ä½äºåœ¨ config.js ä¸­é…ç½®)ã€‚</li>
<li>sidebarDepth è§ä¸‹æ–‡å†…åµŒé“¾æ¥</li>
<li>navbar ç”¨äºåœ¨æœ¬é¡µé¢å…³é—­å¯¼èˆªæ </li>
<li>sidebar ç”¨äºåœ¨æœ¬é¡µé¢å…³é—­ä¾§è¾¹æ </li>
<li>search ç”¨äºåœ¨æœ¬é¡µé¢å…³é—­æœç´¢æ¡†</li>
<li>tag ç”¨äºæœç´¢(å†…ç½®çš„æœç´¢åªæœç´¢æ–‡ç« çš„ h2, h3 å’Œ frontmatter ä¸­è®¾ç½®çš„ tags)</li>
<li>prev æ–‡ç« åº•éƒ¨ï¼Œä¸Šä¸€ç¯‡æ–‡ç« çš„é“¾æ¥</li>
<li>next æ–‡ç« åº•éƒ¨ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« çš„é“¾æ¥</li>
<li>pageClass ä¸ºè¿™ä¸€é¡µè‡ªå®šä¹‰ä¸€ä¸ª classï¼Œç”¨äºåœ¨ .vuepress/styles/index.styl æ·»åŠ è‡ªå®šä¹‰ css</li>
<li>layout é€šå¸¸æ¯ä¸ª .md æ–‡ä»¶å†…å®¹éƒ½æ˜¯åœ¨å®¹å™¨ <code>&lt;div class=&quot;page&quot;&gt;</code> ä¸­æ¸²æŸ“çš„ï¼ŒåŒ…å«ä¾§è¾¹æ ï¼Œä¸Šä¸€ç¯‡ï¼Œä¸‹ä¸€ç¯‡é“¾æ¥ç­‰ã€‚ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®ä½¿ç”¨ç‰¹å®šçš„ vue ç»„ä»¶æ¸²æŸ“è¯¥ .md æ–‡ä»¶ã€‚(.vuepress/components/SpecialLayout.vue)</li>
</ul>
<h2 id="navbar"> navbar</h2>
<p>å¤–éƒ¨é“¾æ¥è‡ªåŠ¨è·å¾—ä¸¤ä¸ªå±æ€§ target=&quot;_blank&quot; &amp; rel=&quot;noopener noreferrer&quot;ã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚</p>
<ul>
<li>text æ˜¯æ˜¾ç¤ºçš„æ ‡é¢˜</li>
<li>ariaLabel ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</li>
<li>link å½“ç„¶å°±æ˜¯é“¾æ¥å•¦</li>
<li>items ç”¨äºå¥—å¨ƒï¼Œæœ€å¤šä¸¤å±‚(ç¬¬ä¸€å±‚æœ‰ä¸‹æ‹‰èœå•ï¼Œç¬¬äºŒå±‚ä¹‹é—´æœ‰åˆ†å‰²çº¿)ã€‚</li>
</ul>
<div><div><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre><code>themeConfig<span>:</span> <span>{</span>
    logo<span>:</span> <span>'/assets/img/ChernoLogo.png'</span><span>,</span> <span>// å·¦ä¸Šè§’çš„å›¾æ ‡</span>
    <span>// å¯¼èˆªæ </span>
    nav<span>:</span> <span>[</span>
      <span>{</span> text<span>:</span> <span>'Home'</span><span>,</span> link<span>:</span> <span>'/'</span> <span>}</span><span>,</span>
      <span>{</span> text<span>:</span> <span>'Guide'</span><span>,</span> link<span>:</span> <span>'/guide/'</span> <span>}</span><span>,</span>
      <span>{</span> text<span>:</span> <span>'External'</span><span>,</span> link<span>:</span> <span>'https://google.com'</span> <span>,</span> target<span>:</span><span>'_self'</span><span>,</span> rel<span>:</span><span>false</span> <span>}</span><span>,</span>
      <span>{</span>
        text<span>:</span> <span>'Languages'</span><span>,</span>
        ariaLabel<span>:</span> <span>'Language Menu'</span><span>,</span>
        items<span>:</span> <span>[</span> <span>// è¿˜å¯ä»¥ç»§ç»­å¥—å¨ƒ</span>
          <span>{</span>
            text<span>:</span> <span>'Chinese'</span><span>,</span>
            ariaLabel<span>:</span> <span>'Chinese Menu'</span><span>,</span> <span>// æ²¡å•¥ç”¨å•Šï¼Œè¿™å±æ€§</span>
            items<span>:</span> <span>[</span>
              <span>{</span> text<span>:</span> <span>'ah'</span><span>,</span> link<span>:</span> <span>'https://google.com'</span> <span>}</span><span>,</span>
              <span>{</span> text<span>:</span> <span>'nj'</span><span>,</span> link<span>:</span> <span>'https://google.com'</span> <span>}</span><span>,</span>
            <span>]</span>
          <span>}</span><span>,</span>
          <span>{</span>
            text<span>:</span> <span>'English'</span><span>,</span>
            ariaLabel<span>:</span> <span>'English Menu'</span><span>,</span> <span>// æ²¡å•¥ç”¨å•Šï¼Œè¿™å±æ€§</span>
            items<span>:</span> <span>[</span>
              <span>{</span> text<span>:</span> <span>'sf'</span><span>,</span> link<span>:</span> <span>'https://google.com'</span> <span>}</span><span>,</span>
              <span>{</span> text<span>:</span> <span>'ny'</span><span>,</span> link<span>:</span> <span>'https://google.com'</span> <span>}</span><span>,</span>
            <span>]</span>
          <span>}</span><span>,</span>
        <span>]</span>
      <span>}</span>
    <span>]</span><span>,</span>

</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br></div></div><h2 id="sidebar"> sidebar</h2>
<div><pre><code><span>// .vuepress/config.js</span>
module<span>.</span>exports <span>=</span> <span>{</span>
  themeConfig<span>:</span> <span>{</span>
    sidebar<span>:</span> <span>[</span>
      <span>'/'</span><span>,</span>
      <span>'/page-a'</span><span>,</span>
      <span>[</span><span>'/page-b'</span><span>,</span> <span>'æ˜¾ç¤ºæŒ‡å®šé“¾æ¥æ ‡é¢˜'</span><span>]</span>
    <span>]</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>æŒ‡å®šè·¯å¾„æ—¶ï¼Œå¯ä»¥å¿½ç•¥.mdåç¼€ï¼Œä»¥'path/'ç»“å°¾çš„è·¯å¾„ï¼Œå¯¹åº”çš„å†…å®¹ä¸º path/README.mdã€‚å¦‚æœéœ€è¦æ˜¾ç¤ºæŒ‡å®šæ ‡é¢˜ï¼Œåˆ™å¦‚ä¾‹å­ä¸­çš„ç¬¬ä¸‰è¡Œã€‚</p>
<h3 id="å†…åµŒé“¾æ¥"> å†…åµŒé“¾æ¥</h3>
<p>é»˜è®¤æŠ“å– Markdown æ–‡æ¡£çš„æ‰€æœ‰äºŒçº§æ ‡é¢˜ä½œä¸ºå½“å‰é“¾æ¥çš„å­é“¾æ¥ã€‚å¯¹åº”çš„è®¾ç½®ä¸º themeConfig.sidebarDepth = 1ã€‚</p>
<p>sidebarDepth = 0 è¡¨ç¤ºæ²¡æœ‰å­é“¾æ¥ã€‚
sidebarDepth = 2 ä¼šæŠ“å–h2,h3ä½œä¸ºå­é“¾æ¥ã€‚æœ€å¤§å±‚æ¬¡å°±æ˜¯2ã€‚æ•ˆæœè§æœ¬æ–‡ã€‚</p>
<p>è¿™ä¸ªè®¾ç½®é™¤äº†åœ¨é…ç½®ä¸­æ”¹ï¼Œä¹Ÿå¯ä»¥åœ¨ .md çš„ frontmatter éƒ¨åˆ†æ”¹ã€‚</p>
<div><pre><code><span>---</span>
<span>sidebarDepth</span><span>:</span> <span>0</span>
<span>---</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id="å±•å¼€æ‰€æœ‰å­é“¾æ¥"> å±•å¼€æ‰€æœ‰å­é“¾æ¥</h3>
<div><pre><code><span>// .vuepress/config.js</span>
module<span>.</span>exports <span>=</span> <span>{</span>
  themeConfig<span>:</span> <span>{</span>
    displayAllHeaders<span>:</span> <span>true</span> <span>// Default: false</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h3 id="å¯¼èˆªæ åˆ†ç»„"> å¯¼èˆªæ åˆ†ç»„</h3>
<p>é¡¾åæ€ä¹‰</p>
<div><pre><code>sidebar<span>:</span> <span>[</span>
      <span>{</span>
        title<span>:</span> <span>'Group1'</span><span>,</span> <span>// å¿…é¡»è¦æœ‰åˆ†ç»„å</span>
        collapsable<span>:</span> <span>false</span><span>,</span> <span>// é»˜è®¤æ˜¯æŠ˜å ï¼Œè®¾ä¸º true è¡¨ç¤ºç›´æ¥å±•å¼€</span>
        children<span>:</span> <span>[</span><span>'/blog/'</span><span>,</span> <span>'/blog/test'</span><span>]</span> <span>// æœ‰å¤šä¸ªåˆ†ç»„æˆå‘˜</span>
      <span>}</span><span>,</span>
      <span>{</span> <span>// åªæœ‰ä¸€ä¸ªåˆ†ç»„æˆå‘˜</span>
        title<span>:</span> <span>'Group2'</span><span>,</span>
        path<span>:</span> <span>'/guide/'</span><span>,</span>
      <span>}</span><span>,</span>
      <span>'/'</span><span>,</span>
    <span>]</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h3 id="å¤šé‡ä¾§è¾¹æ "> å¤šé‡ä¾§è¾¹æ </h3>
<p>ä¸åŒçš„åˆ†åŒºå¯ä»¥å¯¹åº”ä¸åŒçš„ä¾§è¾¹å¯¼èˆªæ ã€‚<br>
<strong>fallback å¿…é¡»æ”¾åœ¨æœ€åï¼</strong><br>
auto çš„æ„æ€æ˜¯è¿™ä¸€ä¸ª md è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå®ƒç‹¬å çš„ä¾§è¾¹æ ã€‚</p>
<div><div><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br></div><pre><code>sidebar<span>:</span> <span>{</span>
      <span>'/foo/'</span><span>:</span> <span>[</span>
        <span>''</span><span>,</span>     <span>/* /foo/ */</span>
        <span>'one'</span><span>,</span>  <span>/* /foo/one.html */</span>
        <span>'two'</span>   <span>/* /foo/two.html */</span>
      <span>]</span><span>,</span>

      <span>'/bar/'</span><span>:</span> <span>[</span>
        <span>''</span><span>,</span>      <span>/* /bar/ */</span>
        <span>'three'</span><span>,</span> <span>/* /bar/three.html */</span>
        <span>'four'</span>   <span>/* /bar/four.html */</span>
      <span>]</span><span>,</span>

      <span>'/baz/'</span><span>:</span> <span>'auto'</span><span>,</span> <span>/* automatically generate single-page sidebars */</span>

      <span>// fallback</span>
      <span>'/'</span><span>:</span> <span>[</span>
        <span>''</span><span>,</span>        <span>/* / */</span>
        <span>'contact'</span><span>,</span> <span>/* /contact.html */</span>
        <span>'about'</span>    <span>/* /about.html */</span>
      <span>]</span>
    <span>}</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><h2 id="code-groups"> code groups</h2>
<p>CodeGroupItemä¹‹é—´éœ€è¦ç©ºä¸€è¡Œ</p>
<div><pre><code><span><span><span>&lt;</span>CodeGroup</span><span>></span></span>
<span><span><span>&lt;</span>CodeGroupItem</span> <span>title</span><span><span>=</span><span>"</span>YARN<span>"</span></span><span>></span></span>
\`\`\`bash
yarn create vuepress-site [optionalDirectoryName]
\`\`\`
<span><span><span>&lt;/</span>CodeGroupItem</span><span>></span></span>

<span><span><span>&lt;</span>CodeGroupItem</span> <span>title</span><span><span>=</span><span>"</span>NPM<span>"</span></span><span>></span></span>
\`\`\`bash
npx create-vuepress-site [optionalDirectoryName]
\`\`\`
<span><span><span>&lt;/</span>CodeGroupItem</span><span>></span></span>
<span><span><span>&lt;/</span>CodeGroup</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>æ•ˆæœå¦‚ä¸‹</p>
<CodeGroup>
<CodeGroupItem title="YARN">
<div><pre><code><span>yarn</span> create vuepress-site <span>[</span>optionalDirectoryName<span>]</span>
</code></pre>
<div><span>1</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="NPM">
<div><pre><code>npx create-vuepress-site <span>[</span>optionalDirectoryName<span>]</span>
</code></pre>
<div><span>1</span><br></div></div></CodeGroupItem>
</CodeGroup>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">å¯†ç åŠ å¯†çš„æ–‡ç« </title>
    <id>https://kigane.github.io/guide/encrypt/</id>
    <link href="https://kigane.github.io/guide/encrypt/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h1 id="å¯†ç åŠ å¯†çš„æ–‡ç« "> å¯†ç åŠ å¯†çš„æ–‡ç« </h1>
<p>å®é™…çš„æ–‡ç« å†…å®¹ã€‚</p>
<p>æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—æ®µè½ 1 æ–‡å­—ã€‚</p>
<p>æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—æ®µè½ 2 æ–‡å­—ã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="ä½¿ç”¨æŒ‡å—"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Markdown å¢å¼º</title>
    <id>https://kigane.github.io/guide/markdown/</id>
    <link href="https://kigane.github.io/guide/markdown/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <summary type="html"><![CDATA[<p><code>vuepress-theme-hope</code> é€šè¿‡å†…ç½® <a href="https://vuepress-theme-hope.github.io/md-enhance" target="_blank" rel="noopener noreferrer">md-enhance</a>ï¼Œåœ¨ Markdown ä¸­å¯ç”¨äº†æ›´å¤šçš„è¯­æ³•ä¸æ–°åŠŸèƒ½ã€‚</p>
]]></summary>
    <content type="html"><![CDATA[<p><code>vuepress-theme-hope</code> é€šè¿‡å†…ç½® <a href="https://vuepress-theme-hope.github.io/md-enhance" target="_blank" rel="noopener noreferrer">md-enhance</a>ï¼Œåœ¨ Markdown ä¸­å¯ç”¨äº†æ›´å¤šçš„è¯­æ³•ä¸æ–°åŠŸèƒ½ã€‚</p>

<h2 id="ä¸€é”®å¯ç”¨"> ä¸€é”®å¯ç”¨</h2>
<p>ä½ å¯ä»¥è®¾ç½® <code>themeconfig.mdEnhance.enableAll</code> å¯ç”¨ <a href="https://vuepress-theme-hope.github.io/md-enhance" target="_blank" rel="noopener noreferrer">md-enhance</a> æ’ä»¶çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p>
<div><div><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  themeConfig<span>:</span> <span>{</span>
    mdEnhance<span>:</span> <span>{</span>
      enableAll<span>:</span> <span>true</span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id="æ–°å¢çš„æ›´å¤šè¯­æ³•"> æ–°å¢çš„æ›´å¤šè¯­æ³•</h2>
<h3 id="ä¸Šä¸‹è§’æ ‡"> ä¸Šä¸‹è§’æ ‡</h3>
<p>19<sup>th</sup> H<sub>2</sub>O</p>
<details><summary>ä»£ç </summary>
<div><pre><code>19^th^ H<span><span>~</span><span>2</span><span>~</span></span>O
</code></pre>
<div><span>1</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/sup-sub/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="è‡ªå®šä¹‰å¯¹é½"> è‡ªå®šä¹‰å¯¹é½</h3>
<p>::: center</p>
<p>æˆ‘æ˜¯å±…ä¸­çš„</p>
<p>:::</p>
<p>::: right</p>
<p>æˆ‘åœ¨å³å¯¹é½</p>
<p>:::</p>
<details><summary>ä»£ç </summary>
<div><pre><code>::: center

æˆ‘æ˜¯å±…ä¸­çš„

:::

::: right

æˆ‘åœ¨å³å¯¹é½

:::
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/align/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="è„šæ³¨"> è„šæ³¨</h3>
<p>æ­¤æ–‡å­—æœ‰è„šæ³¨<sup></sup>.</p>
<details><summary>ä»£ç </summary>
<div><pre><code>æ­¤æ–‡å­—æœ‰è„šæ³¨[^first].

<span><span>[</span><span>^first</span><span>]</span><span>:</span> è¿™æ˜¯è„šæ³¨å†…å®¹</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/footnote/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="æ ‡è®°"> æ ‡è®°</h3>
<p>ä½ å¯ä»¥æ ‡è®° ==é‡è¦çš„å†…å®¹== ã€‚</p>
<details><summary>ä»£ç </summary>
<div><pre><code>ä½ å¯ä»¥æ ‡è®° ==é‡è¦çš„å†…å®¹== ã€‚
</code></pre>
<div><span>1</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/mark/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="ä»»åŠ¡åˆ—è¡¨"> ä»»åŠ¡åˆ—è¡¨</h3>
<ul>
<li>[x] è®¡åˆ’ 1</li>
<li>[ ] è®¡åˆ’ 2</li>
</ul>
<details><summary>Code</summary>
<div><pre><code><span>-</span> [x] è®¡åˆ’ 1
<span>-</span> [ ] è®¡åˆ’ 2
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/guide/markdown/tasklist/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="æµç¨‹å›¾"> æµç¨‹å›¾</h3>
<i>Not supported content</i><details><summary>ä»£ç </summary>
<div><pre><code><span><span>```</span><span>flow</span>
<span>cond=>condition: Process?
process=>operation: Process
e=>end: End

cond(yes)->process->e
cond(no)->e</span>
<span>```</span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/flowchart/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h2 id="mermaid"> Mermaid</h2>
<Mermaid id="mermaid-64a57026" data-code="sequenceDiagram%0A%20%20%20%20Alice%20-%3E%3E%20Bob%3A%20Hello%20Bob%2C%20how%20are%20you%3F%0A%20%20%20%20Bob--%3E%3EJohn%3A%20How%20about%20you%20John%3F%0A%20%20%20%20Bob--x%20Alice%3A%20I%20am%20good%20thanks!%0A%20%20%20%20Bob-x%20John%3A%20I%20am%20good%20thanks!%0A%20%20%20%20Note%20right%20of%20John%3A%20Bob%20thinks%20a%20long%3Cbr%2F%3Elong%20time%2C%20so%20long%3Cbr%2F%3Ethat%20the%20text%20does%3Cbr%2F%3Enot%20fit%20on%20a%20row.%0A%0A%20%20%20%20Bob--%3EAlice%3A%20Checking%20with%20John...%0A%20%20%20%20Alice-%3EJohn%3A%20Yes...%20John%2C%20how%20are%20you%3F%0A"></Mermaid><details><summary>ä»£ç </summary>
<div><pre><code>```sequence
Alice ->> Bob: Hello Bob, how are you?
Bob-->>John: How about you John?
Bob--x Alice: I am good thanks!
Bob-x John: I am good thanks!
Note right of John: Bob thinks a long<span><span><span>&lt;</span>br</span><span>/></span></span>long time, so long<span><span><span>&lt;</span>br</span><span>/></span></span>that the text does<span><span><span>&lt;</span>br</span><span>/></span></span>not fit on a row.

Bob-->Alice: Checking with John...
Alice->John: Yes... John, how are you?
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><div><pre><code>
</code></pre>
<div><span>1</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/mermaid/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="tex-è¯­æ³•"> Tex è¯­æ³•</h3>
<p class='katex-block'><span><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:2.4em;vertical-align:-0.95em;"></span><span><span></span><span><span><span><span style="height:1.3714em;"><span style="top:-2.314em;"><span style="height:3em;"></span><span><span style="margin-right:0.05556em;">âˆ‚</span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span style="height:3em;"></span><span style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span style="height:3em;"></span><span><span><span style="margin-right:0.05556em;">âˆ‚</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.686em;"><span></span></span></span></span></span><span></span></span><span style="margin-right:0.1667em;"></span><span><span style="top:0em;"><span>(</span></span><span><span></span><span><span><span><span style="height:1.3414em;"><span style="top:-2.314em;"><span style="height:3em;"></span><span><span style="margin-right:0.03588em;">Ï‰</span></span></span><span style="top:-3.23em;"><span style="height:3em;"></span><span style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span style="height:3em;"></span><span><span><span style="margin-right:0.03588em;">y</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span style="margin-right:0.03588em;">Ï‰</span></span></span></span></span></span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.686em;"><span></span></span></span></span></span><span></span></span><span style="top:0em;"><span>)</span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:3.0277em;vertical-align:-1.2777em;"></span><span><span style="top:0em;"><span>(</span></span><span><span></span><span><span><span><span style="height:1.3414em;"><span style="top:-2.314em;"><span style="height:3em;"></span><span><span style="margin-right:0.03588em;">Ï‰</span></span></span><span style="top:-3.23em;"><span style="height:3em;"></span><span style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span style="height:3em;"></span><span><span><span style="margin-right:0.03588em;">y</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span style="margin-right:0.03588em;">Ï‰</span></span></span></span></span></span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.686em;"><span></span></span></span></span></span><span></span></span><span style="top:0em;"><span>)</span></span></span><span style="margin-right:0.1667em;"></span><span><span style="top:0em;"><span>{</span></span><span>(</span><span>lo<span style="margin-right:0.01389em;">g</span></span><span style="margin-right:0.1667em;"></span><span style="margin-right:0.03588em;">y</span><span><span>)</span><span><span><span><span style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>+</span><span style="margin-right:0.2222em;"></span><span><span><span><span style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>i</span><span>=</span><span>1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;"></span><span><span>âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;"></span><span><span style="margin-right:0.02778em;">r</span></span></span></span><span>â€‹</span></span><span><span style="height:1.2777em;"><span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span><span></span><span><span><span><span style="height:1.5017em;"><span style="top:-2.314em;"><span style="height:3em;"></span><span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.7507em;"><span style="top:-2.989em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span style="height:3em;"></span><span style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span style="height:3em;"></span><span><span>(</span><span>âˆ’</span><span>1</span><span><span>)</span><span><span><span><span style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>i</span></span></span></span></span></span></span></span><span style="margin-right:0.02778em;">r</span><span style="margin-right:0.1667em;"></span><span>â‹¯</span><span style="margin-right:0.1667em;"></span><span>(</span><span style="margin-right:0.02778em;">r</span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span><span>i</span><span style="margin-right:0.2222em;"></span><span>+</span><span style="margin-right:0.2222em;"></span><span>1</span><span>)</span><span>(</span><span>lo<span style="margin-right:0.01389em;">g</span></span><span style="margin-right:0.1667em;"></span><span style="margin-right:0.03588em;">y</span><span><span>)</span><span><span><span><span style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span style="margin-right:0.02778em;">r</span><span>âˆ’</span><span>i</span></span></span></span></span></span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.686em;"><span></span></span></span></span></span><span></span></span><span style="top:0em;"><span>}</span></span></span></span></span></span></span></p>
<details><summary>ä»£ç </summary>
<div><pre><code>$$
\frac {\partial^r} {\partial \omega^r} \left(\frac {y^{\omega}} {\omega}\right)
= \left(\frac {y^{\omega}} {\omega}\right) \left\{(\log y)^r + \sum_{i=1}^r \frac {(-1)^i r \cdots (r-i+1) (\log y)^{r-i}} {\omega^i} \right\}
$$
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/tex/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="ä»£ç æ¡ˆä¾‹"> ä»£ç æ¡ˆä¾‹</h3>

          <div
            id="code-demo-5ac6bc9f"
           
  
 data-title="%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%20Demo"

            data-code="%7B%22html%22%3A%22%3Ch1%3EMr.Hope%3C%2Fh1%3E%5Cn%3Cp%3E%3Cspan%20id%3D%5C%22very%5C%22%3E%E5%8D%81%E5%88%86%3C%2Fspan%3E%20%E5%B8%85%3C%2Fp%3E%5Cn%22%2C%22js%22%3A%22document.querySelector(%5C%22%23very%5C%22).addEventListener(%5C%22click%5C%22%2C%20()%20%3D%3E%20%7B%5Cn%20%20alert(%5C%22%E5%8D%81%E5%88%86%E5%B8%85%5C%22)%3B%5Cn%7D)%3B%5Cn%22%2C%22css%22%3A%22span%20%7B%5Cn%20%20color%3A%20red%3B%5Cn%7D%5Cn%22%7D"
          >
              
              <div>
                <div>
<div><pre><code><span><span><span>&lt;</span>h1</span><span>></span></span>Mr.Hope<span><span><span>&lt;/</span>h1</span><span>></span></span>
<span><span><span>&lt;</span>p</span><span>></span></span><span><span><span>&lt;</span>span</span> <span>id</span><span><span>=</span><span>"</span>very<span>"</span></span><span>></span></span>ååˆ†<span><span><span>&lt;/</span>span</span><span>></span></span> å¸…<span><span><span>&lt;/</span>p</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><div><pre><code>document<span>.</span><span>querySelector</span><span>(</span><span>"#very"</span><span>)</span><span>.</span><span>addEventListener</span><span>(</span><span>"click"</span><span>,</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>alert</span><span>(</span><span>"ååˆ†å¸…"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>span</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>
            </div>
          </div>
          
        </div>
<details><summary>ä»£ç </summary>
<div><pre><code>::: demo ä¸€ä¸ªæ™®é€š Demo

<span><span>```</span><span>html</span>
<span><span><span><span>&lt;</span>h1</span><span>></span></span>Mr.Hope<span><span><span>&lt;/</span>h1</span><span>></span></span>
<span><span><span>&lt;</span>p</span><span>></span></span><span><span><span>&lt;</span>span</span> <span>id</span><span><span>=</span><span>"</span>very<span>"</span></span><span>></span></span>ååˆ†<span><span><span>&lt;/</span>span</span><span>></span></span> å¸…<span><span><span>&lt;/</span>p</span><span>></span></span></span>
<span>```</span></span>

<span><span>```</span><span>js</span>
<span>document<span>.</span><span>querySelector</span><span>(</span><span>"#very"</span><span>)</span><span>.</span><span>addEventListener</span><span>(</span><span>"click"</span><span>,</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>alert</span><span>(</span><span>"ååˆ†å¸…"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span></span>
<span>```</span></span>

<span><span>```</span><span>css</span>
<span><span>span</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
<span>}</span></span>
<span>```</span></span>

:::
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div></details>

          <div
            id="code-demo-693e1878"
           
  data-type="react"
 data-title="%E4%B8%80%E4%B8%AA%20React%20Demo"

            data-code="%7B%22js%22%3A%22export%20default%20class%20App%20extends%20React.Component%20%7B%5Cn%20%20constructor(props)%20%7B%5Cn%20%20%20%20super(props)%3B%5Cn%20%20%20%20this.state%20%3D%20%7B%20message%3A%20%5C%22%E5%8D%81%E5%88%86%E5%B8%85%5C%22%20%7D%3B%5Cn%20%20%7D%5Cn%20%20render()%20%7B%5Cn%20%20%20%20return%20(%5Cn%20%20%20%20%20%20%3Cdiv%20className%3D%5C%22box-react%5C%22%3E%5Cn%20%20%20%20%20%20%20%20Mr.Hope%20%3Cspan%3E%7Bthis.state.message%7D%3C%2Fspan%3E%5Cn%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20)%3B%5Cn%20%20%7D%5Cn%7D%5Cn%22%2C%22css%22%3A%22.box-react%20span%20%7B%5Cn%20%20color%3A%20red%3B%5Cn%7D%5Cn%22%7D"
          >
              
              <div>
                <div>
<div><pre><code><span>export</span> <span>default</span> <span>class</span> <span>App</span> <span>extends</span> <span>React<span>.</span>Component</span> <span>{</span>
  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>
    <span>super</span><span>(</span>props<span>)</span><span>;</span>
    <span>this</span><span>.</span>state <span>=</span> <span>{</span> message<span>:</span> <span>"ååˆ†å¸…"</span> <span>}</span><span>;</span>
  <span>}</span>
  <span>render</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>(</span>
      <span>&lt;</span>div className<span>=</span><span>"box-react"</span><span>></span>
        Mr<span>.</span>Hope <span>&lt;</span>span<span>></span><span>{</span><span>this</span><span>.</span>state<span>.</span>message<span>}</span><span>&lt;</span><span>/</span>span<span>></span>
      <span>&lt;</span><span>/</span>div<span>></span>
    <span>)</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><div><pre><code><span>.box-react span</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>
            </div>
          </div>
          
        </div>
<details><summary>ä»£ç </summary>
<div><pre><code>::: demo [react] ä¸€ä¸ª React Demo

<span><span>```</span><span>js</span>
<span><span>export</span> <span>default</span> <span>class</span> <span>App</span> <span>extends</span> <span>React<span>.</span>Component</span> <span>{</span>
  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>
    <span>super</span><span>(</span>props<span>)</span><span>;</span>
    <span>this</span><span>.</span>state <span>=</span> <span>{</span> message<span>:</span> <span>"ååˆ†å¸…"</span> <span>}</span><span>;</span>
  <span>}</span>
  <span>render</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>(</span>
      <span>&lt;</span>div className<span>=</span><span>"box-react"</span><span>></span>
        Mr<span>.</span>Hope <span>&lt;</span>span<span>></span><span>{</span><span>this</span><span>.</span>state<span>.</span>message<span>}</span><span>&lt;</span><span>/</span>span<span>></span>
      <span>&lt;</span><span>/</span>div<span>></span>
    <span>)</span><span>;</span>
  <span>}</span>
<span>}</span></span>
<span>```</span></span>

<span><span>```</span><span>css</span>
<span><span>.box-react span</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
<span>}</span></span>
<span>```</span></span>

:::
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div></details>

          <div
            id="code-demo-2c0b9cdb"
           
  data-type="vue"
 data-title="%E4%B8%80%E4%B8%AA%20Vue%20Demo"

            data-code="%7B%22vue%22%3A%22%3Ctemplate%3E%5Cn%20%20%3Cdiv%20class%3D%5C%22box%5C%22%3E%5Cn%20%20%20%20Mr.Hope%20%3Cspan%3E%7B%7B%20message%20%7D%7D%3C%2Fspan%3E%5Cn%20%20%3C%2Fdiv%3E%5Cn%3C%2Ftemplate%3E%5Cn%3Cscript%3E%5Cnexport%20default%20%7B%5Cn%20%20data%3A%20()%20%3D%3E%20(%7B%20message%3A%20%5C%22%E5%8D%81%E5%88%86%E5%B8%85%5C%22%20%7D)%2C%5Cn%7D%3B%5Cn%3C%2Fscript%3E%5Cn%3Cstyle%3E%5Cn.box%20span%20%7B%5Cn%20%20color%3A%20red%3B%5Cn%7D%5Cn%3C%2Fstyle%3E%5Cn%22%7D"
          >
              
              <div>
                <div>
<div><pre><code><span><span><span>&lt;</span>template</span><span>></span></span>
  <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box<span>"</span></span><span>></span></span>
    Mr.Hope <span><span><span>&lt;</span>span</span><span>></span></span>{{ message }}<span><span><span>&lt;/</span>span</span><span>></span></span>
  <span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;/</span>template</span><span>></span></span>
<span><span><span>&lt;</span>script</span><span>></span></span><span><span>
<span>export</span> <span>default</span> <span>{</span>
  <span>data</span><span>:</span> <span>(</span><span>)</span> <span>=></span> <span>(</span><span>{</span> message<span>:</span> <span>"ååˆ†å¸…"</span> <span>}</span><span>)</span><span>,</span>
<span>}</span><span>;</span>
</span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.box span</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div>
            </div>
          </div>
          
        </div>
<details><summary>ä»£ç </summary>
<div><pre><code>::: demo [vue] ä¸€ä¸ª Vue Demo

<span><span>```</span><span>vue</span>
<span>&lt;template>
  &lt;div>
    Mr.Hope &lt;span>{{ message }}&lt;/span>
  &lt;/div>
&lt;/template>
&lt;script>
export default {
  data: () => ({ message: "ååˆ†å¸…" }),
};
&lt;/script>
&lt;style>
.box span {
  color: red;
}
&lt;/style></span>
<span>```</span></span>

:::
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div></details>

          <div
            id="code-demo-2869b0e2"
           
  
 data-title="%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%20Demo"

            data-code="%7B%22md%22%3A%22%23%20%E6%A0%87%E9%A2%98%5Cn%5Cn%E5%8D%81%E5%88%86%E5%B8%85%5Cn%22%2C%22ts%22%3A%22const%20message%3A%20string%20%3D%20%5C%22Mr.Hope%5C%22%3B%5Cn%5Cndocument.querySelector(%5C%22h1%5C%22).innerHTML%20%3D%20message%3B%5Cn%22%2C%22scss%22%3A%22h1%20%7B%5Cn%20%20font-style%3A%20italic%3B%5Cn%5Cn%20%20%2B%20p%20%7B%5Cn%20%20%20%20color%3A%20red%3B%5Cn%20%20%7D%5Cn%7D%5Cn%22%7D"
          >
              
              <div>
                <div>
<div><pre><code><span><span>#</span> æ ‡é¢˜</span>

ååˆ†å¸…
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>const</span> message<span>:</span> <span>string</span> <span>=</span> <span>"Mr.Hope"</span><span>;</span>

document<span>.</span><span>querySelector</span><span>(</span><span>"h1"</span><span>)</span><span>.</span>innerHTML <span>=</span> message<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>h1 </span><span>{</span>
  <span>font-style</span><span>:</span> italic<span>;</span>

  <span>+ p </span><span>{</span>
    <span>color</span><span>:</span> red<span>;</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div>
            </div>
          </div>
          
        </div>
<details><summary>ä»£ç </summary>
<div><pre><code>::: demo ä¸€ä¸ªæ™®é€š Demo

<span><span>```</span><span>md</span>
<span><span><span>#</span> æ ‡é¢˜</span>

ååˆ†å¸…</span>
<span>```</span></span>

<span><span>```</span><span>ts</span>
<span><span>const</span> message<span>:</span> <span>string</span> <span>=</span> <span>"Mr.Hope"</span><span>;</span>

document<span>.</span><span>querySelector</span><span>(</span><span>"h1"</span><span>)</span><span>.</span>innerHTML <span>=</span> message<span>;</span></span>
<span>```</span></span>

<span><span>```</span><span>scss</span>
<span><span>h1 </span><span>{</span>
  <span>font-style</span><span>:</span> italic<span>;</span>

  <span>+ p </span><span>{</span>
    <span>color</span><span>:</span> red<span>;</span>
  <span>}</span>
<span>}</span></span>
<span>```</span></span>

:::
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/demo/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h3 id="å¹»ç¯ç‰‡"> å¹»ç¯ç‰‡</h3>
<i>Not supported content</i><details><summary>ä»£ç </summary>
<div><pre><code>@slidestart

<span><span>##</span> å¹»ç¯ç‰‡ 1</span>

ä¸€ä¸ªæœ‰æ–‡å­—å’Œ <span>[<span>é“¾æ¥</span>](<span>https://mrhope.site</span>)</span> çš„æ®µè½

<span>---</span>

<span><span>##</span> å¹»ç¯ç‰‡ 2</span>

<span>-</span> åˆ—è¡¨ 1
<span>-</span> åˆ—è¡¨ 2

<span>---</span>

<span><span>##</span> å¹»ç¯ç‰‡ 3.1</span>

<span><span>```</span><span>js</span>
<span><span>const</span> a <span>=</span> <span>1</span><span>;</span></span>
<span>```</span></span>

--

<span><span>##</span> å¹»ç¯ç‰‡ 3.2</span>

$$
J(\theta_0,\theta_1) = \sum_{i=0}
$$

@slideend
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></div></div></details>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/zh/guide/markdown/presentation/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></li>
</ul>
<h2 id="å…¶ä»–è¯­æ³•"> å…¶ä»–è¯­æ³•</h2>
<div><p>è‡ªå®šä¹‰æ ‡é¢˜</p>
<p>ä¿¡æ¯å®¹å™¨</p>
</div>
<div><p>è‡ªå®šä¹‰æ ‡é¢˜</p>
<p>æç¤ºå®¹å™¨</p>
</div>
<div><p>è‡ªå®šä¹‰æ ‡é¢˜</p>
<p>è­¦å‘Šå®¹å™¨</p>
</div>
<div><p>è‡ªå®šä¹‰æ ‡é¢˜</p>
<p>å±é™©å®¹å™¨</p>
</div>
<details><summary>è‡ªå®šä¹‰æ ‡é¢˜</summary>
<p>è¯¦æƒ…å®¹å™¨</p>
</details>
<details><summary>ä»£ç </summary>
<div><pre><code>::: info è‡ªå®šä¹‰æ ‡é¢˜

ä¿¡æ¯å®¹å™¨

:::

::: tip è‡ªå®šä¹‰æ ‡é¢˜

æç¤ºå®¹å™¨

:::

::: warning è‡ªå®šä¹‰æ ‡é¢˜

è­¦å‘Šå®¹å™¨

:::

::: danger è‡ªå®šä¹‰æ ‡é¢˜

å±é™©å®¹å™¨

:::

::: details è‡ªå®šä¹‰æ ‡é¢˜

è¯¦æƒ…å®¹å™¨

:::
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br></div></div></details>
<hr>
<section>
<ol>
<li id="footnote1"><p>è¿™æ˜¯è„šæ³¨å†…å®¹ </p>
</li>
</ol>
</section>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="ä½¿ç”¨æŒ‡å—"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">é¡µé¢é…ç½®</title>
    <id>https://kigane.github.io/guide/page/</id>
    <link href="https://kigane.github.io/guide/page/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="é¡µé¢ä¿¡æ¯"> é¡µé¢ä¿¡æ¯</h2>
<p>ä½ å¯ä»¥åœ¨ Markdown çš„ Frontmatter ä¸­è®¾ç½®é¡µé¢ä¿¡æ¯ã€‚</p>
<ul>
<li>
<p>ä½œè€…è®¾ç½®ä¸º Ms.Hopeã€‚</p>
</li>
<li>
<p>å†™ä½œæ—¶é—´åº”ä¸º 2020 å¹´ 1 æœˆ 1 æ—¥</p>
</li>
<li>
<p>åˆ†ç±»ä¸º â€œä½¿ç”¨æŒ‡å—â€</p>
</li>
<li>
<p>æ ‡ç­¾ä¸º â€œé¡µé¢é…ç½®â€ å’Œ â€œä½¿ç”¨æŒ‡å—â€</p>
</li>
</ul>
<h2 id="é¡µé¢å†…å®¹"> é¡µé¢å†…å®¹</h2>
<p>ä½ å¯ä»¥è‡ªç”±åœ¨è¿™é‡Œä¹¦å†™ä½ çš„ Markdownã€‚</p>
<div><p>Tips</p>
<ul>
<li>
<p>Markdown æ–‡ä»¶å¤¹çš„å›¾ç‰‡è¯·ä½¿ç”¨ç›¸å¯¹é“¾æ¥ <code>./</code> è¿›è¡Œå¼•ç”¨ã€‚</p>
</li>
<li>
<p><code>.vuepress/public</code> æ–‡ä»¶å¤¹çš„å›¾ç‰‡ï¼Œè¯·ä½¿ç”¨ç»å¯¹é“¾æ¥ <code>/</code> è¿›è¡Œå¼•ç”¨</p>
</li>
</ul>
</div>
<p>ä¸»é¢˜åŒ…å«äº†ä¸€ä¸ªè‡ªå®šä¹‰å¾½ç« ç« å¯ä»¥ä½¿ç”¨:</p>
<blockquote>
<p>æ–‡å­—ç»“å°¾åº”è¯¥æœ‰æ·±è“è‰²çš„ å¾½ç« æ–‡å­— å¾½ç« ã€‚ <i>Not supported content</i></p>
</blockquote>
<h2 id="é¡µé¢ç»“æ„"> é¡µé¢ç»“æ„</h2>
<p>æ­¤é¡µé¢åº”å½“åŒ…å«ï¼š</p>
<ul>
<li>è¿”å›é¡¶éƒ¨æŒ‰é’®</li>
<li>è·¯å¾„å¯¼èˆª</li>
<li>è¯„è®º</li>
<li>é¡µè„š</li>
</ul>
<h2 id="slide"> slide</h2>
<i>Not supported content</i>]]></content>
    <author>
      <name>Ms.Hope</name>
    </author>
    <category term="guide"/>
    <contributor>
      <name>Ms.Hope</name>
    </contributor>
    <published>2020-01-01T00:00:00.000Z</published>
    <rights>Copyright by Ms.Hope</rights>
  </entry>
  <entry>
    <title type="html">è¿™ä¸»é¢˜åºŸå¼ƒäº†æ ‡é¢˜ï¼Ÿ</title>
    <id>https://kigane.github.io/home/</id>
    <link href="https://kigane.github.io/home/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<p>This is an example of a normal homepage. You can place your main content here.</p>
<p>To use this layout, you need to set <code>home: true</code> in the page front matter.</p>
<p>For related descriptions of configuration items, please see <a href="https://vuepress-theme-hope.github.io/guide/layout/home/" target="_blank" rel="noopener noreferrer">Project HomePage Layout Config</a>.</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Intro Page</title>
    <id>https://kigane.github.io/intro/</id>
    <link href="https://kigane.github.io/intro/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h1 id="intro-page"> Intro Page</h1>
<p>Place your introducation and profile here.</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Hello Vuepress</title>
    <id>https://kigane.github.io/guide/</id>
    <link href="https://kigane.github.io/guide/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="é‡åˆ°çš„é—®é¢˜"> é‡åˆ°çš„é—®é¢˜</h2>
<p>åœ¨æ ¹ç›®å½•çš„readmeä¸­è®¾ç½®footerå†…å®¹æ—¶ä½¿ç”¨åŒå¼•å·ï¼Œä¼šå‡ºç°YAML Exceptionã€‚é¡¹ç›®æ— æ³•æ­£å¸¸ç¼–è¯‘ã€‚</p>
<h2 id="math"> math</h2>
<p>å®‰è£… markdown-it-katex æ’ä»¶</p>
<div><pre><code><span>yarn</span> <span>add</span> markdown-it-katex -D
</code></pre>
<div><span>1</span><br></div></div><p>å†è®¾ç½®</p>
<div><pre><code><span>// .vuepress/config.js</span>
module<span>.</span>exports <span>=</span> <span>{</span>
  markdown<span>:</span> <span>{</span>
    <span>// å¼€å¯ä»£ç å—è¡Œå·</span>
    lineNumbers<span>:</span> <span>true</span><span>,</span>
    <span>// é€‰æ‹©ç›®å½•å±‚çº§</span>
    toc<span>:</span> <span>{</span> includeLevel<span>:</span> <span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>]</span> <span>}</span><span>,</span>
    <span>// åŠ è½½æ’ä»¶</span>
    <span>extendMarkdown</span><span>:</span> <span>md</span> <span>=></span> <span>{</span>
      <span>// use more markdown-it plugins!</span>
      md<span>.</span><span>use</span><span>(</span><span>require</span><span>(</span><span>'markdown-it-katex'</span><span>)</span><span>)</span>
    <span>}</span>
  <span>}</span><span>,</span>
  <span>// è¦ä½¿ markdown-it-katex æ’ä»¶ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦è®¾ç½®åœ¨æ¯ä¸ª html çš„ &lt;head> éƒ¨åˆ†ï¼ŒåŠ ä¸Šä¸€äº›ä¾èµ–çš„å¼•ç”¨ã€‚</span>
  head<span>:</span> <span>[</span>
    <span>[</span><span>'link'</span><span>,</span> <span>{</span>
      rel<span>:</span> <span>'stylesheet'</span><span>,</span>
      href<span>:</span> <span>'https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css'</span>
    <span>}</span><span>]</span><span>,</span>
    <span>[</span><span>'link'</span><span>,</span> <span>{</span>
      rel<span>:</span> <span>"stylesheet"</span><span>,</span>
      href<span>:</span> <span>"https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css"</span>
    <span>}</span><span>]</span><span>,</span>
  <span>]</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div><p>æ•ˆæœå¦‚ä¸‹ï¼š<br>
<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1.1901em;vertical-align:-0.345em;"></span><span><span></span><span><span><span><span style="height:0.8451em;"><span style="top:-2.655em;"><span style="height:3em;"></span><span><span><span>n</span></span></span></span><span style="top:-3.23em;"><span style="height:3em;"></span><span style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span style="height:3em;"></span><span><span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.345em;"><span></span></span></span></span></span><span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:1.0622em;vertical-align:-0.2481em;"></span><span><span>n</span><span><span><span><span style="height:0.8141em;"><span style="top:-2.4519em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>2</span></span></span></span><span>â€‹</span></span><span><span style="height:0.2481em;"><span></span></span></span></span></span></span></span></span></span></p>
<p class='katex-block'><span><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:2.4637em;vertical-align:-0.9819em;"></span><span><span><span style="width:0.5em;"></span><span><span><span><span style="height:1.4819em;"><span style="top:-3.4819em;"><span style="height:3.4819em;"></span><span><span><span><span style="top:0em;"><span>[</span></span><span><span><span style="width:0.5em;"></span><span><span><span><span style="height:1.45em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span>cos</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span><span style="top:-2.41em;"><span style="height:3em;"></span><span><span>âˆ’</span><span style="margin-right:0.1667em;"></span><span>sin</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span></span><span>â€‹</span></span><span><span style="height:0.95em;"><span></span></span></span></span></span><span style="width:0.5em;"></span><span style="width:0.5em;"></span><span><span><span><span style="height:1.45em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span>sin</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span><span style="top:-2.41em;"><span style="height:3em;"></span><span><span>cos</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span></span><span>â€‹</span></span><span><span style="height:0.95em;"><span></span></span></span></span></span><span style="width:0.5em;"></span></span></span><span style="top:0em;"><span>]</span></span></span><span style="margin-right:0.1667em;"></span><span><span style="top:0em;"><span>[</span></span><span><span><span style="width:0.5em;"></span><span><span><span><span style="height:1.45em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span style="height:3em;"></span><span><span>0</span></span></span></span><span>â€‹</span></span><span><span style="height:0.95em;"><span></span></span></span></span></span><span style="width:0.5em;"></span><span style="width:0.5em;"></span><span><span><span><span style="height:1.45em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span>0</span></span></span><span style="top:-2.41em;"><span style="height:3em;"></span><span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.95em;"><span></span></span></span></span></span><span style="width:0.5em;"></span></span></span><span style="top:0em;"><span>]</span></span></span><span style="margin-right:0.1667em;"></span><span><span style="top:0em;"><span>[</span></span><span><span><span style="width:0.5em;"></span><span><span><span><span style="height:1.45em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span>cos</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span><span style="top:-2.41em;"><span style="height:3em;"></span><span><span>sin</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span></span><span>â€‹</span></span><span><span style="height:0.95em;"><span></span></span></span></span></span><span style="width:0.5em;"></span><span style="width:0.5em;"></span><span><span><span><span style="height:1.45em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span>âˆ’</span><span style="margin-right:0.1667em;"></span><span>sin</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span><span style="top:-2.41em;"><span style="height:3em;"></span><span><span>cos</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span></span><span>â€‹</span></span><span><span style="height:0.95em;"><span></span></span></span></span></span><span style="width:0.5em;"></span></span></span><span style="top:0em;"><span>]</span></span></span><span style="margin-right:0.2778em;"></span><span>=</span></span><span><span><span style="top:0em;"><span>[</span></span><span><span><span style="width:0.5em;"></span><span><span><span><span style="height:1.4819em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span><span>cos</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span>Ï•</span><span style="margin-right:0.2222em;"></span><span>+</span><span style="margin-right:0.2222em;"></span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span><span>sin</span><span><span><span><span style="height:0.8719em;"><span style="top:-3.1208em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span><span style="top:-2.3781em;"><span style="height:3em;"></span><span><span><span style="top:0em;">(</span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="top:0em;">)</span></span><span style="margin-right:0.1667em;"></span><span>cos</span><span style="margin-right:0.1667em;"></span><span>Ï•</span><span style="margin-right:0.1667em;"></span><span>sin</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span></span><span>â€‹</span></span><span><span style="height:0.9819em;"><span></span></span></span></span></span><span style="width:0.5em;"></span><span style="width:0.5em;"></span><span><span><span><span style="height:1.4819em;"><span style="top:-3.61em;"><span style="height:3em;"></span><span><span><span style="top:0em;">(</span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="top:0em;">)</span></span><span style="margin-right:0.1667em;"></span><span>cos</span><span style="margin-right:0.1667em;"></span><span>Ï•</span><span style="margin-right:0.1667em;"></span><span>sin</span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span><span style="top:-2.3781em;"><span style="height:3em;"></span><span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span><span>cos</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span>Ï•</span><span style="margin-right:0.2222em;"></span><span>+</span><span style="margin-right:0.2222em;"></span><span><span>Î»</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span><span>sin</span><span><span><span><span style="height:0.8719em;"><span style="top:-3.1208em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span>Ï•</span></span></span></span><span>â€‹</span></span><span><span style="height:0.9819em;"><span></span></span></span></span></span><span style="width:0.5em;"></span></span></span><span style="top:0em;"><span>]</span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.9819em;"><span></span></span></span></span></span><span style="width:0.5em;"></span></span></span></span></span></span></span></p>
<h2 id="git-hub-tables"> git hub tables</h2>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">Are</th>
<th style="text-align:right">Cool</th>
</tr>
</thead>
<tbody>
<tr>
<td>col 3 is</td>
<td style="text-align:center">right-aligned</td>
<td style="text-align:right">$1600</td>
</tr>
<tr>
<td>col 2 is</td>
<td style="text-align:center">centered</td>
<td style="text-align:right">$12</td>
</tr>
<tr>
<td>zebra stripes</td>
<td style="text-align:center">are neat</td>
<td style="text-align:right">$1</td>
</tr>
</tbody>
</table>
<h2 id="container"> container</h2>
<div><p>Tips</p>
<p>this is tips</p>
</div>
<div><p>Note</p>
<p>this is warning</p>
</div>
<div><p>STOP</p>
<p>this is danger warning</p>
</div>
<details><summary>custom title</summary>
<p>more details here</p>
</details>
<h2 id="è¯­æ³•é«˜äº®"> è¯­æ³•é«˜äº®</h2>
<p>ä»£ç å—å†…æŸäº›è¡Œé«˜äº®ã€‚{}é‡Œé¢è¡Œå·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p>
<div><div><br><div>&nbsp;</div><br><br><br><div>&nbsp;</div><br><br></div><pre><code><span><span>#</span><span>version</span> <span><span>330</span> core</span></span>
<span>(</span><span>layout</span> location <span>=</span> <span>0</span><span>)</span> <span>in</span> <span>vec3</span> a_Pos

<span>void</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
    gl_Position <span>=</span> a_Pos<span>;</span>
<span>}</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id="éƒ¨ç½²"> éƒ¨ç½²</h2>
<p>æŒ‰æ–‡æ¡£æ¥ï¼Œæ²¡æˆåŠŸã€‚git push -f xxxxx master ä¼šåœ¨githubåº“ä¸­æ–°å»ºä¸€ä¸ªmasteråˆ†æ”¯ï¼Œè€Œä¸”æœ‰æ—¶å€™æ¨é€å¤±è´¥ï¼ŒåŸå› ä¸æ˜ã€‚<br>
å› ä¸ºæˆ‘å®‰è£…äº† wsl2ï¼Œæ‰§è¡Œbashå‘½ä»¤ä¼šè¿›å…¥Ubantu18.04ï¼Œä¹Ÿå¯¼è‡´shellè„šæœ¬å‡ºé”™ã€‚<br>
æœ€ç»ˆï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>åœ¨package.jsonä¸­æ·»åŠ npmå‘½ä»¤ï¼Œç”¨äºæ‰§è¡Œshellè„šæœ¬ã€‚</p>
<div><div><br><br><br><div>&nbsp;</div><br><br></div><pre><code><span>"scripts"</span><span>:</span> <span>{</span>
    <span>"docs:dev"</span><span>:</span> <span>"vuepress dev docs"</span><span>,</span>
    <span>"docs:build"</span><span>:</span> <span>"vuepress build docs"</span><span>,</span>
    <span>"docs:deploy"</span><span>:</span> <span>"deploy.sh"</span>
  <span>}</span><span>,</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>æ‰‹åŠ¨clone GithubPageå…³è”åº“ https://github.com/username/username.github.io.git åˆ°æœ¬åœ°ï¼Œå¹¶æ”¾åœ¨ç›®å½•project/docs/.vuepress/ä¸‹ã€‚(å’Œç”Ÿæˆçš„distç›®å½•åŒçº§)</p>
<p>deploy.shå†…å®¹ä¸º</p>
<div><pre><code><span>#!/usr/bin/env sh</span>

<span># abort on errors</span>
<span>set</span> -e

<span># build</span>
<span>npm</span> run docs:build

<span># navigate into the build output directory</span>
<span>cd</span> docs/.vuepress/dist

<span># å°†ä¸€ä¸ªç›®å½•ä¸‹çš„ä¸€äº›æ–‡ä»¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç›®å½•ä¸‹</span>
<span>cp</span> -R * <span>..</span>/username.github.io

<span>cd</span> <span>..</span>/username.github.io

<span>git</span> <span>add</span> -A
<span>git</span> commit -m <span>'deploy'</span>
<span>git</span> push

<span>cd</span> -

<span># æ‰§è¡Œå®Œä¸ç«‹å³é€€å‡ºshellï¼Œä¾¿äºæŸ¥çœ‹é”™è¯¯ä¿¡æ¯ã€‚</span>
<span>read</span> -n <span>1</span> -p <span>'Press any key to continue...'</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><p>deploy.sh å®é™…ä¸Šå®Œæˆäº†ä¸‰ä»¶äº‹</p>
<ol>
<li>æ‰§è¡Œ npm run docs:build ç”Ÿæˆè¦å‘å¸ƒçš„å†…å®¹ã€‚(é‡å¤ç”Ÿæˆæ—¶ dist æ–‡ä»¶å¤¹ä¼šå…ˆè¢«æ¸…ç©ºï¼Œå†ç”Ÿæˆæ–°æ–‡ä»¶ã€‚)</li>
<li>å°† dist æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¤åˆ¶åˆ° username.githbu.io æ–‡ä»¶å¤¹ä¸­</li>
<li>åœ¨ username.githbu.io æ–‡ä»¶å¤¹ä¸­(GithubPageå…³è”çš„åº“)ï¼Œæäº¤ä¿®æ”¹å¹¶æ¨é€åˆ°è¿œç¨‹åº“</li>
</ol>
<h2 id="å…¨å±€computed"> å…¨å±€Computed</h2>
<p>å› ä¸º ketex å…¬å¼åˆ†éš”ç¬¦æ˜¯ 'dollar', å’Œ vue æä¾›çš„å…¨å±€å˜é‡å‰ç¼€å†²çªäº†ã€‚æ‰€ä»¥ä¸€é¡µåªèƒ½æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ä¿æŒæ­£å¸¸ã€‚<br>
site = {{$site}}</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">ç®—æ³•</title>
    <id>https://kigane.github.io/note/algorithm/</id>
    <link href="https://kigane.github.io/note/algorithm/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="éšæœºç”Ÿæˆè¡¨è¾¾å¼"> éšæœºç”Ÿæˆè¡¨è¾¾å¼</h2>
<p><a href="https://softwareengineering.stackexchange.com/questions/195813/generating-random-math-expression/195850#195850" target="_blank" rel="noopener noreferrer">å‚è€ƒ</a></p>
<div><pre><code><span>4</span> <span>+</span> <span>2</span>                          
<span>3</span> <span>*</span> <span>6</span> <span>-</span> <span>7</span> <span>+</span> <span>2</span>                  
<span>6</span> <span>*</span> <span>2</span> <span>+</span> <span>(</span><span>5</span> <span>-</span> <span>3</span><span>)</span> <span>*</span> <span>3</span> <span>-</span> <span>8</span>        
<span>(</span><span>3</span> <span>+</span> <span>4</span><span>)</span> <span>+</span> <span>7</span> <span>*</span> <span>2</span> <span>-</span> <span>1</span> <span>-</span> <span>9</span>        
<span>5</span> <span>-</span> <span>2</span> <span>+</span> <span>4</span> <span>*</span> <span>(</span><span>8</span> <span>-</span> <span>(</span><span>5</span> <span>+</span> <span>1</span><span>)</span><span>)</span> <span>+</span> <span>9</span>  
<span>(</span><span>8</span> <span>-</span> <span>1</span> <span>+</span> <span>3</span><span>)</span> <span>*</span> <span>6</span> <span>-</span> <span>(</span><span>(</span><span>3</span> <span>+</span> <span>7</span><span>)</span> <span>*</span> <span>2</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>è®¾ç½®äº§ç”Ÿè§„åˆ™</p>
<ul>
<li>E -&gt; I</li>
<li>E -&gt; (E '+' E)</li>
<li>E -&gt; (E '*' E)</li>
</ul>
<p>é€šè¿‡é€’å½’å¯ä»¥ç”Ÿæˆç¬¦åˆè¦æ±‚çš„è¡¨è¾¾å¼ã€‚ä½†ä¼šäº§ç”Ÿå¾ˆå¤šå¤šä½™çš„æ‹¬å·ã€‚</p>
<ul>
<li>E -&gt; I</li>
<li>E -&gt; M '*' M</li>
<li>E -&gt; E '+' E</li>
<li>M -&gt; I</li>
<li>M -&gt; M '*' M</li>
<li>M -&gt; '(' E '+' E ')'</li>
</ul>
<p>è¿™ç§è§„åˆ™ä¸ä¼šäº§ç”Ÿå¤šä½™çš„æ‹¬å·ã€‚</p>
<div><pre><code><span>// ç®€å•çš„å®ç°</span>
<span>int</span> num <span>=</span> <span>0</span><span>;</span>
<span>char</span> num_buf<span>[</span><span>20</span><span>]</span> <span>=</span> <span>{</span><span>}</span><span>;</span>
<span>uint32_t</span> <span>choose</span><span>(</span><span>unit32_t</span> n<span>)</span><span>;</span> <span>// äº§ç”Ÿ0~n-1ä¸­çš„éšæœºæ•´æ•°ã€‚</span>

<span>void</span> <span>gen_rand_expr</span><span>(</span><span>int</span> flag<span>)</span>
<span>{</span>
    <span>switch</span> <span>(</span><span>choose</span><span>(</span><span>6</span><span>)</span><span>)</span>
    <span>{</span>
        <span>case</span> <span>0</span><span>:</span> 
            <span>gen_rand_expr</span><span>(</span>false<span>)</span><span>;</span>
            <span>strcat</span><span>(</span>buf<span>,</span> <span>"*"</span><span>)</span><span>;</span>
            <span>gen_rand_expr</span><span>(</span>false<span>)</span><span>;</span>
            <span>break</span><span>;</span>
        <span>case</span> <span>1</span><span>:</span>
            <span>if</span> <span>(</span><span>!</span>flag<span>)</span> <span>strcat</span><span>(</span><span>"buf"</span><span>,</span> <span>"("</span><span>)</span><span>;</span>
            <span>gen_rand_expr</span><span>(</span>false<span>)</span><span>;</span>
            <span>strcat</span><span>(</span>buf<span>,</span> <span>"+"</span><span>)</span><span>;</span>
            <span>gen_rand_expr</span><span>(</span>false<span>)</span><span>;</span>
            <span>if</span> <span>(</span><span>!</span>flag<span>)</span> <span>strcat</span><span>(</span><span>"buf"</span><span>,</span> <span>")"</span><span>)</span><span>;</span>
        <span>default</span><span>:</span>
            num <span>=</span> <span>gen_num</span><span>(</span><span>)</span><span>;</span>
            <span>sprintf</span><span>(</span>num_buf<span>,</span> <span>"%u"</span><span>,</span> num<span>)</span><span>;</span>
            <span>strcat</span><span>(</span>buf<span>,</span> num_buf<span>)</span><span>;</span>
            <span>break</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Custom Layout</title>
    <id>https://kigane.github.io/layout/</id>
    <link href="https://kigane.github.io/layout/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<p>You can use slots with markdown and component support to custom page layout.</p>
<div><p>Note</p>
<p>This is just a demo, you should add styles according to your own needs.</p>


</div>
<template #page-top><p>Page top content</p>
</template><template #page-bottom><p>Page bottom content</p>
</template><template #content-top><p>Content top content</p>
</template><template #content-bottom><p>Content bottom content</p>
</template><template #navbar-start><p>Navbar start content</p>
</template><template #navbar-center><p>Navbar center content</p>
</template><template #navbar-end><p>Navbar end content</p>
</template><template #sidebar-top><p>Sidebar top content</p>
</template><template #sidebar-center><p>Sidebar center content</p>
</template><template #sidebar-bottom><p>Sidebar bottom content</p>
</template><p>For details, see <a href="https://vuepress-theme-hope.github.io/guide/layout/custom/" target="_blank" rel="noopener noreferrer">Custom layout</a>.</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Cè¯­è¨€</title>
    <id>https://kigane.github.io/note/cpp/c/</id>
    <link href="https://kigane.github.io/note/cpp/c/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="unionå’ŒåŒ¿åç»“æ„"> Unionå’ŒåŒ¿åç»“æ„</h2>
<p>Union: å®šä¹‰ç±»ä¼¼structï¼Œä½†å†…å­˜åˆ†é…æ–¹å¼ä¸ä¸€æ ·ã€‚structä¼šä¸ºæ‰€æœ‰æˆå‘˜åˆ†é…å†…å­˜ç©ºé—´ï¼Œunionæ˜¯æ‰€æœ‰æˆå‘˜å…±ç”¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œå¤§å°ä»¥æœ€å¤§çš„æˆå‘˜ä¸ºå‡†ã€‚
åŒ¿åï¼šé€šå¸¸åµŒå¥—äºunionæˆ–strcutä¸­ï¼Œå¯ä»¥ç”¨å¤–å±‚ç±»å‹çš„å˜é‡åç›´æ¥è®¿é—®åŒ¿åçš„ç»“æ„æˆå‘˜ã€‚unionä¸­çš„åŒ¿åæ¯”è¾ƒæœ‰ç”¨ï¼Œå› ä¸ºå¯ä»¥å°†ä¸€ç³»åˆ—æˆå‘˜åŒ…è£¹èµ·æ¥ä»¥è·å–æ›´å¤§çš„å†…å­˜ç©ºé—´ã€‚</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;stdio.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;stdint.h></span></span>

<span>typedef</span> <span>union</span>  
<span>{</span>
    <span>union</span>
    <span>{</span>
        <span>uint32_t</span> _32<span>;</span>
        <span>uint16_t</span> _16<span>;</span>
        <span>uint8_t</span> _8<span>[</span><span>2</span><span>]</span><span>;</span>
    <span>}</span> gpr<span>[</span><span>8</span><span>]</span><span>;</span> <span>// 32B</span>

    <span>struct</span>
    <span>{</span>
        <span>uint32_t</span> eax<span>,</span> ecx<span>,</span> edx<span>,</span> ebx<span>,</span> esp<span>,</span> ebp<span>,</span> esi<span>,</span> edi<span>;</span>
        <span>uint64_t</span> pc<span>;</span>
    <span>}</span><span>;</span> <span>// 40B</span>
<span>}</span> CPU<span>;</span>


<span>int</span> <span>main</span><span>(</span><span>int</span> argc<span>,</span> <span>char</span> <span>const</span> <span>*</span>argv<span>[</span><span>]</span><span>)</span>
<span>{</span>
    CPU cpu<span>;</span>
    cpu<span>.</span>gpr<span>[</span><span>0</span><span>]</span><span>.</span>_32 <span>=</span> <span>666</span><span>;</span>
    <span>printf</span><span>(</span><span>"CPU size: %d\n"</span><span>,</span> <span>sizeof</span><span>(</span>CPU<span>)</span><span>)</span><span>;</span> <span>// 40</span>
    <span>printf</span><span>(</span><span>"cpu.eax: %d\n"</span><span>,</span> cpu<span>.</span>eax<span>)</span><span>;</span>      <span>// 666</span>
    <span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br></div></div><h3 id="bitfield"> bitfield</h3>
<p>åªèƒ½åœ¨structæˆ–unionä¸­å£°æ˜ã€‚</p>
<div><pre><code><span>struct</span> <span>{</span>
      <span>/* field 4 bits wide */</span>
      <span>unsigned</span> field1 <span>:</span><span>4</span><span>;</span>
      <span>/*
       * unnamed 3 bit field
       * unnamed fields allow for padding
       */</span>
      <span>unsigned</span>        <span>:</span><span>3</span><span>;</span>
      <span>/*
       * one-bit field
       * can only be 0 or -1 in two's complement!
       */</span>
      <span>signed</span> field2   <span>:</span><span>1</span><span>;</span>
      <span>/* align next field on a storage unit */</span>
      <span>unsigned</span>        <span>:</span><span>0</span><span>;</span>
      <span>unsigned</span> field3 <span>:</span><span>6</span><span>;</span>
<span>}</span>full_of_fields<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><ul>
<li>1bitçš„æœ‰ç¬¦å·bitfieldåªèƒ½è¡¨ç¤º0å’Œ-1.</li>
<li>bitfieldå¯ä»¥ç”¨constï¼Œvolatileä¿®é¥°</li>
<li>Cä¸èƒ½ä¿è¯æœºå™¨å†…çš„å­—æ®µçš„æ’åºã€‚æ ‡å‡†æ²¡æœ‰å®šä¹‰ï¼Œå–å†³äºæœºå™¨å’Œç¼–è¯‘å™¨çš„å®ç°ã€‚</li>
<li>è¦å¼ºåˆ¶å¯¹å‡†åˆ°å­˜å‚¨å•å…ƒè¾¹ç•Œï¼Œè¯·åœ¨æƒ³è¦å¯¹é½çš„å­—æ®µä¹‹å‰ä½¿ç”¨é›¶å®½åº¦å­—æ®µã€‚</li>
<li>gccå¯èƒ½æ˜¯ä»LSBå¼€å§‹åˆ†é…çš„ã€‚</li>
</ul>
<h2 id="getopt-int-argc-char-const-argv-const-char-optstring"> getopt(int argc, char* const argv[], const char* optstring)</h2>
<p>é€‰é¡¹å¤„ç†è¿‡ç¨‹</p>
<div><pre><code><span>int</span> optind<span>;</span> <span>// argvä¸­ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•(åˆå§‹ä¸º 1)</span>
<span>int</span> opterr<span>;</span> <span>// æ˜¯å¦è¾“å‡ºé”™è¯¯ä¿¡æ¯</span>
<span>int</span> optopt<span>;</span> <span>// å¯¼è‡´é”™è¯¯çš„é€‰é¡¹å­—ç¬¦</span>
<span>char</span><span>*</span> optarg<span>;</span>

<span>struct</span> <span>option</span> <span>{</span>
    <span>const</span> <span>char</span> <span>*</span>name<span>;</span> <span>// é•¿é€‰é¡¹(--option)çš„åç§°</span>
    <span>int</span> has_arg<span>;</span> <span>// 0:æ— å‚æ•° 1:æœ‰å‚æ•° 2:å‚æ•°å¯é€‰</span>
    <span>int</span> <span>*</span>flag<span>;</span> <span>// flagä¸ºNULLï¼šgetopt_long()è¿”å›valã€‚å¦åˆ™getopt_long()è¿”å›0ï¼ŒflagæŒ‡å‘çš„å˜é‡å€¼ä¸ºval(å¦‚æœè¯¥optionç”¨æˆ·è®¾ç½®äº†çš„è¯)</span>
    <span>int</span> val<span>;</span> <span>// è¿”å›å€¼æˆ–æ”¾å…¥flag</span>
<span>}</span><span>;</span> <span>// ç»“æ„ä½“æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¿…é¡»è®¾ä¸º0</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>å¦‚æœgetopt()æ‰¾åˆ°ä¸‹ä¸€ä¸ªé€‰é¡¹å­—ç¬¦ï¼Œå°±è¿”å›é‚£ä¸ªå­—ç¬¦ï¼Œæ›´æ–°optindå’Œä¸€ä¸ªstaticå˜é‡nextchar</p>
<p>optstringåŒ…å«äº†æ‰€æœ‰åˆæ³•çš„é€‰é¡¹ï¼Œå¦‚æœå­—ç¬¦åé¢è·Ÿç€ä¸€ä¸ª<code>:</code>ï¼Œè¯´æ˜éœ€è¦å‚æ•°ï¼Œä¸¤ä¸ªè¯´æ˜æ˜¯å¯é€‰å‚æ•°ã€‚<br>
å¦‚æœé€‰é¡¹ä¸­åŒ…å«æ–‡æœ¬(-oarg, o æ˜¯é€‰é¡¹ï¼Œargæ˜¯æ–‡æœ¬)ï¼Œåˆ™æ–‡æœ¬ä¼šä¿å­˜åœ¨optargä¸­å…¶ä»–æƒ…å†µä¸‹ï¼Œoptargè®¾ä¸º0.
GNUæ‰©å±•,optstringä¸­çš„<code>W:</code>è¡¨ç¤ºå°†<code>-W foo</code>çœ‹ä½œ<code>--foo</code>çœ‹å¾…ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹,getopt()æŒ‰è¾“å…¥é¡ºåºæ’åˆ—argvçš„å†…å®¹ã€‚æ‰€ä»¥ï¼Œæ‰€æœ‰çš„éé€‰é¡¹å‚æ•°æ”¾åœ¨æœ€åã€‚
optstringçš„é¦–å­—ç¬¦å†³å®šä½¿ç”¨çš„æ¨¡å¼</p>
<ul>
<li><code>+</code> é‡åˆ°ä»»ä½•ä¸€ä¸ªéé€‰é¡¹å‚æ•°å°±ç»ˆæ­¢é€‰é¡¹å¤„ç†</li>
<li><code>-</code> å¼ºåˆ¶å°†æ‰€æœ‰éé€‰é¡¹å‚æ•°çœ‹ä½œé€‰é¡¹çš„å‚æ•°
<code>--</code> åœ¨ä»»ä½•æ¨¡å¼ä¸‹éƒ½å¯ä»¥å¼ºè¡Œç»ˆæ­¢é€‰é¡¹å¤„ç†è¿‡ç¨‹ã€‚</li>
</ul>
<p>Errors</p>
<ul>
<li>å¤„ç†çš„é€‰é¡¹ä¸å†optstringä¸­</li>
<li>è®¾ç½®ä¸ºæœ‰å‚æ•°çš„é€‰é¡¹æ²¡æœ‰æ£€æµ‹åˆ°å‚æ•°
å¤„ç†</li>
<li>é»˜è®¤è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå°†å¯¼è‡´é”™è¯¯çš„é€‰é¡¹å­—ç¬¦æ”¾åœ¨optoptä¸­ï¼Œå‡½æ•°è¿”å› ?</li>
<li>å¦‚æœè°ƒç”¨è€…å°†opterrè®¾ä¸º0ï¼Œåˆ™ä¸ä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå‡½æ•°ä»è¿”å› ?</li>
<li>å¦‚æœoptstringçš„ç¬¬ä¸€ä¸ªå­—ç¬¦(ä¸åŒ…æ‹¬æè¿°æ¨¡å¼çš„<code>+,-</code>)ä¸º<code>:</code>ã€‚å‡½æ•°åŒæ ·ä¸è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨è®¾ä¸ºæœ‰å‚æ•°çš„é€‰é¡¹æ²¡æœ‰å‚æ•°æ—¶è¿”å›å€¼å˜ä¸º<code>:</code>ï¼Œä»è€Œå¯ä»¥åŒºåˆ«å‡ºè¿™ç§æƒ…å†µã€‚</li>
</ul>
<p>getopt()è¿”å›å€¼</p>
<ul>
<li>å¦‚æœæ‰€æœ‰çš„å‘½ä»¤è¡Œé€‰é¡¹éƒ½å¤„ç†å®Œäº†ï¼Œåˆ™è¿”å› -1.</li>
<li>å¦‚æœé‡åˆ°æ²¡åœ¨optstringä¸­æŒ‡å®šçš„å­—ç¬¦ï¼Œè¿”å› ?</li>
<li>å¦‚æœé‡åˆ°é€‰é¡¹ä¸¢å¤±å‚æ•°çš„æƒ…å†µï¼Œçœ‹optstringä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœæ˜¯<code>:</code> åˆ™è¿”å› <code>:</code>ï¼Œå¦åˆ™è¿”å› ?</li>
</ul>
<p><code>int getopt_long(int argc, char* const argv[], const char* optstring, const struct option* longopts, int* longindex)</code></p>
<p>getopt_long(),getopt_long_only()</p>
<ul>
<li>å½“è¯†åˆ«åˆ°çŸ­é€‰é¡¹æ—¶ï¼Œä¹Ÿè¿”å›å€¼</li>
<li>é•¿é€‰é¡¹ï¼Œè§flagæ³¨é‡Šã€‚</li>
<li>Errorå’Œ-1å’Œgetopt()ä¸€æ ·</li>
<li>è¯†åˆ«åˆ°æ¨¡ç³ŠåŒ¹é…å’Œå†—ä½™å‚æ•°ä¼šè¿”å› ?</li>
<li>longindexä¸ºlongoptsçš„ç´¢å¼•ï¼Œå¦‚æœä¸ä¸ºNULLçš„è¯</li>
</ul>
<h2 id="readline"> readline</h2>
<p><code>char* readline(const char* prompt)</code><br>
GNUçš„å‘½ä»¤è¡Œç¼–è¾‘æ¥å£ã€‚readlineä¼šä»ç»ˆç«¯è¯»å…¥ä¸€è¡Œå¹¶è¿”å›ï¼Œå…¶å‚æ•°promptä¸ºå‘½ä»¤è¡Œå¼€å¤´çš„æç¤ºç¬¦(ä¾‹å¦‚gdbä¸­çš„&quot;(gdb)&quot;)ã€‚å…¶è¿”å›å€¼ä¸åŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œä»…ä¿ç•™è¾“å…¥çš„æ–‡æœ¬ã€‚å¦å¤–è¿”å›å€¼ä½¿ç”¨mallocåˆ†é…å†…å­˜çš„ï¼Œè°ƒç”¨è€…éœ€è¦æ‰‹åŠ¨freeã€‚</p>
<h2 id="strç³»åˆ—"> strç³»åˆ—</h2>
<p>strtok</p>
<ul>
<li><code>char *strtok(char *str, const char *delim)</code>ï¼š ä½¿ç”¨äº†static bufferï¼Œä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
<li><code>char *strtok_r(char *str, const char *delim, char **saveptr)</code>: å¤šçº¿ç¨‹å®‰å…¨</li>
<li>è¿™ä¸ªå‡½æ•°ç”¨äºå°†å­—ç¬¦ä¸²åˆ†è§£ä¸ºä¸€ç³»åˆ—éç©ºtoken(å­ä¸²)ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨strtokæ—¶stræ˜¯éœ€è¦è¢«åˆ†è§£çš„å­—ç¬¦ä¸²ï¼Œä¹‹åå¤„ç†ç›¸åŒå­—ç¬¦ä¸²æ—¶strå¿…é¡»ä¸ºNULLã€‚delimå‚æ•°ä¸ºç”¨äºåˆ†è§£çš„åˆ†éš”ç¬¦ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå­—ç¬¦ä¸ºåŒä¸€çº§åˆ†éš”ç¬¦ã€‚</li>
<li>strtokå†…éƒ¨æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆå†³å®šäº†æ¯ä¸ªtokençš„èµ·ç‚¹ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æŒ‡å‘strçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨æ—¶æŒ‡å‘ç¬¬ä¸€ä¸ªåˆ†å‰²ç¬¦åç¬¬ä¸€ä¸ªä¸æ˜¯åˆ†å‰²ç¬¦çš„å­—ç¬¦ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„å­—ç¬¦ï¼Œstrtokè¿”å›NULLã€‚</li>
<li>æ¯ä¸ªtokençš„ç»ˆç‚¹ä¸ºåˆ†éš”ç¬¦(ä¼šè¢«æ›¿æ¢ä¸º'\0')æˆ–null('\0')ã€‚</li>
<li>strtokçš„è¿”å›å€¼è¦ä¹ˆæ˜¯éç©ºå­—ç¬¦ä¸²ï¼Œè¦ä¹ˆæ˜¯NULLã€‚(ä¾‹å¦‚,'aaa;bbb'åˆ†éš”ç¬¦ä¸º';',é¡ºåºè°ƒç”¨strtokçš„è¿”å›å€¼ä¸º 'aaa', 'bbb', NULL)</li>
</ul>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;stdio.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;stdlib.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;string.h></span></span>

<span>int</span> <span>main</span><span>(</span><span>int</span> argc<span>,</span> <span>char</span> <span>const</span> <span>*</span>argv<span>[</span><span>]</span><span>)</span>
<span>{</span>
    <span>char</span> <span>*</span>str1<span>,</span> <span>*</span>str2<span>,</span> <span>*</span>token<span>,</span> <span>*</span>subtoken<span>;</span>
    <span>char</span> <span>*</span>savaptr1<span>,</span> <span>*</span>saveptr2<span>;</span>
    <span>int</span> j<span>;</span>
    <span>if</span> <span>(</span>argc <span>!=</span> <span>4</span><span>)</span>
    <span>{</span>
        <span>fprintf</span><span>(</span><span>stderr</span><span>,</span> <span>"Usage: %s string delim subdelim\n"</span><span>,</span> argv<span>[</span><span>0</span><span>]</span><span>)</span><span>;</span>
        <span>exit</span><span>(</span>EXIT_FAILURE<span>)</span><span>;</span>
    <span>}</span>

    <span>for</span> <span>(</span>j <span>=</span> <span>1</span><span>,</span> str1 <span>=</span> argv<span>[</span><span>1</span><span>]</span><span>;</span> <span>;</span>j<span>++</span><span>,</span> str1 <span>=</span> <span>NULL</span><span>)</span>
    <span>{</span>
        token <span>=</span> <span>strtok_r</span><span>(</span>str1<span>,</span> argv<span>[</span><span>2</span><span>]</span><span>,</span> <span>&amp;</span>savaptr1<span>)</span><span>;</span>
        <span>printf</span><span>(</span><span>"saveptr1 %d %s\n"</span><span>,</span> j<span>,</span> savaptr1<span>)</span><span>;</span> <span>// å‰©ä½™æœªå¤„ç†çš„éƒ¨åˆ†</span>
        <span>if</span> <span>(</span>token <span>==</span> <span>NULL</span><span>)</span>
            <span>break</span><span>;</span>
        <span>printf</span><span>(</span><span>"%d: %s\n"</span><span>,</span> j<span>,</span> token<span>)</span><span>;</span>

        <span>for</span> <span>(</span>str2 <span>=</span> token<span>;</span> <span>;</span> str2 <span>=</span> <span>NULL</span><span>)</span>
        <span>{</span>
            subtoken <span>=</span> <span>strtok_r</span><span>(</span>str2<span>,</span> argv<span>[</span><span>3</span><span>]</span><span>,</span> <span>&amp;</span>saveptr2<span>)</span><span>;</span>
            <span>if</span> <span>(</span>subtoken <span>==</span> <span>NULL</span><span>)</span>
                <span>break</span><span>;</span>
            <span>printf</span><span>(</span><span>" --> %s\n"</span><span>,</span> subtoken<span>)</span><span>;</span>
        <span>}</span>
    <span>}</span>

    <span>exit</span><span>(</span>EXIT_SUCCESS<span>)</span><span>;</span>
    <span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br></div></div><ul>
<li><code>size_t strlen(const char *s)</code>:è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå³stringä¸­æœ‰å¤šå°‘byteã€‚ä¸åŒ…å«'\0'ã€‚</li>
<li><code>size_t strnlen(const char *s, size_t max)</code>:è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä½†ä¸ä¼šè¶…è¿‡æœ€å¤§å€¼ã€‚</li>
<li><code>int strcmp(const char *s1, const char *s2)</code>: æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ã€‚é€å­—ç¬¦æ¯”è¾ƒï¼Œå¦‚æœç¬¬ä¸€ä¸ªä¸ç›¸ç­‰çš„å­—ç¬¦s1 &lt; s2ï¼Œåˆ™è¿”å›è´Ÿå€¼ï¼Œåä¹‹è¿”å›æ­£å€¼ã€‚éƒ½ç›¸ç­‰åˆ™è¿”å›0ã€‚</li>
<li><code>int strncmp(const char *s1, const char *s2, size_t n)</code>:æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä½†åªæ¯”å‰nä¸ªã€‚</li>
<li><code>int strcoll(const char *s1, const char *s2)</code>:æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼ŒåŸºäºç¨‹åºå½“å‰çš„localeè®¾ç½®è§£é‡Šçš„å­—ç¬¦ä¸²,localeçš„å€¼ä¸ºç¯å¢ƒå˜é‡LC_COLLATEã€‚</li>
<li><code>char *strcpy(char *dest,const char *src)</code>: å¤åˆ¶å­—ç¬¦ä¸²ï¼ŒåŒ…å«æœ€åçš„'\0'ã€‚destéœ€è¦è¶³å¤Ÿå¤§ã€‚è¿”å›destæŒ‡é’ˆã€‚</li>
<li><code>char *strncpy(char *dest,const char *src, size_t n)</code>:å°†srcçš„å‰nä¸ªå­—ç¬¦å¤åˆ¶åˆ°destã€‚æ³¨æ„å¦‚æœå‰nä¸ªå­—ç¬¦ä¸­æ²¡æœ‰'\0'ï¼Œåˆ™destä¹Ÿä¸ä¼šæ·»åŠ ï¼Œå¯¼è‡´destæ²¡æœ‰æ­£å¸¸çš„ç»ˆæ­¢ç¬¦ã€‚å¦‚æœn&gt;strlen(src)+1ï¼Œå‰©ä¸‹çš„å­—ç¬¦ä¼šç”¨'\0'è¡¥å…¨ã€‚</li>
<li><code>char *strcat(char *dest, const char *src)</code>: å°†src(ä¸åŒ…æ‹¬'\0')è¿æ¥åˆ°deståï¼Œdestçš„'\0'ä¼šè¢«è¦†ç›–ï¼Œä¸”ä¼šåœ¨æ•´ä¸ªå­—ç¬¦ä¸²åæ·»åŠ ä¸€ä¸ª'\0'ã€‚destè¦è¶³å¤Ÿå¤§ã€‚</li>
<li><code>char *strncat(char *dest, const char *src, size_t n)</code>:ç±»ä¼¼strcatã€‚ä½†æœ€å¤šä½¿ç”¨srcä¸­çš„nä¸ªå­—ç¬¦ã€‚å¦å¤–ï¼Œsrcå¯ä»¥æ²¡æœ‰'\0'ã€‚</li>
</ul>
<h2 id="scanfç³»åˆ—-printfç³»åˆ—"> scanfç³»åˆ—&amp;printfç³»åˆ—</h2>
<ul>
<li>
<p><code>int scanf(const char *format, ...)</code></p>
</li>
<li>
<p><code>int fscanf(FILE *stream, const char *format, ...)</code></p>
</li>
<li>
<p><code>int sscanf(const char *str, const char *format, ...)</code></p>
</li>
<li>
<p><code>sprintf, snprintf, fprintf</code></p>
</li>
<li>
<p><code>int vscanf(const char *format, va_list ap)</code></p>
</li>
<li>
<p><code>int vfscanf(FILE *stream, const char *format, va_list ap)</code></p>
</li>
<li>
<p><code>int vsscanf(const char *str, const char *format, va_list ap)</code></p>
</li>
</ul>
<p>formatå¯èƒ½åŒ…å«è½¬æ¢è§„çº¦(%m.nf)ï¼Œè½¬æ¢çš„ç»“æœè¢«å‚¨å­˜åœ¨formatåçš„æŒ‡é’ˆä¸­ï¼ŒæŒ‡é’ˆçš„ç±»å‹è¦å¯formatä¸­çš„è½¬æ¢è§„çº¦ä¸€è‡´ã€‚å¦‚æœformatä¸­çš„%æ•°é‡å¤šäºæŒ‡é’ˆå‚æ•°çš„æ•°é‡ï¼Œåˆ™ç»“æœæœªå®šä¹‰ã€‚åä¹‹ï¼Œåˆ™å¤šä½™çš„æŒ‡é’ˆå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚</p>
<ul>
<li>scanfä»stdinè¯»å–è¾“å…¥ã€‚</li>
<li>fscanfä»æŒ‡å®šçš„æ–‡ä»¶æµstreamä¸­è¯»å–è¾“å…¥ã€‚</li>
<li>sscanfä»å­—ç¬¦ä¸²strä¸­è¯»å–è¾“å…¥ã€‚</li>
<li>åŠ vçš„è¯»å–å˜é‡å‚æ•°åˆ—è¡¨(a variable arguemnt list)</li>
</ul>
<p>è¿”å›å€¼</p>
<ul>
<li>æˆåŠŸï¼šè¿”å›åŒ¹é…çš„è½¬æ¢æ•°</li>
<li>å¤±è´¥ï¼šEOF</li>
</ul>
<p>PSï¼šformatå¯ä»¥æ˜¯å˜é‡è€ŒéåŒå¼•å·å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šæ‰“å°ç¨‹åºçš„å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<div><pre><code><span>while</span> <span>(</span><span>--</span>argc <span>></span> <span>0</span><span>)</span>
    <span>printf</span><span>(</span><span>(</span>argc <span>></span> <span>1</span><span>)</span> <span>?</span> <span>"%s "</span> <span>:</span> <span>"%s"</span><span>,</span> <span>*</span><span>++</span>argv<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><h3 id="è½¬æ¢è§„çº¦"> è½¬æ¢è§„çº¦</h3>
<p>æ ¼å¼ï¼š<code>%#.#char</code> å…¶ä¸­ç¬¬ä¸€ä¸ª#ä¸ºmaximum field widthã€‚å³æœ€å¤šåŒ¹é…|è¾“å‡ºçš„å­—ç¬¦æ•°ã€‚.#è¡¨ç¤ºä¿ç•™çš„å°æ•°ç‚¹ä½æ•°ã€‚charä¸ºè½¬æ¢è¯´æ˜ç¬¦ã€‚
printfçš„æ ¼å¼ä¸²ä¸­</p>
<ul>
<li>\NNN æœ€å¤š3å…«è¿›åˆ¶æ•°å­—ï¼Œè¡¨ç¤ºå¯¹åº”çš„ASCIIå­—ç¬¦</li>
<li>\xHH æœ€å¤šä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œè¡¨ç¤ºå¯¹åº”çš„ASCIIå­—ç¬¦</li>
<li>\uHHHH Unicodeå­—ç¬¦</li>
<li>\UHHHHHHHH Unicodeå­—ç¬¦</li>
</ul>
<p>è¾“å…¥</p>
<ul>
<li>%: åŒ¹é…%ã€‚</li>
<li>d: åŒ¹é…æœ‰ç¬¦å·åè¿›åˆ¶æ•´æ•°ï¼Œå¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºint*ã€‚</li>
<li>i: åŒ¹é…æœ‰ç¬¦å·æ•´æ•°ï¼Œå¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºint*ã€‚ç”¨äºscanfï¼Œå¦‚æœè¾“å…¥çš„æ•´æ•°ä»¥0xå¼€å¤´ï¼Œåˆ™ä»¥16è¿›åˆ¶è¯»ï¼Œä»¥0å¼€å¤´ï¼Œåˆ™ä»¥8è¿›åˆ¶è¯»ï¼Œå¦åˆ™ä»¥åè¿›åˆ¶è¯»ã€‚</li>
<li>o: åŒ¹é…æ— ç¬¦å·å…«è¿›åˆ¶æ•´æ•°ã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºunsigned int*ã€‚</li>
<li>u: åŒ¹é…æ— ç¬¦å·åè¿›åˆ¶æ•´æ•°ã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºunsigned int*ã€‚</li>
<li>x|X: åŒ¹é…æ— ç¬¦å·åå…­è¿›åˆ¶æ•´æ•°ã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºunsigned int*ã€‚</li>
<li>f | e | E | g | a: åŒ¹é…æµ®ç‚¹æ•°ã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºfloat*ã€‚</li>
<li>s: åŒ¹é…ä¸€è¿ä¸²å­—ç¬¦ï¼Œåˆ°ç©ºç™½ç¬¦æˆ–å­—ç¬¦æ•°ç»„æ»¡äº†(è¦ç•™ä¸€ä¸ªä½ç½®ç»™è‡ªåŠ¨åŠ ä¸Šçš„'\0')ä¸ºæ­¢ã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºcharæ•°ç»„ã€‚</li>
<li>%.5s: è¡¨ç¤ºä»ç»™å®šå­—ç¬¦ä¸²ä¸­æœ€å¤šè¯»5ä¸ªå­—ç¬¦ã€‚</li>
<li>c: åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œä¸ä¼šåŠ ä¸Š'\0'ã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºchar*ã€‚</li>
<li>[char set]: åŒ¹é…æŒ‡å®šå­—ç¬¦é›†ä¸­çš„å­—ç¬¦ã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºchar*ã€‚ç‰¹æ®Šå­—ç¬¦<code>]</code>ï¼Œè¦åŒ¹é…å®ƒï¼Œå¿…é¡»å°†å®ƒæ”¾åœ¨<code>[</code>åï¼Œè¦æ’é™¤å®ƒï¼Œåˆ™éœ€æ”¾åœ¨<code>^</code>åã€‚ <code>-</code>å¿…é¡»æ”¾åœ¨å­—ç¬¦é›†çš„å¼€å¤´æˆ–ç»“å°¾ã€‚</li>
<li>p: åŒ¹é…æŒ‡é’ˆã€‚å¯¹åº”çš„æŒ‡é’ˆç±»å‹å¿…é¡»ä¸ºvoid**ã€‚</li>
<li>n: æ²¡çœ‹æ‡‚</li>
</ul>
<p>æŒ‡é’ˆç±»å‹ä¿®æ”¹ç¬¦</p>
<ul>
<li>
<p>h: é’ˆå¯¹diouxXn,å°†æŒ‡é’ˆç±»å‹æ”¹ä¸ºshort int æˆ– unsigned short intã€‚</p>
</li>
<li>
<p>hh: signed char, unsigned char</p>
</li>
<li>
<p>j: intmax_t,uintmax_t</p>
</li>
<li>
<p>t: ptrdiff_t</p>
</li>
<li>
<p>z: size_t</p>
</li>
<li>
<p>l: signed long int, unsigned long int; é’ˆå¯¹f,åˆ™æŒ‡é’ˆç±»å‹å˜ä¸ºdouble; é’ˆå¯¹c,sï¼Œç›¸å…³çš„æŒ‡é’ˆç±»å‹è¢«è®¤ä¸ºæ˜¯wide charater?</p>
</li>
<li>
<p>L: signed long long int, unsigned long long int; long long double</p>
</li>
<li>
<p>m: %ms, %#mc ä¸ºè¾“å…¥å­—ç¬¦ä¸²åˆ†é…ä¸€å—å†…å­˜ï¼ŒæŒ‡é’ˆç±»å‹æ”¹ä¸ºchar**ã€‚</p>
</li>
</ul>
<p>è¾“å‡º
<a href="https://alvinalexander.com/programming/printf-format-cheat-sheet/" target="_blank" rel="noopener noreferrer">ä¸€äº›ä½¿ç”¨ç¤ºä¾‹</a></p>
<p>// FLag characters</p>
<ul>
<li>#: #å¿…é¡»ç´§è·Ÿåœ¨%åé¢ï¼Œç”¨äºoï¼Œæ€»æ˜¯æ˜¾ç¤º0####ã€‚ç”¨äºxï¼Œæ€»æ˜¯æ˜¾ç¤º0x####ã€‚ç”¨äº[aAeEfFgG]ï¼Œæ€»æ˜¯ä¼šæ˜¾ç¤ºå°æ•°ç‚¹ã€‚æ³¨æ„ï¼š0,0xæ˜¯è¢«ç®—è¿›field  widthçš„ã€‚</li>
<li>0: ä¸è¶³çš„ä½åœ¨å·¦è¾¹ç”¨0è¡¥è¶³ã€‚å¦‚æœæŒ‡å®šäº†æµ®ç‚¹æ•°çš„ç²¾åº¦ï¼Œåˆ™è¢«å¿½ç•¥ã€‚</li>
<li>-: åœ¨maximum field widthçš„å·¦è¾¹ç•Œå¯¹é½ã€‚</li>
<li>' ': ç©ºæ ¼ã€‚æœ‰ç¬¦å·æ­£æ•°æœ€å‰é¢æ”¾ä¸€ä¸ªç©ºæ ¼ã€‚</li>
<li>+: æœ‰ç¬¦å·æ­£æ•°å‰é¢åŠ +ã€‚</li>
</ul>
<p>// Sing Unix Specification</p>
<ul>
<li>
<p>': åè¿›åˆ¶æ•°ä»¥åƒä¸ºå•ä½åŠ é€—å·ã€‚</p>
</li>
<li>
<p>I: idu, ä½¿ç”¨æœ¬åœ°å¯¹åº”çš„å­—ç¬¦è¾“å‡ºã€‚</p>
</li>
<li>
<p>d,i:åè¿›åˆ¶æœ‰ç¬¦å·</p>
</li>
<li>
<p>o,u,x,X</p>
</li>
<li>
<p>e,E: [-]d.ddde[+-]dd</p>
</li>
<li>
<p>f,F: å¸¸è§å°æ•°å½¢å¼</p>
</li>
<li>
<p>g,G: çœ‹æƒ…å†µè½¬æ¢ä¸ºf,e,F,Gä¸­çš„ä¸€ç§</p>
</li>
<li>
<p>a,A: åå…­è¿›åˆ¶çš„å°æ•°å½¢å¼0xh.hhhp[+-]</p>
</li>
<li>
<p>c</p>
</li>
<li>
<p>s</p>
</li>
<li>
<p>p</p>
</li>
<li>
<p>n</p>
</li>
<li>
<p>%</p>
</li>
</ul>
<h3 id="å·"> *å·</h3>
<div><pre><code><span>printf</span><span>(</span><span>"%*d"</span><span>,</span> <span>9</span><span>,</span> <span>123</span><span>)</span><span>;</span> <span>// '      1223'</span>
</code></pre>
<div><span>1</span><br></div></div><p><code>*</code>åœ¨æ ¼å¼ä¸²ä¸­è¡¨ç¤ºfiled witdhå’Œprecisionè¿™ä¸¤ä¸ªéƒ¨åˆ†ä½¿ç”¨ä¸‹ä¸€ä¸ªå‚æ•°è¡¨ç¤ºã€‚<code>*</code>æœ¬èº«æ‰€åœ¨çš„<code>%</code>å¯¹åº”çš„å‚æ•°åˆ™å»¶åä¸€ä½ã€‚<br>
åœ¨Single UNIX Specificationä¸­è¿˜æœ‰å¦ä¸€ç§ç­‰ä»·è¡¨ç¤ºã€‚</p>
<div><pre><code><span>printf</span><span>(</span><span>"%2$*1$d"</span><span>,</span> <span>9</span><span>,</span> <span>123</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><p>å…¶ä¸­<code>%2$</code>ä»£æ›¿äº†<code>%</code>ï¼Œ<code>*2$</code>ä»£æ›¿äº†<code>*</code>ï¼Œ<code>#$</code>ä»£è¡¨ä½¿ç”¨å¯¹åº”çš„å‚æ•°ä½ç½®ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ç§å†™æ³•å¯ä»¥é€šè¿‡<code>#$</code>ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ã€‚å¯æƒœï¼ŒC99ä¸­æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h2 id="regexç³»åˆ—"> regexç³»åˆ—</h2>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;sys/types.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;regex.h></span></span>

<span>int</span> <span>regcomp</span><span>(</span><span>regex_t</span> <span>*</span>preg<span>,</span> <span>const</span> <span>char</span> <span>*</span>regex<span>,</span> <span>int</span> cflags<span>)</span><span>;</span>
<span>int</span> <span>regexec</span><span>(</span><span>const</span> <span>regex_t</span> <span>*</span>preg<span>,</span> <span>const</span> <span>char</span> <span>*</span>string<span>,</span> <span>size_t</span> nmatch<span>,</span>
            <span>regmatch_t</span> pmatch<span>[</span><span>]</span><span>,</span> <span>int</span> eflags<span>)</span><span>;</span>
<span>size_t</span> <span>regerror</span><span>(</span><span>int</span> errcode<span>,</span> <span>regex_t</span> <span>*</span>preg<span>,</span> <span>char</span> <span>*</span>errbuf<span>,</span> <span>size_t</span> errbuf_size<span>)</span><span>;</span>
<span>void</span> <span>regfree</span><span>(</span><span>regex_t</span> <span>*</span>preg<span>)</span><span>;</span>

<span>typedef</span> <span>struct</span> <span>{</span>
    <span>regoff_t</span> rm_so<span>;</span> <span>// åŒ¹é…çš„å­ä¸²å¼€å¤´ä½ç½®</span>
    <span>regoff_t</span> rm_eo<span>;</span> <span>// åŒ¹é…å­ä¸²çš„ç»“å°¾ä½ç½®ï¼Œç›¸å¯¹äºå­ä¸²å¼€å¤´ã€‚</span>
<span>}</span> <span>regmatch_t</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>regcomp()ç”¨äºå°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘ä¸ºé€‚ç”¨äºåç»­regexec()æœç´¢çš„å½¢å¼ã€‚</p>
<ul>
<li>preg æŒ‡é’ˆæŒ‡å‘pattern bufferçš„å‚¨å­˜åŒºåŸŸ</li>
<li>regex æŒ‡é’ˆæŒ‡å‘cé£æ ¼å­—ç¬¦ä¸²(the null-terminated string)</li>
<li>cflags ç”¨äºå†³å®šç¼–è¯‘çš„ç±»å‹
<ul>
<li>REG_EXTENDEDï¼šä½¿ç”¨POSIXæ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</li>
<li>REG_ICASE: å¿½ç•¥å¤§å°å†™</li>
<li>REG_NOSUB: ä¸æ¯”æŠ¥å‘ŠåŒ¹é…çš„ä½ç½®ã€‚regexec()ä¸­çš„nmatch, pmatchå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚</li>
<li>REG_NEWLINE: <code>*</code>ä¸ä¼šåŒ¹é… newline, <code>[^...]</code> å³ä½¿ä¸åŒ…å«newlineï¼Œä¹Ÿä¸ä¼šåŒ¹é…newlineã€‚ç´§è·Ÿåœ¨newlineå<code>^</code>åŒ¹é…ç©ºå­—ç¬¦ã€‚newlineå‰çš„<code>$</code>ä¹Ÿç«‹å³åŒ¹é…ç©ºå­—ç¬¦ã€‚</li>
</ul>
</li>
<li>eflags
<ul>
<li>REG_NOTBOL: <code>^</code>æ€»æ˜¯åŒ¹é…å¤±è´¥ã€‚å¸¸ç”¨äºä¸€å¤§å †å­—ç¬¦ä¸²è¢«æ‹†åˆ†ä¸ºå¤šä¸ªå­ä¸²åˆ†åˆ«ä¼ å…¥regexec()å¤„ç†ã€‚</li>
<li>REG_NOTEOL: <code>$</code>æ€»æ˜¯åŒ¹é…å¤±è´¥ã€‚</li>
</ul>
</li>
<li>nmatch åŒ¹é…å‡ ä¸ª</li>
<li>pmatch åŒ¹é…ç»“æœ</li>
<li>regcomp()è¿”å›0è¡¨ç¤ºæˆåŠŸç¼–è¯‘ï¼Œå…¶ä»–ä¸ºé”™è¯¯ç ã€‚regexecè¿”å›0è¡¨ç¤ºåŒ¹é…æˆåŠŸï¼ŒREG_NOMATCHè¡¨ç¤ºåŒ¹é…å¤±è´¥ï¼Œå…¶ä»–ä¸ºé”™è¯¯ç ã€‚</li>
</ul>
<p>æ‰€æœ‰çš„æ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢éƒ½å¿…é¡»ä½¿ç”¨ç¼–è¯‘è¿‡çš„pattern bufferã€‚å› æ­¤regexecçš„pregå‚æ•°å¿…é¡»æ˜¯ç»è¿‡regcompç¼–è¯‘è¿‡çš„ã€‚
regerror()ç”¨äºå°†regcomp()å’Œregexec()çš„é”™è¯¯ç è½¬æ¢ä¸ºé”™è¯¯ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨errbufä¸­ã€‚<br>
regfree()é‡Šæ”¾é¢„ç¼–è¯‘çš„pattern bufferçš„å†…å­˜ã€‚</p>
<h2 id="system"> system</h2>
<p><code>int system(const char *command);</code> åœ¨ stdlib.h ä¸­</p>
<p>ä½¿ç”¨fork(2)åˆ›å»ºå­è¿›ç¨‹ä½¿ç”¨execl(3)æ‰§è¡Œcommand: execl(&quot;/bin/sh&quot;, &quot;sh&quot;, &quot;-c&quot;, command, (char *)NULL);</p>
<h2 id="popen-pclose"> popen/pclose</h2>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;stdio.h></span></span>
FILE <span>*</span><span>popen</span><span>(</span><span>const</span> <span>char</span> <span>*</span>command<span>,</span> <span>const</span> <span>char</span> <span>*</span>type<span>)</span><span>;</span>
<span>int</span> <span>pclose</span><span>(</span>FILE <span>*</span>stream<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><ul>
<li>popen() é€šè¿‡åˆ›å»ºä¸€ä¸ªç®¡é“æ‰“å¼€ä¸€ä¸ªè¿›ç¨‹ã€‚å› ä¸ºç®¡é“æ˜¯å•å‘çš„ï¼Œæ‰€ä»¥typeåªèƒ½æ˜¯ræˆ–wã€‚</li>
<li>popen() çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ ‡å‡†I/Oæµï¼Œå¿…é¡»ç”¨pclose()å…³é—­ã€‚</li>
<li>popen() type=wæ—¶ï¼Œå‘è¿”å›çš„æµä¸­å†™ç›¸å½“äºå‘commandçš„æ ‡å‡†è¾“å…¥å†™ã€‚type=ræ—¶ï¼Œä»æµä¸­è¯»ï¼Œç›¸å½“äºä»commandçš„æ ‡å‡†è¾“å‡ºä¸­è¯»ã€‚</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">C++ å°çŸ¥è¯†</title>
    <id>https://kigane.github.io/note/cpp/</id>
    <link href="https://kigane.github.io/note/cpp/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="lvalue-rvalue"> lvalue &amp; rvalue</h2>
<p>ç®€å•æ¥è¯´</p>
<ul>
<li>å·¦å€¼(lvalue)ï¼šæ˜¯å˜é‡ï¼Œå ç”¨æŸä¸€å—ç¡®å®šçš„å†…å­˜ã€‚</li>
<li>å³å€¼(rvalue)ï¼šæ˜¯å­—é¢é‡æˆ–ä¸´æ—¶é‡ã€‚</li>
</ul>
<div><pre><code><span>int</span> i <span>=</span> <span>10</span><span>;</span> <span>// i æ˜¯å·¦å€¼ï¼Œ 10 æ˜¯å³å€¼(å­—é¢é‡) </span>
<span>int</span> a <span>=</span> i<span>;</span> <span>// a, i éƒ½æ˜¯å·¦å€¼</span>
<span>int</span> b <span>=</span> a <span>+</span> i<span>;</span> <span>// b æ˜¯å·¦å€¼ï¼Œa+i æ˜¯å³å€¼(ä¸´æ—¶é‡)</span>

<span>int</span> <span>GetInt</span><span>(</span><span>)</span><span>{</span> <span>int</span> a <span>=</span> <span>7</span><span>;</span><span>return</span> a<span>;</span><span>}</span>    <span>// è¿”å›å€¼æ˜¯å³å€¼</span>
<span>int</span><span>&amp;</span> <span>GetInt</span><span>(</span><span>int</span><span>&amp;</span> a<span>)</span><span>{</span> a <span>=</span> <span>7</span><span>;</span><span>return</span> a<span>;</span><span>}</span> <span>// è¿”å›å€¼æ˜¯å·¦å€¼</span>

<span>// æœ‰ä¸€äº›æ–¹æ³•å¦‚ä¸‹</span>
<span>void</span> <span>GetVal1</span><span>(</span><span>int</span> a<span>)</span><span>{</span>cout <span>&lt;&lt;</span> a<span>;</span><span>}</span>
<span>void</span> <span>GetVal2</span><span>(</span><span>int</span><span>&amp;</span> a<span>)</span><span>{</span>cout <span>&lt;&lt;</span> a<span>;</span><span>}</span>
<span>void</span> <span>GetVal3</span><span>(</span><span>const</span> <span>int</span><span>&amp;</span> a<span>)</span><span>{</span>cout <span>&lt;&lt;</span> a<span>;</span><span>}</span>
<span>void</span> <span>GetVal4</span><span>(</span><span>int</span><span>&amp;&amp;</span> a<span>)</span><span>{</span>cout <span>&lt;&lt;</span> a<span>;</span><span>}</span>

<span>GetVal1</span><span>(</span>a<span>+</span>i<span>)</span><span>;</span> <span>// æ­£å¸¸</span>
<span>GetVal2</span><span>(</span>a<span>+</span>i<span>)</span><span>;</span> <span>// ç¼–è¯‘é”™è¯¯ï¼Œéå¸¸é‡å¼•ç”¨çš„åˆå§‹å€¼å¿…é¡»ä¸ºå·¦å€¼</span>
<span>GetVal3</span><span>(</span>a<span>+</span>i<span>)</span><span>;</span> <span>// æ­£å¸¸ã€‚å¸¸é‡å¼•ç”¨çš„åˆå§‹å€¼å¯ä»¥æ˜¯å·¦å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å³å€¼ ==> æ‰€ä»¥å­—ç¬¦ä¸²å‚æ•°å¸¸å¸¸å£°æ˜ä¸ºå¸¸é‡å¼•ç”¨ã€‚</span>
<span>GetVal4</span><span>(</span>a<span>+</span>i<span>)</span><span>;</span> <span>// æ­£å¸¸ã€‚&amp;&amp; è¡¨ç¤ºå³å€¼å¼•ç”¨ã€‚</span>
<span>GetVal4</span><span>(</span>b<span>)</span><span>;</span> <span>// ç¼–è¯‘é”™è¯¯ï¼Œæ— æ³•å°†å³å€¼å¼•ç”¨ç»‘å®šåˆ°å·¦å€¼ã€‚</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p>æœ‰å•¥å¥½å¤„å‘¢ï¼Ÿå¥½å¤„åœ¨äºå¯ä»¥é€šè¿‡é‡è½½å‡½æ•°ï¼ŒåŒºåˆ†å‡ºä¼ å…¥çš„å‚æ•°æ˜¯ä¸æ˜¯ä¸´æ—¶çš„ï¼Œå› æ­¤å¯ä»¥åšä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚</p>
<div><pre><code><span>// å¯ä»¥æ¥å—å·¦å€¼å’Œå³å€¼</span>
<span>void</span> <span>PrintName</span><span>(</span><span>const</span> string<span>&amp;</span> name<span>)</span><span>{</span>cout <span>&lt;&lt;</span> <span>"[lvalue]"</span> <span>&lt;&lt;</span> name<span>;</span><span>}</span>
<span>// å¯¹äºå³å€¼ï¼Œæœ‰ç‰¹æ®Šé‡è½½</span>
<span>void</span> <span>PrintName</span><span>(</span>string<span>&amp;&amp;</span> name<span>)</span><span>{</span>cout <span>&lt;&lt;</span> <span>"[rvalue]"</span> <span>&lt;&lt;</span> name<span>;</span><span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h2 id="ç§»åŠ¨è¯­ä¹‰-move-semantics"> ç§»åŠ¨è¯­ä¹‰(move semantics)</h2>
<p>å…ˆçœ‹ä¸€ä¸ªä¾‹å­</p>
<div><pre><code><span>class</span> <span>String</span>
<span>{</span>
<span>public</span><span>:</span>
    <span>String</span><span>(</span><span>)</span> <span>=</span> <span>default</span><span>;</span>
    <span>String</span><span>(</span><span>const</span> <span>char</span><span>*</span> str<span>)</span>
    <span>{</span>
        <span>printf</span><span>(</span><span>"Created!\n"</span><span>)</span><span>;</span>
        m_Size <span>=</span> <span>strlen</span><span>(</span>str<span>)</span><span>;</span>
        m_Data <span>=</span> <span>new</span> <span>char</span><span>[</span>m_Size<span>]</span><span>;</span>
        <span>memcpy</span><span>(</span>m_Data<span>,</span> str<span>,</span> m_Size<span>)</span><span>;</span>
    <span>}</span>

    <span>String</span><span>(</span><span>const</span> String<span>&amp;</span> other<span>)</span>
    <span>{</span>
        <span>printf</span><span>(</span><span>"Copied!\n"</span><span>)</span><span>;</span>
        m_Size <span>=</span> other<span>.</span>m_Size<span>;</span>
        m_Data <span>=</span> <span>new</span> <span>char</span><span>[</span>m_Size<span>]</span><span>;</span>
        <span>memcpy</span><span>(</span>m_Data<span>,</span> other<span>.</span>m_Data<span>,</span> m_Size<span>)</span><span>;</span>
    <span>}</span>

    <span>~</span><span>String</span><span>(</span><span>)</span>
    <span>{</span>
        <span>printf</span><span>(</span><span>"Deleted!\n"</span><span>)</span><span>;</span>
        <span>delete</span> m_Data<span>;</span>
    <span>}</span> 

    <span>void</span> <span>Print</span><span>(</span><span>)</span>
    <span>{</span>
        <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> m_Size<span>;</span> <span>++</span>i<span>)</span>
            <span>printf</span><span>(</span><span>"%c"</span><span>,</span> m_Data<span>[</span>i<span>]</span><span>)</span><span>;</span>
        <span>printf</span><span>(</span><span>"\n"</span><span>)</span><span>;</span>
    <span>}</span>
<span>private</span><span>:</span>
    <span>int</span> m_Size<span>;</span>
    <span>char</span><span>*</span> m_Data<span>;</span>
<span>}</span><span>;</span>

<span>class</span> <span>Entity</span>
<span>{</span>
<span>public</span><span>:</span>
    <span>Entity</span><span>(</span><span>)</span> <span>=</span> <span>default</span><span>;</span>
    <span>Entity</span><span>(</span><span>const</span> String<span>&amp;</span> name<span>)</span> <span>:</span> <span>m_Name</span><span>(</span>name<span>)</span> <span>{</span><span>}</span>
    <span>void</span> <span>PrintName</span><span>(</span><span>)</span><span>{</span> m_Name<span>.</span><span>Print</span><span>(</span><span>)</span><span>;</span> <span>}</span>
<span>private</span><span>:</span>
    String m_Name<span>;</span>
<span>}</span><span>;</span>

<span>int</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    Entity <span>entity</span><span>(</span><span>"Sekiro"</span><span>)</span><span>;</span>
    entity<span>.</span><span>PrintName</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br></div></div><p>æ‰§è¡Œç»“æœä¸ºï¼š</p>
<div><pre><code>Created!
Copied!
Deleted!
Sekiro
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>è¿™æ„å‘³ç€ï¼Œåœ¨Entity(String name)çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œä¸ºå³å€¼&quot;Sekiro&quot;è°ƒç”¨Stringçš„ç›¸åº”æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨Stringçš„æ‹·è´æ„é€ å‡½æ•°ï¼Œå°†å…¶å€¼ä¼ å…¥Entity.m_Nameï¼Œæœ€åé”€æ¯ä¿å­˜&quot;Sekiro&quot;çš„ä¸´æ—¶å¯¹è±¡ã€‚
ä¸€ä¸ªç®€å•çš„èµ‹å€¼æ“ä½œï¼Œç«Ÿè°ƒç”¨äº†ä¸¤æ¬¡æ„é€ å‡½æ•°ï¼Œåœ¨å †ä¸Šåˆ†é…äº†ä¸¤æ¬¡å†…å­˜ã€‚é—®é¢˜å¾ˆå¤§ğŸ¤”ã€‚</p>
<p>è§£å†³æ–¹æ³•æ˜¯ï¼Œå¯¹äºä¼ å…¥çš„å³å€¼åšç‰¹æ®Šå¤„ç†ï¼Œåœ¨æ„é€ å‡ºæ¥ä¸´æ—¶å¯¹è±¡åï¼Œç›´æ¥èµ‹å€¼ï¼Œä¸è¦å†è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ã€‚</p>
<div><pre><code><span>// åœ¨Stringä¸­æ·»åŠ </span>
<span>String</span><span>(</span>String<span>&amp;&amp;</span> other<span>)</span> <span>noexcept</span>
<span>{</span>
    <span>printf</span><span>(</span><span>"Moved!\n"</span><span>)</span><span>;</span>
    m_Size <span>=</span> other<span>.</span>m_Size<span>;</span>
    m_Data <span>=</span> other<span>.</span>m_Data<span>;</span>

    <span>// ä¸´æ—¶å˜é‡ä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥éœ€è¦é˜²æ­¢ææ„æ—¶åˆ é™¤æ•°æ®</span>
    other<span>.</span>m_Data <span>=</span> <span>nullptr</span><span>;</span>
    other<span>.</span>m_Size <span>=</span> <span>0</span><span>;</span>
<span>}</span>

<span>// åœ¨ Entity ä¸­ä¿®æ”¹ std::move(name) ç›¸å½“äº (String&amp;&amp;) name</span>
<span>Entity</span><span>(</span><span>const</span> String<span>&amp;</span> name<span>)</span> <span>:</span> <span>m_Name</span><span>(</span>std<span>::</span><span>move</span><span>(</span>name<span>)</span><span>)</span><span>{</span><span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><p>ç°åœ¨æ‰§è¡Œç»“æœä¸º</p>
<div><pre><code>Created!
Moved!
Deleted!
Sekiro
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>èŠ‚çœäº†ä¸€æ¬¡å †å†…å­˜åˆ†é…ã€‚</p>
<h2 id="inline"> inline</h2>
<p>ç›´æ¥åœ¨ç±»ä¸­å£°æ˜å¹¶å®ç°çš„æ–¹æ³•æ˜¯éšå¼çš„inlineå‡½æ•°ï¼Œä¸éœ€è¦å†åŠ inlineå‰ç¼€ã€‚</p>
<h2 id="constexpr"> constexpr</h2>
<p>æŒ‡æ˜å˜é‡æˆ–å‡½æ•°çš„å€¼å¯ä»¥å‡ºç°åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ã€‚é€šè¿‡æ·»åŠ constexpræ¥å£°æ˜çš„å˜é‡æˆ–å‡½æ•°ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸè¿›è¡Œè®¡ç®—ã€‚</p>
<ul>
<li>literal type: æ ‡é‡ç±»å‹ï¼Œå¼•ç”¨ç±»å‹ï¼Œä»¥åŠå‰ä¸¤ç§çš„æ•°ç»„ç±»å‹ã€‚(C++20è¿˜å¯èƒ½æœ‰æ›´å¤š)</li>
<li>constexpr å˜é‡ï¼Œå‡½æ•°è¿”å›å€¼å’Œå‚æ•°ç±»å‹å¿…é¡»æ˜¯literal typeã€‚</li>
<li>inlineæ˜¯å°†å‡½æ•°ä½“ç›´æ¥æ¬è¿‡æ¥ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚constexpræ˜¯ç›´æ¥å°†ç¼–è¯‘å™¨å¯è®¡ç®—çš„ç»“æœç®—å‡ºæ¥ï¼Œæ¥å‡å°‘è°ƒç”¨ï¼Œæ‰§è¡Œå‡½æ•°çš„å¼€é”€ã€‚</li>
</ul>
<div><pre><code><span><span>#</span><span>include</span><span>&lt;iostream></span></span>
<span>using</span> <span>namespace</span> std<span>;</span>
  
<span>constexpr</span> <span>long</span> <span>int</span> <span>fib</span><span>(</span><span>int</span> n<span>)</span>
<span>{</span>
    <span>return</span> <span>(</span>n <span>&lt;=</span> <span>1</span><span>)</span><span>?</span> n <span>:</span> <span>fib</span><span>(</span>n<span>-</span><span>1</span><span>)</span> <span>+</span> <span>fib</span><span>(</span>n<span>-</span><span>2</span><span>)</span><span>;</span>
<span>}</span>
  
<span>int</span> <span>main</span> <span>(</span><span>)</span>
<span>{</span>
    <span>// value of res is computed at compile time. æ‰§è¡Œçš„éå¸¸å¿«ã€‚</span>
    <span>const</span> <span>long</span> <span>int</span> res <span>=</span> <span>fib</span><span>(</span><span>30</span><span>)</span><span>;</span> 
    cout <span>&lt;&lt;</span> res<span>;</span>
    <span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h2 id="å¯å˜å‚æ•°"> å¯å˜å‚æ•°</h2>
<ul>
<li>åœ¨ stdarg.h ä¸­</li>
<li>va_list ä¸ºå­˜å‚¨å¯å˜å‚æ•°çš„ç±»å‹ã€‚å³functionä¸­çš„ <code>...</code></li>
<li>va_start() å®ã€‚æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºva_listç±»å‹çš„å˜é‡ï¼Œç¬¬äºŒä¸ªä¸ºå¯å˜å‚æ•°<code>...</code>çš„å‰ä¸€ä¸ªå‚æ•°ã€‚ç”¨äºåˆå§‹åŒ–å¯å˜å‚æ•°åˆ—è¡¨ã€‚</li>
<li>va_arg() å®ã€‚æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºva_listç±»å‹çš„å˜é‡ï¼Œç¬¬äºŒä¸ªä¸ºç”¨äºæ¥å—å¯å˜å‚æ•°çš„ç±»å‹ã€‚ç”¨äºè·å–å¯å˜å‚æ•°åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå‚æ•°ã€‚(PS:printfçš„format stringå°±æ˜¯ç”¨äºç¡®å®šva_argéœ€è¦å¤„ç†çš„å˜é‡ç±»å‹ã€‚)</li>
<li>va_end() å®ã€‚ä¸€ä¸ªå‚æ•°ï¼Œä¸ºva_listç±»å‹çš„å˜é‡ã€‚ç”¨äºæ¸…ç†va_list</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;stdarg.h></span></span>
<span>double</span> <span>avg</span><span>(</span><span>int</span> num<span>,</span> <span>.</span><span>.</span><span>.</span><span>)</span>
<span>{</span>
    va_list args<span>;</span>
    <span>double</span> sum <span>=</span> <span>0</span><span>;</span>
    <span>va_start</span><span>(</span>args<span>,</span> num<span>)</span><span>;</span>
    <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> num<span>;</span> <span>++</span>i<span>)</span>
    <span>{</span>
        sum <span>+=</span> <span>va_arg</span><span>(</span>args<span>,</span> <span>double</span><span>)</span><span>;</span>
    <span>}</span>
    <span>va_end</span><span>(</span>args<span>)</span><span>;</span>
    <span>return</span> sum <span>/</span> num<span>;</span>
<span>}</span>

<span>int</span> <span>main</span><span>(</span><span>int</span> argc<span>,</span> <span>const</span> <span>char</span><span>*</span> argv<span>[</span><span>]</span><span>)</span>
<span>{</span>
    <span>printf</span><span>(</span><span>"average = %4.2f\n"</span><span>,</span> <span>avg</span><span>(</span><span>3</span><span>,</span> <span>1.2</span><span>,</span> <span>3.4</span><span>,</span> <span>5.6</span><span>)</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><p>PS: floatåœ¨é€šè¿‡<code>...</code>ä¼ é€’æ—¶ï¼Œä¼šè¢«æå‡ä¸ºdoubleã€‚å¦‚æœç”¨floatæ¥æ”¶ï¼Œç¨‹åºä¼šabortã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">éšæœºæ•°</title>
    <id>https://kigane.github.io/note/cpp/cpp-random/</id>
    <link href="https://kigane.github.io/note/cpp/cpp-random/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="çº¿æ€§åŒä½™æ³•"> çº¿æ€§åŒä½™æ³•</h2>
<div><pre><code><span>unsigned</span> <span>int</span> <span>PRNG</span><span>(</span><span>)</span> <span>// pseudo-random number generator</span>
<span>{</span>
    <span>static</span> <span>unsigned</span> <span>int</span> seed<span>{</span><span>5323</span><span>}</span><span>;</span>
    seed <span>=</span> <span>8253729</span> <span>*</span> seed <span>+</span> <span>2396403</span><span>;</span>
    <span>return</span> seed <span>%</span> <span>32768</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>åŸç†å¤§è‡´å¦‚ä¸Šã€‚è¿™æ ·ç®€å•çš„éšæœºæ•°ä¸å¤Ÿ&quot;å¥½&quot;ã€‚</p>
<h2 id="c-æ ‡å‡†åº“ä¸­çš„éšæœºæ•°ç”Ÿæˆ"> C æ ‡å‡†åº“ä¸­çš„éšæœºæ•°ç”Ÿæˆ</h2>
<p>åŸç†å°±æ˜¯çº¿æ€§åŒä½™æ³•ï¼Œä¸åŒç¼–è¯‘å™¨å®ç°ç•¥æœ‰ä¸åŒï¼Œä¸”å¤§å¤šæœ‰ç¼ºé™·ã€‚ä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;cstdlib></span> <span>// for std::rand() and std::srand()</span></span>
<span><span>#</span><span>include</span> <span>&lt;ctime></span> <span>// for std::time()</span></span>

<span>void</span> <span>PrintNumbersWithRand</span><span>(</span><span>)</span>
<span>{</span>
    std<span>::</span><span>srand</span><span>(</span><span><span>static_cast</span><span><span>&lt;</span><span>unsigned</span> <span>int</span><span>></span></span></span><span>(</span>std<span>::</span><span>time</span><span>(</span><span>nullptr</span><span>)</span><span>)</span><span>)</span><span>;</span>
    <span>// å› ä¸ºæŸäº›ç¼–è¯‘å™¨ä¸­randç®—æ³•çš„ç¼ºé™·ï¼Œå¯¼è‡´ç¬¬ä¸€ä¸ªéšæœºæ•°å¤§æ¦‚ç‡ç›¸åŒï¼Œæ‰€ä»¥è¿™é‡Œå…ˆè°ƒç”¨ä¸€æ¬¡å»æ‰ç¬¬ä¸€ä¸ª</span>
    std<span>::</span><span>rand</span><span>(</span><span>)</span><span>;</span>

    <span>// æ‰“å° 100 ä¸ªéšæœºæ•°</span>
    <span>for</span> <span>(</span><span>int</span> count<span>{</span><span>1</span><span>}</span><span>;</span> count <span>&lt;=</span> <span>100</span><span>;</span> <span>++</span>count<span>)</span>
    <span>{</span>
        std<span>::</span>cout <span>&lt;&lt;</span> std<span>::</span><span>rand</span><span>(</span><span>)</span> <span>&lt;&lt;</span> <span>'\t'</span><span>;</span>

        <span>if</span> <span>(</span>count <span>%</span> <span>5</span> <span>==</span> <span>0</span><span>)</span>
            std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><h2 id="ä¸€ä¸ªå¥½çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨-prng-çš„æ ‡å‡†"> ä¸€ä¸ªå¥½çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨(PRNG)çš„æ ‡å‡†</h2>
<ul>
<li>åº”è¯¥ä»¥å¤§è‡´ç›¸åŒçš„æ¦‚ç‡ç”Ÿæˆæ¯ä¸ªæ•°å­—(ç”Ÿæˆå…­ä¸ªæ•°å­—5,6,7,8,9çš„æ¦‚ç‡å¤§è‡´ç›¸ç­‰)ï¼Œå³æ•°å­—åˆ†å¸ƒå‡åŒ€æ€§ã€‚</li>
<li>ç”Ÿæˆåºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªæ•°å­—åº”è¯¥æ˜¯ä¸å¯é¢„æµ‹ã€‚(num = num + 1)</li>
<li>ç”Ÿæˆçš„æ•°å­—åºåˆ—åº”è¯¥æœ‰è‰¯å¥½çš„ç©ºé—´åˆ†å¸ƒ(ç”Ÿæˆ0-9ä¹‹é—´çš„éšæœºæ•°ï¼Œä¸èƒ½åªç”Ÿæˆ5,6,7,8,9ï¼Œç”Ÿæˆçš„æ•°è½åœ¨å¤§ï¼Œä¸­ï¼Œå°èŒƒå›´å†…çš„æ¦‚ç‡ä¹Ÿåº”å¤§è‡´ç›¸å½“)ï¼Œå³ç©ºé—´åˆ†å¸ƒå‡åŒ€æ€§ã€‚</li>
<li>æ‰€æœ‰çš„PRNGéƒ½æœ‰å‘¨æœŸæ€§ã€‚é€šå¸¸ï¼Œå‘¨æœŸè¶Šå¤§è¶Šå¥½ã€‚</li>
</ul>
<h2 id="æ›´å¥½çš„éšæœºæ•°ç”Ÿæˆå™¨"> æ›´å¥½çš„éšæœºæ•°ç”Ÿæˆå™¨</h2>
<p>ä½¿ç”¨æ¢…æ£®æ—‹è½¬æ¼”ç®—æ³•(Mersenne Twister)ã€‚åœ¨C++11ä¸­å¼•å…¥ã€‚</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;iostream></span></span>
<span><span>#</span><span>include</span> <span>&lt;random></span> <span>// for std::mt19937</span></span>
<span><span>#</span><span>include</span> <span>&lt;ctime></span> <span>// for std::time</span></span>
 
<span>int</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
	<span>// åˆå§‹åŒ– mersenne twisterï¼Œå°†æ—¶é—´ä½œä¸º seedã€‚</span>
	std<span>::</span>mt19937 mersenne<span>{</span> <span><span>static_cast</span><span><span>&lt;</span>std<span>::</span>mt19937<span>::</span>result_type<span>></span></span></span><span>(</span>std<span>::</span><span>time</span><span>(</span><span>nullptr</span><span>)</span><span>)</span> <span>}</span><span>;</span>
 
	<span>// ç”Ÿæˆ 1-6 ä¹‹é—´éšæœºæ•´æ•°çš„PRNG</span>
	std<span>::</span>uniform_int_distribution die<span>{</span> <span>1</span><span>,</span> <span>6</span> <span>}</span><span>;</span> <span>// C++17</span>
	<span>// std::uniform_int_distribution&lt;> die{ 1, 6 }; // C++11</span>
 
	<span>for</span> <span>(</span><span>int</span> count<span>{</span> <span>1</span> <span>}</span><span>;</span> count <span>&lt;=</span> <span>48</span><span>;</span> <span>++</span>count<span>)</span>
	<span>{</span>
		std<span>::</span>cout <span>&lt;&lt;</span> <span>die</span><span>(</span>mersenne<span>)</span> <span>&lt;&lt;</span> <span>'\t'</span><span>;</span>

		<span>if</span> <span>(</span>count <span>%</span> <span>6</span> <span>==</span> <span>0</span><span>)</span>
			std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span><span>;</span>
	<span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><h2 id="effolkronium-s-random-library"> Effolkroniumâ€™s random library.</h2>
<p>ä¸€ä¸ªéšæœºæ•°åº“(çº¯å¤´æ–‡ä»¶)ã€‚æä¾›äº†ä¾¿äºä½¿ç”¨çš„APIã€‚</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;iostream></span></span>
<span><span>#</span><span>include</span> <span>"random.hpp"</span></span>
 
<span>// get base random alias which is auto seeded and has static API and internal state</span>
<span>using</span> Random <span>=</span> effolkronium<span>::</span>random_static<span>;</span>
 
<span>int</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
	std<span>::</span>cout <span>&lt;&lt;</span> <span>Random</span><span>::</span><span>get</span><span>(</span><span>1</span><span>,</span> <span>6</span><span>)</span> <span>&lt;&lt;</span> <span>'\n'</span><span>;</span>
	std<span>::</span>cout <span>&lt;&lt;</span> <span>Random</span><span>::</span><span>get</span><span>(</span><span>1</span><span>,</span> <span>10</span><span>)</span> <span>&lt;&lt;</span> <span>'\n'</span><span>;</span>
    <span>// decltype(val) is long double</span>
	<span>auto</span> val <span>=</span> <span>Random</span><span>::</span><span>get</span><span>(</span><span>1.l</span><span>,</span> <span>-</span><span>1.l</span><span>)</span>
	<span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">C/C++ æ–‡ä»¶ IO</title>
    <id>https://kigane.github.io/note/cpp/file-io/</id>
    <link href="https://kigane.github.io/note/cpp/file-io/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="c"> C</h2>
<h3 id="è¯»å†™"> è¯»å†™</h3>
<p>Cæä¾›ä¸¤ç§è®¿é—®æ–‡ä»¶çš„é€”å¾„ï¼šäºŒè¿›åˆ¶æ¨¡å¼å’Œæ–‡æœ¬æ¨¡å¼ã€‚äºŒè¿›åˆ¶æ¨¡å¼ä¸­æ‰“å¼€çš„æ–‡ä»¶ä¸€ä¸ªå­—èŠ‚éƒ½ä¸ä¼šå˜ï¼Œè€Œæ–‡æœ¬æ¨¡å¼ä¸­æ‰“å¼€çš„æ–‡ä»¶ä¸­çš„è¡Œæœ«å°¾å’Œæ–‡ä»¶æœ«å°¾ä¼šè¢«æ˜ å°„ä¸ºCæ¨¡å¼(è¡Œå°¾:\n, æ–‡ä»¶æœ«å°¾: EOF)ã€‚</p>
<p>æ¨¡å¼ä¸²</p>
<ul>
<li>r è¯»</li>
<li>w å†™ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºæ–°æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œä¼šå…ˆåˆ é™¤æ–‡ä»¶å†…å®¹ã€‚</li>
<li>a å†™ï¼Œæ·»åŠ ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºæ–°æ–‡ä»¶ã€‚</li>
<li><code>+</code> åç¼€ï¼Œè¡¨ç¤ºä»¥æ›´æ–°æ¨¡å¼æ‰“å¼€ï¼Œå¯è¯»å¯å†™ã€‚ä½†æœ‰ä¸€äº›è§„åˆ™
<ul>
<li>ä»è¯»æ¨¡å¼è½¬æ¢åˆ°å†™æ¨¡å¼å‰ï¼Œéœ€è¦å…ˆè°ƒç”¨ä¸€ä¸ªæ–‡ä»¶å®šä½å‡½æ•°ï¼Œæˆ–é‡åˆ°EOF</li>
<li>ä»å†™æ¨¡å¼è½¬æ¢åˆ°è¯»æ¨¡å¼å‰ï¼Œå¿…é¡»å…ˆè°ƒç”¨fflushå‡½æ•°</li>
</ul>
</li>
<li>b åç¼€ï¼Œè¡¨ç¤ºä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€</li>
<li>x åç¼€ï¼ŒC11</li>
</ul>
<p>stdio.hå¤´æ–‡ä»¶ä¸­åŒ…å«stdin,stdout,stderrä¸‰ä¸ªæ ‡å‡†æµæ–‡ä»¶çš„æ–‡ä»¶æŒ‡é’ˆã€‚</p>
<ul>
<li>FILE *fopen(const char *filename, const char *mode);</li>
<li>int fclose(FILE *stream);</li>
<li>FILE *freopen(const char *filename, const char *mode, FILE *stream); // å°†streamæµé‡å®šå‘åˆ°æ–‡ä»¶ã€‚å¸¸ç”¨ï¼šfreopen(&quot;foo&quot;, &quot;w&quot;, stdout);</li>
</ul>
<hr>
<ul>
<li>int putc(int c, FILE *stream); // å‘streamå†™å…¥ä¸€ä¸ªå­—ç¬¦cï¼Œç”¨intè€Œécharæ˜¯å› ä¸ºEOFæ˜¯ä¸€ä¸ªè´Ÿçš„æ•´æ•°å¸¸é‡ã€‚</li>
<li>int fputc(int c, FILE *stream); // åŠŸèƒ½åŒputcã€‚ä½†putcæ˜¯å®ï¼Œfputcæ˜¯å‡½æ•°ã€‚é€šå¸¸putcæ›´å¿«ã€‚</li>
<li>int putchar(int c); // å°†ä¸€ä¸ªå­—ç¬¦æ”¾å…¥stdout</li>
<li>int fputs(const char *s, FILE *stream); // å‘streamå†™å…¥ä¸€è¡Œå­—ç¬¦cã€‚ä¸ä¼šè‡ªåŠ¨åŠ æ¢è¡Œç¬¦</li>
<li>int puts(const char *s); // å°†ä¸€è¡Œå­—ç¬¦æ”¾å…¥stdoutã€‚ä¼šè‡ªåŠ¨åŠ æ¢è¡Œç¬¦ã€‚</li>
</ul>
<hr>
<ul>
<li>int getc(FILE *stream); // ä»streamè¯»å…¥ä¸€ä¸ªå­—ç¬¦ã€‚å®</li>
<li>int fgetc(FILE *stream); // ä»streamè¯»å…¥ä¸€ä¸ªå­—ç¬¦ã€‚å‡½æ•°</li>
<li>int getchar(void) // ä»stdinè¯»å…¥ä¸€ä¸ªå­—ç¬¦</li>
<li>int ungetc(int c, FILE *stream); // å°†ä¸€ä¸ªå­—ç¬¦æ”¾å›streamã€‚åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ä¿è¯ä¼šæˆåŠŸã€‚</li>
<li>char *fgets(char *s, int n, FILE *stream); // ä»streamè¯»å…¥ä¸€è¡Œå­—ç¬¦cã€‚æœ€å¤šè¯»å–n-1ä¸ªã€‚ä¸ä¼šä¸¢å¼ƒæ¢è¡Œç¬¦ï¼Œä½†å¯èƒ½æ²¡è¯»åˆ°ã€‚</li>
<li>char *gets(char *s); // ä»stdinè¯»å…¥ä¸€è¡Œå­—ç¬¦ã€‚è‡ªåŠ¨ä¸¢å¼ƒæ¢è¡Œç¬¦ã€‚
æ³¨æ„ï¼šä»¥ä¸Šgetå‡½æ•°åœ¨é‡åˆ°é—®é¢˜æ—¶è¡Œä¸ºä¸€æ ·ã€‚é‡åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›EOFï¼Œå¹¶è®¾ç½®æµçš„æ–‡ä»¶æœ«å°¾æŒ‡ç¤ºå™¨ã€‚é‡åˆ°è¯»é”™è¯¯ï¼Œè¿”å›EOFï¼Œå¹¶è®¾ç½®æµçš„é”™è¯¯æŒ‡ç¤ºå™¨ã€‚å¯ç”¨<code>int feof(FILE *fp),int ferror(FILE *fp)</code>å‡½æ•°åŒºåˆ†è¿™ä¸¤ç§æƒ…å†µã€‚</li>
</ul>
<hr>
<p>ä¸»è¦ç”¨äºäºŒè¿›åˆ¶æµ</p>
<ul>
<li>size_t fwrite(const void *ptr, size_t size, size_t elnum, FILE *stream); // æŠŠå†…å­˜ä¸­çš„æ•°ç»„å¤åˆ¶ç»™æµã€‚pträ¸ºæ•°ç»„åœ°å€ï¼Œsizeä¸ºæ•°ç»„å…ƒç´ çš„å¤§å°(B)ï¼Œelnumä¸ºæ•°ç»„å…ƒç´ æ•°é‡ã€‚streamä¸ºå†™å…¥çš„æµã€‚è¿”å›å®é™…å†™å…¥çš„<strong>å…ƒç´ </strong>æ•°é‡</li>
<li>size_t fread(void *ptr, size_t size, size_t elnum, FILE *stream); // è¯»å…¥ã€‚è¿”å›å€¼ä¸ºå®é™…è¯»å…¥çš„å…ƒç´ æ•°é‡ï¼Œåº”ç­‰äºelnum</li>
<li>ä¸ä¸€å®šéå¾—æ˜¯æ•°ç»„ï¼Œç»“æ„ä½“ä¹Ÿè¡Œã€‚</li>
<li>ç¤ºä¾‹1: fwrite(arr, sizeof(a[0]), sizeof(a)/sizeof(a[0]), fp); // å†™æ•°ç»„</li>
<li>ç¤ºä¾‹2: fwrite(&amp;s, sizeof(s), 1, fp); // å†™ç»“æ„ä½“</li>
</ul>
<hr>
<p>æ–‡ä»¶å®šä½(é€‚åˆäºŒè¿›åˆ¶æµ)</p>
<ul>
<li>
<p>int fseek(FILE *stream, long int offset, int whence);</p>
<ul>
<li>whence SEEK_SET, SEEK_CUR, SEEK_END ä»£è¡¨æ–°ä½ç½®çš„è®¡ç®—èµ·ç‚¹ã€‚</li>
<li>offset å¯ä»¥ä¸ºè´Ÿã€‚å’Œwhenceå…±åŒç¡®å®šposã€‚</li>
<li>ç§»åŠ¨åˆ°æ–‡ä»¶å¼€å¤´ fseek(fp, 0L, SEEK_SET)</li>
<li>ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ fseek(fp, 0L, SEEK_END)</li>
<li>å¾€å›ç§»åŠ¨10ä¸ªå­—èŠ‚ fseek(fp, -10L, SEEK_CUR)</li>
</ul>
</li>
<li>
<p>long int ftell(FILE *stream); // è¿”å›å½“å‰posã€‚é”™è¯¯æ—¶ï¼Œè¿”å›-1Lï¼Œé”™è¯¯ç åœ¨errnoä¸­ã€‚0è¡¨ç¤ºæ–‡ä»¶èµ·å§‹ï¼Œå…¶ä»–æ•´æ•°è¡¨ç¤ºå½“å‰posæ‰€åœ¨çš„å­—èŠ‚æ•°ã€‚</p>
</li>
<li>
<p>void rewind(FILE *stream); // æŠŠposè®¾ä¸º0ï¼Œä¸”ä¼šæ¸…é™¤fpçš„é”™è¯¯æŒ‡ç¤ºå™¨ã€‚ ç±»ä¼¼fseek(fp, 0L, SEEK_SET)</p>
</li>
<li>
<p>int fgetpos(FILE *stream, fpos_t *pos); // ç”¨äºè¶…å¤§æ–‡ä»¶ã€‚fpos_tæ˜¯ä¸€ä¸ªç»“æ„ï¼Œå¯å‚¨å­˜è¶…è¿‡long intå¯è¡¨ç¤ºçš„æ•°çš„ä½ç½®ã€‚</p>
</li>
<li>
<p>int fsetpos(FILE *stream, const fpos_t *pos);</p>
</li>
</ul>
<h3 id="ä¸´æ—¶æ–‡ä»¶"> ä¸´æ—¶æ–‡ä»¶</h3>
<ul>
<li>FILE *tmpfile(void); // &quot;wb+&quot;</li>
<li>char *tmpnam(char *s); // å†™å…¥å†…å®¹åæ‰ç”Ÿæˆ
<ul>
<li>å‚æ•°ä¸ºNULLæ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶åï¼Œå°†æ–‡ä»¶åå­˜å‚¨åœ¨é™æ€å˜é‡ä¸­ï¼Œå¹¶è¿”å›å…¶æŒ‡é’ˆã€‚</li>
<li>å¦åˆ™ï¼Œä¼šæŠŠæ–‡ä»¶åå¤åˆ¶åˆ°ç¨‹åºå‘˜æä¾›çš„å­—ç¬¦æ•°ç»„ä¸­ã€‚L_tmpnamå®ä¸ºä¸´æ—¶æ–‡ä»¶åçš„å­—ç¬¦æ•°ç»„é•¿åº¦ã€‚</li>
</ul>
</li>
</ul>
<h3 id="æ–‡ä»¶ç¼“å†²"> æ–‡ä»¶ç¼“å†²</h3>
<ul>
<li>int fflush(FILE *stream); // å¼ºåˆ¶åˆ·æ–°</li>
<li>void setbuf(FILE *stream, char *buf); // ç­‰ä»·äº(void) setvbuf(stream, NULL, _IONBF, 0) æˆ– (void) setvbuf(stream, buf, _IOFBF, BUFSIZ)</li>
<li>int setvbuf(FILE *stream, char *buf, int mode, size_t size);
<ul>
<li>ç¼“å†²modeæœ‰ä¸‰ç§
<ul>
<li>_IOFBF æ»¡ç¼“å†² ç¼“å†²åŒºæ»¡æ—¶åˆ·æ–°ã€‚é»˜è®¤è®¾ç½®</li>
<li>_IOLBF è¡Œç¼“å†² æ²¡è¯»/å†™ä¸€è¡Œå°±åˆ·æ–°</li>
<li>_IONBF æ— ç¼“å†² æ²¡æœ‰ç¼“å†²åŒº</li>
</ul>
</li>
<li>buf æ˜¯ç¼“å†²åŒºã€‚ä¸ºNULLæ—¶ï¼Œsetvbufä¼šåˆ›å»ºä¸€ä¸ªsizeå¤§å°çš„ç¼“å†²åŒºã€‚</li>
<li>size æ˜¯ç¼“å†²åŒºçš„å¤§å°(Byte)</li>
</ul>
</li>
</ul>
<p>é€šå¸¸ï¼Œç¼“å†²æ˜¯åå°å‘ç”Ÿçš„ï¼Œå‘æ–‡ä»¶å†™æ•°æ®æ—¶ï¼Œæ•°æ®å…ˆæ”¾å…¥ç¼“å†²åŒºã€‚å½“ç¼“å†²åŒºæ»¡æˆ–å…³é—­æ–‡ä»¶æ—¶ï¼Œç¼“å†²åŒºä¼šè‡ªåŠ¨flush(å³å°†æ•°æ®å†™å…¥ç£ç›˜)ã€‚</p>
<h3 id="å…¶ä»–æ–‡ä»¶æ“ä½œ"> å…¶ä»–æ–‡ä»¶æ“ä½œ</h3>
<ul>
<li>int remove(const char *filename);</li>
<li>int rename(const char *old, const char *new);</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">å®</title>
    <id>https://kigane.github.io/note/cpp/macro/</id>
    <link href="https://kigane.github.io/note/cpp/macro/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="é¢„å®šä¹‰çš„å®"> é¢„å®šä¹‰çš„å®</h2>
<p>æ³¨æ„ï¼šä¸åŒçš„ç¼–è¯‘å™¨å®çš„åç§°å¯èƒ½ä¸åŒã€‚</p>
<ul>
<li><code>__func__</code> æ‰€åœ¨å‡½æ•°å</li>
<li><code>__FILE__</code> æ‰€åœ¨æ–‡ä»¶å</li>
<li><code>__LINE__</code> æ‰€åœ¨è¡Œæ•°</li>
<li><code>__DATE__</code> å½“å‰æºæ–‡ä»¶çš„ç¼–è¯‘æ—¶é—´</li>
<li>``</li>
</ul>
<p><a href="https://docs.microsoft.com/en-us/cpp/preprocessor/predefined-macros?view=msvc-160" target="_blank" rel="noopener noreferrer">MSVC</a></p>
<h2 id="æ“ä½œç¬¦"> #æ“ä½œç¬¦</h2>
<ul>
<li>#x ç”¨æ¥æŠŠå‚æ•°è½¬æ¢æˆå­—ç¬¦ä¸²</li>
<li>a##b å°†ä¸¤ä¸ªå•ç‹¬çš„ç¬¦å·åˆå¹¶æˆä¸€ä¸ªï¼Œä¸”è¯¥ç¬¦å·å¿…é¡»æ˜¯æœ‰æ•ˆçš„ã€‚</li>
<li><code>## __VA_ARGS__</code> è¿™é‡Œ##çš„ä½œç”¨åœ¨äºï¼Œå½“å¯å˜å‚æ•°çš„ä¸ªæ•°ä¸º0æ—¶ï¼Œè¿™é‡Œçš„##èµ·åˆ°æŠŠå‰é¢å¤šä½™çš„&quot;,&quot;å»æ‰çš„ä½œç”¨,å¦åˆ™ä¼šç¼–è¯‘å‡ºé”™</li>
</ul>
<div><pre><code><span><span>#</span><span>define</span> <span>__T</span><span><span>(</span>x<span>)</span>  L </span><span>##</span> <span>x </span><span>// å¦‚æœxæ˜¯å­—ç¬¦ä¸² "abc" åˆ™__T(x) ç›¸å½“äº L"abc"</span></span>

<span><span>#</span><span>define</span> <span>paster</span><span><span>(</span> n <span>)</span> <span>printf_s</span><span>(</span> </span><span>"token"</span> <span><span><span>#</span><span>n</span> </span></span><span>" = %d"</span><span><span>,</span> token</span><span>##</span><span>n <span>)</span></span></span>
<span>int</span> token9 <span>=</span> <span>9</span><span>;</span>
<span>int</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
   <span>paster</span><span>(</span><span>9</span><span>)</span><span>;</span> <span>// è¾“å‡º token9 = 9</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h2 id="å¤šè¡Œå®"> å¤šè¡Œå®</h2>
<p>å¯¹äºå¤æ‚çš„å¤šè¡Œå®ã€‚æ¨èçš„å†™æ³•ä¸º</p>
<div><pre><code><span><span>#</span><span>define</span> <span>some_marco</span><span><span>(</span><span>)</span></span><span>\</span>
  <span><span>do</span> <span>{</span></span><span>\</span>
    <span>contents</span><span>\</span>
  <span><span>}</span> <span>while</span> <span>(</span><span>0</span><span>)</span></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p><a href="https://stackoverflow.com/questions/1067226/c-multi-line-macro-do-while0-vs-scope-block" target="_blank" rel="noopener noreferrer">è§£é‡Š</a></p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">å¼‚å¸¸æ§åˆ¶æµ</title>
    <id>https://kigane.github.io/note/cs/ECF/</id>
    <link href="https://kigane.github.io/note/cs/ECF/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å¼‚å¸¸"> å¼‚å¸¸</h2>
<h3 id="å¼‚å¸¸å’Œå¼‚å¸¸å¤„ç†"> å¼‚å¸¸å’Œå¼‚å¸¸å¤„ç†</h3>
<ul>
<li>å¼‚å¸¸(exception)ï¼šå°±æ˜¯æ§åˆ¶æµä¸­çš„çªå˜ï¼Œç”¨æ¥ç›¸åº”å¤„ç†å™¨çŠ¶æ€ä¸­çš„æŸäº›å˜åŒ–ã€‚</li>
<li>äº‹ä»¶(event)ï¼šå³çŠ¶æ€å˜åŒ–ã€‚åœ¨å¤„ç†å™¨ä¸­ï¼ŒçŠ¶æ€è¢«ç¼–ç ä¸ºä¸åŒçš„ä½å’Œä¿¡å·ã€‚</li>
<li>å¼‚å¸¸å·(exception number)ï¼šç³»ç»Ÿä¸ºæ¯ç§ç±»å‹çš„å¼‚å¸¸åˆ†é…çš„å”¯ä¸€çš„éè´Ÿæ•´æ•°æ ‡è¯†ã€‚</li>
<li>å¼‚å¸¸è¡¨(exception table)ï¼šå½“å¤„ç†å™¨æ£€æµ‹åˆ°äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šé€šè¿‡è¯¥è¡¨è°ƒç”¨ç›¸åº”çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚å…¶èµ·å§‹åœ°å€ä½äºä¸€ä¸ªç‰¹æ®Šçš„CPUå¯„å­˜å™¨--å¼‚å¸¸è¡¨åŸºå€å¯„å­˜å™¨ã€‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œç”±æ“ä½œç³»ç»Ÿåˆ†é…å’Œåˆå§‹åŒ–ã€‚</li>
<li>åœ¨å¼‚å¸¸å¤„ç†ç¨‹åºå®Œæˆåï¼Œæ ¹æ®äº‹ä»¶çš„ç±»å‹ï¼Œå¤„ç†ç¨‹åºçš„å¤„ç†æ–¹å¼ä¸åŒã€‚</li>
</ul>
<h3 id="å¼‚å¸¸çš„ç±»åˆ«"> å¼‚å¸¸çš„ç±»åˆ«</h3>
<ul>
<li>ä¸­æ–­(interrupt):æ˜¯ç”±ç¡¬ä»¶é€ æˆçš„ï¼Œå³æ¥è‡ªå¤„ç†å™¨å¤–éƒ¨çš„I/Oè®¾å¤‡çš„ä¿¡å·çš„ç»“æœã€‚å› æ­¤ï¼Œæ˜¯å¼‚æ­¥çš„ã€‚ä»ä¸­æ–­è¿”å›æ—¶ï¼Œæ€»æ˜¯è¿”å›åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚(è¿‡ç¨‹ï¼šæ‰§è¡Œ<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.07847em;">I</span><span><span><span><span style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>c</span><span>u</span><span style="margin-right:0.02778em;">rr</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå‘ç”Ÿä¸­æ–­ï¼Œæ‰§è¡Œå®Œ<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.07847em;">I</span><span><span><span><span style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>c</span><span>u</span><span style="margin-right:0.02778em;">rr</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè°ƒç”¨ä¸­æ–­å¤„ç†ç¨‹åºï¼Œå¤„ç†ç¨‹åºè¿”å›åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.07847em;">I</span><span><span><span><span style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>n</span><span>e</span><span>x</span><span>t</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)</li>
<li>é™·é˜±(trap)ï¼šæ˜¯æœ‰æ„çš„å¼‚å¸¸ã€‚ç”¨äºä¸ºç”¨æˆ·ç¨‹åºå’Œå†…æ ¸ä¹‹é—´æä¾›ç³»ç»Ÿè°ƒç”¨ï¼Œè®©ç”¨æˆ·ç¨‹åºå¯ä»¥å‘å†…æ ¸è¯·æ±‚æœåŠ¡ã€‚å…·ä½“è€Œè¨€ï¼Œç”¨æˆ·æ‰§è¡Œ<code>syscall n</code>æŒ‡ä»¤ï¼Œä¼šè§¦å‘ä¸€ä¸ªtrapï¼Œtrapçš„å¤„ç†ç¨‹åºè§£æå‚æ•°ï¼Œå¹¶è°ƒç”¨é€‚å½“çš„å†…æ ¸ç¨‹åºã€‚å¦å¤–ï¼šç³»ç»Ÿè°ƒç”¨è¿è¡Œä¸å†…æ ¸æ¨¡å¼ã€‚</li>
<li>æ•…éšœ(fault)ï¼šç”±å¯èƒ½èƒ½è¢«é”™è¯¯å¤„ç†ç¨‹åºä¿®æ­£çš„é”™è¯¯å¼•èµ·ã€‚å¦‚æœæ•…éšœå¤„ç†ç¨‹åºèƒ½ä¿®æ­£(å¦‚ç¼ºé¡µå¼‚å¸¸)ï¼Œåˆ™è¿”å›<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.07847em;">I</span><span><span><span><span style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>c</span><span>u</span><span style="margin-right:0.02778em;">rr</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¹¶é‡æ–°æ‰§è¡Œè¿™ä¸ªå¼•èµ·å¼‚å¸¸çš„æŒ‡ä»¤ï¼Œå¦‚æœæ— æ³•ä¿®æ­£(å¦‚é™¤é›¶ï¼Œæ®µé”™è¯¯)ï¼Œåˆ™è°ƒç”¨å†…æ ¸çš„abortä¾‹ç¨‹ï¼Œç»ˆæ­¢è¯¥ç¨‹åºã€‚</li>
<li>ç»ˆæ­¢(abort)ï¼šç”±ä¸å¯æ¢å¤çš„è‡´å‘½é”™è¯¯å¼•èµ·ï¼Œé€šå¸¸æ˜¯ç¡¬ä»¶é”™è¯¯ã€‚è°ƒç”¨å†…æ ¸çš„abortä¾‹ç¨‹ï¼Œç»ˆæ­¢è¯¥ç¨‹åºã€‚</li>
</ul>
<details><summary>Linuxå¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨</summary>
<ul>
<li>é™¤æ³•é”™è¯¯(0)ï¼šé™¤é›¶æˆ–é™¤æ³•æº¢å‡ºæ—¶å‘ç”Ÿã€‚Unixä¸ä¼šä»é™¤æ³•é”™è¯¯ä¸­æ¢å¤ï¼Œè€Œæ˜¯ä¼šç»ˆæ­¢ç¨‹åºã€‚Linux shellä¼šæŠ¥å‘Š&quot;Floating exception&quot;ã€‚</li>
<li>ä¸€èˆ¬ä¿æŠ¤æ•…éšœ(13)ï¼šåŸå› å¾ˆå¤šï¼Œé€šå¸¸æ˜¯å› ä¸ºç¨‹åºå¼•ç”¨çš„æœªå®šä¹‰çš„è™šæ‹Ÿå†…å­˜åŒºåŸŸæˆ–è¯•å›¾å†™ä¸€ä¸ªåªè¯»çš„æ–‡æœ¬æ®µã€‚Linuxä¸ä¼šæ¢å¤è¿™ç±»æ•…éšœï¼Œä¼šç»ˆæ­¢ç¨‹åºå¹¶æŠ¥å‘Š&quot;Segmentation fault&quot;ã€‚</li>
<li>ç¼ºé¡µå¼‚å¸¸ï¼š//TODO</li>
</ul>
<p>ç³»ç»Ÿè°ƒç”¨:syscall</p>
<ul>
<li>ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œ%raxä¿å­˜ç³»ç»Ÿè°ƒç”¨å·ï¼Œ%rdi,%rsi,%rdx,%r10,%r8,%r9é¡ºåºåŒ…å«æœ€å¤š6ä¸ªå‚æ•°ã€‚ç³»ç»Ÿè°ƒç”¨è¿”å›æ—¶ï¼Œ%rcx,%r11ä¼šè¢«ç ´åï¼Œ%raxåŒ…å«è¿”å›å€¼ã€‚è¿”å›å€¼ä¸ºè´Ÿ(-4095~-1)ï¼Œè¯´æ˜å‘ç”Ÿäº†é”™è¯¯ï¼Œä¼šè®¾ç½®ç›¸åº”çš„errnoã€‚</li>
<li>å¸¸ç”¨ç³»ç»Ÿè°ƒç”¨
<ul>
<li>0 read è¯»æ–‡ä»¶</li>
<li>1 write å†™æ–‡ä»¶</li>
<li>2 open æ‰“å¼€æ–‡ä»¶</li>
<li>3 close å…³é—­æ–‡ä»¶</li>
<li>4 stat è·å–æ–‡ä»¶ä¿¡æ¯</li>
<li>9 mmap å°†å†…å­˜é¡µæ˜ å°„åˆ°æ–‡ä»¶</li>
<li>12 brk é‡ç½®å †é¡¶</li>
<li>32 dup2 å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦</li>
<li>33 pause æŒ‚èµ·è¿›ç¨‹ï¼Œç›´åˆ°æœ‰ä¿¡å·åˆ°è¾¾</li>
<li>37 alarm è®¾ç½®å®šæ—¶å™¨ï¼Œæ—¶é—´åˆ°äº†å‘é€ä¸€ä¸ªalarmä¿¡å·ç»™è¿›ç¨‹ï¼Œé»˜è®¤è¡Œä¸ºä¼šç»ˆæ­¢è¿›ç¨‹</li>
<li>39 getpid è·å–è¿›ç¨‹ID</li>
<li>57 fork åˆ›å»ºè¿›ç¨‹</li>
<li>59 execve æ‰§è¡Œä¸€ä¸ªç¨‹åº</li>
<li>60 _exit ç»ˆæ­¢è¿›ç¨‹</li>
<li>61 wait4 ç­‰å¾…ä¸€ä¸ªè¿›ç¨‹ç»ˆæ­¢</li>
<li>62 kill å‘ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·</li>
</ul>
</li>
</ul>
</details>
<h2 id="è¿›ç¨‹"> è¿›ç¨‹</h2>
<ul>
<li>ç»å…¸å®šä¹‰ï¼šä¸€ä¸ªæ‰§è¡Œä¸­çš„ç¨‹åºçš„å®ä¾‹ã€‚</li>
<li>ä¸Šä¸‹æ–‡(context)ï¼šç¨‹åºæ­£ç¡®è¿è¡Œæ‰€éœ€çš„çŠ¶æ€ã€‚åŒ…æ‹¬å†…å­˜ä¸­ç¨‹åºçš„çš„ä»£ç å’Œæ•°æ®ï¼Œæ ˆï¼ŒGPRsï¼ŒPCï¼Œç¯å¢ƒå˜é‡ä»¥åŠæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦çš„é›†åˆã€‚</li>
<li>è¿›ç¨‹ä¸ºåº”ç”¨ç¨‹åºæä¾›çš„å…³é”®æŠ½è±¡ï¼š
<ul>
<li>ä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘æ§åˆ¶æµ</li>
<li>ä¸€ä¸ªç§æœ‰çš„åœ°å€ç©ºé—´</li>
</ul>
</li>
</ul>
<h3 id="é€»è¾‘æ§åˆ¶æµ"> é€»è¾‘æ§åˆ¶æµ</h3>
<p>å³æ‰§è¡Œç¨‹åºçš„PCå€¼çš„åºåˆ—ã€‚
<img src="/assets/img/csapp-ecf-01.png" alt="ECF01" /><br>
å…³é”®ç‚¹ï¼šè¿›ç¨‹æ˜¯è½®æµä½¿ç”¨å¤„ç†å™¨çš„ï¼Œæ¯ä¸ªè¿›ç¨‹æ‰§è¡Œå…¶æµçš„ä¸€éƒ¨åˆ†ï¼Œç„¶åè¢«preempted(æš‚æ—¶æŒ‚èµ·)ï¼Œç„¶åè½®åˆ°å…¶ä»–è¿›ç¨‹ã€‚</p>
<h3 id="å¹¶å‘"> å¹¶å‘</h3>
<ul>
<li>ä¸€ä¸ªé€»è¾‘æµçš„æ‰§è¡Œåœ¨<strong>æ—¶é—´ä¸Š</strong>ä¸å¦ä¸€ä¸ªæµé‡å ï¼Œç§°ä¸ºå¹¶å‘æµ(concurrent flow)ï¼Œè¿™ä¸¤ä¸ªæµè¢«ç§°ä¸ºå¹¶å‘çš„æ‰§è¡Œã€‚</li>
<li>å¹¶å‘(concurrency)ï¼šå¤šä¸ªæµå¹¶å‘çš„æ‰§è¡Œã€‚</li>
<li>å¤šä»»åŠ¡(multitask)ï¼šä¸€ä¸ªè¿›ç¨‹å’Œå…¶ä»–è¿›ç¨‹è½®æµè¿è¡Œã€‚</li>
<li>æ—¶é—´ç‰‡(time slice)ï¼šä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œå…¶é€»è¾‘æ§åˆ¶æµçš„ä¸€éƒ¨åˆ†çš„æ¯ä¸€æ—¶é—´æ®µã€‚</li>
<li>å¹¶è¡Œæµ(parallel flow)ï¼šä¸¤ä¸ªæµå¹¶å‘åœ°è¿è¡Œåœ¨ä¸åŒçš„å¤„ç†å™¨æˆ–è®¡ç®—æœºä¸Šã€‚å¹¶è¡Œæµæ˜¯å¹¶å‘æµçš„çœŸå­é›†ã€‚</li>
</ul>
<h3 id="ç§æœ‰åœ°å€ç©ºé—´"> ç§æœ‰åœ°å€ç©ºé—´</h3>
<p><img src="/assets/img/csapp-ecf-02.png" alt="ECF02" /><br>
è¿›ç¨‹ä¸ºæ¯ä¸ªç¨‹åºæä¾›ç§æœ‰åœ°å€ç©ºé—´ã€‚é€šç”¨ç»“æ„å¦‚å›¾ã€‚</p>
<h3 id="ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼"> ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼</h3>
<p>ç”¨æˆ·æ¨¡å¼æ˜¯å¤„ç†å™¨æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œé™åˆ¶åº”ç”¨å¯ä»¥æ‰§è¡Œçš„æŒ‡ä»¤å’Œå¯è®¿é—®çš„åœ°å€ç©ºé—´èŒƒå›´ï¼Œå³ä¸èƒ½ä½¿ç”¨ç‰¹æƒæŒ‡ä»¤å’Œè®¿é—®åœ°å€ç©ºé—´ä¸­çš„å†…æ ¸åŒºã€‚å¤„ç†å™¨é€šè¿‡æŸçŠ¶æ€å¯„å­˜å™¨ä¸­çš„ä¸€ä¸ªæ¨¡å¼ä½(mode bit)ç¡®å®šè¿›ç¨‹å¤„äºç”¨æˆ·æ¨¡å¼è¿˜æ˜¯å†…æ ¸æ¨¡å¼ã€‚</p>
<ul>
<li>ç‰¹æƒæŒ‡ä»¤(privileged instruction)ï¼šå¦‚åœæ­¢å¤„ç†å™¨ï¼Œæ”¹å˜æ¨¡å¼ä½ï¼Œå‘èµ·I/Oæ“ä½œã€‚</li>
<li>ç”¨æˆ·åªèƒ½é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å£é—´æ¥è®¿é—®å†…æ ¸çš„ä»£ç å’Œæ•°æ®ã€‚ä»»ä½•ç›´æ¥è®¿é—®çš„å°è¯•éƒ½ä¼šå¯¼è‡´abortã€‚</li>
<li>è¿›ç¨‹ä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼çš„å”¯ä¸€æ–¹å¼æ˜¯ä½¿ç”¨interrupt,fault,trapçš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œä¼šè°ƒç”¨å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºè¿è¡Œäºå†…æ ¸æ¨¡å¼ä¸­ã€‚å¼‚å¸¸å¤„ç†ç¨‹åºè¿”å›åï¼Œå°±åˆ‡æ¢å›ç”¨æˆ·æ¨¡å¼ã€‚</li>
<li>Linuxä¸­
<ul>
<li>/procæ–‡ä»¶ç³»ç»Ÿæä¾›è®¸å¤šç”¨æˆ·å¯ä»¥è®¿é—®çš„å†…æ ¸æ•°æ®ç»“æ„ã€‚å¦‚/proc/cpuinfo,/proc/:pid/maps(è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜æ®µ)</li>
<li>/sysæ–‡ä»¶ç³»ç»Ÿæä¾›å…³äºç³»ç»Ÿæ€»çº¿å’Œè®¾å¤‡çš„ä½å±‚ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>
<h3 id="ä¸Šä¸‹æ–‡åˆ‡æ¢"> ä¸Šä¸‹æ–‡åˆ‡æ¢</h3>
<ul>
<li>è¿›ç¨‹ä¸Šä¸‹æ–‡
<ul>
<li>ç”¨æˆ·çº§ä¸Šä¸‹æ–‡ï¼šç¨‹åºå—ï¼Œæ•°æ®å—ï¼Œç”¨æˆ·å †æ ˆ</li>
<li>ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡ï¼š
<ul>
<li>è¿›ç¨‹æ ‡è¯†ä¿¡æ¯ pid</li>
<li>è¿›ç¨‹ç°åœºä¿¡æ¯ï¼šå¯„å­˜å™¨å†…å®¹(GPRsï¼Œæµ®ç‚¹å¯„å­˜å™¨ï¼ŒæŸäº›çŠ¶æ€å¯„å­˜å™¨)</li>
<li>è¿›ç¨‹æ§åˆ¶ä¿¡æ¯ï¼šPCï¼ŒæŸäº›çŠ¶æ€å¯„å­˜å™¨</li>
<li>å†…æ ¸ï¼šå†…æ ¸æ ˆå’Œå†…æ ¸æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬é¡µè¡¨ï¼Œè¿›ç¨‹è¡¨ï¼Œæ–‡ä»¶è¡¨ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢
<ul>
<li>ä¿å­˜å½“å‰è¿›ç¨‹ä¸Šä¸‹æ–‡</li>
<li>æ¢å¤è¢«åˆ‡æ¢åˆ°çš„è¿›ç¨‹çš„ä¸Šä¸‹æ–‡</li>
<li>å°†æ§åˆ¶è½¬ç§»ç»™æ–°è¿›ç¨‹</li>
</ul>
</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶æœº
<ul>
<li>å†…æ ¸æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æ—¶ã€‚ç³»ç»Ÿè°ƒç”¨å‘èµ·I/Oè¯·æ±‚ï¼Œæˆ–ä½¿ç”¨sleepç³»ç»Ÿè°ƒç”¨ç­‰ç­‰ã€‚</li>
<li>ç³»ç»Ÿå‘¨æœŸæ€§ä¸­æ–­ã€‚æ‰€æœ‰ç³»ç»Ÿéƒ½æœ‰æŸç§äº§ç”Ÿå‘¨æœŸæ€§å®šæ—¶å™¨ä¸­æ–­çš„æœºåˆ¶ï¼Œé€šå¸¸ä¸º1æˆ–10msã€‚æ¯æ¬¡å‘ç”Ÿå®šæ—¶å™¨ä¸­æ–­ï¼Œå†…æ ¸å°±èƒ½åˆ¤å®šå‡ºå½“å‰è¿›ç¨‹å·²ç»è¿è¡Œäº†è¶³å¤Ÿé•¿çš„æ—¶é—´ï¼Œå¹¶åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ã€‚</li>
</ul>
</li>
</ul>
<h2 id="ç³»ç»Ÿè°ƒç”¨é”™è¯¯å¤„ç†"> ç³»ç»Ÿè°ƒç”¨é”™è¯¯å¤„ç†</h2>
<p>Unixç³»ç»Ÿçº§å‡½æ•°å‡ºé”™æ—¶ï¼Œä¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®å…¨å±€æ•´æ•°å˜é‡errnoæ¥è¡¨ç¤ºä»€ä¹ˆå‡ºé”™äº†ã€‚<code>strerrno(errno)</code>è¿”å›é”™è¯¯çš„å…·ä½“æè¿°ã€‚</p>
<div><pre><code><span>void</span> <span>unix_error</span><span>(</span><span>char</span> <span>*</span>msg<span>)</span> <span>{</span>
    <span>fprintf</span><span>(</span><span>stderr</span><span>,</span> <span>"%s, %s\n"</span><span>,</span> msg<span>,</span> <span>strerr</span><span>(</span>errno<span>)</span><span>)</span><span>;</span>
    <span>exit</span><span>(</span><span>0</span><span>)</span><span>;</span>
<span>}</span>

<span>// fork çš„é”™è¯¯åŒ…è£…å‡½æ•°</span>
<span>pid_t</span> <span>Fork</span><span>(</span><span>void</span><span>)</span> <span>{</span>
    <span>pid_t</span> pid<span>;</span>
    <span>if</span> <span>(</span>pid <span>=</span> <span>fork</span><span>(</span><span>)</span> <span>&lt;</span> <span>0</span><span>)</span>
        <span>unix_error</span><span>(</span><span>"Fork error"</span><span>)</span><span>;</span>
    <span>return</span> pid<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="è¿›ç¨‹æ§åˆ¶"> è¿›ç¨‹æ§åˆ¶</h2>
<ul>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ­£æ•´æ•°è¿›ç¨‹ ID(PID)ã€‚</li>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½åªå±äºä¸€ä¸ªè¿›ç¨‹ç»„ï¼Œè¿›ç¨‹ç»„ä¹Ÿæ˜¯ç”¨ä¸€ä¸ªæ­£æ•´æ•° ID æ¥æ ‡è¯†çš„ã€‚é»˜è®¤çš„ï¼Œå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹åŒå±äºä¸€ä¸ªè¿›ç¨‹ç»„ã€‚</li>
<li>è¿›ç¨‹çš„ä¸‰ç§çŠ¶æ€
<ul>
<li>è¿è¡Œï¼šè¿›ç¨‹æ­£åœ¨ CPU ä¸Šæ‰§è¡Œï¼Œæˆ–åœ¨ç­‰å¾…è¢«æ‰§è¡Œä¸”æœ€ç»ˆä¼šè¢«è°ƒåº¦ã€‚</li>
<li>åœæ­¢ï¼šè¿›ç¨‹è¢«æŒ‚èµ·(suspended)ï¼Œä¸ä¼šè¢«è°ƒåº¦ã€‚
<ul>
<li>ä¼šå¯¼è‡´åœæ­¢çš„ä¿¡å·ï¼šSIGSTOP, SIGTSTP, SIGTTIN, SIGTTOU</li>
<li>è¿›ç¨‹å†æ¬¡è¿è¡Œä¿¡å·ï¼šSIGCONT</li>
</ul>
</li>
<li>ç»ˆæ­¢ï¼šè¿›ç¨‹æ°¸è¿œåœæ­¢ã€‚è¿›ç¨‹ç»ˆæ­¢æœ‰ä¸‰ç§åŸå› 
<ul>
<li>æ”¶åˆ°ä¸€ä¸ªé»˜è®¤è¡Œä¸ºæ˜¯ç»ˆæ­¢è¿›ç¨‹çš„ä¿¡å·</li>
<li>ä»ä¸»ç¨‹åºè¿”å›</li>
<li>è°ƒç”¨exit()å‡½æ•°</li>
</ul>
</li>
</ul>
</li>
</ul>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;sys/types.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;unistd.h></span></span>
<span>pid_t</span> <span>getpid</span><span>(</span><span>void</span><span>)</span><span>;</span> <span>// è¿”å›è°ƒç”¨è¿›ç¨‹çš„PID</span>
<span>pid_t</span> <span>getppid</span><span>(</span><span>void</span><span>)</span><span>;</span> <span>// è¿”å›è°ƒç”¨è¿›ç¨‹çš„çˆ¶è¿›ç¨‹çš„PID</span>
<span>pid_t</span> <span>getpgrp</span><span>(</span><span>void</span><span>)</span><span>;</span> <span>// è¿”å›è°ƒç”¨è¿›ç¨‹çš„è¿›ç¨‹ç»„ID</span>
<span>int</span> <span>setpgid</span><span>(</span><span>pid_t</span> pid<span>,</span> <span>pid_t</span> pgid<span>)</span><span>;</span> <span>// å°†pidè¿›ç¨‹çš„è¿›ç¨‹ç»„æ”¹ä¸ºpgidã€‚æˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›-1ã€‚</span>
<span>// setpgid(0,0)è¡¨ç¤ºç”¨å½“å‰è¿›ç¨‹çš„pidä¸ºååˆ›å»ºè¿›ç¨‹ç»„ï¼Œå¹¶å°†å½“å‰è¿›ç¨‹åŠ å…¥è¯¥è¿›ç¨‹ç»„ã€‚</span>
<span>pid_t</span> <span>fork</span><span>(</span><span>void</span><span>)</span><span>;</span> <span>// åˆ›å»ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹è¿”å›0ï¼Œçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„PIDã€‚</span>
<span>pid_t</span> <span>waitpid</span><span>(</span><span>pid_t</span> pid<span>,</span> <span>int</span> <span>*</span>statusp<span>,</span> <span>int</span> options<span>)</span><span>;</span> <span>// ç­‰å¾…pidå­è¿›ç¨‹åœæ­¢æˆ–ç»ˆæ­¢</span>
<span>pid_t</span> <span>wait</span><span>(</span><span>int</span> <span>*</span>status<span>)</span><span>;</span> <span>// ç­‰ä»·äº waitpid(-1, &amp;status, 0)</span>
<span>unsigned</span> <span>int</span> <span>sleep</span><span>(</span><span>unsigned</span> <span>int</span> secs<span>)</span><span>;</span> <span>// å°†è¿›ç¨‹æŒ‚èµ·(suspend)æŒ‡å®šç§’æ•°</span>
<span>int</span> <span>pause</span><span>(</span><span>void</span><span>)</span><span>;</span> <span>// å°†è¿›ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°è¯¥è¿›ç¨‹æ”¶åˆ°ä¸€ä¸ªä¿¡å·</span>
<span>// åœ¨å½“å‰è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­åŠ è½½å¹¶è¿è¡Œä¸€ä¸ªæ–°ç¨‹åº</span>
<span>int</span> <span>execve</span><span>(</span><span>const</span> <span>char</span> <span>*</span>filename<span>,</span> <span>const</span> <span>char</span> <span>*</span>argv<span>[</span><span>]</span><span>,</span> <span>const</span> <span>char</span> <span>*</span>envp<span>[</span><span>]</span><span>)</span><span>;</span> 

<span><span>#</span><span>include</span> <span>&lt;stdlib.h></span></span>
<span>void</span> <span>exit</span><span>(</span><span>int</span> status<span>)</span><span>;</span> <span>// ä»¥statusä¸ºé€€å‡ºçŠ¶æ€ç»ˆæ­¢è¿›ç¨‹</span>
<span>char</span> <span>*</span><span>getenv</span><span>(</span><span>const</span> <span>char</span> <span>*</span>name<span>)</span><span>;</span> <span>// è¿”å›æŒ‡å®šçš„ç¯å¢ƒå˜é‡</span>
<span>int</span> <span>setenv</span><span>(</span><span>const</span> <span>char</span> <span>*</span>name<span>,</span> <span>const</span> <span>char</span> <span>*</span>newvalue<span>,</span> <span>int</span> overwrite<span>)</span><span>;</span> <span>// è®¾ç½®ç¯å¢ƒå˜é‡</span>
<span>void</span> <span>unsetenv</span><span>(</span><span>const</span> <span>char</span> <span>*</span>name<span>)</span><span>;</span> <span>// åˆ é™¤ç¯å¢ƒå˜é‡</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><h3 id="fork"> fork()</h3>
<ul>
<li>fork()å‡½æ•°è°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸¤æ¬¡ã€‚åœ¨å­è¿›ç¨‹ä¸­è¿”å›0ï¼Œåœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›å­è¿›ç¨‹çš„ PIDã€‚</li>
<li>fork()å‡½æ•°åˆ›å»ºçš„å­è¿›ç¨‹å’Œæ‰€åœ¨çš„è¿›ç¨‹æ˜¯å¹¶å‘è¿è¡Œçš„ç‹¬ç«‹è¿›ç¨‹ã€‚å†…æ ¸èƒ½ä»¥ä»»æ„æ–¹å¼äº¤æ›¿æ‰§è¡Œå®ƒä»¬çš„é€»è¾‘æ§åˆ¶æµä¸­çš„æŒ‡ä»¤ã€‚</li>
<li>fork()å‡½æ•°åˆ›å»ºçš„å­è¿›ç¨‹æ‹¥æœ‰ç›¸åŒä½†ç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€‚</li>
<li>fork()å‡½æ•°åˆ›å»ºçš„å­è¿›ç¨‹å’Œæ‰€åœ¨è¿›ç¨‹å…±äº«æ–‡ä»¶ã€‚</li>
<li>è¿›ç¨‹å›¾ï¼šæ¯ä¸ªé¡¶ç‚¹å¯¹åº”ä¸€æ¡ç¨‹åºè¯­å¥ï¼Œæœ‰å‘è¾¹ a-&gt;b è¡¨ç¤ºè¯­å¥ a åœ¨è¯­å¥ b ä¹‹å‰æ‰§è¡Œã€‚åœ¨ fork å¤„åˆ†ä¸ºä¸¤æ”¯ã€‚</li>
</ul>
<details><summary>ä¾‹é¢˜</summary>
<div><pre><code><span>int</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>int</span> x <span>=</span> <span>1</span><span>;</span>
    <span>if</span> <span>(</span><span>Fork</span><span>(</span><span>)</span> <span>==</span> <span>0</span><span>)</span>
        <span>printf</span><span>(</span><span>"p1: x=%d\n"</span><span>,</span> <span>++</span>x<span>)</span><span>;</span>
    <span>printf</span><span>(</span><span>"p2: x=%d\n"</span><span>,</span> <span>--</span>x<span>)</span><span>;</span>
    <span>exit</span><span>(</span><span>0</span><span>)</span><span>;</span>
<span>}</span>
<span>// å…¶è¾“å‡ºä¸º:</span>
<span>// å­è¿›ç¨‹ï¼šp1: x=2  p2: x=1</span>
<span>// çˆ¶è¿›ç¨‹ï¼šp2: x=0 </span>
<span>// 012çš„å‡ºç°é¡ºåºä¸å®š(é™¤äº†2ä¸€å®šåœ¨1å‰)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div></details>
<h3 id="waitpid-å›æ”¶å­è¿›ç¨‹"> waitpid()--å›æ”¶å­è¿›ç¨‹</h3>
<ul>
<li>è¿›ç¨‹çš„å›æ”¶(reaped)ï¼šå½“ä¸€ä¸ªè¿›ç¨‹ç”±äºæŸç§åŸå› ç»ˆæ­¢æ—¶ï¼Œå†…æ ¸å¹¶ä¸æ˜¯ç«‹å³æŠŠå®ƒä»ç³»ç»Ÿä¸­æ¸…é™¤ã€‚ç›¸åï¼Œè¿›ç¨‹è¢«ä¿æŒåœ¨ä¸€ç§å·²ç»ˆæ­¢çš„çŠ¶æ€ä¸­ï¼Œç›´åˆ°è¢«å®ƒçš„çˆ¶è¿›ç¨‹å›æ”¶ã€‚å½“çˆ¶è¿›ç¨‹å›æ”¶å·²ç»ˆæ­¢çš„å­è¿›ç¨‹æ—¶ï¼Œå†…æ ¸å°†å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ä¼ é€’ç»™çˆ¶è¿›ç¨‹ï¼Œç„¶åæŠ›å¼ƒå·²ç»ˆæ­¢çš„è¿›ç¨‹ï¼Œä»æ­¤æ—¶å¼€å§‹ï¼Œè¯¥è¿›ç¨‹å°±ä¸å­˜åœ¨äº†ã€‚</li>
<li>åƒµæ­»è¿›ç¨‹(zombie)ï¼šç»ˆæ­¢äº†ï¼Œä½†è¿˜æ²¡è¢«å›æ”¶çš„è¿›ç¨‹ã€‚ä¼šæ¶ˆè€—å†…å­˜èµ„æºã€‚</li>
<li>å¦‚æœä¸€ä¸ªçˆ¶è¿›ç¨‹ç»ˆæ­¢äº†ï¼Œå†…æ ¸ä¼šå®‰æ’ init è¿›ç¨‹æˆä¸ºå®ƒçš„å­è¿›ç¨‹çš„å…»çˆ¶ã€‚init è¿›ç¨‹çš„ PID ä¸º 1ï¼Œæ˜¯åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ç”±å†…æ ¸åˆ›å»ºçš„ï¼Œå®ƒä¸ä¼šç»ˆæ­¢ï¼Œæ˜¯æ‰€æœ‰è¿›ç¨‹çš„ç¥–å…ˆã€‚å¦‚æœçˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å®ƒçš„åƒµæ­»å­è¿›ç¨‹å°±ç»ˆæ­¢äº†ï¼Œé‚£ä¹ˆå†…æ ¸ä¼šå®‰æ’ init è¿›ç¨‹å»å›æ”¶å®ƒä»¬ã€‚</li>
</ul>
<p>waitpidå‡½æ•°</p>
<ul>
<li>é€šå¸¸è¡Œä¸ºï¼šwaitpidæŒ‚èµ·è°ƒç”¨è¿›ç¨‹çš„æ‰§è¡Œï¼Œç›´åˆ°å®ƒçš„ç­‰å¾…é›†åˆ(wait set)ä¸­çš„ä¸€ä¸ªå­è¿›ç¨‹ç»ˆæ­¢ã€‚å¦‚æœç­‰å¾…é›†åˆä¸­çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œåœ¨waitpidè°ƒç”¨æ—¶å°±å·²ç»ç»ˆæ­¢äº†ï¼Œåˆ™ç«‹å³è¿”å›ã€‚è¿”å›å­è¿›ç¨‹çš„PID(æ­¤æ—¶å­è¿›ç¨‹å·²è¢«å›æ”¶)ã€‚</li>
<li>å‚æ•° pidï¼šæŒ‡å®šç­‰å¾…é›†åˆ
<ul>
<li>pid &gt; 0: ç­‰å¾…é›†åˆå°±æ˜¯pidæŒ‡å®šçš„å•ç‹¬çš„å­è¿›ç¨‹ã€‚</li>
<li>pid = -1ï¼šç­‰å¾…é›†åˆå°±æ˜¯çˆ¶è¿›ç¨‹çš„æ‰€æœ‰å­è¿›ç¨‹ã€‚</li>
<li>pid = 0ï¼šç­‰å¾…é›†åˆå°±æ˜¯åœ¨çˆ¶è¿›ç¨‹æ‰€åœ¨è¿›ç¨‹ç»„çš„æ‰€æœ‰å­è¿›ç¨‹ã€‚</li>
<li>pid &lt; 0: ç­‰å¾…é›†åˆå°±æ˜¯åœ¨|pid|æŒ‡å®šçš„è¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰å­è¿›ç¨‹ã€‚</li>
</ul>
</li>
<li>å‚æ•° optionsï¼šä¿®æ”¹ waitpid çš„é»˜è®¤è¡Œä¸º
<ul>
<li>0:é»˜è®¤å€¼ã€‚é€šå¸¸è¡Œä¸ºã€‚</li>
<li>WNOHANG:å¦‚æœç­‰å¾…é›†åˆä¸­çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œåœ¨ waitpid è°ƒç”¨æ—¶å°±å·²ç»ç»ˆæ­¢äº†ï¼Œåˆ™ç«‹å³è¿”å›ã€‚å¦‚æœç­‰å¾…é›†åˆä¸­ä»»ä½•å­è¿›ç¨‹éƒ½æ²¡æœ‰ç»ˆæ­¢ï¼Œä¹Ÿç«‹å³è¿”å›ï¼Œè¿”å›å€¼ä¸º 0ã€‚</li>
<li>WUNTRACED:ä¸ä»…åœ¨ç»ˆæ­¢æ—¶è¿”å›ï¼Œåœæ­¢æ—¶ä¹Ÿè¿”å›ã€‚(åœæ­¢çš„è¿›ç¨‹ä¸ä¼šè¢«å›æ”¶)</li>
<li>WCONTINUED:ä¸ä»…åœ¨ç»ˆæ­¢æ—¶è¿”å›ï¼Œåœ¨ä¸€ä¸ªåœæ­¢çš„ç¨‹åºç»§ç»­è¿è¡Œæ—¶ä¹Ÿè¿”å›ã€‚</li>
<li>é€‰é¡¹å¯ä»¥ç»„åˆ</li>
</ul>
</li>
<li>statuspå‚æ•°æŒ‡å‘å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ä¿¡æ¯statusã€‚
<ul>
<li><code>&lt;sys/wait.h&gt;</code>ä¸­å®šä¹‰äº†ä¸€äº›å®ï¼Œç”¨äºè§£é‡Šstatusã€‚</li>
<li>WIFEXITED(status)ï¼šå¦‚æœäºè¿›ç¨‹é€šè¿‡è°ƒç”¨ exit æˆ–è€…è¿”å›æ­£å¸¸ç»ˆæ­¢ï¼Œå°±è¿”å›çœŸã€‚</li>
<li>WEXITSTATUS(status)ï¼šè¿”å›ä¸€ä¸ªæ­£å¸¸ç»ˆæ­¢çš„å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ã€‚åªæœ‰åœ¨ WIFEXITED() è¿”å›ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå®šä¹‰è¿™ä¸ªçŠ¶æ€ã€‚</li>
<li>WIFSIGNALED(status)ï¼šå¦‚æœå­è¿›ç¨‹æ˜¯å› ä¸ºä¸€ä¸ªæœªè¢«æ•è·çš„ä¿¡å·ç»ˆæ­¢çš„ï¼Œ. é‚£ä¹ˆå°±è¿”å›çœŸã€‚</li>
<li>WTERMSIG(status)ï¼šè¿”å›å¯¼è‡´å­è¿›ç¨‹ç»ˆæ­¢çš„ä¿¡å·çš„ç¼–å·ã€‚åªæœ‰åœ¨ WIFSIGNALED() è¿”å›ä¸ºçœŸæ—¶ï¼Œæ‰å®šä¹‰è¿™ä¸ªçŠ¶æ€ã€‚</li>
<li>WIFSTOPPED(status)ï¼šå¦‚æœå¼•èµ·è¿”å›çš„å­è¿›ç¨‹å½“å‰æ˜¯åœæ­¢çš„ï¼Œé‚£ä¹ˆå°±è¿”å›çœŸã€‚</li>
<li>WSTOPSIG(status)ï¼šè¿”å›å¼•èµ·å­è¿›ç¨‹åœæ­¢çš„ä¿¡å·çš„ç¼–å·ã€‚åªæœ‰åœ¨ WIFSTOPPED() è¿”å›ä¸ºçœŸæ—¶ï¼Œæ‰å®šä¹‰è¿™ä¸ªçŠ¶æ€ã€‚</li>
<li>WIFCONTINUED(status)ï¼šå¦‚æœå­è¿›ç¨‹æ”¶åˆ° SIGCONT ä¿¡å·é‡æ–°å¯åŠ¨ï¼Œåˆ™è¿”å›çœŸã€‚</li>
</ul>
</li>
<li>é”™è¯¯æ¡ä»¶
<ul>
<li>å¦‚æœè°ƒç”¨è¿›ç¨‹æ²¡æœ‰å­è¿›ç¨‹(æ²¡åˆ›å»ºæˆ–è€…å·²ç»å›æ”¶å®Œäº†)ï¼Œåˆ™ waitpid è¿”å› -1ï¼Œå¹¶è®¾ç½® errno ä¸º ECHILDã€‚</li>
<li>å¦‚æœ waitpid å‡½æ•°è¢«ä¸€ä¸ªä¿¡å·ä¸­æ–­ï¼Œåˆ™è¿”å› -1ï¼Œå¹¶è®¾ç½® errno ä¸º EINTRã€‚</li>
</ul>
</li>
</ul>
<h3 id="execveå‡½æ•°"> execveå‡½æ•°</h3>
<ul>
<li>execve å‡½æ•°åœ¨å½“å‰è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­åŠ è½½å¹¶è¿è¡Œä¸€ä¸ªæ–°ç¨‹åºï¼Œå¹¶ä¼š<strong>è¦†ç›–</strong>å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œä¸ä¼šåˆ›å»ºæ–°è¿›ç¨‹ï¼Œè€Œæ˜¯ç»§æ‰¿åŸè¿›ç¨‹çš„PIDå’Œå·²æ‰“å¼€æ–‡ä»¶åˆ—è¡¨ã€‚</li>
<li>execve å‚æ•°åˆ—è¡¨ä¸­ï¼Œfilename ä¸ºè¦åŠ è½½çš„å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶ï¼Œ argvï¼Œenvp ä¸ºä¼ é€’ç»™ main å‡½æ•°çš„å‚æ•°ã€‚</li>
<li>execve åŠ è½½ filename åï¼Œè°ƒç”¨_start()å¯åŠ¨ä»£ç ï¼Œå¯åŠ¨ä»£ç è®¾ç½®æ ˆï¼Œå¹¶å°†æ§åˆ¶ä¼ é€’ç»™æ–°ç¨‹åºçš„ main å‡½æ•°ã€‚</li>
<li>main å‡½æ•°çš„åŸå‹ <code>int main(int argc, char *argv[], char *envp[]);</code>
<ul>
<li>argc ä¸º argv æ•°ç»„ä¸­éç©ºæŒ‡é’ˆçš„æ•°é‡</li>
<li>agrv æ•°ç»„ä¸­ <code>argv[0]</code> ä¸ºå¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶åï¼Œä¹‹åä¸ºæ‰§è¡Œæ—¶æ‰€å¸¦çš„å‚æ•°åˆ—è¡¨ã€‚</li>
<li>envp æ•°ç»„ä¿å­˜ç¯å¢ƒå˜é‡å­—ç¬¦ä¸²(å†…å®¹ä¸º&quot;name=value&quot;çš„é”®å€¼å¯¹)ã€‚</li>
</ul>
</li>
</ul>
<h2 id="ä¿¡å·"> ä¿¡å·</h2>
<ul>
<li>ä¸€ç§æ¯”ç¡¬ä»¶å¼‚å¸¸ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æ›´é«˜å±‚çš„è½¯ä»¶å½¢å¼å¼‚å¸¸ï¼Œå®ƒå…è®¸è¿›ç¨‹å’Œå†…æ ¸ä¸­æ–­å…¶ä»–è¿›ç¨‹ã€‚</li>
<li>ä¸€ä¸ªä¿¡å·å°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯ï¼Œå®ƒé€šçŸ¥è¿›ç¨‹ç³»ç»Ÿä¸­å‘ç”Ÿäº†ä¸€ä¸ªæŸç±»å‹çš„äº‹ä»¶ã€‚</li>
<li>æŸç§ä¿¡å·ç±»å‹å¯¹åº”æ¯ç§ç³»ç»Ÿäº‹ä»¶ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>åç§°</th>
<th>é»˜è®¤è¡Œä¸º</th>
<th>ç›¸åº”äº‹ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>SIGHUP</td>
<td>ç»ˆæ­¢</td>
<td>ç»ˆç«¯çº¿æŒ‚æ–­</td>
</tr>
<tr>
<td>2</td>
<td>SIGINT</td>
<td>ç»ˆæ­¢</td>
<td>æ¥è‡ªé”®ç›˜çš„ä¸­æ–­</td>
</tr>
<tr>
<td>3</td>
<td>SIGQUIT</td>
<td>ç»ˆæ­¢</td>
<td>æ¥è‡ªé”®ç›˜çš„é€€å‡º</td>
</tr>
<tr>
<td>4</td>
<td>SIGILL</td>
<td>ç»ˆæ­¢</td>
<td>éæ³•æŒ‡ä»¤</td>
</tr>
<tr>
<td>5</td>
<td>SIGTRAP</td>
<td>ç»ˆæ­¢å¹¶è½¬å‚¨å†…å­˜</td>
<td>è·Ÿè¸ªé™·é˜±</td>
</tr>
<tr>
<td>6</td>
<td>SIGABRT</td>
<td>ç»ˆæ­¢å¹¶è½¬å‚¨å†…å­˜</td>
<td>æ¥è‡ª abort å‡½æ•°çš„ç»ˆæ­¢ä¿¡å·</td>
</tr>
<tr>
<td>7</td>
<td>SIGBUS</td>
<td>ç»ˆæ­¢</td>
<td>æ€»çº¿é”™è¯¯</td>
</tr>
<tr>
<td>8</td>
<td>SIGFPE</td>
<td>ç»ˆæ­¢å¹¶è½¬å‚¨å†…å­˜</td>
<td>æµ®ç‚¹å¼‚å¸¸</td>
</tr>
<tr>
<td>9</td>
<td>SIGKILL</td>
<td>ç»ˆæ­¢</td>
<td>æ€æ­»ç¨‹åº</td>
</tr>
<tr>
<td>10</td>
<td>SIGUSR1</td>
<td>ç»ˆæ­¢</td>
<td>ç”¨æˆ·å®šä¹‰çš„ä¿¡å· 1</td>
</tr>
<tr>
<td>11</td>
<td>SIGSEGV</td>
<td>ç»ˆæ­¢å¹¶è½¬å‚¨å†…å­˜</td>
<td>æ— æ•ˆçš„å†…å­˜å¼•ç”¨ï¼ˆæ®µæ•…éšœï¼‰</td>
</tr>
<tr>
<td>12</td>
<td>SIGUSR2</td>
<td>ç»ˆæ­¢</td>
<td>ç”¨æˆ·å®šä¹‰çš„ä¿¡å· 2</td>
</tr>
<tr>
<td>13</td>
<td>SIGPIPE</td>
<td>ç»ˆæ­¢</td>
<td>å‘ä¸€ä¸ªæ²¡æœ‰è¯»ç”¨æˆ·çš„ç®¡é“åšå†™æ“ä½œ</td>
</tr>
<tr>
<td>14</td>
<td>SIGALRM</td>
<td>ç»ˆæ­¢</td>
<td>æ¥è‡ª alarm å‡½æ•°çš„å®šæ—¶å™¨ä¿¡å·</td>
</tr>
<tr>
<td>15</td>
<td>SIGTERM</td>
<td>ç»ˆæ­¢</td>
<td>è½¯ä»¶ç»ˆæ­¢ä¿¡å·</td>
</tr>
<tr>
<td>16</td>
<td>SIGSTKFLT</td>
<td>ç»ˆæ­¢</td>
<td>åå¤„ç†å™¨ä¸Šçš„æ ˆæ•…éšœ</td>
</tr>
<tr>
<td>17</td>
<td>SIGCHLD</td>
<td>å¿½ç•¥</td>
<td>ä¸€ä¸ªå­è¿›ç¨‹åœæ­¢æˆ–è€…ç»ˆæ­¢</td>
</tr>
<tr>
<td>18</td>
<td>SIGCONT</td>
<td>å¿½ç•¥</td>
<td>ç»§ç»­è¿›ç¨‹å¦‚æœè¯¥è¿›ç¨‹åœæ­¢</td>
</tr>
<tr>
<td>19</td>
<td>SIGSTOP</td>
<td>åœæ­¢ç›´åˆ°ä¸‹ä¸€ä¸ªSIGCONT</td>
<td>ä¸æ˜¯æ¥è‡ªç»ˆç«¯çš„åœæ­¢ä¿¡å·</td>
</tr>
<tr>
<td>20</td>
<td>SIGTSTP</td>
<td>åœæ­¢ç›´åˆ°ä¸‹ä¸€ä¸ªSIGCONT</td>
<td>æ¥è‡ªç»ˆç«¯çš„åœæ­¢ä¿¡å·</td>
</tr>
<tr>
<td>21</td>
<td>SIGTTIN</td>
<td>åœæ­¢ç›´åˆ°ä¸‹ä¸€ä¸ªSIGCONT</td>
<td>åå°è¿›ç¨‹ä»ç»ˆç«¯è¯»</td>
</tr>
<tr>
<td>22</td>
<td>SIGTTOU</td>
<td>åœæ­¢ç›´åˆ°ä¸‹ä¸€ä¸ªSIGCONT</td>
<td>åå°è¿›ç¨‹å‘ç»ˆç«¯å†™</td>
</tr>
<tr>
<td>23</td>
<td>SIGURG</td>
<td>å¿½ç•¥</td>
<td>å¥—æ¥å­—ä¸Šçš„ç´§æ€¥æƒ…å†µ</td>
</tr>
<tr>
<td>24</td>
<td>SIGXCPU</td>
<td>ç»ˆæ­¢</td>
<td>CPU æ—¶é—´é™åˆ¶è¶…å‡º</td>
</tr>
<tr>
<td>25</td>
<td>SIGXFSZ</td>
<td>ç»ˆæ­¢</td>
<td>æ–‡ä»¶å¤§å°é™åˆ¶è¶…å‡º</td>
</tr>
<tr>
<td>26</td>
<td>SIGVTALRM</td>
<td>ç»ˆæ­¢</td>
<td>è™šæ‹Ÿå®šæ—¶å™¨æœŸæ»¡</td>
</tr>
<tr>
<td>27</td>
<td>SIGPROF</td>
<td>ç»ˆæ­¢</td>
<td>å‰–æå®šæ—¶å™¨æœŸæ»¡</td>
</tr>
<tr>
<td>28</td>
<td>SIGWINCH</td>
<td>å¿½ç•¥</td>
<td>çª—å£å¤§å°å˜åŒ–</td>
</tr>
<tr>
<td>29</td>
<td>SIGIO</td>
<td>ç»ˆæ­¢</td>
<td>åœ¨æŸä¸ªæè¿°ç¬¦ä¸Šå¯æ‰§è¡Œ I/O æ“ä½œ</td>
</tr>
<tr>
<td>30</td>
<td>SIGPWR</td>
<td>ç»ˆæ­¢</td>
<td>ç”µæºæ•…éšœ</td>
</tr>
</tbody>
</table>
<h3 id="ä¿¡å·æœ¯è¯­"> ä¿¡å·æœ¯è¯­</h3>
<ul>
<li>å‘é€ä¿¡å·ï¼šå†…æ ¸é€šè¿‡<strong>æ›´æ–°ç›®çš„è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­çš„æŸä¸ªçŠ¶æ€</strong>ï¼Œå‘é€ä¸€ä¸ªä¿¡å·ç»™ç›®çš„è¿›ç¨‹ã€‚éœ€è¦å‘é€ä¿¡å·çš„ä¸¤ç§åŸå› 
<ul>
<li>å†…æ ¸æ£€æµ‹åˆ°æŸä¸ªç³»ç»Ÿäº‹ä»¶ï¼Œå¦‚é™¤é›¶é”™è¯¯æˆ–å­è¿›ç¨‹ç»ˆæ­¢ã€‚</li>
<li>ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨äº† kill å‡½æ•°ã€‚</li>
</ul>
</li>
<li>æ¥æ”¶ä¿¡å·ï¼šå½“ç›®çš„è¿›ç¨‹è¢«å†…æ ¸å¼ºè¿«ä»¥æŸç§æ–¹å¼å¯¹ä¿¡å·ä½œå‡ºååº”æ—¶ï¼Œå®ƒå°±æ¥æ”¶äº†ä¿¡å·ã€‚æœ‰ä¸‰ç§ååº”
<ul>
<li>å¿½ç•¥ä¿¡å·</li>
<li>ç»ˆæ­¢è¿›ç¨‹</li>
<li>æ•è·ä¿¡å·ï¼šå³è°ƒç”¨ä¿¡å·å¤„ç†ç¨‹åºã€‚</li>
</ul>
</li>
<li>å¾…å¤„ç†ä¿¡å·(pending signal)ï¼šå‘å‡ºäº†ï¼Œä½†æ²¡è¢«å¤„ç†çš„ä¿¡å·ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œå¯¹ä¸€ä¸ªè¿›ç¨‹è€Œè¨€ï¼Œæ¯ä¸ªä¿¡å·ç±»å‹æœ€å¤šæœ‰ä¸€ä¸ªå¾…å¤„ç†ä¿¡å·ï¼Œåç»­å‘åˆ°è¯¥è¿›ç¨‹çš„åŒç±»å‹ä¿¡å·ä¼šè¢«ä¸¢å¼ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè¿›ç¨‹ï¼Œæœ€å¤šæ¥æ”¶ä¸€ä¸ªä¿¡å·(æ­£åœ¨å¤„ç†)å¹¶æœ‰ä¸€ä¸ªåŒç±»å‹çš„å¾…å¤„ç†ä¿¡å·ã€‚</li>
<li>é˜»å¡ï¼šå¯¹äºä¿¡å· kï¼Œè¿›ç¨‹ p ç¬¬ä¸€æ¬¡æ”¶åˆ°ä¿¡å· k æ—¶ï¼Œp æ¥æ”¶ kï¼Œå¹¶ä½œå‡ºåˆç†ååº”ã€‚åœ¨æ­¤æœŸé—´ï¼Œç¬¬äºŒæ¬¡æ”¶åˆ°ä¿¡å· k æ—¶ï¼Œk å°±å¤„äºå¾…å¤„ç†çŠ¶æ€ï¼Œæ­¤æ—¶å°±è¯´ä¿¡å· k è¢«éšå¼é˜»å¡äº†ã€‚å¦‚æœç»§ç»­æ”¶åˆ°ä¿¡å· kï¼Œç›´æ¥ä¸¢å¼ƒã€‚</li>
<li>å†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸¤ä¸ªä¿¡å·é›†åˆ
<ul>
<li>åœ¨ pending ä½å‘é‡ä¸­ç»´æŠ¤å¾…å¤„ç†ä¿¡å·é›†åˆ(è¢«éšå¼é˜»å¡çš„ä¿¡å·é›†åˆ)</li>
<li>åœ¨ blocked ä½å‘é‡ä¸­ç»´æŠ¤è¢«é˜»å¡çš„ä¿¡å·é›†åˆ(ç”¨sigprocmask()å‡½æ•°é˜»å¡çš„)</li>
</ul>
</li>
</ul>
<h3 id="å‘é€ä¿¡å·"> å‘é€ä¿¡å·</h3>
<ul>
<li>/bin/kill ç¨‹åºï¼škill -sigid pidã€‚å…·ä½“è§man killã€‚</li>
<li>é”®ç›˜ï¼šshell ä¸­ä½¿ç”¨ job è¡¨ç¤ºè¿›ç¨‹ã€‚
<ul>
<li>Ctrl+Cï¼šå†…æ ¸å‘é€ä¸€ä¸ª SIGINTR ä¿¡å·åˆ°å‰å°è¿›ç¨‹ç»„ä¸­çš„æ¯ä¸ªè¿›ç¨‹ã€‚é»˜è®¤ç»“æœä¸ºç»ˆæ­¢å‰å°è¿›ç¨‹ã€‚</li>
<li>Ctrl+Zï¼šå†…æ ¸å‘é€ä¸€ä¸ª SIGTSTP ä¿¡å·åˆ°å‰å°è¿›ç¨‹ç»„ä¸­çš„æ¯ä¸ªè¿›ç¨‹ã€‚é»˜è®¤ç»“æœä¸ºåœæ­¢å‰å°è¿›ç¨‹ã€‚</li>
</ul>
</li>
<li>kill() å‡½æ•°</li>
<li>alarm() å‡½æ•°ï¼Œå‘è¿›ç¨‹è‡ªå·±å‘é€ SIGALRM ä¿¡å·ã€‚</li>
</ul>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;sys/types.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;signal.h></span></span>
<span>int</span> <span>kill</span><span>(</span><span>pid_t</span> pid<span>,</span> <span>int</span> sig<span>)</span><span>;</span> <span>// å‘pidè¿›ç¨‹å‘é€sigä¿¡å·</span>
<span>unsigned</span> <span>int</span> <span>alarm</span><span>(</span><span>unsigned</span> <span>int</span> secs<span>)</span><span>;</span> <span>// åœ¨secsåå‘é€ä¸€ä¸ª SIGALRM ä¿¡å·ç»™è‡ªå·±ã€‚</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="æ¥æ”¶ä¿¡å·"> æ¥æ”¶ä¿¡å·</h3>
<p>å½“å†…æ ¸å°†è¿›ç¨‹ p ä»å†…æ ¸æ¨¡å¼åˆ‡æ¢åˆ°ç”¨æˆ·æ¨¡å¼æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥è¿›ç¨‹ p çš„ä¸ºè¢«é˜»å¡çš„å¾…å¤„ç†ä¿¡å·çš„é›†åˆ(pending &amp; ~blocked)ã€‚å¦‚æœé›†åˆä¸ºç©ºï¼Œå†…æ ¸å°†æ§åˆ¶ç›´æ¥ä¼ ç»™ p çš„é€»è¾‘æ§åˆ¶æµä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚å¦‚æœé›†åˆéç©ºï¼Œåˆ™é€‰æ‹©æŸä¸ªä¿¡å· k (é€šå¸¸æ˜¯æœ€å°çš„)ï¼Œå¹¶ä¸”å¼ºåˆ¶ p æ¥æ”¶ä¿¡å· kã€‚å¼•èµ·ç›¸åº”çš„è¡Œä¸º(ç»ˆæ­¢ï¼Œç»ˆæ­¢+è½¬å‚¨å†…å­˜(Core dump)ï¼Œåœæ­¢ï¼Œæ‰§è¡Œä¿¡å·å¤„ç†ç¨‹åº)ã€‚</p>
<p>è¿›ç¨‹å¯ä»¥é€šè¿‡ signal å‡½æ•°ä¿®æ”¹å’Œä¿¡å·ç›¸å…³è”çš„é»˜è®¤è¡Œä¸ºï¼Œé™¤äº† SIGSTOP å’Œ SIGKILLã€‚</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;signal.h></span></span>
<span>typedef</span> <span>void</span> <span>(</span><span>*</span><span>sighandler_t</span><span>)</span><span>(</span><span>int</span><span>)</span><span>;</span>
<span>sighandler_t</span> <span>signal</span><span>(</span><span>int</span> signum<span>,</span> <span>sighandler_t</span> handler<span>)</span><span>;</span> <span>// è®¾ç½® signum ä¿¡å·çš„ä¿¡å·å¤„ç†ç¨‹åºä¸º handlerã€‚</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>å…¶ä¸­ handler å¯ä»¥æ˜¯ï¼š</p>
<ul>
<li>SIG_IGNï¼šå¿½ç•¥ä¿¡å·</li>
<li>SIG_DFLï¼šä¿¡å·çš„é»˜è®¤è¡Œä¸º</li>
<li>ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ç§°ä¸ºä¿¡å·å¤„ç†ç¨‹åºã€‚è°ƒç”¨ä¿¡å·å¤„ç†ç¨‹åºç§°ä¸º<strong>æ•è·ä¿¡å·</strong>ï¼Œæ‰§è¡Œä¿¡å·å¤„ç†ç¨‹åºç§°ä¸º<strong>å¤„ç†ä¿¡å·</strong>ã€‚</li>
<li>ä¿¡å·å¤„ç†ç¨‹åºå¯ä»¥è¢«å…¶ä»–ä¿¡å·å¤„ç†ç¨‹åºä¸­æ–­ã€‚</li>
</ul>
<h3 id="ä¿¡å·çš„é˜»å¡å’Œè§£é™¤"> ä¿¡å·çš„é˜»å¡å’Œè§£é™¤</h3>
<ul>
<li>éšå¼é˜»å¡æœºåˆ¶ï¼šå†…æ ¸é»˜è®¤é˜»å¡ä»»ä½•å½“å‰å¤„ç†ç¨‹åºæ­£åœ¨å¤„ç†çš„ä¿¡å·ç±»å‹çš„å¾…å¤„ç†ä¿¡å·ã€‚</li>
<li>æ˜¾ç¤ºé˜»å¡æœºåˆ¶ï¼šä½¿ç”¨ sigprocmask å‡½æ•°è®¾ç½®ã€‚</li>
</ul>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;signal.h></span></span>
<span>int</span> <span>sigprocmask</span><span>(</span><span>int</span> how<span>,</span> <span>const</span> <span>sigset_t</span> <span>*</span>set<span>,</span> <span>sigset_t</span> <span>*</span>oldset<span>)</span><span>;</span> <span>// è®¾ç½®blockedä½å‘é‡ï¼Œé˜»å¡ä¿¡å·ã€‚</span>
<span>int</span> <span>sigempty</span><span>(</span><span>sigset_t</span> <span>*</span>set<span>)</span><span>;</span> <span>// åˆå§‹åŒ– set ä¸ºç©ºé›†åˆ</span>
<span>int</span> <span>sigfillset</span><span>(</span><span>sigset_t</span> <span>*</span>set<span>)</span><span>;</span> <span>// åˆå§‹åŒ– set ä¸ºé€‰æ‹©æ‰€æœ‰ä¿¡å·çš„é›†åˆ</span>
<span>int</span> <span>sigaddset</span><span>(</span><span>sigset_t</span> <span>*</span>set<span>,</span> <span>int</span> signum<span>)</span><span>;</span> <span>// å°† signum æ·»åŠ åˆ° set</span>
<span>int</span> <span>sigdelset</span><span>(</span><span>sigset_t</span> <span>*</span>set<span>,</span> <span>int</span> signum<span>)</span><span>;</span> <span>// ä» set ä¸­åˆ é™¤ signum</span>
<span>int</span> <span>sigismember</span><span>(</span><span>sigset_t</span> <span>*</span>set<span>,</span> <span>int</span> signum<span>)</span><span>;</span> <span>// åˆ¤æ–­ signum æ˜¯ä¸æ˜¯ set çš„æˆå‘˜</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>å…¶ä¸­ï¼Œhow</p>
<ul>
<li>SIG_BLOCKï¼š å°† set ä¸­çš„ä¿¡å·æ·»åŠ åˆ° blocked ä¸­(blocked = blocked | set)</li>
<li>SIG_UNBLOCKï¼š blocked = blocked &amp; ~set</li>
<li>SIG_SETMASKï¼šblocked = set</li>
</ul>
<h3 id="ç¼–å†™ä¿¡å·å¤„ç†ç¨‹åº"> ç¼–å†™ä¿¡å·å¤„ç†ç¨‹åº</h3>
<p>ä¿¡å·å¤„ç†æ˜¯ Linux ç³»ç»Ÿç¼–ç¨‹æœ€æ£˜æ‰‹çš„ä¸€ä¸ªé—®é¢˜ã€‚å› ä¸º</p>
<ul>
<li>å¤„ç†ç¨‹åºå’Œä¸»ç¨‹åºå¹¶å‘è¿è¡Œï¼Œå…±äº«åŒæ ·çš„å…¨å±€å˜é‡</li>
<li>å¦‚ä½•åŠä½•æ—¶æ¥æ”¶ä¿¡å·çš„è§„åˆ™å¸¸å¸¸è¿åäººçš„ç›´è§‰</li>
<li>ä¸åŒç³»ç»Ÿæœ‰ä¸åŒçš„ä¿¡å·å¤„ç†è¯­ä¹‰</li>
</ul>
<p>//TODO</p>
<ul>
<li>ä¿¡å·æ—¶ä¸æ’é˜Ÿçš„ï¼Œæ¯ç§ä¿¡å·æœ€å¤šä¸€ä¸ªæ­£åœ¨å¤„ç†ï¼Œä¸€ä¸ªå¾…å¤„ç†ï¼Œå…¶ä½™éƒ½æ˜¯ç›´æ¥ä¸¢å¼ƒã€‚å› æ­¤ï¼Œå…³äºä¿¡å·çš„ä¸€ä¸ªå…³é”®æ€æƒ³æ˜¯ï¼šå¦‚æœå­˜åœ¨ä¸€ä¸ªæœªå¤„ç†çš„ä¿¡å·ï¼Œå°±è¡¨æ˜è‡³å°‘æœ‰ä¸€ä¸ªä¿¡å·åˆ°è¾¾äº†ã€‚</li>
<li>pså‘½ä»¤è¾“å‡ºä¸­çš„<code>&lt;defunct&gt;</code>è¡¨æ˜è¿›ç¨‹ä¸ºåƒµæ­»è¿›ç¨‹ã€‚</li>
</ul>
<h2 id="éæœ¬åœ°è·³è½¬"> éæœ¬åœ°è·³è½¬</h2>
<p>å¦ä¸€ç§ç”¨æˆ·çº§å¼‚å¸¸æ§åˆ¶æµå½¢å¼ã€‚é€šè¿‡ setjump å’Œ longjump å‡½æ•°æä¾›ã€‚</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;setjmp.h></span></span>
<span>int</span> <span>setjmp</span><span>(</span>jmp_buf env<span>)</span><span>;</span> <span>// åœ¨ env ç¼“å†²åŒºä¸­ä¿å­˜å½“å‰è°ƒç”¨ç¯å¢ƒï¼Œä¾›longjmpä½¿ç”¨ï¼Œè¿”å›0ã€‚</span>
<span>void</span> <span>longjmp</span><span>(</span>jmp_buf env<span>,</span> <span>int</span> retval<span>)</span><span>;</span> <span>// ä» env ç¼“å†²åŒºä¸­æ¢å¤è°ƒç”¨ç¯å¢ƒï¼Œç„¶åè§¦å‘ä¸€ä¸ªæœ€è¿‘ä¸€æ¬¡åˆå§‹åŒ– env çš„ setjmp è°ƒç”¨çš„è¿”å›ã€‚ç„¶å setjmp è¿”å›ï¼Œè¿”å›å€¼ä¸ºéé›¶çš„ retvalã€‚</span>
<span>// ä¸‹é¢è¿™ä¸¤ä¸ªæ˜¯å¯è¢«ä¿¡å·å¤„ç†å‡½æ•°ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚(ä½†éƒ½ä¸æ˜¯å¼‚æ­¥ä¿¡å·å®‰å…¨çš„å‡½æ•°)</span>
<span>int</span> <span>sigsetjump</span><span>(</span>sigjmp_buf env<span>,</span> <span>int</span> savesigs<span>)</span><span>;</span> 
<span>void</span> <span>siglongjmp</span><span>(</span>sigjmp_buf env<span>,</span> <span>int</span> retval<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>longjmpä¸è¿”å›ï¼Œè€Œæ˜¯ç›´æ¥è·³è½¬åˆ°æœ€è¿‘çš„setjmpï¼Œè®©setjmpå†æ¬¡è¿”å›ã€‚</p>
<p>éæœ¬åœ°è·³è½¬çš„ä¸€ä¸ªé‡è¦åº”ç”¨å°±æ˜¯å…è®¸ä»ä¸€ä¸ªæ·±å±‚åµŒå¥—çš„å‡½æ•°è°ƒç”¨ä¸­ç«‹å³è¿”å›ï¼Œé€šå¸¸æ˜¯ç”±æ£€æµ‹åˆ°æŸä¸ªé”™è¯¯æƒ…å†µå¼•èµ·çš„ã€‚</p>
<details><summary>ç¤ºä¾‹</summary>
<div><pre><code><span><span>#</span><span>include</span> <span>"csapp.h"</span></span>

jmp_buf buf<span>;</span>

<span>int</span> error1 <span>=</span> <span>0</span><span>;</span>
<span>int</span> error2 <span>=</span> <span>1</span><span>;</span>

<span>void</span> <span>foo</span><span>(</span><span>void</span><span>)</span><span>,</span> <span>bar</span><span>(</span><span>void</span><span>)</span><span>;</span>

<span>int</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
    <span>switch</span> <span>(</span><span>setjmp</span><span>(</span>buf<span>)</span><span>)</span> <span>{</span>
    <span>case</span> <span>0</span><span>:</span>
        <span>foo</span><span>(</span><span>)</span><span>;</span>
        <span>break</span><span>;</span>
    <span>case</span> <span>1</span><span>:</span>
        <span>printf</span><span>(</span><span>"Detected an error1 condition in foo\n"</span><span>)</span><span>;</span>
        <span>break</span><span>;</span>
    <span>case</span> <span>2</span><span>:</span>
        <span>printf</span><span>(</span><span>"Detected an error2 condition in foo\n"</span><span>)</span><span>;</span>
        <span>break</span><span>;</span>
    <span>default</span><span>:</span>
        <span>printf</span><span>(</span><span>"Unknown error condition in foo\n"</span><span>)</span><span>;</span>
    <span>}</span>
    <span>exit</span><span>(</span><span>0</span><span>)</span><span>;</span>
<span>}</span>

<span>/* Deeply nested function foo */</span>
<span>void</span> <span>foo</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
    <span>if</span> <span>(</span>error1<span>)</span>
        <span>longjmp</span><span>(</span>buf<span>,</span> <span>1</span><span>)</span><span>;</span>
    <span>bar</span><span>(</span><span>)</span><span>;</span>
<span>}</span>

<span>void</span> <span>bar</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
    <span>if</span> <span>(</span>error2<span>)</span>
        <span>longjmp</span><span>(</span>buf<span>,</span> <span>2</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div></details>
<p>éæœ¬åœ°è·³è½¬çš„å¦ä¸€ä¸ªé‡è¦åº”ç”¨æ˜¯ä½¿ä¸€ä¸ªä¿¡å·å¤„ç†ç¨‹åºåˆ†æ”¯åˆ°ä¸€ä¸ªç‰¹æ®Šçš„ä»£ç ä½ç½®ï¼Œè€Œä¸æ˜¯è¿”å›åˆ°è¢«ä¿¡å·åˆ°è¾¾ä¸­æ–­äº†çš„æŒ‡ä»¤çš„ä½ç½®ã€‚</p>
<details><summary>ç¤ºä¾‹</summary>
<div><pre><code><span><span>#</span><span>include</span> <span>"csapp.h"</span></span>

sigjmp_buf buf<span>;</span>

<span>void</span> <span>handler</span><span>(</span><span>int</span> sig<span>)</span>
<span>{</span>
    <span>siglongjmp</span><span>(</span>buf<span>,</span> <span>1</span><span>)</span><span>;</span>
<span>}</span>

<span>int</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
    <span>if</span> <span>(</span><span>!</span><span>sigsetjmp</span><span>(</span>buf<span>,</span> <span>1</span><span>)</span><span>)</span> <span>{</span>
        <span>Signal</span><span>(</span>SIGINT<span>,</span> handler<span>)</span><span>;</span>
        <span>Sio_puts</span><span>(</span><span>"starting\n"</span><span>)</span><span>;</span>
    <span>}</span>
    <span>else</span>
        <span>Sio_puts</span><span>(</span><span>"restarting\n"</span><span>)</span><span>;</span>

    <span>while</span> <span>(</span><span>1</span><span>)</span> <span>{</span>
        <span>Sleep</span><span>(</span><span>1</span><span>)</span><span>;</span>
        <span>Sio_puts</span><span>(</span><span>"processing...\n"</span><span>)</span><span>;</span>
    <span>}</span>
    <span>exit</span><span>(</span><span>0</span><span>)</span><span>;</span> <span>/* Control never reaches here */</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div></details>
<h2 id="æ“ä½œè¿›ç¨‹çš„å·¥å…·"> æ“ä½œè¿›ç¨‹çš„å·¥å…·</h2>
<ul>
<li>STRACE</li>
<li>PS</li>
<li>TOP</li>
<li>PMAP</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">è®¡ç®—æœºæ¦‚è¿°</title>
    <id>https://kigane.github.io/note/cs/</id>
    <link href="https://kigane.github.io/note/cs/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">è™šæ‹Ÿå†…å­˜</title>
    <id>https://kigane.github.io/note/cs/VM/</id>
    <link href="https://kigane.github.io/note/cs/VM/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<p>è™šæ‹Ÿå†…å­˜æä¾›ä¸‰ä¸ªé‡è¦èƒ½åŠ›</p>
<ul>
<li>å°†ä¸»å­˜çœ‹ä½œç£ç›˜çš„é«˜é€Ÿç¼“å­˜ï¼Œåœ¨ä¸»å­˜ä¸­åªä¿ç•™æ´»åŠ¨åŒºåŸŸï¼Œå¹¶æ ¹æ®éœ€è¦åœ¨ä¸»å­˜å’Œç£ç›˜é—´ä¼ é€æ•°æ®ï¼Œé«˜æ•ˆåœ°ä½¿ç”¨äº†ä¸»å­˜</li>
<li>ä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›äº†ä¸€è‡´çš„åœ°å€ç©ºé—´ï¼Œç®€åŒ–äº†å†…å­˜ç®¡ç†</li>
<li>ä¹Ÿä¿æŠ¤äº†æ¯ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸è¢«å…¶ä»–è¿›ç¨‹ç ´å</li>
</ul>
<h2 id="ç‰©ç†å’Œè™šæ‹Ÿå¯»å€"> ç‰©ç†å’Œè™šæ‹Ÿå¯»å€</h2>
<p>ç‰©ç†åœ°å€(Physical Address, PA)ï¼šè®¡ç®—æœºçš„ä¸»å­˜è¢«ç»„ç»‡æˆä¸€ä¸ªç”±Mä¸ªè¿ç»­çš„å­—èŠ‚å¤§å°çš„å•å…ƒç»„æˆçš„æ•°ç»„ã€‚æ¯å­—èŠ‚éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç‰©ç†åœ°å€ã€‚<br>
è™šæ‹Ÿå¯»å€(Virtual Address, VA)ï¼šCPUç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿåœ°å€æ¥è®¿é—®ä¸»å­˜ï¼Œè¿™ä¸ªè™šæ‹Ÿåœ°å€åœ¨è¢«é€åˆ°å†…å­˜ä¹‹å‰å…ˆè½¬æ¢ä¸ºé€‚å½“çš„ç‰©ç†åœ°å€ã€‚åœ¨CPUèŠ¯ç‰‡ä¸Šç”±å«å†…å­˜ç®¡ç†å•å…ƒ(Memory Management Unit, MMU)çš„ç¡¬ä»¶è´Ÿè´£åœ°å€ç¿»è¯‘ï¼Œå³å°†VAè½¬æ¢ä¸ºPAã€‚MMUé€šè¿‡åˆ°ä¸»å­˜ä¸­æŸ¥è¯¢é¡µè¡¨æ¥åŠ¨æ€ç¿»è¯‘VAã€‚</p>
<h2 id="åœ°å€ç©ºé—´"> åœ°å€ç©ºé—´</h2>
<p>åœ°å€ç©ºé—´æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°åœ°å€çš„æœ‰åºé›†åˆï¼Œä¸ºäº†ç®€åŒ–è®¨è®ºæ€»æ˜¯ä½¿ç”¨çº¿æ€§åœ°å€ç©ºé—´ï¼Œå³æ•´æ•°æ˜¯è¿ç»­çš„ã€‚<br>
è™šæ‹Ÿåœ°å€ç©ºé—´çš„å¤§å°ç”¨ä½è¡¨ç¤ºï¼Œnä½åœ°å€ç©ºé—´ï¼Œè¡¨ç¤ºæœ‰<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span style="margin-right:0.10903em;">N</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.6644em;"></span><span><span>2</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>n</span></span></span></span></span></span></span></span></span></span></span>ä¸ªåœ°å€ã€‚ç‰©ç†åœ°å€ç©ºé—´å¯¹åº”äºç‰©ç†å†…å­˜çš„Mä¸ªå­—èŠ‚ã€‚Mä¸è¦æ±‚æ˜¯2çš„å¹‚ï¼Œä½†æˆ‘ä»¬é€šå¸¸è¿™æ ·å‡è®¾ã€‚<br>
è™šæ‹Ÿå†…å­˜çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…è®¸æ¯ä¸ªæ•°æ®å¯¹è±¡(å­—èŠ‚)æœ‰å¤šä¸ªç‹¬ç«‹çš„åœ°å€ï¼Œå…¶ä¸­æ¯ä¸ªåœ°å€æ¥è‡ªä¸åŒçš„åœ°å€ç©ºé—´ã€‚</p>
<h2 id="è™šæ‹Ÿå†…å­˜çš„ç»“æ„"> è™šæ‹Ÿå†…å­˜çš„ç»“æ„</h2>
<p>æ¦‚å¿µä¸Šï¼Œè™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªç”±å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„Nä¸ªè¿ç»­å­—èŠ‚ç»„æˆçš„æ•°ç»„ã€‚ç£ç›˜ä¸Šçš„æ•°æ®è¢«åˆ†å‰²æˆå—ï¼Œä½œä¸ºåœ¨ç£ç›˜å’Œä¸»å­˜ä¹‹é—´çš„ä¼ é€å•å…ƒã€‚VMç³»ç»Ÿå°†è™šæ‹Ÿå†…å­˜åˆ†å‰²æˆçš„å—ç§°ä¸ºè™šæ‹Ÿé¡µ(Virtual Page, VP)ï¼Œç‰©ç†å†…å­˜çš„å—ç§°ä¸ºç‰©ç†é¡µ(Physical Page, PP)æˆ–é¡µå¸§(page frame)(å¤§å°ä¸º<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span style="margin-right:0.13889em;">P</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.6644em;"></span><span><span>2</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>p</span></span></span></span></span></span></span></span></span></span></span>å­—èŠ‚)ã€‚</p>
<p><img src="/assets/csapp/VP-PP.png" alt="VP-PP" /></p>
<h3 id="dramç¼“å­˜"> DRAMç¼“å­˜</h3>
<ul>
<li>æœ¯è¯­DRAMç¼“å­˜è¡¨ç¤ºVMç³»ç»Ÿçš„ç¼“å­˜ï¼Œå³ç”¨ä¸»å­˜ç¼“å­˜VPã€‚</li>
<li>ç›¸åº”çš„SRAMç¼“å­˜è¡¨ç¤ºCPUå’Œä¸»å­˜ä¹‹é—´çš„L1,L2,L3é«˜é€Ÿç¼“å­˜ã€‚</li>
</ul>
<p>ç£ç›˜æ¯”DRAMæ…¢å¤§çº¦100000å¤šå€ï¼Œä¸å‘½ä¸­çš„å¼€é”€å·¨å¤§ã€‚ä»ç£ç›˜è¯»å–ç¬¬ä¸€ä¸ªå­—èŠ‚çš„å¼€é”€ä¹Ÿå¾ˆå¤§ã€‚å› æ­¤</p>
<ul>
<li>è™šæ‹Ÿé¡µå¾€å¾€å¾ˆå¤§ï¼Œé€šå¸¸ä¸º4KB~2MB</li>
<li>DRAMç¼“å­˜æ˜¯å…¨ç›¸è”çš„</li>
<li>æ›¿æ¢ç­–ç•¥æ›´å¤æ‚ï¼Œç²¾å¯†</li>
<li>ä½¿ç”¨å†™å›ï¼Œè€Œéç›´å†™</li>
</ul>
<h3 id="é¡µè¡¨-page-table"> é¡µè¡¨(Page Table)</h3>
<p>å»ºç«‹è™šæ‹Ÿé¡µåˆ°ç‰©ç†é¡µçš„æ˜ å°„</p>
<ul>
<li>é¡µè¡¨æ˜¯ä¸€ä¸ªå­˜æ”¾åœ¨ç‰©ç†å†…å­˜ä¸­çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ä¸ªé¡µè¡¨æ¡ç›®(Page Table Entry, PTE)çš„æ•°ç»„ï¼Œå»ºç«‹è™šæ‹Ÿé¡µåˆ°ç‰©ç†é¡µçš„æ˜ å°„ã€‚è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„æ¯ä¸ªé¡µåœ¨é¡µè¡¨ä¸­ä¸€ä¸ª<strong>å›ºå®šåç§»é‡</strong>å¤„éƒ½æœ‰ä¸€ä¸ªPTEã€‚</li>
<li>MMUä¸­çš„åœ°å€ç¿»è¯‘ç¡¬ä»¶æ¯æ¬¡å°†VAè½¬æ¢ä¸ºPAæ—¶ï¼Œéƒ½ä¼šå»è¯»é¡µè¡¨ã€‚</li>
<li>OSè´Ÿè´£ç»´æŠ¤é¡µè¡¨çš„å†…å®¹ï¼Œä»¥åŠåœ¨ç£ç›˜å’ŒDRAMä¹‹é—´æ¥å›ä¼ é€é¡µã€‚
<img src="/assets/csapp/PageTable.png" alt="PageTable" />
PSï¼šæœ‰æ•ˆä½ä¸º1è¡¨ç¤ºå¯¹åº”çš„VPå·²ç»è£…å…¥ç‰©ç†å†…å­˜äº†ï¼Œåœ°å€ä¸ºå†…å­˜åœ°å€ã€‚æœ‰æ•ˆä½ä¸º0è¡¨ç¤ºè¦ä¹ˆVPè¿˜æœªåˆ†é…ï¼Œè¦ä¹ˆåœ°å€æŒ‡å‘VPåœ¨ç£ç›˜ä¸Šçš„ä½ç½®ã€‚</li>
</ul>
<h2 id="å‘½ä¸­ä¸ç¼ºé¡µ"> å‘½ä¸­ä¸ç¼ºé¡µ</h2>
<p>å½“CPUæƒ³è¦è¯»å–VMç³»ç»Ÿä¸­çš„ä¸€ä¸ªå­—èŠ‚ï¼ˆå¦‚VP2ï¼‰æ—¶ï¼Œå‘é€ä¸€ä¸ªVAåˆ°MMUçš„åœ°å€ç¿»è¯‘ç¡¬ä»¶ï¼Œåœ°å€ç¿»è¯‘ç¡¬ä»¶æ ¹æ®VAçš„å‰n-pä½VPN(Virtual Page Number)å®šä½é¡µè¡¨ä¸­ç›¸åº”çš„PTEï¼Œç„¶åæŸ¥çœ‹PTEçš„æœ‰æ•ˆä½</p>
<ul>
<li>
<p>å¦‚æœä¸º1ï¼Œè¯´æ˜VP2å·²ç¼“å­˜åœ¨å†…å­˜ä¸­äº†ã€‚PTEä¸­çš„åœ°å€å°±æ˜¯PAçš„PPN(Physics Page Number)ã€‚å–å‡ºæ¥å’ŒVPO(Virtual Page Offset)æ„æˆå®é™…ç‰©ç†åœ°å€ã€‚</p>
</li>
<li>
<p>å¦‚æœä¸º0ï¼Œç§°ä¸ºç¼ºé¡µ(page fault)ã€‚å¼•å‘ä¸€ä¸ªç¼ºé¡µå¼‚å¸¸ã€‚ç¼ºé¡µå¼‚å¸¸è°ƒç”¨å†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè¯¥ç¨‹åºé€‰æ‹©ä¸€ä¸ªç‰ºç‰²é¡µï¼Œè®¾ä¸ºVP4(å¦‚æœVP4å·²ç»è¢«ä¿®æ”¹äº†ï¼Œåˆ™å†…æ ¸å°†VP4å¤åˆ¶å›ç£ç›˜)ï¼Œå†…æ ¸ä¿®æ”¹ç›¸åº”PTEï¼Œä»¥è¡¨ç¤ºVP4å·²ä¸å†ä¸»å­˜ä¸­ã€‚æ¥ä¸‹æ¥ï¼Œå†…æ ¸ä»ç£ç›˜å¤åˆ¶VP2åˆ°åŸVP4æ‰€åœ¨çš„ä¸»å­˜ä½ç½®ï¼Œæ›´æ–°ç›¸åº”PTEåè¿”å›ã€‚å¼‚å¸¸å¤„ç†ç¨‹åºè¿”å›æ—¶ï¼Œä¼šé‡æ–°å¯åŠ¨å¯¼è‡´ç¼ºé¡µçš„æŒ‡ä»¤ï¼Œæ­¤æ—¶å¿…å®šå‘½ä¸­ã€‚</p>
</li>
<li>
<p>é¡µé¢è°ƒåº¦(Paging)ï¼šåœ¨ç£ç›˜å’Œå†…å­˜ä¹‹é—´ä¼ é€é¡µçš„æ´»åŠ¨ã€‚ä»ç£ç›˜åˆ°DRAMç§°æ¢å…¥ï¼Œåä¹‹ç§°æ¢å‡ºã€‚</p>
</li>
<li>
<p>é¡µé¢åˆ†é…ï¼šåˆ†é…ä¸€ä¸ªæ–°çš„VPï¼Œå¦‚è°ƒç”¨mallocï¼Œä½¿PTEä¸­å«nullçš„ç©ºæ´é¡µå®é™…å æœ‰ç‰©ç†ç©ºé—´ã€‚</p>
</li>
</ul>
<h2 id="å†…å­˜ç®¡ç†"> å†…å­˜ç®¡ç†</h2>
<p>OSä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›äº†ä¸€ä¸ªç‹¬ç«‹çš„é¡µè¡¨ï¼Œå› è€Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚</p>
<p>å¥½å¤„</p>
<ul>
<li>ç®€åŒ–é“¾æ¥ï¼šæ¯ä¸ªè¿›ç¨‹çš„å†…å­˜æ ¼å¼éƒ½ç±»ä¼¼ã€‚å¯¹äº64ä½åœ°å€ç©ºé—´ï¼Œä»£ç æ®µæ€»æ˜¯ä»VA=0x400000å¼€å§‹ã€‚æ•°æ®æ®µè·Ÿåœ¨ä»£ç æ®µä¹‹åï¼Œä¸­é—´æœ‰ä¸€æ®µç¬¦åˆè¦æ±‚çš„å¯¹é½ç©ºç™½ã€‚æ ˆå æ®ç”¨æˆ·è¿›ç¨‹åœ°å€ç©ºé—´æœ€é«˜çš„éƒ¨åˆ†ï¼Œå¹¶å‘ä¸‹ç”Ÿé•¿ã€‚é“¾æ¥æ—¶ï¼Œä¸€ç›´ä½¿ç”¨VAï¼Œå®é™…è¿è¡Œæ—¶å†æ˜ å°„ä¸ºPAã€‚</li>
<li>ç®€åŒ–åŠ è½½ï¼šæœ‰äº†è™šæ‹Ÿå†…å­˜åï¼ŒåŠ è½½æ–‡ä»¶æ—¶ï¼Œåªéœ€è¦ä¸ºæ–‡ä»¶åˆ†é…è™šæ‹Ÿé¡µï¼Œå³å°†å…¶PTEæœ‰æ•ˆä½è®¾ä¸º0ï¼Œå¹¶æŒ‡å‘ç›®æ ‡æ–‡ä»¶çš„é€‚å½“ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®é™…æ²¡æœ‰ä»»ä½•å¤åˆ¶åŠ¨ä½œï¼Œå®é™…è¦ç”¨æ—¶å†æŒ‰éœ€è°ƒåº¦ã€‚</li>
<li>ç®€åŒ–å…±äº«ï¼šOSå¯å°†ä¸åŒè¿›ç¨‹çš„é¡µè¡¨ä¸­é€‚å½“çš„VPæ˜ å°„åˆ°ç›¸åŒçš„PPï¼Œä»è€Œå®ç°å¤šè¿›ç¨‹å…±äº«ç›¸åº”ä»£ç ã€‚</li>
<li>ç®€åŒ–å†…å­˜åˆ†é…ï¼šç”¨mallocè¦æ±‚é¢å¤–çš„å †ç©ºé—´æ—¶ï¼Œåœ¨VMä¸­åˆ†é…çš„è¿ç»­çš„VPï¼Œå®é™…PPå¯ä»¥ä¸è¿ç»­ã€‚</li>
</ul>
<h2 id="å†…å­˜ä¿æŠ¤"> å†…å­˜ä¿æŠ¤</h2>
<p>OSéœ€è¦æŸç§æ‰‹æ®µæ¥æ§åˆ¶å¯¹å†…å­˜ç³»ç»Ÿçš„è®¿é—®ã€‚å¦‚</p>
<ul>
<li>ä¸å…è®¸ç”¨æˆ·è¿›ç¨‹ä¿®æ”¹å…¶åªè¯»ä»£ç æ®µ</li>
<li>ä¸å…è®¸ç”¨æˆ·è¿›ç¨‹ä¿®æ”¹å†…æ ¸ä¸­çš„ä»£ç å’Œæ•°æ®ç»“æ„</li>
<li>ä¸å…è®¸ç”¨æˆ·è¿›ç¨‹è¯»æˆ–å†™å…¶ä»–è¿›ç¨‹çš„ç§æœ‰å†…å­˜</li>
<li>ä¸å…è®¸ç”¨æˆ·è¿›ç¨‹ä¿®æ”¹ä»»ä½•ä¸å…¶ä»–è¿›ç¨‹å…±äº«çš„è™šæ‹Ÿé¡µé¢(é™¤éæ‰€æœ‰å…±äº«è€…éƒ½å…è®¸å®ƒè¿™ä¹ˆåš)</li>
</ul>
<p>å®ç°å¾ˆå®¹æ˜“ï¼Œåªéœ€åœ¨PTEä¸­æ·»åŠ å‡ ä¸ªè®¸å¯ä½ã€‚ä¾‹å¦‚</p>
<ul>
<li>SUPï¼šè¿›ç¨‹éœ€è¦åœ¨å†…æ ¸(è¶…çº§ç”¨æˆ·)æ¨¡å¼ä¸‹æ‰èƒ½è®¿é—®è¯¥é¡µ</li>
<li>READï¼šè¯»æƒé™</li>
<li>WRITEï¼šå†™æƒé™</li>
<li>â€¦â€¦</li>
</ul>
<p>ä¿æŠ¤è¿ä¾‹ï¼šå¦‚æœä¸€æ¡æŒ‡ä»¤è¿åäº†è¿™äº›è®¸å¯æ¡ä»¶ï¼Œåˆ™CPUè§¦å‘ä¸€ä¸ªä¿æŠ¤æ•…éšœï¼Œå°†æ§åˆ¶ä¼ é€’ç»™ä¸€ä¸ªå†…æ ¸ä¸­çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚Linux shell ä¸€èˆ¬ç§°è¿™ç§å¼‚å¸¸ä¸ºâ€œæ®µé”™è¯¯(segmentation fault)â€</p>
<h2 id="åœ°å€ç¿»è¯‘"> åœ°å€ç¿»è¯‘</h2>
<p>TLBï¼Œ Translation Lookaside Bufferï¼Œç®€ç§°å¿«è¡¨</p>
<p>ç¬¦å·</p>
<ul>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span style="margin-right:0.10903em;">N</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.6644em;"></span><span><span>2</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>n</span></span></span></span></span></span></span></span></span></span></span>ï¼šè™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„åœ°å€æ•°é‡</li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span style="margin-right:0.10903em;">M</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.6644em;"></span><span><span>2</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>m</span></span></span></span></span></span></span></span></span></span></span>ï¼šç‰©ç†åœ°å€ç©ºé—´ä¸­çš„åœ°å€æ•°é‡</li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span style="margin-right:0.13889em;">P</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.6644em;"></span><span><span>2</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>p</span></span></span></span></span></span></span></span></span></span></span>ï¼šé¡µå¤§å°(å­—èŠ‚)</li>
</ul>
<hr>
<ul>
<li>VPNï¼šè™šæ‹Ÿé¡µå·</li>
<li>VPOï¼šè™šæ‹Ÿé¡µé¢åç§»é‡</li>
<li>TLBTï¼š TLBæ ‡è®°</li>
<li>TLBIï¼šTLBç´¢å¼•</li>
</ul>
<hr>
<ul>
<li>PPOï¼šç‰©ç†é¡µé¢åç§»é‡ï¼Œå’ŒVPOä¸€æ ·</li>
<li>PPNï¼šç‰©ç†é¡µå·</li>
<li>COï¼šç¼“å­˜å—å†…å­—èŠ‚åç§»é‡</li>
<li>CIï¼š cacheç´¢å¼•</li>
<li>CTï¼š cacheæ ‡è®°</li>
</ul>
<p><img src="/assets/csapp/AddrTranslate.png" alt="åœ°å€ç¿»è¯‘" /></p>
<ul>
<li>CPUä¸­çš„ä¸€ä¸ªæ§åˆ¶å¯„å­˜å™¨ï¼Œé¡µè¡¨åŸºå€å¯„å­˜å™¨(PTBR)æŒ‡å‘å½“å‰é¡µè¡¨åŸºå€ã€‚</li>
<li>è™šæ‹Ÿåœ°å€=VPN(n-pä½)+VPO(pä½)</li>
<li>VPNå’Œé¡µè¡¨ä¸­çš„PTEä¸€ä¸€å¯¹åº”ã€‚</li>
<li>ç‰©ç†åœ°å€=PPN+VPO</li>
</ul>
<p>é¡µé¢å‘½ä¸­æ—¶CPUæ‰§è¡Œæ­¥éª¤ï¼š</p>
<ol>
<li>å¤„ç†å™¨ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™ MMUã€‚</li>
<li>MMU ç”Ÿæˆ PTE åœ°å€ï¼Œå¹¶ä»é«˜é€Ÿç¼“å­˜/ä¸»å­˜è¯·æ±‚å¾—åˆ°å®ƒã€‚</li>
<li>é«˜é€Ÿç¼“å­˜/ä¸»å­˜å‘ MMU è¿”å› PTEã€‚</li>
<li>MMU æ„é€ ç‰©ç†åœ°å€ï¼Œå¹¶æŠŠå®ƒä¼ é€ç»™é«˜é€Ÿç¼“å­˜/ä¸»å­˜ã€‚</li>
<li>é«˜é€Ÿç¼“å­˜/ä¸»å­˜è¿”å›æ‰€è¯·æ±‚çš„æ•°æ®å­—ç»™å¤„ç†å™¨ã€‚</li>
</ol>
<p><img src="/assets/csapp/FindAddr.png" alt="å¯»å€" /></p>
<p>ç¼ºé¡µæ—¶ï¼š</p>
<ul>
<li>ç¬¬ 1 æ­¥åˆ°ç¬¬ 3 æ­¥ï¼šå’Œå‘½ä¸­æ—¶çš„ç¬¬ 1 æ­¥åˆ°ç¬¬ 3 æ­¥ç›¸åŒã€‚</li>
<li>ç¬¬ 4 æ­¥ï¼šPTE ä¸­çš„æœ‰æ•ˆä½æ˜¯é›¶ï¼Œæ‰€ä»¥ MMU è§¦å‘äº†ä¸€æ¬¡å¼‚å¸¸ï¼Œä¼ é€’ CPU ä¸­çš„æ§åˆ¶åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†ç¨‹åºã€‚</li>
<li>ç¬¬ 5 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºç¡®å®šå‡ºç‰©ç†å†…å­˜ä¸­çš„ç‰ºç‰²é¡µï¼Œå¦‚æœè¿™ä¸ªé¡µé¢å·²ç»è¢«ä¿®æ”¹äº†ï¼Œåˆ™æŠŠå®ƒæ¢å‡ºåˆ°ç£ç›˜ã€‚</li>
<li>ç¬¬ 6 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºé¡µé¢è°ƒå…¥æ–°çš„é¡µé¢ï¼Œå¹¶æ›´æ–°å†…å­˜ä¸­çš„ PTEã€‚</li>
<li>ç¬¬ 7 æ­¥ï¼šç¼ºé¡µå¤„ç†ç¨‹åºè¿”å›åˆ°åŸæ¥çš„è¿›ç¨‹ï¼Œå†æ¬¡æ‰§è¡Œå¯¼è‡´ç¼ºé¡µçš„æŒ‡ä»¤ã€‚CPU å°†å¼•èµ·ç¼ºé¡µçš„è™šæ‹Ÿåœ°å€é‡æ–°å‘é€ç»™ MMUã€‚å› ä¸ºè™šæ‹Ÿé¡µé¢ç°åœ¨ç¼“å­˜åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œæ‰€ä»¥å°±ä¼šå‘½ä¸­ï¼Œåœ¨ MMU æ‰§è¡Œäº†å›¾ 9-13b ä¸­çš„æ­¥éª¤ä¹‹åï¼Œä¸»å­˜å°±ä¼šå°†æ‰€è¯·æ±‚å­—è¿”å›ç»™å¤„ç†å™¨ã€‚</li>
</ul>
<h3 id="ç»“åˆé«˜é€Ÿç¼“å­˜å’Œè™šæ‹Ÿå†…å­˜"> ç»“åˆé«˜é€Ÿç¼“å­˜å’Œè™šæ‹Ÿå†…å­˜</h3>
<p>å› ä¸ºMMUåœ¨CPUå†…ï¼Œç¿»è¯‘åœ°å€æ—¶éœ€è¦åˆ°ä¸»å­˜ä¸­æŸ¥é¡µè¡¨ï¼Œå› æ­¤ç¼“å­˜å¯ä»¥å‘æŒ¥ä½œç”¨ï¼Œç¼“å­˜PTEå°±åƒå…¶ä»–æ•°æ®å­—ä¸€æ ·ã€‚</p>
<h3 id="ä½¿ç”¨tlbåŠ é€Ÿåœ°å€ç¿»è¯‘"> ä½¿ç”¨TLBåŠ é€Ÿåœ°å€ç¿»è¯‘</h3>
<p>ä¸ºäº†å‡å°‘åˆ°ä¸»å­˜æˆ–ç¼“å­˜ä¸­æŸ¥è¯¢é¡µè¡¨çš„æ¬¡æ•°ï¼Œåœ¨MMUä¸­åŒ…æ‹¬äº†ä¸€ä¸ªå…³äºPTEçš„å°çš„ç¼“å­˜ï¼Œç§°ä¸ºç¿»è¯‘åå¤‡ç¼“å†²å™¨(TLB)ï¼Œå³å¿«è¡¨ã€‚<br>
TLB æ˜¯ä¸€ä¸ªå°çš„ã€è™šæ‹Ÿå¯»å€çš„ç¼“å­˜ï¼Œå…¶ä¸­æ¯ä¸€è¡Œéƒ½ä¿å­˜ç€ä¸€ä¸ªç”±å•ä¸ª PTE ç»„æˆçš„å—ã€‚</p>
<p><img src="/assets/csapp/tlbpte.png" alt="TLB" /></p>
<p>CPUè®¿å­˜æ—¶ï¼Œåœ°å€ä¸­è™šé¡µå·è¢«åˆ†æˆtag+indexï¼Œtagç”¨äºå’ŒTLBé¡µè¡¨é¡¹ä¸­çš„tagæ¯”è¾ƒï¼Œindexç”¨äºå®šä½éœ€è¦æ¯”è¾ƒçš„è¡¨é¡¹ã€‚</p>
<ul>
<li>TLBå…¨ç›¸è”æ—¶ï¼Œæ²¡æœ‰indexï¼Œåªæœ‰Tagï¼Œè™šé¡µå·éœ€ä¸æ¯ä¸ªTagæ¯”è¾ƒï¼›</li>
<li>TLBç»„ç›¸è”æ—¶ï¼Œåˆ™è™šé¡µå·é«˜ä½ä¸ºTagï¼Œä½ä½ä¸ºindexï¼Œç”¨ä½œç»„ç´¢å¼•</li>
</ul>
<p><img src="/assets/csapp/FindAddrTlb.png" alt="å¯»å€-tlb" /></p>
<h3 id="å¤šçº§é¡µè¡¨"> å¤šçº§é¡µè¡¨</h3>
<p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª 32 ä½çš„åœ°å€ç©ºé—´ã€4KB çš„é¡µé¢å’Œ 4B çš„ PTEï¼Œé‚£ä¹ˆå³ä½¿åº”ç”¨æ‰€å¼•ç”¨çš„åªæ˜¯è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­å¾ˆå°çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ€»æ˜¯éœ€è¦ä¸€ä¸ª 4MB çš„é¡µè¡¨é©»ç•™åœ¨å†…å­˜ä¸­ã€‚å¯¹äºåœ°å€ç©ºé—´ä¸º 64 ä½çš„ç³»ç»Ÿæ¥è¯´ï¼Œé—®é¢˜æ›´å¤§ã€‚æ‰€ä»¥éœ€è¦å‹ç¼©é¡µè¡¨ï¼Œå¸¸ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨å±‚æ¬¡ç»“æ„çš„é¡µè¡¨ã€‚<br>
å‡è®¾ 32 ä½è™šæ‹Ÿåœ°å€ç©ºé—´è¢«åˆ†ä¸º 4KB çš„é¡µï¼Œè€Œæ¯ä¸ªé¡µè¡¨æ¡ç›®éƒ½æ˜¯ 4 å­—èŠ‚ã€‚è¿˜å‡è®¾åœ¨è¿™ä¸€æ—¶åˆ»ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´æœ‰å¦‚ä¸‹å½¢å¼ï¼šå†…å­˜çš„å‰ 2K ä¸ªé¡µé¢åˆ†é…ç»™äº†ä»£ç å’Œæ•°æ®ï¼Œæ¥ä¸‹æ¥çš„ 6K ä¸ªé¡µé¢è¿˜æœªåˆ†é…ï¼Œå†æ¥ä¸‹æ¥çš„ 1023 ä¸ªé¡µé¢ä¹Ÿæœªåˆ†é…ï¼Œæ¥ä¸‹æ¥çš„ 1 ä¸ªé¡µé¢åˆ†é…ç»™äº†ç”¨æˆ·æ ˆã€‚
<img src="/assets/csapp/MultiLayerPT.png" alt="å¤šçº§é¡µè¡¨" /></p>
<p>ä¸€çº§é¡µè¡¨ä¸­çš„æ¯ä¸ª PTE è´Ÿè´£æ˜ å°„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ä¸€ä¸ª 4MB çš„ç‰‡ï¼ˆchunkï¼‰ï¼Œè¿™é‡Œæ¯ä¸€ç‰‡éƒ½æ˜¯ç”± 1024 ä¸ªè¿ç»­çš„é¡µé¢ç»„æˆçš„ã€‚å‡è®¾åœ°å€ç©ºé—´æ˜¯ 4GBï¼Œ1024 ä¸ª PTE å·²ç»è¶³å¤Ÿè¦†ç›–æ•´ä¸ªç©ºé—´äº†ã€‚å¦‚æœç‰‡ i ä¸­çš„æ¯ä¸ªé¡µé¢éƒ½æœªè¢«åˆ†é…ï¼Œé‚£ä¹ˆä¸€çº§ PTE i å°±ä¸ºç©ºã€‚å¦‚æœåœ¨ç‰‡ i ä¸­è‡³å°‘æœ‰ä¸€ä¸ªé¡µæ˜¯åˆ†é…äº†çš„ï¼Œé‚£ä¹ˆä¸€çº§ PTE i å°±æŒ‡å‘ä¸€ä¸ªäºŒçº§é¡µè¡¨çš„åŸºå€ã€‚äºŒçº§é¡µè¡¨ä¸­çš„æ¯ä¸ª PTE éƒ½è´Ÿè´£æ˜ å°„ä¸€ä¸ª 4KB çš„è™šæ‹Ÿå†…å­˜é¡µé¢ï¼Œå°±åƒæˆ‘ä»¬æŸ¥çœ‹åªæœ‰ä¸€çº§çš„é¡µè¡¨ä¸€æ ·ã€‚<br>
æ³¨æ„ï¼Œä½¿ç”¨ 4 å­—èŠ‚çš„ PTEï¼Œæ¯ä¸ªä¸€çº§å’ŒäºŒçº§é¡µè¡¨éƒ½æ˜¯ 4KB å­—èŠ‚ï¼Œè¿™åˆšå¥½å’Œä¸€ä¸ªé¡µé¢çš„å¤§å°æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>è¿™ç§æ–¹æ³•ä»ä¸¤ä¸ªæ–¹é¢å‡å°‘äº†å†…å­˜è¦æ±‚ã€‚</p>
<ol>
<li>å¦‚æœä¸€çº§é¡µè¡¨ä¸­çš„ä¸€ä¸ª PTE æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆç›¸åº”çš„äºŒçº§é¡µè¡¨å°±æ ¹æœ¬ä¸ä¼šå­˜åœ¨ã€‚è¿™ä»£è¡¨ç€ä¸€ç§å·¨å¤§çš„æ½œåœ¨èŠ‚çº¦ï¼Œå› ä¸ºå¯¹äºä¸€ä¸ªå…¸å‹çš„ç¨‹åºï¼Œ4GB çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„å¤§éƒ¨åˆ†éƒ½ä¼šæ˜¯æœªåˆ†é…çš„ã€‚</li>
<li>åªæœ‰ä¸€çº§é¡µè¡¨æ‰éœ€è¦æ€»æ˜¯åœ¨ä¸»å­˜ä¸­ï¼›è™šæ‹Ÿå†…å­˜ç³»ç»Ÿå¯ä»¥åœ¨éœ€è¦æ—¶åˆ›å»ºã€é¡µé¢è°ƒå…¥æˆ–è°ƒå‡ºäºŒçº§é¡µè¡¨ï¼Œè¿™å°±å‡å°‘äº†ä¸»å­˜çš„å‹åŠ›ï¼›åªæœ‰æœ€ç»å¸¸ä½¿ç”¨çš„äºŒçº§é¡µè¡¨æ‰éœ€è¦ç¼“å­˜åœ¨ä¸»å­˜ä¸­ã€‚</li>
</ol>
<p>ä½¿ç”¨ k çº§é¡µè¡¨å±‚æ¬¡ç»“æ„çš„åœ°å€ç¿»è¯‘ã€‚è™šæ‹Ÿåœ°å€è¢«åˆ’åˆ†æˆä¸º k ä¸ª VPN å’Œ 1 ä¸ª VPOã€‚æ¯ä¸ª VPN i éƒ½æ˜¯ä¸€ä¸ªåˆ°ç¬¬ i çº§é¡µè¡¨çš„ç´¢å¼•ã€‚ç¬¬ j çº§é¡µè¡¨ä¸­çš„æ¯ä¸ª PTEéƒ½æŒ‡å‘ç¬¬ j+1 çº§çš„æŸä¸ªé¡µè¡¨çš„åŸºå€ã€‚</p>
<p>ä¸ºäº†ç¡®å®šPPNï¼ŒMMUå¿…é¡»è®¿é—®kä¸ªPTEã€‚çœ‹ä¸Šå»æ¶ˆè€—å¾ˆå¤§ï¼Œå®é™…ä¸ŠTLBå¯ä»¥å°†ä¸åŒå±‚æ¬¡ä¸Šé¡µè¡¨çš„PTEç¼“å­˜èµ·æ¥ï¼Œä»£ä»·å¹¶æ²¡æœ‰å¤§å¾ˆå¤šã€‚</p>
<p><img src="/assets/csapp/MultiPageTable.png" alt="å¤šçº§é¡µè¡¨" /></p>
<h2 id="linuxè™šæ‹Ÿå†…å­˜ç³»ç»Ÿ"> Linuxè™šæ‹Ÿå†…å­˜ç³»ç»Ÿ</h2>
<p>Linuxä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ªå•ç‹¬çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å½¢å¼å¦‚å›¾ã€‚
<img src="/assets/csapp/LinuxVMSystem.png" alt="Linuxè™šæ‹Ÿå†…å­˜ç³»ç»Ÿ" /></p>
<h3 id="linuxè™šæ‹Ÿå†…å­˜åŒºåŸŸ"> Linuxè™šæ‹Ÿå†…å­˜åŒºåŸŸ</h3>
<p>Linuxå°†è™šæ‹Ÿå†…å­˜ç»„ç»‡æˆä¸€äº›åŒºåŸŸ(areaï¼Œä¹Ÿå«åšæ®µ,segment)çš„é›†åˆã€‚ä¸€ä¸ªæ®µå°±æ˜¯å·²åˆ†é…çš„è™šæ‹Ÿå†…å­˜çš„è¿ç»­ç‰‡(chunk)ï¼Œå¹¶ä»¥æŸç§å½¢å¼ç›¸å…³è”ã€‚æ¯ä¸ªè™šæ‹Ÿé¡µéƒ½ä¿å­˜åœ¨æŸä¸ªæ®µä¸­ï¼Œå¦‚æœå¼•ç”¨çš„è™šæ‹Ÿé¡µä¸å±äºæŸä¸ªæ®µï¼Œä¼šå¼•å‘æ®µé”™è¯¯ã€‚<br>
ä»¥æ®µçš„å½¢å¼ç»„ç»‡å†…å­˜ï¼Œå¥½å¤„æ˜¯ï¼šå…è®¸è™šæ‹Ÿåœ°å€ç©ºé—´æœ‰é—´éš™ï¼Œå› æ­¤å†…å­˜æ— éœ€è®°å½•é‚£äº›ä¸å­˜åœ¨çš„è™šæ‹Ÿé¡µã€‚</p>
<h3 id="è™šæ‹Ÿå†…å­˜åŒºåŸŸçš„å†…æ ¸æ•°æ®ç»“æ„"> è™šæ‹Ÿå†…å­˜åŒºåŸŸçš„å†…æ ¸æ•°æ®ç»“æ„</h3>
<ul>
<li>å†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ªå•ç‹¬çš„ä»»åŠ¡ç»“æ„(task_struct)ã€‚</li>
<li>task_structä¸­ä¸€ä¸ªæ¡ç›®æŒ‡å‘ä¸€ä¸ªæè¿°è™šæ‹Ÿå†…å­˜å½“å‰çŠ¶æ€çš„æ•°æ®ç»“æ„(mm_struct)ã€‚</li>
<li>mm_structä¸­æœ‰ä¸¤ä¸ªé‡è¦å­—æ®µï¼š
<ul>
<li>pgdï¼šæŒ‡å‘<strong>ç¬¬ä¸€çº§é¡µè¡¨çš„åŸºå€</strong>ã€‚å½“å†…æ ¸è¿è¡Œè¯¥ç¨‹åºæ˜¯ï¼Œå°†pdgæ”¾åˆ°<strong>CR3æ§åˆ¶å¯„å­˜å™¨</strong>ä¸­ã€‚</li>
<li>mmapï¼šæŒ‡å‘ä¸€ä¸ªåŒºåŸŸç»“æ„(vm_area_structs)çš„é“¾è¡¨ã€‚
<ul>
<li>æ¯ä¸ªvm_area_structséƒ½æè¿°äº†å½“å‰è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼ŒåŒ…å«ï¼š</li>
<li>vm_startï¼šæŒ‡å‘åŒºåŸŸçš„èµ·å§‹åœ°å€ã€‚</li>
<li>vm_endï¼šæŒ‡å‘åŒºåŸŸçš„ç»“æŸåœ°å€ã€‚</li>
<li>vm_protï¼šæè¿°è¯¥åŒºåŸŸåŒ…å«çš„æ‰€æœ‰é¡µçš„è¯»å†™è®¸å¯æƒé™ã€‚</li>
<li>vm_flagsï¼šæè¿°ä¸€äº›å…¶ä»–ä¿¡æ¯ï¼Œå¦‚è¯¥åŒºåŸŸå†…çš„é¡µé¢æ˜¯ä¸å…¶ä»–è¿›ç¨‹å…±äº«çš„ï¼Œè¿˜æ˜¯ç§æœ‰çš„ã€‚</li>
<li>vm_nextï¼šæŒ‡å‘ä¸‹ä¸€ä¸ªåŒºåŸŸç»“æ„ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/assets/csapp/LinuxSegment.png" alt="Linuxè™šæ‹Ÿå†…å­˜æ®µ" /></p>
<h3 id="linuxç¼ºé¡µå¤„ç†å¼‚å¸¸"> Linuxç¼ºé¡µå¤„ç†å¼‚å¸¸</h3>
<p>è®¾MMUåœ¨è¯•å›¾ç¿»è¯‘æŸä¸ªVAæ—¶ï¼Œè§¦å‘äº†ä¸€ä¸ªç¼ºé¡µã€‚å¯¼è‡´æ§åˆ¶è½¬åˆ°å†…æ ¸çš„ç¼ºé¡µå¤„ç†ç¨‹åºï¼Œéšåæ‰§è¡Œï¼š</p>
<ol>
<li>VAæ˜¯å¦åˆæ³•?ä¹Ÿå°±æ˜¯è¯´ï¼ŒVAåœ¨æŸä¸ªåŒºåŸŸç»“æ„å®šä¹‰çš„åŒºåŸŸå†…å—ï¼Ÿä¸ºäº†ä½œå‡ºåˆ¤æ–­ï¼Œéœ€è¦å°†VAå’Œé“¾è¡¨ä¸­æ‰€æœ‰åŒºåŸŸç»“æ„çš„vm_start,vm_endä½œæ¯”è¾ƒã€‚å¦‚æœä¸åˆæ³•ï¼Œè§¦å‘ä¸€ä¸ªæ®µé”™è¯¯ï¼Œå¹¶ç»ˆæ­¢è¿›ç¨‹ã€‚å› ä¸ºä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºä»»æ„æ•°é‡çš„æ–°è™šæ‹Ÿå†…å­˜åŒºåŸŸï¼Œæ‰€ä»¥è¿™ç§é¡ºåºæœç´¢æ•ˆç‡ä¸å¤Ÿã€‚å› è€Œå®é™…ä¸­ï¼Œæœ‰ä¼˜åŒ–ã€‚</li>
<li>è¯•å›¾è¿›è¡Œçš„å†…å­˜è®¿é—®æ˜¯å¦åˆæ³•?å³è¿›ç¨‹çš„è®¿é—®æƒé™å¯¹ä¸å¯¹ï¼Ÿå¦‚æœè®¿é—®ä¸åˆæ³•ï¼Œé‚£ä¹ˆç¼ºé¡µå¤„ç†ç¨‹åºä¼šè§¦å‘ä¸€ä¸ªä¿æŠ¤å¼‚å¸¸ï¼Œä»è€Œç»ˆæ­¢è¿›ç¨‹ã€‚</li>
<li>å¦‚æœç¡®å®æ˜¯å¯¹åˆæ³•VAçš„åˆæ³•æ“ä½œã€‚åˆ™é€‰æ‹©ç‰ºç‰²é¡µï¼Œå¦‚æœæœ‰ä¿®æ”¹ï¼Œåˆ™å¤šä¸€æ­¥æ¢å‡ºæ“ä½œï¼Œå¦åˆ™æ¢å…¥æ–°çš„é¡µé¢å¹¶æ›´æ–°é¡µè¡¨ã€‚<br>
å½“ç¼ºé¡µå¤„ç†ç¨‹åºè¿”å›æ—¶ï¼ŒCPUé‡æ–°å¯åŠ¨å¼•èµ·ç¼ºé¡µçš„æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤å°±èƒ½æ­£å¸¸æ‰§è¡Œäº†ã€‚</li>
</ol>
<h2 id="å†…å­˜æ˜ å°„"> å†…å­˜æ˜ å°„</h2>
<p>Linux é€šè¿‡å°†ä¸€ä¸ªè™šæ‹Ÿå†…å­˜åŒºåŸŸä¸ä¸€ä¸ªç£ç›˜ä¸Šçš„<strong>å¯¹è±¡</strong>ï¼ˆobjectï¼‰å…³è”èµ·æ¥ï¼Œä»¥åˆå§‹åŒ–è¿™ä¸ªè™šæ‹Ÿå†…å­˜åŒºåŸŸçš„å†…å®¹ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>å†…å­˜æ˜ å°„</strong>ï¼ˆmemory mappingï¼‰ï¼Œè™šæ‹Ÿå†…å­˜åŒºåŸŸå¯ä»¥æ˜ å°„åˆ°ä¸¤ç§ç±»å‹çš„å¯¹è±¡ä¸Šï¼š</p>
<ol>
<li>**Linux æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ™®é€šæ–‡ä»¶ï¼š**ä¸€ä¸ªæ®µå¯ä»¥æ˜ å°„åˆ°ä¸€ä¸ªæ™®é€šç£ç›˜æ–‡ä»¶çš„è¿ç»­éƒ¨åˆ†ï¼Œä¾‹å¦‚ä¸€ä¸ªå¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶ã€‚æ–‡ä»¶åŒºï¼ˆsectionï¼‰è¢«åˆ†æˆé¡µå¤§å°çš„ç‰‡ï¼Œæ¯ä¸€ç‰‡åŒ…å«ä¸€ä¸ªè™šæ‹Ÿé¡µé¢çš„åˆå§‹å†…å®¹ã€‚å› ä¸ºæŒ‰éœ€è¿›è¡Œé¡µé¢è°ƒåº¦ï¼Œæ‰€ä»¥è¿™äº›è™šæ‹Ÿé¡µé¢æ²¡æœ‰å®é™…äº¤æ¢è¿›å…¥ç‰©ç†å†…å­˜ï¼Œç›´åˆ° CPU ç¬¬ä¸€æ¬¡å¼•ç”¨åˆ°é¡µé¢ã€‚å¦‚æœæ®µæ¯”æ–‡ä»¶åŒºè¦å¤§ï¼Œé‚£ä¹ˆå°±ç”¨é›¶æ¥å¡«å……è¿™ä¸ªæ®µçš„ä½™ä¸‹éƒ¨åˆ†ã€‚</li>
<li><strong>åŒ¿åæ–‡ä»¶ï¼š<strong>ä¸€ä¸ªæ®µä¹Ÿå¯ä»¥æ˜ å°„åˆ°ä¸€ä¸ªåŒ¿åæ–‡ä»¶ï¼ŒåŒ¿åæ–‡ä»¶æ˜¯ç”±å†…æ ¸åˆ›å»ºçš„ï¼ŒåŒ…å«çš„å…¨æ˜¯äºŒè¿›åˆ¶é›¶ã€‚CPU ç¬¬ä¸€æ¬¡å¼•ç”¨è¿™æ ·ä¸€ä¸ªæ®µå†…çš„è™šæ‹Ÿé¡µé¢æ—¶ï¼Œå†…æ ¸å°±åœ¨ç‰©ç†å†…å­˜ä¸­æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç‰ºç‰²é¡µé¢ï¼Œå¦‚æœè¯¥é¡µé¢è¢«ä¿®æ”¹è¿‡ï¼Œå°±å°†è¿™ä¸ªé¡µé¢æ¢å‡ºæ¥ï¼Œç”¨äºŒè¿›åˆ¶é›¶è¦†ç›–ç‰ºç‰²é¡µé¢å¹¶æ›´æ–°é¡µè¡¨ï¼Œå°†è¿™ä¸ªé¡µé¢æ ‡è®°ä¸ºæ˜¯é©»ç•™åœ¨å†…å­˜ä¸­çš„ã€‚æ³¨æ„åœ¨ç£ç›˜å’Œå†…å­˜ä¹‹é—´å¹¶æ²¡æœ‰å®é™…çš„æ•°æ®ä¼ é€ã€‚å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæ˜ å°„åˆ°åŒ¿åæ–‡ä»¶çš„æ®µä¸­çš„é¡µé¢ä¹Ÿå«åš</strong>demand-zero page</strong>ã€‚</li>
</ol>
<p>æ— è®ºåœ¨å“ªç§æƒ…å†µä¸­ï¼Œä¸€æ—¦ä¸€ä¸ªè™šæ‹Ÿé¡µé¢è¢«åˆå§‹åŒ–äº†ï¼Œå®ƒå°±åœ¨ä¸€ä¸ªç”±å†…æ ¸ç»´æŠ¤çš„ä¸“é—¨çš„<strong>äº¤æ¢æ–‡ä»¶</strong>ï¼ˆswap fileï¼‰ä¹‹é—´æ¢æ¥æ¢å»ã€‚äº¤æ¢æ–‡ä»¶ä¹Ÿå«åš<strong>äº¤æ¢ç©ºé—´</strong>ï¼ˆswap spaceï¼‰æˆ–è€…<strong>äº¤æ¢åŒºåŸŸ</strong>ï¼ˆswap areaï¼‰ã€‚éœ€è¦æ„è¯†åˆ°çš„å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨ä»»ä½•æ—¶åˆ»ï¼Œäº¤æ¢ç©ºé—´éƒ½é™åˆ¶ç€å½“å‰è¿è¡Œç€çš„è¿›ç¨‹èƒ½å¤Ÿåˆ†é…çš„è™šæ‹Ÿé¡µé¢çš„æ€»æ•°ã€‚</p>
<h3 id="å†çœ‹å…±äº«å¯¹è±¡"> å†çœ‹å…±äº«å¯¹è±¡</h3>
<p>ä¸€ä¸ªå¯¹è±¡å¯ä»¥è¢«æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜çš„ä¸€ä¸ªåŒºåŸŸï¼Œè¦ä¹ˆä½œä¸ºå…±äº«å¯¹è±¡ï¼Œè¦ä¹ˆä½œä¸ºç§æœ‰å¯¹è±¡ã€‚</p>
<ul>
<li>å¦‚æœä¸€ä¸ªè¿›ç¨‹å°†ä¸€ä¸ªå…±äº«å¯¹è±¡æ˜ å°„åˆ°å®ƒçš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä¸€ä¸ªåŒºåŸŸå†…ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å¯¹è¿™ä¸ªåŒºåŸŸçš„ä»»ä½•å†™æ“ä½œï¼Œå¯¹äºå…¶å®ƒä¹ŸæŠŠè¿™ä¸ªå…±äº«å¯¹è±¡æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­çš„è¿›ç¨‹è€Œè¨€ä¹Ÿæ˜¯å¯è§çš„ã€‚è€Œä¸”ï¼Œè¿™äº›å˜åŒ–ä¹Ÿä¼šåæ˜ åœ¨ç£ç›˜ä¸Šçš„åŸå§‹å¯¹è±¡ä¸­ã€‚</li>
<li>å¯¹ä¸€ä¸ªæ˜ å°„åˆ°ç§æœ‰å¯¹è±¡çš„åŒºåŸŸåšçš„æ”¹å˜ï¼Œå¯¹äºå…¶ä»–è¿›ç¨‹æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œå¹¶ä¸”è¿›ç¨‹å¯¹è¿™ä¸ªåŒºåŸŸæ‰€åšçš„ä»»ä½•å†™æ“ä½œéƒ½ä¸ä¼šåæ˜ åœ¨ç£ç›˜ä¸Šçš„å¯¹è±¡ä¸­ã€‚ä¸€ä¸ªæ˜ å°„åˆ°å…±äº«å¯¹è±¡çš„è™šæ‹Ÿå†…å­˜åŒºåŸŸå«åš<strong>å…±äº«åŒºåŸŸ</strong>ã€‚ç±»ä¼¼åœ°ï¼Œä¹Ÿæœ‰<strong>ç§æœ‰åŒºåŸŸ</strong>ã€‚</li>
</ul>
<p><img src="/assets/csapp/gsxd1.png" alt="å…±äº«" /></p>
<p>å› ä¸ºæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ–‡ä»¶åï¼Œå†…æ ¸å¯ä»¥è¿…é€Ÿåœ°åˆ¤å®šè¿›ç¨‹ 1 å·²ç»æ˜ å°„äº†è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸”å¯ä»¥ä½¿è¿›ç¨‹ 2 ä¸­çš„é¡µè¡¨æ¡ç›®æŒ‡å‘ç›¸åº”çš„ç‰©ç†é¡µé¢ã€‚å…³é”®ç‚¹åœ¨äºå³ä½¿å¯¹è±¡è¢«æ˜ å°„åˆ°äº†å¤šä¸ªå…±äº«åŒºåŸŸï¼Œç‰©ç†å†…å­˜ä¸­ä¹Ÿåªéœ€è¦å­˜æ”¾å…±äº«å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†ç‰©ç†é¡µé¢æ˜¾ç¤ºä¸ºè¿ç»­çš„ï¼Œä½†æ˜¯åœ¨ä¸€èˆ¬æƒ…å†µä¸‹å½“ç„¶ä¸æ˜¯è¿™æ ·çš„ã€‚</p>
<p><img src="/assets/csapp/gsxd2.png" alt="ç§æœ‰" /></p>
<p>ç§æœ‰å¯¹è±¡ä½¿ç”¨ä¸€ç§å«åšå†™æ—¶å¤åˆ¶ï¼ˆcopy-on-writeï¼‰çš„æŠ€æœ¯æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­ã€‚ä¸€ä¸ªç§æœ‰å¯¹è±¡å¼€å§‹æ—¶å…±äº«å¯¹è±¡çš„ä¸€æ ·ï¼Œåœ¨ç‰©ç†å†…å­˜ä¸­åªæœ‰ç§æœ‰å¯¹è±¡çš„ä¸€ä»½å‰¯æœ¬ï¼Œä½†ç›¸åº”ç§æœ‰åŒºåŸŸçš„é¡µè¡¨æ¡ç›®éƒ½è¢«æ ‡è®°ä¸ºåªè¯»ï¼Œå¹¶ä¸”åŒºåŸŸç»“æ„çš„æ ‡è®°(vm_flags)ä¸ºç§æœ‰çš„ã€å†™æ—¶å¤åˆ¶ã€‚å½“æ²¡æœ‰è¿›ç¨‹è¯•å›¾å†™å®ƒè‡ªå·±çš„ç§æœ‰åŒºåŸŸæ—¶ï¼Œå®ƒä»¬å°±å…±äº«ç‰©ç†å†…å­˜ä¸­å¯¹è±¡çš„ä¸€ä¸ªå•ç‹¬å‰¯æœ¬ã€‚ç„¶è€Œï¼Œåªè¦æœ‰ä¸€ä¸ªè¿›ç¨‹è¯•å›¾å†™ç§æœ‰åŒºåŸŸå†…çš„æŸä¸ªé¡µé¢ï¼Œé‚£ä¹ˆè¿™ä¸ªå†™æ“ä½œå°±ä¼šè§¦å‘ä¸€ä¸ªä¿æŠ¤æ•…éšœã€‚å½“æ•…éšœå¤„ç†ç¨‹åºæ³¨æ„åˆ°ä¿æŠ¤å¼‚å¸¸æ˜¯ç”±äºè¿›ç¨‹è¯•å›¾å†™ä¸€ä¸ªæ ‡è®°ä¸ºç§æœ‰çš„ã€å†™æ—¶å¤åˆ¶çš„åŒºåŸŸä¸­çš„ä¸€ä¸ªé¡µé¢è€Œå¼•èµ·çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šåœ¨ç‰©ç†å†…å­˜ä¸­åˆ›å»ºè¿™ä¸ªé¡µé¢çš„ä¸€ä¸ªæ–°å‰¯æœ¬ï¼Œæ›´æ–°é¡µè¡¨æ¡ç›®æŒ‡å‘è¿™ä¸ªæ–°çš„å‰¯æœ¬ï¼Œç„¶åæ¢å¤è¿™ä¸ªé¡µé¢çš„å¯å†™æƒé™ã€‚å½“æ•…éšœå¤„ç†ç¨‹åºè¿”å›æ—¶ï¼ŒCPU é‡æ–°æ‰§è¡Œè¿™ä¸ªå†™æ“ä½œï¼Œç°åœ¨åœ¨æ–°åˆ›å»ºçš„é¡µé¢ä¸Šè¿™ä¸ªå†™æ“ä½œå°±å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†ã€‚</p>
<p>é€šè¿‡å°½å¯èƒ½å»¶è¿Ÿç§æœ‰å¯¹è±¡çš„æ‹·è´æ“ä½œï¼Œcopy-on-writeå……åˆ†åœ°ä½¿ç”¨äº†ç¨€æœ‰çš„ç‰©ç†å†…å­˜ã€‚</p>
<h3 id="å†çœ‹forkå‡½æ•°"> å†çœ‹forkå‡½æ•°</h3>
<p>å½“ fork å‡½æ•°è¢«å½“å‰è¿›ç¨‹è°ƒç”¨æ—¶ï¼Œå†…æ ¸ä¸ºæ–°è¿›ç¨‹åˆ›å»ºå„ç§æ•°æ®ç»“æ„ï¼Œå¹¶åˆ†é…ç»™å®ƒä¸€ä¸ªå”¯ä¸€çš„ PIDã€‚ä¸ºäº†ç»™è¿™ä¸ªæ–°è¿›ç¨‹åˆ›å»ºè™šæ‹Ÿå†…å­˜ï¼Œå®ƒå¤åˆ¶å½“å‰è¿›ç¨‹çš„ mm_structã€åŒºåŸŸç»“æ„å’Œé¡µè¡¨ã€‚å¹¶å°†ä¸¤ä¸ªè¿›ç¨‹ä¸­çš„æ¯ä¸ªé¡µé¢éƒ½æ ‡è®°ä¸ºåªè¯»ï¼Œæ¯ä¸ªåŒºåŸŸç»“æ„éƒ½æ ‡è®°ä¸ºç§æœ‰çš„ã€å†™æ—¶å¤åˆ¶ã€‚</p>
<p>å½“ fork åœ¨æ–°è¿›ç¨‹ä¸­è¿”å›æ—¶ï¼Œæ–°è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜å’Œè°ƒç”¨ fork æ—¶å­˜åœ¨çš„è™šæ‹Ÿå†…å­˜ç›¸åŒã€‚å½“è¿™ä¸¤ä¸ªè¿›ç¨‹ä¸­çš„ä»»ä¸€ä¸ªåæ¥è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œå†™æ—¶å¤åˆ¶æœºåˆ¶å°±ä¼šåˆ›å»ºæ–°é¡µé¢ï¼Œå› æ­¤ï¼Œä¹Ÿå°±ä¸ºæ¯ä¸ªè¿›ç¨‹ä¿æŒäº†ç§æœ‰åœ°å€ç©ºé—´çš„æŠ½è±¡æ¦‚å¿µã€‚</p>
<h3 id="å†çœ‹-execve-å‡½æ•°"> å†çœ‹ execve å‡½æ•°</h3>
<p><code>execve(&quot;a.out&quot;, NULL, NULL);</code><br>
execve å‡½æ•°åœ¨å½“å‰è¿›ç¨‹ä¸­åŠ è½½å¹¶è¿è¡ŒåŒ…å«åœ¨å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶ a.out ä¸­çš„ç¨‹åºï¼Œç”¨ a.out ç¨‹åºæ›¿ä»£å½“å‰ç¨‹åºã€‚åŠ è½½å¹¶è¿è¡Œ a.out éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åˆ é™¤å·²å­˜åœ¨çš„ç”¨æˆ·åŒºåŸŸã€‚åˆ é™¤å½“å‰è¿›ç¨‹è™šæ‹Ÿåœ°å€çš„ç”¨æˆ·éƒ¨åˆ†ä¸­çš„å·²å­˜åœ¨çš„åŒºåŸŸç»“æ„ã€‚</li>
<li>æ˜ å°„ç§æœ‰åŒºåŸŸã€‚ä¸ºæ–°ç¨‹åºçš„textã€dataã€bss å’Œæ ˆåŒºåŸŸåˆ›å»ºæ–°çš„åŒºåŸŸç»“æ„ã€‚æ‰€æœ‰è¿™äº›æ–°çš„åŒºåŸŸæ ‡è®°ä¸ºç§æœ‰çš„ã€å†™æ—¶å¤åˆ¶çš„ã€‚ä»£ç å’ŒdataåŒºåŸŸè¢«æ˜ å°„ä¸º a.out æ–‡ä»¶ä¸­çš„.text å’Œ.data åŒºã€‚<strong>bss åŒºåŸŸæ˜ å°„åˆ°åŒ¿åæ–‡ä»¶ï¼Œå…¶å¤§å°åŒ…å«åœ¨ a.out ä¸­ã€‚æ ˆå’Œå †åŒºåŸŸä¹Ÿæ˜ å°„åˆ°åŒ¿åæ–‡ä»¶ï¼Œåˆå§‹é•¿åº¦ä¸ºé›¶ã€‚</strong>(C/C++çš„æœªåˆå§‹åŒ–staticå˜é‡ï¼Œå…¨å±€å˜é‡éƒ½æ˜¯åœ¨.bssèŠ‚ï¼Œå› æ­¤éƒ½ä¼šåˆå§‹åŒ–ä¸º0ã€‚å †æ ˆè™½ç„¶ä¼šåˆå§‹åŒ–ä¸ºé›¶ï¼Œä½†å †æ ˆéƒ½æ˜¯åŠ¨æ€çš„ï¼Œå…¶åœ°å€å¯èƒ½è¢«å¤ç”¨ï¼Œå¯¼è‡´ä¸‹ä¸€æ¬¡åˆ†é…åˆ°çš„åœ°å€å¯èƒ½å­˜åœ¨ä¹‹å‰ç•™ä¸‹çš„è„æ•°æ®ï¼Œå› æ­¤ï¼Œæœªåˆå§‹åŒ–çš„å †æ ˆå˜é‡çš„å€¼æ— æ³•ç¡®å®š)</li>
<li>æ˜ å°„å…±äº«åŒºåŸŸã€‚å¦‚æœ a.out ç¨‹åºä¸å…±äº«å¯¹è±¡é“¾æ¥ï¼Œæ¯”å¦‚æ ‡å‡† C åº“ libc.soï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡éƒ½æ˜¯åŠ¨æ€é“¾æ¥åˆ°è¿™ä¸ªç¨‹åºçš„ï¼Œç„¶åå†æ˜ å°„åˆ°ç”¨æˆ·è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„å…±äº«åŒºåŸŸå†…ã€‚</li>
<li>è®¾ç½®ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ã€‚execve åšçš„æœ€åä¸€ä»¶äº‹æƒ…å°±æ˜¯è®¾ç½®å½“å‰è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­çš„ç¨‹åºè®¡æ•°å™¨ï¼Œä½¿ä¹‹æŒ‡å‘ä»£ç åŒºåŸŸçš„å…¥å£ç‚¹ã€‚</li>
</ol>
<p>ä¸‹ä¸€æ¬¡è°ƒåº¦åˆ°è¿™ä¸ªè¿›ç¨‹æ—¶ï¼Œå®ƒå°†ä»è¿™ä¸ªå…¥å£ç‚¹å¼€å§‹æ‰§è¡Œã€‚Linux å°†æ ¹æ®éœ€è¦æ¢å…¥ä»£ç å’Œæ•°æ®é¡µé¢ã€‚</p>
<p><img src="/assets/csapp/ExecveLoad.png" alt="execveåŠ è½½" /></p>
<h3 id="ä½¿ç”¨mmapå‡½æ•°çš„ç”¨æˆ·çº§å†…å­˜æ˜ å°„"> ä½¿ç”¨mmapå‡½æ•°çš„ç”¨æˆ·çº§å†…å­˜æ˜ å°„</h3>
<p>Linuxè¿›ç¨‹å¯ä»¥ä½¿ç”¨mmapå‡½æ•°æ¥åˆ›å»ºæ–°çš„è™šæ‹Ÿå†…å­˜åŒºåŸŸï¼Œå¹¶å°†å¯¹è±¡æ˜ å°„åˆ°è¿™äº›åŒºåŸŸã€‚</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;unistd.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;sys/mman.h></span></span>

<span>void</span> <span>*</span><span>mmap</span><span>(</span><span>void</span> <span>*</span>start<span>,</span> <span>size_t</span> length<span>,</span> <span>int</span> prot<span>,</span> <span>int</span> flags<span>,</span>
           <span>int</span> fd<span>,</span> <span>off_t</span> offset<span>)</span><span>;</span>

<span>// è¿”å›ï¼šè‹¥æˆåŠŸæ—¶åˆ™ä¸ºæŒ‡å‘æ˜ å°„åŒºåŸŸçš„æŒ‡é’ˆï¼Œè‹¥å‡ºé”™åˆ™ä¸º MAP_FAILED(-1)ã€‚</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>mmap å‡½æ•°è¦æ±‚å†…æ ¸åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿå†…å­˜åŒºåŸŸï¼Œæœ€å¥½æ˜¯ä»åœ°å€ start å¼€å§‹çš„ä¸€ä¸ªåŒºåŸŸï¼Œå¹¶å°†æ–‡ä»¶æè¿°ç¬¦ fd ï¼ˆç”¨äºæ‰“å¼€æ–‡ä»¶çš„openå‡½æ•°çš„è¿”å›å€¼ï¼‰æŒ‡å®šçš„å¯¹è±¡çš„ä¸€ä¸ªè¿ç»­çš„ç‰‡ï¼ˆchunkï¼‰æ˜ å°„åˆ°è¿™ä¸ªæ–°çš„åŒºåŸŸã€‚è¿ç»­çš„å¯¹è±¡ç‰‡å¤§å°ä¸º length å­—èŠ‚ï¼Œä»è·æ–‡ä»¶å¼€å§‹å¤„åç§»é‡ä¸º offset å­—èŠ‚çš„åœ°æ–¹å¼€å§‹ã€‚start åœ°å€ä»…ä»…æ˜¯ä¸€ä¸ªæš—ç¤ºè€Œä¸æ˜¯å‘½ä»¤ï¼Œé€šå¸¸è®¾ä¸º NULLã€‚
<img src="/assets/csapp/mmap.png" alt="mmapå‡½æ•°" /></p>
<p>å‚æ•° prot åŒ…å«æè¿°æ–°æ˜ å°„çš„è™šæ‹Ÿå†…å­˜åŒºåŸŸçš„è®¿é—®æƒé™ä½ï¼ˆå³åœ¨ç›¸åº”åŒºåŸŸç»“æ„ä¸­çš„ vm_prot ä½ï¼‰ã€‚</p>
<ul>
<li>PROT_EXECï¼šè¿™ä¸ªåŒºåŸŸå†…çš„é¡µé¢ç”±å¯ä»¥è¢« CPU æ‰§è¡Œçš„æŒ‡ä»¤ç»„æˆã€‚</li>
<li>PROT_READï¼šè¿™ä¸ªåŒºåŸŸå†…çš„é¡µé¢å¯è¯»ã€‚</li>
<li>PROT_WRITEï¼šè¿™ä¸ªåŒºåŸŸå†…çš„é¡µé¢å¯å†™ã€‚</li>
<li>PROT_NONEï¼šè¿™ä¸ªåŒºåŸŸå†…çš„é¡µé¢ä¸èƒ½è¢«è®¿é—®ã€‚</li>
</ul>
<p>å‚æ•° flags ç”±æè¿°è¢«æ˜ å°„å¯¹è±¡ç±»å‹çš„ä½ç»„æˆã€‚</p>
<ul>
<li>MAP_ANON æ ‡è®°ä½ï¼Œè¡¨ç¤ºè¢«æ˜ å°„çš„å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ¿åå¯¹è±¡ï¼Œè€Œç›¸åº”çš„è™šæ‹Ÿé¡µé¢æ˜¯è¯·æ±‚äºŒè¿›åˆ¶é›¶çš„</li>
<li>MAP_PRIVATE è¡¨ç¤ºæ˜¯ä¸€ä¸ªç§æœ‰çš„ã€å†™æ—¶å¤åˆ¶çš„å¯¹è±¡</li>
<li>MAP_SHARED è¡¨ç¤ºæ˜¯ä¸€ä¸ªå…±äº«å¯¹è±¡ã€‚</li>
</ul>
<p>munmap å‡½æ•°åˆ é™¤è™šæ‹Ÿå†…å­˜çš„åŒºåŸŸï¼š</p>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;unistd.h></span></span>
<span><span>#</span><span>include</span> <span>&lt;sys/mman.h></span></span>

<span>int</span> <span>munmap</span><span>(</span><span>void</span> <span>*</span>start<span>,</span> <span>size_t</span> length<span>)</span><span>;</span>

<span>// è¿”å›ï¼šè‹¥æˆåŠŸåˆ™ä¸º 0ï¼Œè‹¥å‡ºé”™åˆ™ä¸º -1ã€‚</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>munmap å‡½æ•°åˆ é™¤ä»è™šæ‹Ÿåœ°å€ start å¼€å§‹çš„ï¼Œç”±æ¥ä¸‹æ¥ length å­—èŠ‚ç»„æˆçš„åŒºåŸŸã€‚æ¥ä¸‹æ¥å¯¹å·²åˆ é™¤åŒºåŸŸçš„å¼•ç”¨ä¼šå¯¼è‡´æ®µé”™è¯¯ã€‚</p>
<details><summary>æ›´å¤šä¿¡æ¯</summary>
<div><pre><code><span><span>#</span><span>include</span> <span>"csapp.h"</span></span>

<span>/*
* mmapcopy - uses mmap to copy file fd to stdout
*/</span>
<span>void</span> <span>mmapcopy</span><span>(</span><span>int</span> fd<span>,</span> <span>int</span> size<span>)</span>
<span>{</span>
    <span>char</span> <span>*</span>bufp<span>;</span> <span>/* ptr to memory-mapped VM area */</span>

    bufp <span>=</span> <span>mmap</span><span>(</span><span>NULL</span><span>,</span> size<span>,</span> PROT_READ<span>,</span> MAP_PRIVATE<span>,</span> fd<span>,</span> <span>0</span><span>)</span><span>;</span>
    <span>Write</span><span>(</span><span>1</span><span>,</span> bufp<span>,</span> size<span>)</span><span>;</span>
    <span>return</span><span>;</span>
<span>}</span>

<span>/* mmapcopy driver */</span>
<span>int</span> <span>main</span><span>(</span><span>int</span> argc<span>,</span> <span>char</span> <span>*</span><span>*</span>argv<span>)</span>
<span>{</span>
    <span>struct</span> <span>stat</span> stat<span>;</span>
    <span>int</span> fd<span>;</span>

    <span>/* Check for required command-line argument */</span>
    <span>if</span> <span>(</span>argc <span>!=</span> <span>2</span><span>)</span> <span>{</span>
        <span>printf</span><span>(</span><span>"usage: %s &lt;filename>\n"</span><span>,</span> argv<span>[</span><span>0</span><span>]</span><span>)</span><span>;</span>
        <span>exit</span><span>(</span><span>0</span><span>)</span><span>;</span>
    <span>}</span>

    <span>/* Copy the input argument to stdout */</span>
    fd <span>=</span> <span>Open</span><span>(</span>argv<span>[</span><span>1</span><span>]</span><span>,</span> O_RDONLY<span>,</span> <span>0</span><span>)</span><span>;</span>
    <span>fstat</span><span>(</span>fd<span>,</span> <span>&amp;</span>stat<span>)</span><span>;</span>
    <span>mmapcopy</span><span>(</span>fd<span>,</span> stat<span>.</span>st_size<span>)</span><span>;</span>
    <span>exit</span><span>(</span><span>0</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br></div></div></details>
<h2 id="åŠ¨æ€å†…å­˜åˆ†é…"> åŠ¨æ€å†…å­˜åˆ†é…</h2>
<p>åŠ¨æ€å†…å­˜åˆ†é…å™¨ç»´æŠ¤ç€ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜åŒºåŸŸ--å †</p>
<ul>
<li>å †ç´§æ¥åœ¨æœªåˆå§‹åŒ–çš„æ•°æ®åŒºåŸŸ(bss)åå¼€å§‹ï¼Œå¹¶å‘é«˜åœ°å€å¢é•¿ã€‚</li>
<li>å†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ªå˜é‡ brk(è¯»åš â€œbreakâ€)ï¼ŒæŒ‡å‘å †çš„é¡¶éƒ¨ã€‚</li>
<li>åˆ†é…å™¨å°†å †è§†ä¸ºä¸€ç»„ä¸åŒå¤§å°çš„å—ï¼ˆblockï¼‰çš„é›†åˆæ¥ç»´æŠ¤ã€‚æ¯ä¸ªå—å°±æ˜¯ä¸€ä¸ªè¿ç»­çš„è™šæ‹Ÿå†…å­˜ç‰‡ï¼ˆchunkï¼‰ï¼Œè¦ä¹ˆæ˜¯å·²åˆ†é…çš„ï¼Œè¦ä¹ˆæ˜¯ç©ºé—²çš„ã€‚</li>
</ul>
<p>åˆ†é…å™¨é£æ ¼</p>
<ul>
<li>æ˜¾å¼åˆ†é…å™¨ï¼ˆexplicit allocatorï¼‰ï¼Œè¦æ±‚åº”ç”¨æ˜¾å¼åœ°é‡Šæ”¾ä»»ä½•å·²åˆ†é…çš„å—ã€‚malloc/free, new/deleteã€‚</li>
<li>éšå¼åˆ†é…å™¨ï¼ˆimplicit allocatorï¼‰ï¼Œè¦æ±‚åˆ†é…å™¨æ£€æµ‹ä¸€ä¸ªå·²åˆ†é…å—ä½•æ—¶ä¸å†è¢«ç¨‹åºæ‰€ä½¿ç”¨ï¼Œå¹¶è´Ÿè´£é‡Šæ”¾è¿™ä¸ªå—ã€‚éšå¼åˆ†é…å™¨ä¹Ÿå«åšåƒåœ¾æ”¶é›†å™¨ï¼ˆgarbage collectorï¼‰ï¼Œè€Œè‡ªåŠ¨é‡Šæ”¾æœªä½¿ç”¨çš„å·²åˆ†é…çš„å—çš„è¿‡ç¨‹å«åšåƒåœ¾æ”¶é›†ï¼ˆgarbage collectionï¼‰</li>
</ul>
<h3 id="mallocå’Œfreeå‡½æ•°"> mallocå’Œfreeå‡½æ•°</h3>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;stdlib.h></span></span>
<span>void</span> <span>*</span><span>malloc</span><span>(</span><span>size_t</span> size<span>)</span><span>;</span>
<span>void</span> <span>*</span><span>calloc</span><span>(</span><span>size_t</span> size<span>)</span><span>;</span>
<span>void</span> <span>free</span><span>(</span><span>void</span> <span>*</span>ptr<span>)</span><span>;</span>

<span><span>#</span><span>include</span> <span>&lt;unistd.h></span></span>
<span>void</span> <span>*</span><span>sbrk</span><span>(</span><span>intptr_t</span>  incr<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><ul>
<li>mallocå‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å¤§å°è‡³å°‘ä¸ºsizeå­—èŠ‚çš„å†…å­˜å—ã€‚åœ¨32ä½æ¨¡å¼ä¸­ï¼Œmallocè¿”å›çš„å—åœ°å€æ€»æ˜¯8çš„å€æ•°ã€‚64ä½æ¨¡å¼ä¸‹ï¼Œæ€»æ˜¯16çš„å€æ•°ã€‚</li>
<li>å¦‚æœmallocé‡åˆ°é—®é¢˜åˆ™è¿”å›NULLå¹¶è®¾ç½®errnoã€‚</li>
<li>mallocä¸åˆå§‹åŒ–å®ƒè¿”å›çš„å†…å­˜ã€‚è¦åˆå§‹åŒ–ï¼Œä½¿ç”¨callocã€‚</li>
<li>sbrkå‡½æ•°é€šè¿‡å°†å†…æ ¸çš„brkæŒ‡é’ˆå¢åŠ incræ¥æ‰©å±•å’Œæ”¶ç¼©å †(incrä¸ºè´Ÿå€¼)ã€‚æˆåŠŸè¿”å›brkçš„æ—§å€¼ï¼Œå¦åˆ™è¿”å›-1,å¹¶è®¾errnoä¸ºENOMEMã€‚</li>
<li>sbrk(0)è¿”å›å½“å‰brkçš„å€¼ã€‚</li>
<li>freeçš„å‚æ•°å¿…é¡»æ˜¯å·²åˆ†é…å—çš„èµ·å§‹ä½ç½®ã€‚å¦åˆ™freeçš„è¡Œä¸ºæœªå®šä¹‰ã€‚</li>
</ul>
<div><p>å³°å€¼åˆ©ç”¨ç‡</p>
<p>ä¸ºç¨‹åºçš„èšé›†æœ‰æ•ˆè½½è·(æ¯ä¸ªå—çš„æœ‰æ•ˆè½½è·çš„å’Œ)å å½“å‰å †å¤§å°çš„æ¯”ä¾‹ï¼Œåœ¨åˆ†é…å™¨åˆ†é…é‡Šæ”¾å†…å­˜çš„åºåˆ—ä¸­è¾¾åˆ°çš„å³°å€¼ã€‚</p>
</div>
<h3 id="ç¢ç‰‡"> ç¢ç‰‡</h3>
<ul>
<li>å†…éƒ¨ç¢ç‰‡ï¼šå·²åˆ†é…å—æ¯”æœ‰æ•ˆè½½è·å¤§çš„éƒ¨åˆ†ã€‚</li>
<li>å¤–éƒ¨ç¢ç‰‡ï¼šæ˜¯å½“ç©ºé—²å†…å­˜åˆè®¡èµ·æ¥è¶³å¤Ÿæ»¡è¶³ä¸€ä¸ªåˆ†é…è¯·æ±‚ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªå•ç‹¬çš„ç©ºé—²å—è¶³å¤Ÿå¤§å¯ä»¥æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚æ—¶å‘ç”Ÿçš„ã€‚
<ul>
<li>å¤–éƒ¨ç¢ç‰‡ä¸ä»…å–å†³äºä»¥å‰è¯·æ±‚çš„æ¨¡å¼å’Œåˆ†é…å™¨çš„å®ç°æ–¹å¼ï¼Œè¿˜å–å†³äºå°†æ¥è¯·æ±‚çš„æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œç°åœ¨å†…å­˜ä¸­åªæœ‰6ä¸ªå­—çš„ç©ºé—²ï¼Œä½†è¿™å…­ä¸ªå­—æ˜¯åˆ†æ•£çš„ï¼Œæœ‰ä¸¤ä¸ª3å­—çš„ç©ºé—²å—ç»„æˆçš„ã€‚é‚£ä¹ˆï¼Œå¯¹äºä¸€ä¸ª6å­—çš„è¯·æ±‚ï¼Œå°±å­˜åœ¨ä¸¤ä¸ªç¢ç‰‡ï¼Œå¯¹äºä¸€ä¸ª3å­—çš„è¯·æ±‚ï¼Œå°±ä¸å­˜åœ¨ç¢ç‰‡ã€‚</li>
<li>å› ä¸ºå¤–éƒ¨ç¢ç‰‡éš¾ä»¥é‡åŒ–ä¸”ä¸å¯èƒ½é¢„æµ‹ï¼Œæ‰€ä»¥åˆ†é…å™¨é€šå¸¸é‡†ç”¨å¯å‘å¼ç­–ç•¥æ¥è¯•å›¾ç»´æŒå°‘é‡çš„å¤§ç©ºé—²å—ï¼Œè€Œä¸æ˜¯ç»´æŒå¤§é‡çš„å°ç©ºé—²å—ã€‚</li>
</ul>
</li>
</ul>
<h3 id="åˆ†é…å™¨çš„å®ç°é—®é¢˜"> åˆ†é…å™¨çš„å®ç°é—®é¢˜</h3>
<p>æœ€ç®€å•çš„åˆ†é…å™¨ä¼šæŠŠå †ç»„ç»‡æˆä¸€ä¸ªå¤§çš„å­—èŠ‚æ•°ç»„ï¼Œè¿˜æœ‰ä¸€ä¸ªæŒ‡é’ˆ pï¼Œåˆå§‹æŒ‡å‘è¿™ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚ä¸ºäº†åˆ†é… size ä¸ªå­—èŠ‚ï¼Œmalloc å°† p çš„å½“å‰å€¼ä¿å­˜åœ¨æ ˆé‡Œï¼Œå°† p å¢åŠ  sizeï¼Œå¹¶å°† p çš„æ—§å€¼è¿”å›åˆ°è°ƒç”¨å‡½æ•°ã€‚free åªæ˜¯ç®€å•åœ°è¿”å›åˆ°è°ƒç”¨å‡½æ•°ï¼Œè€Œä¸åšå…¶ä»–ä»»ä½•äº‹æƒ…ã€‚</p>
<p>è¿™ä¸ªç®€å•çš„åˆ†é…å™¨æ˜¯è®¾è®¡ä¸­çš„ä¸€ç§æç«¯æƒ…å†µã€‚å› ä¸ºæ¯ä¸ª malloc å’Œ free åªæ‰§è¡Œå¾ˆå°‘é‡çš„æŒ‡ä»¤ï¼Œååç‡ä¼šæå¥½ã€‚ç„¶è€Œï¼Œå› ä¸ºåˆ†é…å™¨ä»ä¸é‡å¤ä½¿ç”¨ä»»ä½•å—ï¼Œå†…å­˜åˆ©ç”¨ç‡å°†æå·®ã€‚ä¸€ä¸ªå®é™…çš„åˆ†é…å™¨è¦åœ¨ååç‡å’Œåˆ©ç”¨ç‡ä¹‹é—´æŠŠæ¡å¥½å¹³è¡¡ï¼Œå°±å¿…é¡»è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ç©ºé—²å—ç»„ç»‡ï¼šæˆ‘ä»¬å¦‚ä½•è®°å½•ç©ºé—²å—ï¼Ÿ(æ ¸å¿ƒ)</li>
<li>æ”¾ç½®ï¼šæˆ‘ä»¬å¦‚ä½•é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ç©ºé—²å—æ¥æ”¾ç½®ä¸€ä¸ªæ–°åˆ†é…çš„å—ï¼Ÿ</li>
<li>åˆ†å‰²ï¼šåœ¨å°†ä¸€ä¸ªæ–°åˆ†é…çš„å—æ”¾ç½®åˆ°æŸä¸ªç©ºé—²å—ä¹‹åï¼Œæˆ‘ä»¬å¦‚ä½•å¤„ç†è¿™ä¸ªç©ºé—²å—ä¸­çš„å‰©ä½™éƒ¨åˆ†ï¼Ÿ</li>
<li>åˆå¹¶ï¼šæˆ‘ä»¬å¦‚ä½•å¤„ç†ä¸€ä¸ªåˆšåˆšè¢«é‡Šæ”¾çš„å—ï¼Ÿ</li>
</ul>
<h3 id="éšå¼ç©ºé—²é“¾è¡¨"> éšå¼ç©ºé—²é“¾è¡¨</h3>
<p>ä»»ä½•å®é™…çš„åˆ†é…å™¨éƒ½éœ€è¦ä¸€äº›æ•°æ®ç»“æ„ï¼Œå…è®¸å®ƒæ¥åŒºåˆ«å—è¾¹ç•Œï¼Œä»¥åŠåŒºåˆ«å·²åˆ†é…å—å’Œç©ºé—²å—ã€‚å¤§å¤šæ•°åˆ†é…å™¨å°†è¿™äº›ä¿¡æ¯åµŒå…¥å—æœ¬èº«ã€‚
<img src="/assets/csapp/StackBlock.png" alt="å †å—çš„æ ¼å¼" /></p>
<ul>
<li>å¤´éƒ¨ç¼–ç äº†è¿™ä¸ªå—çš„å¤§å°ï¼ˆåŒ…æ‹¬å¤´éƒ¨å’Œæ‰€æœ‰çš„å¡«å……ï¼‰ï¼Œä»¥åŠè¿™ä¸ªå—æ˜¯å·²åˆ†é…çš„è¿˜æ˜¯ç©ºé—²çš„ã€‚</li>
<li>æœ‰æ•ˆè½½è·çš„å¤§å°ä¸ºmallocçš„å‚æ•°ã€‚mallocè¿”å›çš„æŒ‡é’ˆï¼ŒæŒ‡å‘çš„å°±æ˜¯æœ‰æ•ˆè½½è·çš„é¦–åœ°å€ã€‚</li>
<li>å¡«å……å¯èƒ½æ˜¯åˆ†é…å™¨ç­–ç•¥çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥å¯¹ä»˜å¤–éƒ¨ç¢ç‰‡ã€‚æˆ–è€…ä¹Ÿéœ€è¦ç”¨å®ƒæ¥æ»¡è¶³å¯¹é½è¦æ±‚ã€‚</li>
</ul>
<div><p>æ³¨æ„</p>
<p>å› ä¸ºå¯¹é½çº¦æŸæ¡ä»¶ï¼Œå—å¤§å°å°±æ€»æ˜¯ 8 çš„å€æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´å—å¤§å°çš„æœ€ä½ 3 ä½æ€»æ˜¯é›¶ã€‚å› æ­¤ï¼Œå†…å­˜å¤§å°åªè¦ç”¨åˆ°å…¶ 29 ä¸ªé«˜ä½ï¼Œå‰©ä½™çš„ 3 ä½æ¥ç¼–ç å…¶ä»–ä¿¡æ¯ã€‚æˆ‘ä»¬ç”¨å…¶ä¸­çš„æœ€ä½ä½ï¼ˆç§°å·²åˆ†é…ä½ï¼‰æ¥æŒ‡æ˜è¿™ä¸ªå—æ˜¯å·²åˆ†é…çš„è¿˜æ˜¯ç©ºé—²çš„ã€‚</p>
</div>
<p>å°†å †ç»„ç»‡ä¸ºä¸€ä¸ªè¿ç»­çš„å·²åˆ†é…å—å’Œç©ºé—²å—çš„åºåˆ—ï¼Œç§°ä¸ºéšå¼ç©ºé—²é“¾è¡¨ï¼Œå› ä¸ºç©ºé—²å—æ˜¯é€šè¿‡å¤´éƒ¨ä¸­çš„å¤§å°å­—æ®µéšå«åœ°è¿æ¥ç€çš„ã€‚
<img src="/assets/csapp/ImplicitList.png" alt="éšå¼ç©ºé—²åˆ—è¡¨" />
æ³¨æ„ï¼šç»“æŸå—éœ€è¦æŸç§ç‰¹æ®Šæ ‡è®°ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå°±æ˜¯ä¸€ä¸ªè®¾ç½®äº†å·²åˆ†é…ä½è€Œå¤§å°ä¸ºé›¶çš„ç»ˆæ­¢å¤´éƒ¨ï¼ˆterminating headerï¼‰ã€‚</p>
<p>ç³»ç»Ÿå¯¹é½è¦æ±‚å’Œåˆ†é…å™¨å¯¹å—æ ¼å¼çš„é€‰æ‹©ä¼šå¯¹åˆ†é…å™¨ä¸Šçš„æœ€å°å—å¤§å°æœ‰å¼ºåˆ¶çš„è¦æ±‚ã€‚</p>
<h4 id="æ”¾ç½®"> æ”¾ç½®</h4>
<p>å½“ä¸€ä¸ªåº”ç”¨è¯·æ±‚ä¸€ä¸ªkå­—èŠ‚çš„å—æ—¶ï¼Œåˆ†é…å™¨æœç´¢ç©ºé—²é“¾è¡¨ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªè¶³å¤Ÿå¤§å¯ä»¥æ”¾ç½®æ‰€è¯·æ±‚å—çš„ç©ºé—²å—ã€‚æœç´¢çš„æ–¹å¼ç”±æ”¾ç½®ç­–ç•¥ç¡®å®šã€‚</p>
<ul>
<li>é¦–æ¬¡é€‚é…ï¼šä»å¤´å¼€å§‹æœç´¢ç©ºé—²é“¾è¡¨ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªåˆé€‚çš„ç©ºé—²å—ã€‚</li>
<li>ä¸‹ä¸€æ¬¡é€‚é…ï¼šä»ä¸Šä¸€æ¬¡æŸ¥è¯¢ç»“æŸçš„åœ°æ–¹å¼€å§‹æœç´¢ç©ºé—²é“¾è¡¨ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªåˆé€‚çš„ç©ºé—²å—ã€‚</li>
<li>æœ€ä½³é€‚é…ï¼šæ£€æŸ¥æ¯ä¸ªç©ºé—²å—ï¼Œé€‰æ‹©é€‚åˆæ‰€éœ€è¯·æ±‚å¤§å°çš„æœ€å°ç©ºé—²å—ã€‚</li>
</ul>
<h4 id="åˆ†å‰²"> åˆ†å‰²</h4>
<p>ä¸€æ—¦åˆ†é…å™¨æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…çš„ç©ºé—²å—ï¼Œå®ƒå°±å¿…é¡»åšå¦ä¸€ä¸ªç­–ç•¥å†³å®šï¼Œé‚£å°±æ˜¯åˆ†é…è¿™ä¸ªç©ºé—²å—ä¸­å¤šå°‘ç©ºé—´ã€‚ä¸€ä¸ªé€‰æ‹©æ˜¯ç”¨æ•´ä¸ªç©ºé—²å—ã€‚è™½ç„¶è¿™ç§æ–¹å¼ç®€å•è€Œå¿«æ·ï¼Œä½†æ˜¯ä¸»è¦çš„ç¼ºç‚¹å°±æ˜¯å®ƒä¼šé€ æˆå†…éƒ¨ç¢ç‰‡ã€‚åˆ†é…å™¨é€šå¸¸ä¼šé€‰æ‹©å°†è¿™ä¸ªç©ºé—²å—åˆ†å‰²ä¸ºä¸¤éƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†å˜æˆåˆ†é…å—ï¼Œè€Œå‰©ä¸‹çš„å˜æˆä¸€ä¸ªæ–°çš„ç©ºé—²å—ã€‚</p>
<div><p>æ³¨æ„</p>
<p>å¦‚æœåˆ†é…å™¨ä¸èƒ½ä¸ºè¯·æ±‚å—æ‰¾åˆ°åˆé€‚çš„ç©ºé—²å—å°†å‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>åˆå¹¶é‚£äº›åœ¨å†…å­˜ä¸­ç‰©ç†ä¸Šç›¸é‚»çš„ç©ºé—²å—æ¥åˆ›å»ºä¸€äº›æ›´å¤§çš„ç©ºé—²å—</li>
<li>è°ƒç”¨ sbrk å‡½æ•°ï¼Œå‘å†…æ ¸è¯·æ±‚é¢å¤–çš„å †å†…å­˜ã€‚åˆ†é…å™¨å°†é¢å¤–çš„å†…å­˜è½¬åŒ–æˆä¸€ä¸ªå¤§çš„ç©ºé—²å—ï¼Œå°†è¿™ä¸ªå—æ’å…¥åˆ°ç©ºé—²é“¾è¡¨ä¸­ï¼Œç„¶åå°†è¢«è¯·æ±‚çš„å—æ”¾ç½®åœ¨è¿™ä¸ªæ–°çš„ç©ºé—²å—ä¸­ã€‚</li>
</ul>
</div>
<h4 id="åˆå¹¶"> åˆå¹¶</h4>
<p>å½“åˆ†é…å™¨é‡Šæ”¾ä¸€ä¸ªå·²åˆ†é…å—æ—¶ï¼Œå¯èƒ½æœ‰å…¶ä»–ç©ºé—²å—ä¸è¿™ä¸ªæ–°é‡Šæ”¾çš„ç©ºé—²å—ç›¸é‚»ã€‚è¿™äº›é‚»æ¥çš„ç©ºé—²å—å¯èƒ½å¼•èµ·ä¸€ç§ç°è±¡ï¼Œå«åšå‡ç¢ç‰‡ï¼ˆfault fragmentationï¼‰ï¼Œå°±æ˜¯æœ‰è®¸å¤šå¯ç”¨çš„ç©ºé—²å—è¢«åˆ‡å‰²æˆä¸ºå°çš„ã€æ— æ³•ä½¿ç”¨çš„ç©ºé—²å—ã€‚ä¸ºäº†è§£å†³å‡ç¢ç‰‡é—®é¢˜ï¼Œä»»ä½•å®é™…çš„åˆ†é…å™¨éƒ½å¿…é¡»åˆå¹¶ç›¸é‚»çš„ç©ºé—²å—ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåˆå¹¶ï¼ˆcoalescingï¼‰ã€‚</p>
<p>åˆå¹¶ç­–ç•¥</p>
<ul>
<li>ç«‹å³åˆå¹¶ï¼ˆimmediate coalescingï¼‰ï¼šåœ¨æ¯æ¬¡ä¸€ä¸ªå—è¢«é‡Šæ”¾æ—¶ï¼Œå°±åˆå¹¶æ‰€æœ‰çš„ç›¸é‚»å—ã€‚</li>
<li>æ¨è¿Ÿåˆå¹¶ï¼ˆdeferred coalescingï¼‰ï¼šç­‰åˆ°æŸä¸ªç¨æ™šçš„æ—¶å€™å†åˆå¹¶ç©ºé—²å—ã€‚ä¾‹å¦‚ï¼ŒæŸä¸ªåˆ†é…è¯·æ±‚å¤±è´¥æ—¶ï¼Œæ‰«ææ•´ä¸ªå †ï¼Œåˆå¹¶æ‰€æœ‰çš„ç©ºé—²å—ã€‚</li>
<li>ç«‹å³åˆå¹¶ç®€å•æ˜äº†ï¼Œå¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…æ‰§è¡Œå®Œæˆï¼Œä½†æ˜¯å¯¹äºæŸäº›è¯·æ±‚æ¨¡å¼ï¼Œè¿™ç§æ–¹å¼ä¼šäº§ç”Ÿä¸€ç§å½¢å¼çš„æŠ–åŠ¨ï¼Œå—ä¼šåå¤åœ°åˆå¹¶ï¼Œç„¶åé©¬ä¸Šåˆ†å‰²ã€‚å¿«é€Ÿçš„åˆ†é…å™¨é€šå¸¸ä¼šé€‰æ‹©æŸç§å½¢å¼çš„æ¨è¿Ÿåˆå¹¶ã€‚</li>
</ul>
<h4 id="å¸¦è¾¹ç•Œæ ‡è®°çš„åˆå¹¶"> å¸¦è¾¹ç•Œæ ‡è®°çš„åˆå¹¶</h4>
<p>è®¾æƒ³è¦é‡Šæ”¾çš„å—ä¸ºå½“å‰å—ã€‚é‚£ä¹ˆï¼Œåˆå¹¶ä¸‹ä¸€ä¸ªç©ºé—²å—å¾ˆç®€å•è€Œä¸”é«˜æ•ˆã€‚<strong>å½“å‰å—çš„å¤´éƒ¨æŒ‡é’ˆ+å¤´éƒ¨å¤§å°=ä¸‹ä¸€å—çš„å¤´éƒ¨æŒ‡é’ˆ</strong>ï¼Œå¯ä»¥æ£€æŸ¥è¿™ä¸ªæŒ‡é’ˆä»¥åˆ¤æ–­ä¸‹ä¸€ä¸ªå—æ˜¯å¦æ˜¯ç©ºé—²çš„ã€‚å¦‚æœæ˜¯ï¼Œå°±å°†å®ƒçš„å¤§å°ç®€å•åœ°åŠ åˆ°å½“å‰å—å¤´éƒ¨çš„å¤§å°ä¸Šï¼Œè¿™ä¸¤ä¸ªå—åœ¨å¸¸æ•°æ—¶é—´å†…è¢«åˆå¹¶ã€‚ä½†æ˜¯ï¼Œå¯¹äºå‰ä¸€å—ï¼Œå› ä¸ºä¸çŸ¥é“å—å¤§å°ï¼Œæ‰€ä»¥æ— æ³•æ‰¾åˆ°å…¶å¤´éƒ¨æŒ‡é’ˆï¼Œå› è€Œæ— æ³•åˆ¤æ–­å…¶æ˜¯å¦ç©ºé—²ï¼Œä¹Ÿæ— ä»åˆå¹¶ã€‚</p>
<p>Knuthæå‡ºäº†ä¸€ç§è§£å†³æ–¹æ³•ï¼Œå«<strong>è¾¹ç•Œæ ‡è®°(boundary tag)</strong>ã€‚<br>
åœ¨æ¯ä¸ªå—çš„ç»“å°¾å¤„æ·»åŠ ä¸€ä¸ªè„šéƒ¨ï¼ˆfooterï¼Œè¾¹ç•Œæ ‡è®°ï¼‰ï¼Œå®é™…ä¸Šå°±æ˜¯å¤´éƒ¨çš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¿™æ ·ï¼Œå› ä¸ºå¤´éƒ¨æŒ‡é’ˆå¤§å°æ˜¯å›ºå®šçš„ï¼Œä»å½“å‰å—çš„å¤´éƒ¨æŒ‡é’ˆä¸Šç§»ä¸€ä¸ªæŒ‡é’ˆå°±èƒ½æ‰¾åˆ°ä¸Šä¸€å—çš„è„šæ­¥ï¼Œä»è€Œç¡®å®šå…¶æ˜¯å¦ç©ºé—²ï¼Œå—å¤§å°ä¸ºå¤šå°‘ã€‚</p>
<p>ä½¿ç”¨è¾¹ç•Œæ ‡è®°åˆå¹¶å…±æœ‰4ç§æƒ…å†µï¼š</p>
<ol>
<li>å‰é¢çš„å—å’Œåé¢çš„å—éƒ½æ˜¯å·²åˆ†é…çš„ã€‚</li>
<li>å‰é¢çš„å—æ˜¯å·²åˆ†é…çš„ï¼Œåé¢çš„å—æ˜¯ç©ºé—²çš„ã€‚</li>
<li>å‰é¢çš„å—æ˜¯ç©ºé—²çš„ï¼Œè€Œåé¢çš„å—æ˜¯å·²åˆ†é…çš„ã€‚</li>
<li>å‰é¢çš„å’Œåé¢çš„å—éƒ½æ˜¯ç©ºé—²çš„ã€‚
<img src="/assets/csapp/BoundaryTag.png" alt="è¾¹ç•Œæ ‡è®°" /></li>
</ol>
<p>è¾¹ç•Œæ ‡è®°çš„æ¦‚å¿µæ˜¯ç®€å•ä¼˜é›…çš„ï¼Œå®ƒå¯¹è®¸å¤šä¸åŒç±»å‹çš„åˆ†é…å™¨å’Œç©ºé—²é“¾è¡¨ç»„ç»‡éƒ½æ˜¯é€šç”¨çš„ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿå­˜åœ¨ä¸€ä¸ªæ½œåœ¨çš„ç¼ºé™·ã€‚å®ƒè¦æ±‚æ¯ä¸ªå—éƒ½ä¿æŒä¸€ä¸ªå¤´éƒ¨å’Œä¸€ä¸ªè„šéƒ¨ï¼Œåœ¨åº”ç”¨ç¨‹åºæ“ä½œè®¸å¤šä¸ªå°å—æ—¶ï¼Œä¼šäº§ç”Ÿæ˜¾è‘—çš„å†…å­˜å¼€é”€ã€‚</p>
<div><p>è¾¹ç•Œæ ‡è®°çš„ä¼˜åŒ–æ–¹æ³•</p>
<p>è€ƒè™‘åˆå¹¶çš„å››ç§æƒ…å†µï¼Œåªæœ‰åœ¨å‰é¢çš„å—æ˜¯ç©ºé—²æ—¶(æƒ…å†µ3,4)ï¼Œæ‰ä¼šéœ€è¦ç”¨åˆ°å®ƒçš„è„šéƒ¨ã€‚å› æ­¤ï¼Œå¯ä»¥å°†è¡¨æ˜å‰é¢å—æ˜¯å·²åˆ†é…è¿˜æ˜¯ç©ºé—²çš„æ ‡å¿—ä½ï¼Œæ”¾åœ¨å½“å‰å—å¤´éƒ¨çš„3ä¸ªä½ä½ä¸­(æœ€ä½ä½æ˜¯å½“å‰å—çš„æ ‡å¿—ï¼Œæ¬¡ä½ä½æ˜¯å‰ä¸€å—çš„æ ‡å¿—)ï¼Œè¿™æ ·å·²åˆ†é…çš„å—å°±ä¸è¦footeräº†ã€‚ä½†æ³¨æ„ï¼Œç©ºé—²å—ä»ç„¶éœ€è¦footerã€‚<br>
ä¾‹å¦‚ï¼Œå¦‚æœå½“å‰å—çš„æ¬¡ä½ä½ä¸º1ï¼Œå³å‰ä¸€å—æ˜¯å·²åˆ†é…çš„ï¼Œé‚£ä¹ˆåˆå¹¶æ—¶ç”¨ä¸åˆ°å‰ä¸€å—ï¼Œè‡ªç„¶ä¸éœ€è¦å‰ä¸€å—çš„footerã€‚å¦‚æœæ¬¡ä½ä½æ˜¯0ï¼Œå³å‰ä¸€å—æ˜¯æœªåˆ†é…çš„ï¼Œå¯ä»¥é€šè¿‡ç©ºé—²å—çš„footeræ‰¾åˆ°å…¶å¤´éƒ¨ï¼Œå°†å‰ä¸€å—å’Œå½“å‰å—åˆå¹¶ã€‚è‡³äºåé¢çš„å—ï¼Œæœ¬æ¥å°±ç”¨ä¸åˆ°footerï¼Œç”¨å¤´éƒ¨å³å¯ã€‚</p>
</div>
<h3 id="æ˜¾å¼ç©ºé—²é“¾è¡¨"> æ˜¾å¼ç©ºé—²é“¾è¡¨</h3>
<p>éšå¼ç©ºé—²é“¾è¡¨ï¼Œå—åˆ†é…ä¸å †å—çš„æ€»æ•°å‘ˆçº¿æ€§å…³ç³»(æ¯æ¬¡åˆ†é…å—ï¼Œéƒ½è¦ä»å¤´å¼€å§‹æ‰«ææ•´ä¸ªå †)ï¼Œæ‰€ä»¥å¯¹äºé€šç”¨çš„åˆ†é…å™¨ï¼Œéšå¼ç©ºé—²é“¾è¡¨æ˜¯ä¸é€‚åˆçš„ã€‚ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ˜¯å°†ç©ºé—²å—ç»„ç»‡ä¸ºæŸç§å½¢å¼çš„æ˜¾å¼æ•°æ®ç»“æ„ã€‚å¦å¤–ï¼Œæ ¹æ®å®šä¹‰ï¼Œç¨‹åºä¸éœ€è¦ä¸€ä¸ªç©ºé—²å—çš„ä¸»ä½“ï¼Œæ‰€ä»¥å®ç°è¿™ä¸ªæ•°æ®ç»“æ„çš„æŒ‡é’ˆå¯ä»¥å­˜æ”¾åœ¨è¿™äº›ç©ºé—²å—çš„ä¸»ä½“é‡Œé¢ã€‚</p>
<p><img src="/assets/csapp/ExplicitList.png" alt="æ˜¾ç¤ºç©ºé—²é“¾è¡¨" /></p>
<ul>
<li>ä½¿ç”¨åŒå‘é“¾è¡¨è€Œä¸æ˜¯éšå¼ç©ºé—²é“¾è¡¨ï¼Œä½¿é¦–æ¬¡é€‚é…çš„åˆ†é…æ—¶é—´ä»å—æ€»æ•°çš„çº¿æ€§æ—¶é—´å‡å°‘åˆ°äº†ç©ºé—²å—æ•°é‡çš„çº¿æ€§æ—¶é—´ã€‚</li>
<li>é‡Šæ”¾æ—¶é—´å–å†³äºé“¾è¡¨ä¸­å—çš„æ’åºç­–ç•¥ã€‚
<ul>
<li>ç”¨åè¿›å…ˆå‡ºçš„é¡ºåºç»´æŠ¤é“¾è¡¨ï¼Œå°†æ–°é‡Šæ”¾çš„å—æ”¾ç½®åœ¨é“¾è¡¨çš„å¼€å§‹å¤„ã€‚é‡Šæ”¾ä¸åˆå¹¶å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆã€‚</li>
<li>æŒ‰ç…§åœ°å€é¡ºåºæ¥ç»´æŠ¤é“¾è¡¨ï¼Œå…¶ä¸­é“¾è¡¨ä¸­æ¯ä¸ªå—çš„åœ°å€éƒ½å°äºå®ƒåç»§çš„åœ°å€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‡Šæ”¾ä¸€ä¸ªå—éœ€è¦çº¿æ€§æ—¶é—´çš„æœç´¢æ¥å®šä½åˆé€‚çš„å‰é©±ã€‚ä½†é¦–æ¬¡é€‚é…çš„å†…å­˜åˆ©ç”¨ç‡æ›´é«˜ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œæ˜¾å¼é“¾è¡¨çš„ç¼ºç‚¹æ˜¯ç©ºé—²å—å¿…é¡»è¶³å¤Ÿå¤§ï¼Œä»¥åŒ…å«æ‰€æœ‰éœ€è¦çš„æŒ‡é’ˆï¼Œä»¥åŠå¤´éƒ¨å’Œå¯èƒ½çš„è„šéƒ¨ã€‚è¿™å°±å¯¼è‡´äº†æ›´å¤§çš„æœ€å°å—å¤§å°ï¼Œä¹Ÿæ½œåœ¨åœ°æé«˜äº†å†…éƒ¨ç¢ç‰‡çš„ç¨‹åº¦ã€‚</p>
<h3 id="åˆ†ç¦»çš„ç©ºé—²é“¾è¡¨"> åˆ†ç¦»çš„ç©ºé—²é“¾è¡¨</h3>
<p>åˆ†ç¦»å­˜å‚¨ï¼ˆsegregated storageï¼‰ï¼Œå°±æ˜¯ç»´æŠ¤å¤šä¸ªç©ºé—²é“¾è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªé“¾è¡¨ä¸­çš„å—æœ‰å¤§è‡´ç›¸ç­‰çš„å¤§å°ã€‚ä¸€èˆ¬çš„æ€è·¯æ˜¯å°†æ‰€æœ‰å¯èƒ½çš„å—å¤§å°åˆ†æˆä¸€äº›ç­‰ä»·ç±»ï¼Œä¹Ÿå«åšå¤§å°ç±»ï¼ˆsize classï¼Œä¾‹å¦‚{17~32}è¡¨ç¤ºå¤§å°ä¸º17åˆ°32å­—ä¹‹å†…çš„å†…å­˜éƒ½å±äºè¿™ä¸€ç±»ï¼‰ã€‚<br>
åˆ†é…å™¨ç»´æŠ¤ç€ä¸€ä¸ªç©ºé—²é“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªå¤§å°ç±»ä¸€ä¸ªç©ºé—²é“¾è¡¨ï¼ŒæŒ‰ç…§å¤§å°çš„å‡åºæ’åˆ—ã€‚å½“åˆ†é…å™¨éœ€è¦ä¸€ä¸ªå¤§å°ä¸º n çš„å—æ—¶ï¼Œå®ƒå°±æœç´¢ç›¸åº”çš„ç©ºé—²é“¾è¡¨ã€‚å¦‚æœä¸èƒ½æ‰¾åˆ°åˆé€‚çš„å—ä¸ä¹‹åŒ¹é…ï¼Œå®ƒå°±æœç´¢ä¸‹ä¸€ä¸ªé“¾è¡¨ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<h4 id="ç®€å•åˆ†ç¦»å­˜å‚¨"> ç®€å•åˆ†ç¦»å­˜å‚¨</h4>
<ul>
<li>æ¯ä¸ªå¤§å°ç±»çš„ç©ºé—²é“¾è¡¨åŒ…å«å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå—çš„å¤§å°å°±æ˜¯è¿™ä¸ªå¤§å°ç±»ä¸­æœ€å¤§å…ƒç´ çš„å¤§å°ã€‚ä¾‹å¦‚{17~32}ä¸­å°±åªæœ‰å¤§å°ä¸º32å­—çš„å—ã€‚</li>
<li>ç©ºé—²å—æ˜¯ä¸ä¼šåˆ†å‰²ä»¥æ»¡è¶³åˆ†é…è¯·æ±‚çš„ã€‚</li>
<li>å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œåˆ†é…å™¨å°±å‘æ“ä½œç³»ç»Ÿè¯·æ±‚ä¸€ä¸ªå›ºå®šå¤§å°çš„é¢å¤–å†…å­˜ç‰‡ï¼ˆé€šå¸¸æ˜¯é¡µå¤§å°çš„æ•´æ•°å€ï¼‰ï¼Œå°†è¿™ä¸ªç‰‡<strong>åˆ†æˆå¤§å°ç›¸ç­‰çš„å—ï¼Œå¹¶å°†è¿™äº›å—é“¾æ¥èµ·æ¥å½¢æˆæ–°çš„ç©ºé—²é“¾è¡¨</strong>ã€‚</li>
<li>è¦é‡Šæ”¾ä¸€ä¸ªå—ï¼Œåˆ†é…å™¨åªè¦ç®€å•åœ°å°†è¿™ä¸ªå—æ’å…¥åˆ°ç›¸åº”çš„ç©ºé—²é“¾è¡¨çš„å‰éƒ¨ã€‚å› ä¸ºä¸åˆ†å‰²ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰åˆå¹¶ã€‚</li>
</ul>
<hr>
<ul>
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>åˆ†é…å’Œé‡Šæ”¾å—éƒ½å¾ˆå¿«ï¼Œå¸¸æ•°æ—¶é—´ã€‚</li>
<li>æ¯ä¸ªç‰‡ä¸­éƒ½æ˜¯å¤§å°ç›¸ç­‰çš„å—ï¼Œä¸åˆ†å‰²ï¼Œä¸åˆå¹¶ï¼Œå†…å­˜å¼€é”€å°‘(ä¸éœ€è¦å¤´éƒ¨ï¼Œè„šéƒ¨ï¼Œå•å‘é“¾è¡¨åªè¦ä¸€ä¸ªæŒ‡é’ˆ)ã€‚</li>
<li>æœ€å°å—å¤§å°ä¸ºä¸€ä¸ªå­—ï¼Œå³succæŒ‡é’ˆ</li>
</ul>
</li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>éå¸¸å®¹æ˜“é€ æˆå†…éƒ¨å’Œå¤–éƒ¨ç¢ç‰‡ã€‚</li>
</ul>
</li>
</ul>
<h4 id="åˆ†ç¦»é€‚é…"> åˆ†ç¦»é€‚é…</h4>
<p>æ¯ä¸ªé“¾è¡¨åŒ…å«æ½œåœ¨çš„å¤§å°ä¸åŒçš„å—ï¼Œè¿™äº›å—çš„å¤§å°æ˜¯å¤§å°ç±»çš„æˆå‘˜ã€‚</p>
<ul>
<li>ä¸ºäº†åˆ†é…ä¸€ä¸ªå—ï¼Œå¿…é¡»ç¡®å®šè¯·æ±‚çš„å¤§å°ç±»ï¼Œå¹¶ä¸”å¯¹é€‚å½“çš„ç©ºé—²é“¾è¡¨åšé¦–æ¬¡é€‚é…ï¼ŒæŸ»æ‰¾ä¸€ä¸ªåˆé€‚çš„å—ã€‚</li>
<li>å¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªï¼Œé‚£ä¹ˆå°±ï¼ˆå¯é€‰åœ°ï¼‰åˆ†å‰²å®ƒï¼Œå¹¶å°†å‰©ä½™çš„éƒ¨åˆ†æ’å…¥åˆ°é€‚å½“çš„ç©ºé—²é“¾è¡¨ä¸­ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±æœç´¢ä¸‹ä¸€ä¸ªæ›´å¤§çš„å¤§å°ç±»çš„ç©ºé—²é“¾è¡¨ã€‚å¦‚æ­¤é‡å¤ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å—ã€‚</li>
<li>å¦‚æœç©ºé—²é“¾è¡¨ä¸­æ²¡æœ‰åˆé€‚çš„å—ï¼Œé‚£ä¹ˆå°±å‘æ“ä½œç³»ç»Ÿè¯·æ±‚é¢å¤–çš„å †å†…å­˜ï¼Œä»è¿™ä¸ªæ–°çš„å †å†…å­˜ä¸­<strong>åˆ†é…å‡ºä¸€ä¸ªå—</strong>ï¼Œå°†å‰©ä½™éƒ¨åˆ†æ”¾ç½®åœ¨é€‚å½“çš„å¤§å°ç±»ä¸­ã€‚</li>
<li>è¦é‡Šæ”¾ä¸€ä¸ªå—ï¼Œæ‰§è¡Œåˆå¹¶ï¼Œå¹¶å°†ç»“æœæ”¾ç½®åˆ°ç›¸åº”çš„ç©ºé—²é“¾è¡¨ä¸­ã€‚</li>
</ul>
<p>åˆ†ç¦»é€‚é…æ–¹æ³•æ˜¯ä¸€ç§å¸¸è§çš„é€‰æ‹©ï¼ŒC æ ‡å‡†åº“ä¸­æä¾›çš„ GNU malloc åŒ…å°±æ˜¯é‡†ç”¨çš„è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºè¿™ç§æ–¹æ³•æ—¢å¿«é€Ÿï¼Œå¯¹å†…å­˜çš„ä½¿ç”¨ä¹Ÿå¾ˆæœ‰æ•ˆç‡ã€‚</p>
<h4 id="ä¼™ä¼´ç³»ç»Ÿ"> ä¼™ä¼´ç³»ç»Ÿ</h4>
<p>ä¼™ä¼´ç³»ç»Ÿï¼ˆbuddy systemï¼‰æ˜¯åˆ†ç¦»é€‚é…çš„ä¸€ç§ç‰¹ä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªå¤§å°ç±»éƒ½æ˜¯ 2 çš„å¹‚ã€‚åŸºæœ¬çš„æ€è·¯æ˜¯å‡è®¾ä¸€ä¸ªå †çš„å¤§å°ä¸º<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6644em;"></span><span><span>2</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>m</span></span></span></span></span></span></span></span></span></span></span>ä¸ªå­—ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªå—å¤§å°<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8491em;"></span><span><span>2</span><span><span><span><span style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>ç»´æŠ¤ä¸€ä¸ªåˆ†ç¦»ç©ºé—²é“¾è¡¨ï¼Œå…¶ä¸­<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.7804em;vertical-align:-0.136em;"></span><span>0</span><span style="margin-right:0.2778em;"></span><span>â‰¤</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.8304em;vertical-align:-0.136em;"></span><span style="margin-right:0.03148em;">k</span><span style="margin-right:0.2778em;"></span><span>â‰¤</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.4306em;"></span><span>m</span></span></span></span>ã€‚è¯·æ±‚å—å¤§å°å‘ä¸Šèˆå…¥åˆ°æœ€æ¥è¿‘çš„ 2 çš„å¹‚ã€‚æœ€å¼€å§‹æ—¶ï¼Œåªæœ‰ä¸€ä¸ªå¤§å°ä¸º <span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6644em;"></span><span><span>2</span><span><span><span><span style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>m</span></span></span></span></span></span></span></span></span></span></span> ä¸ªå­—çš„ç©ºé—²å—ã€‚</p>
<p>ä¸ºäº†åˆ†é…ä¸€ä¸ªå¤§å°ä¸º<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8491em;"></span><span><span>2</span><span><span><span><span style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>çš„å—ï¼Œå…ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨çš„å¤§å°è¶³å¤Ÿçš„å—ã€‚å¦‚æœå¤§å°æ­£å¥½ï¼Œç»“æŸã€‚å¦‚æœæ‰¾åˆ°çš„å—å¤§äº†ï¼Œåˆ™é€’å½’åœ°äºŒåˆ†å‰²è¿™ä¸ªå—ï¼Œç›´åˆ°å¤§å°æ­£å¥½ï¼Œå‰©ä¸‹çš„åŠå—ï¼ˆä¹Ÿå«åšä¼™ä¼´ï¼‰è¢«æ”¾ç½®åœ¨ç›¸åº”çš„ç©ºé—²é“¾è¡¨ä¸­ã€‚ä¸ºäº†é‡Šæ”¾ä¸€ä¸ªå¤§å°ä¸º<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8491em;"></span><span><span>2</span><span><span><span><span style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>çš„å—ï¼Œåªéœ€è¦åˆå¹¶ç©ºé—²çš„ä¼™ä¼´ã€‚å½“é‡åˆ°ä¸€ä¸ªå·²åˆ†é…çš„ä¼™ä¼´æ—¶ï¼Œå°±åœæ­¢åˆå¹¶ã€‚</p>
<ul>
<li>å…³é”®äº‹å®ï¼šç»™å®šåœ°å€å’Œå—çš„å¤§å°ï¼Œå¾ˆå®¹æ˜“è®¡ç®—å‡ºå®ƒçš„ä¼™ä¼´çš„åœ°å€ã€‚</li>
<li>ä¸»è¦ä¼˜ç‚¹ï¼šå¿«é€Ÿæœç´¢å’Œå¿«é€Ÿåˆå¹¶ã€‚</li>
<li>ä¸»è¦ç¼ºç‚¹ï¼šè¦æ±‚å—å¤§å°ä¸º 2 çš„å¹‚å¯èƒ½å¯¼è‡´æ˜¾è‘—çš„å†…éƒ¨ç¢ç‰‡ã€‚</li>
</ul>
<h2 id="åƒåœ¾æ”¶é›†"> åƒåœ¾æ”¶é›†</h2>
<p>åƒåœ¾æ”¶é›†å™¨ï¼ˆgarbage collectorï¼‰æ˜¯ä¸€ç§åŠ¨æ€å†…å­˜åˆ†é…å™¨ï¼Œå®ƒè‡ªåŠ¨é‡Šæ”¾ç¨‹åºä¸å†éœ€è¦çš„å·²åˆ†é…å—ã€‚è¿™äº›å—è¢«ç§°ä¸ºåƒåœ¾ï¼ˆgarbageï¼‰ã€‚è‡ªåŠ¨å›æ”¶å †å­˜å‚¨çš„è¿‡ç¨‹å«åšåƒåœ¾æ”¶é›†ï¼ˆgarbage collectionï¼‰ã€‚</p>
<h3 id="åŸºæœ¬çŸ¥è¯†"> åŸºæœ¬çŸ¥è¯†</h3>
<p>åƒåœ¾æ”¶é›†å™¨å°†å†…å­˜è§†ä¸ºä¸€å¼ æœ‰å‘å¯è¾¾å›¾ï¼ˆreachability graphï¼‰ï¼Œå…¶å½¢å¼å¦‚å›¾æ‰€ç¤ºã€‚
<img src="/assets/csapp/GarbageCollection.png" alt="åƒåœ¾æ”¶é›†" /><br>
è¯¥å›¾çš„èŠ‚ç‚¹è¢«åˆ†æˆä¸€ç»„æ ¹èŠ‚ç‚¹ï¼ˆroot nodeï¼‰å’Œä¸€ç»„å †èŠ‚ç‚¹ï¼ˆheap nodeï¼‰ã€‚</p>
<ul>
<li>æ¯ä¸ªå †èŠ‚ç‚¹å¯¹åº”äºå †ä¸­çš„ä¸€ä¸ªå·²åˆ†é…å—ã€‚</li>
<li>æœ‰å‘è¾¹ pâ†’q æ„å‘³ç€å— p ä¸­çš„æŸä¸ªä½ç½®æŒ‡å‘å— q ä¸­çš„æŸä¸ªä½ç½®ã€‚</li>
<li>æ ¹èŠ‚ç‚¹å¯¹åº”äºæœ¬èº«ä¸å†å †ä¸­ï¼Œä½†åŒ…å«æŒ‡å‘å †çš„æŒ‡é’ˆçš„å˜é‡ã€‚</li>
<li>pæ˜¯å¯è¾¾çš„ï¼šå­˜åœ¨ä¸€æ¡ä»ä»»æ„æ ¹èŠ‚ç‚¹å‡ºå‘å¹¶åˆ°è¾¾ p çš„æœ‰å‘è·¯å¾„</li>
</ul>
<p>Java çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå¯¹åº”ç”¨å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨æŒ‡é’ˆæœ‰å¾ˆä¸¥æ ¼çš„æ§åˆ¶ï¼Œèƒ½å¤Ÿç»´æŠ¤å¯è¾¾å›¾çš„ä¸€ç§ç²¾ç¡®çš„è¡¨ç¤ºï¼Œå› æ­¤ä¹Ÿå°±èƒ½å¤Ÿå›æ”¶æ‰€æœ‰åƒåœ¾ã€‚ç„¶è€Œï¼Œè¯¸å¦‚ C å’Œ C++ è¿™æ ·çš„è¯­è¨€çš„æ”¶é›†å™¨é€šå¸¸ä¸èƒ½ç»´æŒå¯è¾¾å›¾çš„ç²¾ç¡®è¡¨ç¤ºã€‚è¿™æ ·çš„æ”¶é›†å™¨ä¹Ÿå«åšä¿å®ˆçš„åƒåœ¾æ”¶é›†å™¨ï¼ˆconservative garbage collectorï¼‰ã€‚å³æ¯ä¸ªå¯è¾¾å—éƒ½è¢«æ­£ç¡®åœ°æ ‡è®°ä¸ºå¯è¾¾äº†ï¼Œè€Œä¸€äº›ä¸å¯è¾¾èŠ‚ç‚¹å´å¯èƒ½è¢«é”™è¯¯åœ°æ ‡è®°ä¸ºå¯è¾¾ã€‚</p>
<p>å‘mallocåŒ…ä¸­åŠ å…¥ä¿å®ˆçš„GCåï¼Œmallocçš„æµç¨‹ä¸º</p>
<ol>
<li>å‘mallocè¯·æ±‚ç©ºé—´ï¼Œæ‰¾åˆ°äº†ï¼Œè¿”å›ã€‚</li>
<li>æ‰¾ä¸åˆ°åˆé€‚çš„ç©ºé—²å—ï¼Œåˆ™è°ƒç”¨GCï¼Œå¸Œæœ›å›æ”¶ä¸€äº›åƒåœ¾åˆ°ç©ºé—²é“¾è¡¨ã€‚</li>
<li>GCè¿”å›ï¼Œmallocé‡è¯•ã€‚æˆåŠŸæ‰¾åˆ°ï¼Œè¿”å›ã€‚</li>
<li>è¿˜æ˜¯å¤±è´¥ï¼Œå‘OSè¦æ±‚é¢å¤–çš„å†…å­˜ã€‚æˆåŠŸï¼Œè¿”å›æŒ‡é’ˆï¼Œå¦åˆ™è¿”å›NULLã€‚</li>
</ol>
<h3 id="mark-sweepåƒåœ¾æ”¶é›†å™¨"> Mark&amp;Sweepåƒåœ¾æ”¶é›†å™¨</h3>
<p>Mark&amp;Sweep åƒåœ¾æ”¶é›†å™¨ç”±æ ‡è®°ï¼ˆmarkï¼‰é˜¶æ®µå’Œæ¸…é™¤ï¼ˆsweepï¼‰é˜¶æ®µç»„æˆï¼Œæ ‡è®°é˜¶æ®µæ ‡è®°å‡ºæ ¹èŠ‚ç‚¹çš„æ‰€æœ‰å¯è¾¾çš„å’Œå·²åˆ†é…çš„åç»§ï¼Œè€Œåé¢çš„æ¸…é™¤é˜¶æ®µé‡Šæ”¾æ¯ä¸ªæœªè¢«æ ‡è®°çš„å·²åˆ†é…å—ã€‚å—å¤´éƒ¨ä¸­ç©ºé—²çš„ä½ä½ä¸­çš„ä¸€ä½é€šå¸¸ç”¨æ¥è¡¨ç¤ºè¿™ä¸ªå—æ˜¯å¦è¢«æ ‡è®°äº†ã€‚</p>
<p>æè¿°æ‰€éœ€å‡½æ•°</p>
<ul>
<li>ptr å®šä¹‰ä¸º typedef void* ptrï¼š</li>
<li>ptr isPtr (ptr p)ã€‚å¦‚æœ p æŒ‡å‘ä¸€ä¸ªå·²åˆ†é…å—ä¸­çš„æŸä¸ªå­—ï¼Œé‚£ä¹ˆå°±è¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªå—çš„èµ·å§‹ä½ç½®çš„æŒ‡é’ˆ bã€‚å¦åˆ™è¿”å› NULLã€‚</li>
<li>int blockMarked(ptr b)ã€‚å¦‚æœå— b æ˜¯å·²æ ‡è®°çš„ï¼Œé‚£ä¹ˆå°±è¿”å› trueã€‚</li>
<li>int blockAllocated (ptr b)ã€‚å¦‚æœå— b æ˜¯å·²åˆ†é…çš„ï¼Œé‚£ä¹ˆå°±è¿”å› trueã€‚</li>
<li>void markBlock (ptr b)ã€‚æ ‡è®°å— bã€‚</li>
<li>int length (b)ã€‚è¿”å›å— b çš„ä»¥å­—ä¸ºå•ä½çš„é•¿åº¦(ä¸åŒ…æ‹¬å¤´éƒ¨)ã€‚</li>
<li>void unmarkBlock (ptr b)ã€‚å°†å— b çš„çŠ¶æ€ç”±å·²æ ‡è®°çš„æ”¹ä¸ºæœªæ ‡è®°çš„ã€‚</li>
<li>ptr nextBlock (ptr b)ã€‚è¿”å›å †ä¸­å— b çš„åç»§ã€‚</li>
</ul>
<div><pre><code><span>void</span> <span>mark</span><span>(</span>ptr p<span>)</span> <span>{</span>
    <span>if</span> <span>(</span><span>(</span>b <span>=</span> <span>isPtr</span><span>(</span>p<span>)</span><span>)</span> <span>==</span> <span>NULL</span><span>)</span>
        <span>return</span><span>;</span>
    <span>if</span> <span>(</span><span>blockMarked</span><span>(</span>b<span>)</span><span>)</span>
        <span>return</span><span>;</span>
    <span>markBlock</span><span>(</span>b<span>)</span><span>;</span>
    len <span>=</span> <span>length</span><span>(</span>b<span>)</span><span>;</span>
    <span>for</span> <span>(</span>i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> len<span>;</span> i<span>++</span><span>)</span>
        <span>mark</span><span>(</span>b<span>[</span>i<span>]</span><span>)</span><span>;</span>
    <span>return</span><span>;</span>
<span>}</span>

<span>void</span> <span>sweep</span><span>(</span>ptr b<span>,</span> ptr end<span>)</span> <span>{</span>
    <span>while</span> <span>(</span>b <span>&lt;</span> end<span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>blockMarked</span><span>(</span>b<span>)</span><span>)</span>
            <span>unmarkBlock</span><span>(</span>b<span>)</span><span>;</span>
        <span>else</span> <span>if</span> <span>(</span><span>blockAllocated</span><span>(</span>b<span>)</span><span>)</span>
            <span>free</span><span>(</span>b<span>)</span><span>;</span>
        b <span>=</span> <span>nextBlock</span><span>(</span>b<span>)</span><span>;</span>
    <span>}</span>
    <span>return</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><ul>
<li>æ ‡è®°é˜¶æ®µä¸ºæ¯ä¸ªæ ¹èŠ‚ç‚¹è°ƒç”¨ä¸€æ¬¡ mark å‡½æ•°ã€‚</li>
<li>æ¸…ç†é˜¶æ®µå¾ªç¯éå†å †ä¸Šçš„æ¯ä¸ªå—ï¼Œä¸ºæ¯ä¸ªè°ƒç”¨ sweep å‡½æ•°ã€‚ç›´åˆ°æŸæ¬¡å¾ªç¯æ²¡æœ‰æ¸…ç†ä»»ä½•å—ã€‚</li>
</ul>
<hr>
<p>cè¯­è¨€çš„isPtrå‡½æ•°å­˜åœ¨çš„é—®é¢˜</p>
<ul>
<li>C ä¸ä¼šç”¨ä»»ä½•ç±»å‹ä¿¡æ¯æ¥æ ‡è®°å†…å­˜ä½ç½®ã€‚å› æ­¤ï¼Œå¯¹ isPtr æ²¡æœ‰ä¸€ç§æ˜æ˜¾çš„æ–¹å¼æ¥åˆ¤æ–­å®ƒçš„è¾“å…¥å‚æ•° p æ˜¯ä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚è¿™å¯¼è‡´äº†Cç¨‹åºçš„Mark&amp;Sweepæ”¶é›†å™¨å¿…é¡»æ˜¯ä¿å®ˆçš„ã€‚</li>
<li>å³ä½¿ p æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒisPtr ä¹Ÿæ²¡æœ‰æ˜æ˜¾çš„æ–¹å¼æ¥åˆ¤æ–­ p æ˜¯å¦æŒ‡å‘ä¸€ä¸ªå·²åˆ†é…å—çš„æœ‰æ•ˆè½½è·ä¸­çš„æŸä¸ªä½ç½®ã€‚è§£å†³æ–¹æ³•æ˜¯å°†å·²åˆ†é…å—é›†åˆç»´æŠ¤æˆä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ï¼Œè¿™æ£µæ ‘ä¿æŒç€è¿™æ ·ä¸€ä¸ªå±æ€§ï¼šå·¦å­æ ‘ä¸­çš„æ‰€æœ‰å—éƒ½æ”¾åœ¨è¾ƒå°çš„åœ°å€å¤„ï¼Œè€Œå³å­æ ‘ä¸­çš„æ‰€æœ‰å—éƒ½æ”¾åœ¨è¾ƒå¤§çš„åœ°å€å¤„ã€‚æ¯ä¸ªå·²åˆ†é…å—çš„å¤´éƒ¨é‡Œæœ‰ä¸¤ä¸ªé™„åŠ å­—æ®µï¼ˆleft å’Œ rightï¼‰ã€‚æ¯ä¸ªå­—æ®µæŒ‡å‘æŸä¸ªå·²åˆ†é…å—çš„å¤´éƒ¨ã€‚isPtr(ptr p) å‡½æ•°ç”¨æ ‘æ¥æ‰§è¡Œå¯¹å·²åˆ†é…å—çš„äºŒåˆ†æŸ¥æ‰¾ã€‚åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œå®ƒä¾èµ–äºå—å¤´éƒ¨ä¸­çš„å¤§å°å­—æ®µæ¥åˆ¤æ–­ p æ˜¯å¦è½åœ¨è¿™ä¸ªå—çš„èŒƒå›´ä¹‹å†…ã€‚
<img src="/assets/csapp/GCBST.png" alt="åƒåœ¾æ”¶é›†å¹³è¡¡äºŒå‰æ ‘" /></li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">gdb</title>
    <id>https://kigane.github.io/note/cs/gdb-cheatsheet/</id>
    <link href="https://kigane.github.io/note/cs/gdb-cheatsheet/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="gdb-cheatsheet"> gdb cheatsheet</h2>
<p><a href="https://sourceware.org/gdb/onlinedocs/gdb/index.html#SEC_Contents" target="_blank" rel="noopener noreferrer">gdb æ–‡æ¡£</a></p>
<ul>
<li>-g: ç”Ÿæˆdebugging symbolsï¼Œä½¿å¾—è°ƒè¯•æ›´é«˜æ•ˆã€‚-ggdbï¼ŒåŒ…å«gdbè§„å®šçš„ç¬¦å·ã€‚</li>
</ul>
<p>gdb [--args] program [args]è¿›å…¥debugæ¨¡å¼</p>
<ul>
<li>set args &lt;args&gt;</li>
<li>run: æ‰§è¡Œç¨‹åº</li>
<li>kill: å…³é—­æ‰§è¡Œçš„ç¨‹åº</li>
<li>help</li>
</ul>
<p>æ£€æŸ¥æ ˆ</p>
<ul>
<li>backtrace/where | bt: æŸ¥çœ‹è°ƒç”¨æ ˆ</li>
<li>backtrace/where full: æŸ¥çœ‹è°ƒç”¨æ ˆï¼Œä¹Ÿæ‰“å°æ ˆå¸§ä¸­çš„å˜é‡</li>
<li>frame frame#: æŸ¥çœ‹æŒ‡å®šå¸§(backtraceåˆ—å‡ºçš„ä¿¡æ¯å¼€å¤´çš„æ•°å­—)</li>
</ul>
<p>å˜é‡å’Œå†…å­˜</p>
<ul>
<li>x/nfu addr: examine addrã€‚æŸ¥çœ‹æŒ‡å®šåœ°å€çš„å€¼
<ul>
<li>n: è¦æ‰“å°çš„unitæ•°é‡</li>
<li>f: format</li>
<li>u: unit (b:Byte 1B, h:Half-word 2B, w:Word 4B, g:Giant word 8B)</li>
</ul>
</li>
<li>p &lt;what&gt;: æŸ¥çœ‹å˜é‡çš„å€¼</li>
<li>p arr[n]@m: æŸ¥çœ‹æ•°ç»„arrä»nå¼€å§‹æ•°ï¼Œå…±mä¸ªå…ƒç´ </li>
<li>print/format &lt;what&gt;: æŸ¥çœ‹å˜é‡çš„å€¼</li>
<li>display/format &lt;what&gt;: åœ¨æ¯ä¸ªstepæŒ‡ä»¤åæ‰“å°å˜é‡çš„å€¼</li>
<li>undisplay display#: ä¸å†ç›‘è§†</li>
<li>enable/disable display#</li>
<li>&lt;what&gt;
<ul>
<li>expressions</li>
<li>filename::variable_name</li>
<li>function::variable_name</li>
<li>{type}address : åœ¨addresså¤„çš„å†…å®¹ï¼Œè§£é‡Šä¸ºCçš„typeç±»å‹ã€‚</li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.854em;vertical-align:-0.1944em;"></span><span>re</span><span style="margin-right:0.03588em;">g</span><span>i</span><span>s</span><span>t</span><span style="margin-right:0.02778em;">er</span><span style="margin-right:0.2778em;"></span><span>:</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.6833em;"></span><span>æœ‰åå­—çš„å¯„å­˜å™¨ï¼Œå¦‚</span></span></span></span>esp--æ ˆæŒ‡é’ˆï¼Œ<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8889em;vertical-align:-0.1944em;"></span><span>e</span><span>b</span><span>p</span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:0.7667em;vertical-align:-0.0833em;"></span><span>âˆ’</span><span>å¸§åŸºå€ï¼Œ</span></span></span></span>eip--æŒ‡ä»¤æŒ‡é’ˆ</li>
</ul>
</li>
<li>format
<ul>
<li>a: æŒ‡é’ˆ</li>
<li>c: è¯»ä¸ºintï¼Œæ‰“å°ä¸ºchar</li>
<li>d: æœ‰ç¬¦å·int</li>
<li>f: æµ®ç‚¹æ•°</li>
<li>o: å…«è¿›åˆ¶int</li>
<li>s: Try to treat as C string</li>
<li>t: äºŒè¿›åˆ¶int</li>
<li>u: æ— ç¬¦å·int</li>
<li>x: åå…­è¿›åˆ¶int</li>
</ul>
</li>
</ul>
<p>æŸ¥çœ‹æºç </p>
<ul>
<li>list line_number: æŸ¥çœ‹101è¡Œé™„ä»¶10è¡Œ</li>
<li>list from,to: æŸ¥çœ‹ä»fromåˆ°toè¡Œ</li>
<li>list -: æŸ¥çœ‹å‰10è¡Œ</li>
<li>list &lt;where&gt;</li>
</ul>
<p>æ–­ç‚¹</p>
<ul>
<li>break where: åœ¨æŒ‡å®šä½ç½®è®¾ç½®ä¸€ä¸ªæ–­ç‚¹(ä¼šè¾“å‡ºæ–­ç‚¹æ‰€åœ¨å…·ä½“ä½ç½®ï¼Œæ³¨æ„åˆ°æ–­ç‚¹æœ‰åºå·ï¼ŒBreakpoint 1 at 0x29fa0: file main.cc, line 52.)</li>
<li>where
<ul>
<li>function_name</li>
<li>line_number: å½“å‰æ–‡ä»¶çš„æŸè¡Œ</li>
<li>file:line_number</li>
</ul>
</li>
<li>delete breakpoint#: åˆ é™¤æŒ‡å®šæ–­ç‚¹</li>
<li>enable breakpoint</li>
<li>disable breakpoint</li>
<li>clear: åˆ é™¤æ‰€æœ‰æ–­ç‚¹</li>
<li>condition 1 var==666: ä»…å½“å˜é‡varçš„å€¼ä¸º666æ—¶ï¼Œæ‰è§¦å‘æ–­ç‚¹1ã€‚</li>
<li>break/watch &lt;where&gt; if &lt;condition&gt;</li>
<li>watch where // breakpoint å’Œ watchpoint å…±ç”¨ç¼–å·ã€‚</li>
<li>watchpoint æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œå…·ä½“å–å†³äºä½ çš„ç³»ç»Ÿã€‚è½¯ä»¶å®ç°æ–¹å¼ä¸ºåœ¨æ¯ä¸€æ­¥æ‰§è¡Œåéƒ½æµ‹è¯•ä¸€æ¬¡exprçš„å€¼ï¼Œä¼šå¾ˆæ…¢ã€‚ç¡¬ä»¶æ–¹å¼æ›´å¿«ã€‚</li>
<li>watch [-l|-location] expr [thread thread-id] [mask maskvalue]  ä¸ºexprè®¾ç½®ä¸€ä¸ªç›‘è§†ç‚¹ã€‚å¦‚æœexprçš„å€¼æ”¹å˜äº†ï¼Œåˆ™åœæ­¢æ‰§è¡Œã€‚
<ul>
<li>thread thread-id æŒ‡å®šæŸä¸ªçº¿ç¨‹ï¼Œåªæœ‰è¯¥çº¿ç¨‹ä¿®æ”¹exprçš„å€¼æ—¶æ‰åœæ­¢æ‰§è¡Œã€‚(ä»…é™ç¡¬ä»¶å®ç°)</li>
<li>-l å‘Šè¯‰gdbï¼Œå¦‚æœexprçš„ç»“æœæ˜¯ä¸ªåœ°å€ï¼Œåˆ™æŸ¥çœ‹è¯¥åœ°å€çš„å†…å®¹ã€‚å¦‚æœç»“æœä¸æ˜¯åœ°å€ï¼Œåˆ™è¾“å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li>
<li>mask maskvalue é»˜è®¤å¼€å¯-lã€‚maskvalueç”¨äºåŒæ—¶æŸ¥çœ‹å¤šæ•°åœ°å€ã€‚ watch foo mask 0xffffff00ï¼Ÿ</li>
</ul>
</li>
<li>rwatch expr åœ¨exprè¢«ç¨‹åºè¯»å–æ—¶break</li>
<li>awatch expr åœ¨exprè¢«è¯»å–æˆ–è¢«ä¿®æ”¹æ—¶éƒ½break</li>
<li>delete/enable/disable watchpoint#</li>
</ul>
<p>æ­¥è¿›</p>
<ul>
<li>gdbçš„ä¸€ä¸ªæœ‰ç”¨çš„ç‰¹æ€§ï¼šå¦‚æœç›´æ¥æŒ‰å›è½¦ï¼Œä¼šé‡å¤æ‰§è¡Œä¸Šä¸€ä¸ªå‘½ä»¤</li>
<li>step: åˆ°ä¸‹ä¸€è¡Œã€‚å¦‚æœæœ‰å‡½æ•°ä¼šè¿›å…¥å‡½æ•°</li>
<li>next: åˆ°ä¸‹ä¸€è¡Œã€‚ä¸ä¼šè¿›å…¥å‡½æ•°</li>
<li>finish: å°†å½“å‰å‡½æ•°æ‰§è¡Œå®Œ</li>
<li>continue | cont: ç»§ç»­æ­£å¸¸æ‰§è¡Œ</li>
<li>quit: é€€å‡º</li>
</ul>
<p>åå‘æ‰§è¡Œ</p>
<ul>
<li>record åå‘æ‰§è¡Œçš„å‰ç½®æ¡ä»¶</li>
<li>reverse-step</li>
<li>reverse-next</li>
<li>reverse-continue</li>
<li>reverse-finish å›åˆ°å‡½æ•°æ‰§è¡Œå‰</li>
<li>set exec-direction reverse æ‰€æœ‰next,step...å…¨å˜ä¸ºé€†å‘æ“ä½œ</li>
<li>set exec-direction forward æ¢å¤æ­£å¸¸</li>
</ul>
<p>ä¿¡æ¯</p>
<ul>
<li>info args: å½“å‰æ ˆå¸§çš„å‡½æ•°å‚æ•°</li>
<li>info breakpoints/watchpoints</li>
<li>info locals: å½“å‰æ ˆå¸§çš„æœ¬åœ°å˜é‡</li>
<li>info sharedlibrary: åˆ—å‡ºå·²åŠ è½½çš„åŠ¨æ€åº“</li>
<li>info signals: åˆ—å‡ºæ‰€æœ‰ä¿¡å·å’Œä»–ä»¬å½“å‰æ˜¯å¦‚ä½•å¤„ç†çš„</li>
<li>info threads</li>
<li>show directories: åˆ—å‡ºGDBæœç´¢æ¶‰åŠåˆ°çš„æºæ–‡ä»¶</li>
<li>show listsize</li>
<li>whatis variable_name: è¾“å‡ºå˜é‡çš„ç±»å‹</li>
</ul>
<h2 id="gdb-tui"> gdb-tui</h2>
<p>æ ‡å¿—</p>
<ul>
<li>
<p><code>&gt;</code> å½“å‰æ‰§è¡Œçš„è¡Œ</p>
</li>
<li>
<p>æ–­ç‚¹è¡¨ç¤º [b|B][+|-]</p>
<ul>
<li><code>b</code> è¡¨ç¤ºè¿˜æ²¡åˆ°çš„æ–­ç‚¹</li>
<li><code>B</code> è¡¨ç¤ºè‡³å°‘åˆ°è¿‡ä¸€æ¬¡çš„æ–­ç‚¹</li>
<li><code>+</code> è¡¨ç¤º enabled</li>
<li><code>-</code> è¡¨ç¤º disabled</li>
</ul>
</li>
<li>
<p>C-x a/A/C-a: è¿›å…¥æˆ–ç¦»å¼€TUIæ¨¡å¼</p>
</li>
<li>
<p>C-x 1: ä¿ç•™ä¸€ä¸ªçª—å£</p>
</li>
<li>
<p>C-x 2: ä¿ç•™ä¸¤ä¸ªçª—å£</p>
</li>
<li>
<p>C-x o: åˆ‡æ¢å½“å‰æ´»åŠ¨çš„çª—å£</p>
</li>
<li>
<p>C-x s: åˆ‡æ¢åˆ°TUIçš„å•é”®æ¨¡å¼</p>
</li>
<li>
<p>PgUp,PgDn,ä¸Šä¸‹å·¦å³å¯ç”¨äºæ“ä½œæ´»åŠ¨çª—å£ã€‚</p>
</li>
<li>
<p>å½“ç„¦ç‚¹ä¸åœ¨cmdçª—å£æ—¶ï¼ŒC-pç›¸å½“äºUp,C-bç›¸å½“äºLeft,C-fç›¸å½“äºRight,C-nç›¸å½“äºDown</p>
</li>
<li>
<p>C-l: åˆ·æ–°çª—å£</p>
</li>
</ul>
<p>å•é”®æ¨¡å¼</p>
<ul>
<li>s: step</li>
<li>i: step Into</li>
<li>n: next</li>
<li>o: step Over</li>
<li>r: run</li>
<li>c: continue</li>
<li>f: finish</li>
<li>d: down åœ¨frame stackä¸­å‘ä¸‹ä¸€å±‚</li>
<li>u: up åœ¨frame stackä¸­å‘ä¸Šä¸€å±‚</li>
<li>q: é€€å‡ºå•é”®æ¨¡å¼</li>
<li>v: info local</li>
<li>w: where</li>
</ul>
<p>TUIå‘½ä»¤</p>
<ul>
<li>
<p>tui enable: è¿›å…¥ä¸Šæ¬¡ä½¿ç”¨çš„tuiçª—å£æ¨¡å¼ï¼Œæˆ–é»˜è®¤çª—å£æ¨¡å¼ã€‚</p>
</li>
<li>
<p>tui disable</p>
</li>
<li>
<p>tui new-layout name window weight [window weight ...]: æ–°å»ºä¸€ä¸ªåä¸ºnameçš„TUIçª—å£å¸ƒå±€ã€‚</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨layout nameä½¿ç”¨è¯¥å¸ƒå±€</li>
<li>window æœ‰å››ç§ src,asm,regs,cmd</li>
<li>weight æ˜¯æƒé‡ï¼Œç”¨äºç¡®å®šæ¯ä¸ªçª—å£å å±å¹•çš„æ¯”ä¾‹ã€‚statusçš„æƒé‡åº”æ€»æ˜¯è®¾ä¸º0</li>
<li>é»˜è®¤æ˜¯ä»ä¸Šåˆ°ä¸‹åˆ†å‰²ã€‚åŠ -horizontalå¯æ”¹ä¸ºä»å·¦åˆ°å³åˆ†å‰²ã€‚</li>
<li>ç¤ºä¾‹1ï¼š(gdb) tui new-layout example src 1 regs 1 status 0 cmd 1</li>
<li>ç¤ºä¾‹2ï¼š(gdb) tui new-layout example {-horizontal src 1 asm 1} 2 status 0 cmd 1</li>
<li>9.2ç‰ˆæœ¬è¿˜æ²¡æœ‰å®è£…</li>
</ul>
</li>
<li>
<p>layout nameï¼šä½¿ç”¨å†…ç½®å¸ƒå±€æˆ–æ–°å»ºçš„å¸ƒå±€</p>
<ul>
<li>prev: å‰ä¸€ä¸ª</li>
<li>next: åä¸€ä¸ª</li>
<li>src: æ˜¾ç¤ºæºç å’Œå‘½ä»¤çª—å£</li>
<li>asmï¼šæ˜¾ç¤ºæ±‡ç¼–å’Œå‘½ä»¤çª—å£</li>
<li>splitï¼šæ˜¾ç¤ºæºç ï¼Œæ±‡ç¼–å’Œå‘½ä»¤çª—å£</li>
<li>regsï¼šæ˜¾ç¤ºå¯„å­˜å™¨çª—å£ã€‚å¦‚æœåœ¨srcæ¨¡å¼åˆ™ä¸Šä¸ºå¯„å­˜å™¨ï¼Œä¸­ä¸ºæºç ã€‚å¦‚æœåœ¨splitå’Œasmæ¨¡å¼ï¼Œåˆ™ä¸Šä¸ºå¯„å­˜å™¨ï¼Œä¸­ä¸ºæ±‡ç¼–ã€‚</li>
</ul>
</li>
<li>
<p>focus name: æ”¹å˜å½“å‰æ´»åŠ¨çª—å£ã€‚</p>
</li>
<li>
<p>refresh: åˆ·æ–°çª—å£</p>
</li>
<li>
<p>winheight name +countï¼š æ”¹å˜çª—å£å¤§å°</p>
</li>
<li>
<p>winheight name -countï¼š æ”¹å˜çª—å£å¤§å°</p>
</li>
<li>
<p>tui reg groupï¼šæ˜¾ç¤ºä¸åŒçš„å¯„å­˜å™¨åˆ†ç»„</p>
<ul>
<li>general: é€šç”¨å¯„å­˜å™¨</li>
<li>float: æµ®ç‚¹æ•°å¯„å­˜å™¨</li>
<li>system: ç³»ç»Ÿå¯„å­˜å™¨</li>
<li>vector: å‘é‡å¯„å­˜å™¨</li>
<li>all</li>
</ul>
</li>
<li>
<p>set tui compact-source [on|off]ï¼šè®¾ç½®æºç çš„è¡Œå·å’Œä»£ç é—´çš„è·ç¦»ã€‚on-ä»…ä¸€ä¸ªç©ºæ ¼ï¼Œoff-ä¸€ä¸ªtabã€‚</p>
</li>
</ul>
<h2 id="å°æŠ€å·§"> å°æŠ€å·§</h2>
<ul>
<li>å¯¹ä¸€ä¸ªå¤§æ•°ç»„ï¼Œp arr[n]@mï¼ŒæŸ¥çœ‹æ•°ç»„arrä»nå¼€å§‹æ•°ï¼Œå…±mä¸ªå…ƒç´ </li>
<li>gdb å‘½ä»¤è¾“å‡ºåœ¨srcæ¨¡å¼ä¸‹å¯è§éƒ¨åˆ†å¤ªå°äº†ã€‚å¯ä»¥ä½¿ç”¨
<ul>
<li>set trace-commands on</li>
<li>set logging on</li>
<li>cd where/gdb/is/running</li>
<li>tail -f -n 30 gdb.txt</li>
<li>less +F gdb.txt å¯ä»¥ä»£æ›¿tailã€‚ ctrl+cï¼Œé€€å‡ºç­‰å¾…è¾“å…¥æ¨¡å¼ï¼Œè¿›å…¥æ™®é€šlessæ¨¡å¼ï¼Œshift+fè¿›å…¥ã€‚</li>
<li>è¿›å…¥TUIæ¨¡å¼åï¼Œæ—¥å¿—ä¼šåœæ­¢ï¼Œè¿™æ˜¯ä¸ªgdb bugã€‚å…ˆset logging offï¼Œå†set logging onå³å¯æ­£å¸¸æ˜¾ç¤ºã€‚</li>
</ul>
</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">ç¼–è¯‘å™¨ç›¸å…³</title>
    <id>https://kigane.github.io/note/cs/compiler/</id>
    <link href="https://kigane.github.io/note/cs/compiler/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="gcc"> gcc</h2>
<p>gccåœ¨ç¼–è¯‘ä»£ç æ—¶å¯ä»¥åšå‡ºä¼˜åŒ–ï¼Œé€šè¿‡é€‰é¡¹-On(n=0,1,2...)ç¡®å®šä¼˜åŒ–ç­‰çº§ã€‚ä¼˜åŒ–åçš„ä»£ç åœ¨debugæ—¶ï¼Œæ‰“å°æŸäº›å˜é‡æ—¶ä¼šå‡ºç°<code>&lt;optimized out&gt;</code>ã€‚è§£å†³æ–¹æ³•å°±æ˜¯å…³é—­ä¼˜åŒ–é€‰é¡¹ã€‚æˆ–è€…ï¼Œå¦‚æœä½ åªå…³å¿ƒæŸä¸ªå˜é‡çš„è¯ï¼Œå¯ä»¥å°†å…¶ç”¨<code>volatile</code>å…³é”®å­—ä¿®é¥°ã€‚</p>
<ul>
<li>-E é¢„ç¼–è¯‘ .c-&gt;.i å¯¹åº”cppï¼Œå³cé¢„å¤„ç†å™¨ï¼Œä¸»è¦æ˜¯åœ¨æ‰©å±•includeå’Œå®ã€‚</li>
<li>-S ç¼–è¯‘ä¸ºæ±‡ç¼–ä»£ç  .i|.c-&gt;.s å¯¹åº”cc1ï¼Œå³ç¼–è¯‘å™¨ï¼Œäº§ç”Ÿæ±‡ç¼–ä»£ç ã€‚</li>
<li>-c æ±‡ç¼– .s-&gt;.o å¯¹åº”asï¼Œå³æ±‡ç¼–å™¨ï¼Œäº§ç”Ÿå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½ä»¥äºŒè¿›åˆ¶è¡¨ç¤ºã€‚</li>
<li>-Idir å¤´æ–‡ä»¶æœç´¢è·¯å¾„</li>
<li>-Ldir å°†diræŒ‡å®šä¸ºæœç´¢åº“(-læŒ‡å®šçš„)çš„è·¯å¾„</li>
<li>-llib é“¾æ¥æ—¶ï¼Œæœç´¢liblib.a|liblib.soã€‚å¦‚æœæœ‰åŒåçš„é™æ€åº“å’ŒåŠ¨æ€åº“ï¼Œåˆ™æ— -staticæ—¶å–åŠ¨æ€åº“ï¼Œæœ‰åˆ™å–é™æ€åº“ã€‚</li>
<li>-O å¼€å¯ä¼˜åŒ–é€‰é¡¹ã€‚Og, O1, O2ç­‰å¼€å¯äº†ä¸åŒçš„ä¼˜åŒ–é€‰é¡¹ï¼Œä»æ€§èƒ½è€ƒè™‘ï¼ŒO1,O2ä¼˜åŒ–æ•ˆæœè¾ƒå¥½ï¼Œä½†äº§ç”Ÿçš„ä»£ç å˜åŒ–ä¼šå¾ˆå¤§ï¼Œå¾ˆéš¾ç†è§£æºç å’Œæœºå™¨ä»£ç çš„å…³ç³»ï¼Œæ‰€ä»¥ï¼Œå­¦ä¹ æ—¶é€šå¸¸ä½¿ç”¨Ogé€‰é¡¹ï¼Œæœ‰ä¸€å®šçš„ä¼˜åŒ–ï¼Œä½†æºç çš„æ•´ä½“ç»“æ„å¯ä»¥å¾ˆå¥½ä¿å­˜ã€‚</li>
<li>-fno-stack-protector å…³é—­æ ˆæº¢å‡ºæ£€æµ‹</li>
</ul>
<hr>
<ul>
<li>-Wall å¯ç”¨å¯¹æŸäº›ç”¨æˆ·å¯èƒ½ä¼šè®¤ä¸ºæœ‰é—®é¢˜(é€šå¸¸å®¹æ˜“é¿å…)çš„ç»“æ„çš„è­¦å‘Šã€‚</li>
<li>-Werror è®©æ‰€æœ‰çš„warningå˜æˆerrorã€‚</li>
<li>-ggdb äº§ç”Ÿç»™gdbç”¨çš„è°ƒè¯•ä¿¡æ¯ã€‚è¿™æ„å‘³ç€ä½¿ç”¨æœ€æœ‰è¡¨è¾¾æ€§çš„æ ¼å¼ã€‚(DWARF,stabsï¼Œå¦‚æœä¸¤ä¸ªéƒ½ä¸æ”¯æŒåˆ™ä½¿ç”¨æœ¬åœ°æ ¼å¼)</li>
</ul>
<h2 id="attribute"> attribute</h2>
<ul>
<li>__attribute__((unused)) å¦‚æœå˜é‡å£°æ˜äº†ï¼Œä½†æ²¡æœ‰è¢«å¼•ç”¨è¿‡ï¼Œä¹Ÿä¸å¼¹å‡ºè­¦å‘Š</li>
<li>__attribute__((used)) ç”¨äºstaticå‡½æ•°æˆ–å˜é‡ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå³ä½¿æ²¡è¢«å¼•ç”¨è¿‡ä¹Ÿè¦åœ¨objæ–‡ä»¶ä¸­ä¿ç•™(é“¾æ¥å™¨åˆ é™¤æœªä½¿ç”¨çš„sectionæ—¶ï¼Œä¸ä¼šåˆ é™¤æœ‰è¯¥å£°æ˜çš„å‡½æ•°æˆ–å˜é‡)ã€‚</li>
</ul>
<h2 id="å·¥å…·"> å·¥å…·</h2>
<h3 id="åæ±‡ç¼–å™¨-objdump"> åæ±‡ç¼–å™¨ objdump</h3>
<ul>
<li>objdump -d main.o</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">git</title>
    <id>https://kigane.github.io/note/cs/git/</id>
    <link href="https://kigane.github.io/note/cs/git/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="èµ„æº"> èµ„æº</h2>
<p><a href="https://learngitbranching.js.org/?locale=zh_CN" target="_blank" rel="noopener noreferrer">äº¤äº’å¼Gitå…¥é—¨ç½‘ç«™ å¼ºçƒˆæ¨è!!!</a><br>
<a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener noreferrer">Pro Git ä¸­æ–‡ç‰ˆ</a><br>
<a href="https://ohshitgit.com/" target="_blank" rel="noopener noreferrer">Oh Shit, Git!?! ç®€çŸ­çš„ä»‹ç»äº†å¦‚ä½•ä»Gité”™è¯¯ä¸­æ¢å¤</a></p>
<p><a href="https://eagain.net/articles/git-for-computer-scientists/" target="_blank" rel="noopener noreferrer">Git çš„æ•°æ®æ¨¡å‹</a><br>
<a href="https://jwiegley.github.io/git-from-the-bottom-up/1-Repository/1-directory-content-tracking.html" target="_blank" rel="noopener noreferrer">Git from the Bottom Up</a></p>
<h2 id="git-çš„æ•°æ®æ¨¡å‹"> Git çš„æ•°æ®æ¨¡å‹</h2>
<h3 id="å¿«ç…§"> å¿«ç…§</h3>
<p>åœ¨Gitçš„æœ¯è¯­é‡Œï¼Œæ–‡ä»¶è¢«ç§°ä½œBlobå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»„æ•°æ®ã€‚ç›®å½•åˆ™è¢«ç§°ä¹‹ä¸ºâ€œæ ‘â€ï¼Œå®ƒå°†åå­—ä¸ Blob å¯¹è±¡æˆ–æ ‘å¯¹è±¡è¿›è¡Œæ˜ å°„ï¼ˆä½¿å¾—ç›®å½•ä¸­å¯ä»¥åŒ…å«å…¶ä»–ç›®å½•ï¼‰ã€‚å¿«ç…§åˆ™æ˜¯è¢«è¿½è¸ªçš„æœ€é¡¶å±‚çš„æ ‘ã€‚</p>
<div><pre><code>&amp;lt;root&gt; (tree)
|
+- foo (tree)
|  |
|  + bar.txt (blob, contents = &quot;hello world&quot;)
|
+- baz.txt (blob, contents = &quot;git is wonderful&quot;)
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>è¿™ä¸ªé¡¶å±‚çš„æ ‘åŒ…å«äº†ä¸¤ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªåä¸º â€œfooâ€ çš„æ ‘ï¼Œä»¥åŠä¸€ä¸ª blob å¯¹è±¡ â€œbaz.txtâ€ã€‚</p>
<h3 id="å†å²è®°å½•"> å†å²è®°å½•</h3>
<p>åœ¨ Git ä¸­ï¼Œå†å²è®°å½•æ˜¯ä¸€ä¸ªç”±å¿«ç…§ç»„æˆçš„æœ‰å‘æ— ç¯å›¾ã€‚è¿™ä»£è¡¨ Git ä¸­çš„æ¯ä¸ªå¿«ç…§éƒ½æœ‰ä¸€ç³»åˆ—çš„â€œçˆ¶è¾ˆâ€ï¼Œä¹Ÿå°±æ˜¯å…¶ä¹‹å‰çš„ä¸€ç³»åˆ—å¿«ç…§ã€‚æ³¨æ„ï¼Œå¿«ç…§å…·æœ‰å¤šä¸ªâ€œçˆ¶è¾ˆâ€è€Œéä¸€ä¸ªï¼Œå› ä¸ºæŸä¸ªå¿«ç…§å¯èƒ½ç”±å¤šä¸ªçˆ¶è¾ˆè€Œæ¥ã€‚ä¾‹å¦‚ï¼Œç»è¿‡åˆå¹¶åçš„ä¸¤æ¡åˆ†æ”¯ã€‚</p>
<p>åœ¨ Git ä¸­ï¼Œè¿™äº›å¿«ç…§è¢«ç§°ä¸ºâ€œæäº¤â€ã€‚</p>
<h3 id="æ•°æ®æ¨¡å‹çš„ä¼ªç è¡¨ç¤º"> æ•°æ®æ¨¡å‹çš„ä¼ªç è¡¨ç¤º</h3>
<div><pre><code><span>//</span> æ–‡ä»¶å°±æ˜¯ä¸€ç»„æ•°æ®
<span>type</span> blob <span>=</span> array<span>&lt;</span>byte<span>></span>

<span>//</span> ä¸€ä¸ªåŒ…å«æ–‡ä»¶å’Œç›®å½•çš„ç›®å½•
<span>type</span> tree <span>=</span> <span>map</span><span>&lt;</span>string<span>,</span> tree <span>|</span> blob<span>></span>

<span>//</span> æ¯ä¸ªæäº¤éƒ½åŒ…å«ä¸€ä¸ªçˆ¶è¾ˆï¼Œå…ƒæ•°æ®å’Œé¡¶å±‚æ ‘
<span>type</span> commit <span>=</span> struct <span>{</span>
    parent<span>:</span> array<span>&lt;</span>commit<span>></span>
    author<span>:</span> string
    message<span>:</span> string
    snapshot<span>:</span> tree
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h3 id="å¯¹è±¡å’Œå†…å­˜å¯»å€"> å¯¹è±¡å’Œå†…å­˜å¯»å€</h3>
<div><pre><code><span>//</span> gitä¸­çš„å¯¹è±¡ç±»å‹
<span>type</span> <span>object</span> <span>=</span> blob <span>|</span> tree <span>|</span> commit

objects <span>=</span> <span>map</span><span>&lt;</span>string<span>,</span> <span>object</span><span>></span>

<span>//</span> Git åœ¨å‚¨å­˜æ•°æ®æ—¶ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šåŸºäºå®ƒä»¬çš„ SHA<span>-</span><span>1</span> å“ˆå¸Œ è¿›è¡Œå¯»å€
<span>def</span> <span>store</span><span>(</span><span>object</span><span>)</span><span>:</span>
    <span>id</span> <span>=</span> sha1<span>(</span><span>object</span><span>)</span>
    objects<span>[</span><span>id</span><span>]</span> <span>=</span> <span>object</span>

<span>def</span> <span>load</span><span>(</span><span>id</span><span>)</span><span>:</span>
    <span>return</span> objects<span>[</span><span>id</span><span>]</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h3 id="å¼•ç”¨"> å¼•ç”¨</h3>
<p>ç°åœ¨ï¼Œæ‰€æœ‰çš„å¿«ç…§éƒ½å¯ä»¥é€šè¿‡å®ƒä»¬çš„ SHA-1 å“ˆå¸Œå€¼æ¥æ ‡è®°äº†ã€‚ä½†è¿™ä¹Ÿå¤ªä¸æ–¹ä¾¿äº†ï¼Œè°ä¹Ÿè®°ä¸ä½ä¸€ä¸² 40 ä½çš„åå…­è¿›åˆ¶å­—ç¬¦ã€‚(Gitå¯¹å“ˆå¸Œçš„å¤„ç†å¾ˆæ™ºèƒ½ã€‚ä½ åªéœ€è¦æä¾›èƒ½å¤Ÿå”¯ä¸€æ ‡è¯†æäº¤è®°å½•çš„å‰å‡ ä¸ªå­—ç¬¦å³å¯ã€‚ä½†è¿˜æ˜¯å¾ˆä¸æ–¹ä¾¿)</p>
<p>é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼ŒGit çš„è§£å†³æ–¹æ³•æ˜¯ç»™è¿™äº›å“ˆå¸Œå€¼èµ‹äºˆäººç±»å¯è¯»çš„åå­—ï¼Œä¹Ÿå°±æ˜¯å¼•ç”¨ï¼ˆreferencesï¼‰ã€‚<strong>å¼•ç”¨æ˜¯æŒ‡å‘æäº¤çš„æŒ‡é’ˆ</strong>ã€‚ä¸å¯¹è±¡ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯å¯å˜çš„ï¼ˆå¼•ç”¨å¯ä»¥è¢«æ›´æ–°ï¼ŒæŒ‡å‘æ–°çš„æäº¤ï¼‰ã€‚ä¾‹å¦‚ï¼Œmaster å¼•ç”¨é€šå¸¸ä¼šæŒ‡å‘ä¸»åˆ†æ”¯çš„æœ€æ–°ä¸€æ¬¡æäº¤ã€‚</p>
<div><pre><code>references <span>=</span> <span>map</span><span>&lt;</span>string<span>,</span> string<span>></span>

<span>def</span> <span>update_reference</span><span>(</span>name<span>,</span> <span>id</span><span>)</span><span>:</span>
    references<span>[</span>name<span>]</span> <span>=</span> <span>id</span>

<span>def</span> <span>read_reference</span><span>(</span>name<span>)</span><span>:</span>
    <span>return</span> references<span>[</span>name<span>]</span>

<span>def</span> <span>load_reference</span><span>(</span>name_or_id<span>)</span><span>:</span>
    <span>if</span> name_or_id <span>in</span> references<span>:</span>
        <span>return</span> load<span>(</span>references<span>[</span>name_or_id<span>]</span><span>)</span>
    <span>else</span><span>:</span>
        <span>return</span> load<span>(</span>name_or_id<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦çŸ¥é“â€œæˆ‘ä»¬å½“å‰æ‰€åœ¨ä½ç½®â€ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸‹æ¥ã€‚è¿™æ ·å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„å¿«ç…§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å®ƒçš„ç›¸å¯¹ä½ç½®ï¼ˆå¦‚ä½•è®¾ç½®å®ƒçš„â€œçˆ¶è¾ˆâ€ï¼‰ã€‚åœ¨ Git ä¸­ï¼Œæˆ‘ä»¬å½“å‰çš„ä½ç½®æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç´¢å¼•ï¼Œå®ƒå°±æ˜¯ â€œHEADâ€ã€‚</p>
<p>å¦‚æœæƒ³çœ‹ HEAD æŒ‡å‘ï¼Œå¯ä»¥é€šè¿‡ cat .git/HEAD æŸ¥çœ‹ï¼Œ å¦‚æœ HEAD æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œè¿˜å¯ä»¥ç”¨ git symbolic-ref HEAD æŸ¥çœ‹å®ƒçš„æŒ‡å‘ã€‚</p>
<h3 id="ä»“åº“"> ä»“åº“</h3>
<p>Gitä»“åº“å°±æ˜¯å¯¹è±¡(æ–‡ä»¶ï¼Œç›®å½•ï¼Œæäº¤)å’Œå¼•ç”¨(åˆ†æ”¯ï¼ŒHEAD, hash, tag)ã€‚</p>
<p>åœ¨ç¡¬ç›˜ä¸Šï¼ŒGitä»…å­˜å‚¨å¯¹è±¡å’Œå¼•ç”¨ï¼šå› ä¸ºå…¶æ•°æ®æ¨¡å‹ä»…åŒ…å«è¿™äº›ä¸œè¥¿ã€‚æ‰€æœ‰çš„ git å‘½ä»¤éƒ½å¯¹åº”ç€å¯¹æäº¤æ ‘çš„æ“ä½œï¼Œä¾‹å¦‚å¢åŠ å¯¹è±¡ï¼Œå¢åŠ æˆ–åˆ é™¤å¼•ç”¨ã€‚</p>
<h2 id="ç›¸å¯¹å¼•ç”¨"> ç›¸å¯¹å¼•ç”¨</h2>
<ul>
<li>ä½¿ç”¨ ref^ å‘ä¸Šç§»åŠ¨1ä¸ªæäº¤è®°å½•(ref^^,2ä¸ª)</li>
<li>ä½¿ç”¨ ref~&lt;num&gt; å‘ä¸Šç§»åŠ¨å¤šä¸ªæäº¤è®°å½•ï¼Œå¦‚ ~3(1ä¹Ÿå¯ä»¥çœç•¥)</li>
<li>åº”ç”¨ï¼šç§»åŠ¨åˆ†æ”¯ï¼Œä½¿ç”¨-fé€‰é¡¹è®©åˆ†æ”¯æŒ‡å‘å¦ä¸€ä¸ªæäº¤ã€‚ä¾‹å¦‚:<code>git branch -f main HEAD~3</code></li>
<li>^&lt;num&gt;: å¦‚æœçˆ¶èŠ‚ç‚¹ä¸æ­¢ä¸€ä¸ªï¼Œref<sup>å°±æŒ‡å‘äº§ç”Ÿè¯¥èŠ‚ç‚¹(åœ¨è¿™é‡Œmergeçš„)çš„çˆ¶èŠ‚ç‚¹ï¼Œref</sup>2å°±æŒ‡å‘å¦ä¸€ä¸ªèŠ‚ç‚¹</li>
<li>é“¾å¼ç§»åŠ¨: <code>git checkout ~^2~3</code></li>
</ul>
<h2 id="æš‚å­˜åŒº"> æš‚å­˜åŒº</h2>
<p>Git ä¸­è¿˜åŒ…æ‹¬ä¸€ä¸ªå’Œæ•°æ®æ¨¡å‹å®Œå…¨ä¸ç›¸å…³çš„æ¦‚å¿µï¼Œä½†å®ƒç¡®æ˜¯åˆ›å»ºæäº¤çš„æ¥å£çš„ä¸€éƒ¨åˆ†ã€‚å…è®¸æ‚¨æŒ‡å®šä¸‹æ¬¡å¿«ç…§ä¸­è¦åŒ…æ‹¬é‚£äº›æ”¹åŠ¨ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼šæ‚¨å¼€å‘äº†ä¸¤ä¸ªç‹¬ç«‹çš„ç‰¹æ€§ï¼Œç„¶åå¸Œæœ›åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„æäº¤ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæäº¤ä»…åŒ…å«ç¬¬ä¸€ä¸ªç‰¹æ€§ï¼Œè€Œç¬¬äºŒä¸ªæäº¤ä»…åŒ…å«ç¬¬äºŒä¸ªç‰¹æ€§ã€‚</p>
<h2 id="tag"> tag</h2>
<p><strong>æ°¸è¿œæŒ‡å‘æŸä¸ªæäº¤è®°å½•çš„æ ‡è¯†</strong>ã€‚é€šå¸¸è½¯ä»¶å‘å¸ƒæ–°çš„å¤§ç‰ˆæœ¬ï¼Œæˆ–è€…æ˜¯ä¿®æ­£ä¸€äº›é‡è¦çš„Bugæˆ–æ˜¯å¢åŠ äº†æŸäº›æ–°ç‰¹æ€§è¿™ç§é‡è¦çš„ä¿®æ”¹å¯ä»¥æ·»åŠ ä¸€ä¸ªtagã€‚</p>
<p>tagå¯ä»¥(åœ¨æŸç§ç¨‹åº¦ä¸Š â€”â€” å› ä¸ºæ ‡ç­¾å¯ä»¥è¢«åˆ é™¤åé‡æ–°åœ¨å¦å¤–ä¸€ä¸ªä½ç½®åˆ›å»ºåŒåçš„æ ‡ç­¾)æ°¸ä¹…åœ°å°†æŸä¸ªç‰¹å®šçš„æäº¤å‘½åä¸ºé‡Œç¨‹ç¢‘ï¼Œç„¶åå°±å¯ä»¥åƒåˆ†æ”¯ä¸€æ ·å¼•ç”¨äº†ã€‚</p>
<p>æ›´éš¾å¾—çš„æ˜¯ï¼Œå®ƒä»¬å¹¶ä¸ä¼šéšç€æ–°çš„æäº¤è€Œç§»åŠ¨ã€‚ä½ ä¹Ÿä¸èƒ½æ£€å‡ºåˆ°æŸä¸ªæ ‡ç­¾ä¸Šé¢è¿›è¡Œä¿®æ”¹æäº¤ï¼Œå®ƒå°±åƒæ˜¯æäº¤æ ‘ä¸Šçš„ä¸€ä¸ªé”šç‚¹ï¼Œæ ‡è¯†äº†æŸä¸ªç‰¹å®šçš„ä½ç½®ã€‚</p>
<div><pre><code><span>git</span> tag tagName refspec <span># åœ¨refspecæäº¤ä¸Šå»ºç«‹ä¸€ä¸ªæ ‡ç­¾tagName</span>
<span>git</span> tag tagName <span># åœ¨HEADæŒ‡å‘çš„æäº¤ä¸Šå»ºç«‹ä¸€ä¸ªæ ‡ç­¾</span>
<span>git</span> describe refspec <span># ç»“æœæ ¼å¼ä¸ºtagName_distance_ghashï¼ŒtagNameæ˜¯ç¦»refspecæœ€è¿‘çš„tagçš„åç§°ï¼Œdistanceæ˜¯refspecç¦»tagçš„è·ç¦»ï¼Œhashæ˜¯refspec hashå€¼çš„å‰å‡ ä½ã€‚</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h2 id="cheatsheet"> cheatsheet</h2>
<p>Gitä¸­â€œrefspecâ€ æ˜¯ä¸€ä¸ªè‡ªé€ çš„è¯ï¼Œæ„æ€æ˜¯Gitèƒ½è¯†åˆ«çš„ä½ç½®(æ¯”å¦‚åˆ†æ”¯fooæˆ–è€…HEAD~1)ã€‚å¦‚æœéœ€è¦refspecå‚æ•°ç¼ºçœä¸ºHEADã€‚</p>
<p>åŸºç¡€</p>
<ul>
<li>git help &lt;command&gt;: è·å– git å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</li>
<li>git init: åˆ›å»ºä¸€ä¸ªæ–°çš„ git ä»“åº“ï¼Œå…¶æ•°æ®ä¼šå­˜æ”¾åœ¨ä¸€ä¸ªåä¸º .git çš„ç›®å½•ä¸‹</li>
<li>git status: æ˜¾ç¤ºå½“å‰çš„ä»“åº“çŠ¶æ€</li>
<li>git add &lt;filename&gt;: æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº</li>
<li>git commit: åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤</li>
<li>git commit --allow-empty: åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œå…è®¸æ²¡æœ‰ä¿®æ”¹</li>
<li>git log: æ˜¾ç¤ºå†å²æ—¥å¿—</li>
<li>git log --author who: æ˜¾ç¤ºwhoæäº¤çš„å†å²æ—¥å¿—</li>
<li>git log --all --graph --decorate: å¯è§†åŒ–å†å²è®°å½•ï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰</li>
<li>git diff &lt;filename&gt;: æ˜¾ç¤ºä¸æš‚å­˜åŒºæ–‡ä»¶çš„å·®å¼‚</li>
<li>git diff &lt;revision&gt; &lt;filename&gt;: æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚</li>
<li>git checkout &lt;revision&gt;: æ›´æ–° HEAD å’Œç›®å‰çš„åˆ†æ”¯</li>
</ul>
<p>åˆ†æ”¯å’Œåˆå¹¶</p>
<ul>
<li>git branch: æ˜¾ç¤ºåˆ†æ”¯</li>
<li>git branch &lt;name&gt;: åˆ›å»ºåˆ†æ”¯</li>
<li>git checkout -b &lt;name&gt;: åˆ›å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</li>
<li>git merge refspec: åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</li>
<li>git mergetool: ä½¿ç”¨å·¥å…·æ¥å¤„ç†åˆå¹¶å†²çª</li>
<li>git rebase: å°†ä¸€ç³»åˆ—è¡¥ä¸å˜åŸºï¼ˆrebaseï¼‰ä¸ºæ–°çš„åŸºçº¿</li>
</ul>
<p>è¿œç«¯æ“ä½œ</p>
<ul>
<li>git remote: åˆ—å‡ºè¿œç«¯</li>
<li>git remote add &lt;name&gt; &lt;url&gt;: æ·»åŠ ä¸€ä¸ªè¿œç«¯</li>
<li>git push &lt;remote&gt; &lt;local branch&gt;:&lt;remote branch&gt;: å°†å¯¹è±¡ä¼ é€è‡³è¿œç«¯å¹¶æ›´æ–°è¿œç«¯å¼•ç”¨</li>
<li>git branch --set-upstream-to=&lt;remote&gt;/&lt;remote branch&gt;: åˆ›å»ºæœ¬åœ°å’Œè¿œç«¯åˆ†æ”¯çš„å…³è”å…³ç³»</li>
<li>git fetch: ä»è¿œç«¯è·å–å¯¹è±¡/ç´¢å¼•</li>
<li>git pull: ç›¸å½“äº git fetch; git merge</li>
<li>git clone: ä»è¿œç«¯ä¸‹è½½ä»“åº“</li>
</ul>
<p>æ’¤é”€</p>
<ul>
<li>git commit --amend: ç¼–è¾‘æäº¤çš„å†…å®¹æˆ–ä¿¡æ¯ã€‚åœ¨æäº¤æ ‘ä¸­HEADæ‰€æŒ‡èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸‹ç”Ÿæˆä¸€ä¸ªæ–°çš„commitèŠ‚ç‚¹ï¼Œå¹¶æŒ‡å‘æ–°çš„commitèŠ‚ç‚¹ï¼ŒåŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ä¼šä¿ç•™ã€‚æ‰€ä»¥æœ€å¥½åªå¯¹å¶èŠ‚ç‚¹ä½¿ç”¨ --amend.</li>
<li>git reset HEAD~1: æ’¤é”€æœ€è¿‘ä¸€æ¬¡commitï¼Œåœ¨resetåæ‰€åšçš„å˜æ›´è¿˜åœ¨ï¼Œä½†æ˜¯å¤„äºæœªåŠ å…¥æš‚å­˜åŒºçŠ¶æ€ã€‚é€‚åˆåœ¨æœ¬åœ°ä¿®æ”¹ã€‚</li>
<li>git revert refspec: ä¼šcommitä¸€æ¬¡ï¼Œå°†æœ€è¿‘ä¸€æ¬¡commitçš„ä¿®æ”¹æ’¤é”€ã€‚é€‚åˆå¤šäººåä½œæ—¶ï¼Œæ’¤é”€å·²pushçš„ä¿®æ”¹ã€‚</li>
<li>git checkout -- &lt;file&gt;: ä¸¢å¼ƒä¿®æ”¹</li>
</ul>
<p>Git é«˜çº§æ“ä½œ</p>
<ul>
<li>git config: Git æ˜¯ä¸€ä¸ª é«˜åº¦å¯å®šåˆ¶çš„ å·¥å…·</li>
<li>git clone --depth=1: æµ…å…‹éš†ï¼ˆshallow cloneï¼‰ï¼Œä¸åŒ…æ‹¬å®Œæ•´çš„ç‰ˆæœ¬å†å²ä¿¡æ¯</li>
<li>git add -p: äº¤äº’å¼æš‚å­˜</li>
<li>git rebase to [from]: fromä¸å†™é»˜è®¤ä¸ºHEADæ‰€æŒ‡èŠ‚ç‚¹ã€‚å°†ä»fromèŠ‚ç‚¹å’ŒtoèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±çˆ¶èŠ‚ç‚¹(ä¸åŒ…æ‹¬è¯¥çˆ¶èŠ‚ç‚¹)åˆ°fromç»“ç‚¹æœ¬èº«çš„æ‰€æœ‰èŠ‚ç‚¹æŒ‰é¡ºåºå¤åˆ¶åˆ°toèŠ‚ç‚¹ä¸‹ï¼ŒHEADå°†æŒ‡å‘è¢«å¤åˆ¶çš„fromèŠ‚ç‚¹ï¼Œå¦å¤–fromèŠ‚ç‚¹(è·¯å¾„ä¸Šçš„å…¶ä»–èŠ‚ç‚¹çš„å¼•ç”¨ä¸ä¼šåŠ¨)ä¸Šçš„å¼•ç”¨(åˆ†æ”¯ï¼Œtagç­‰)ä¹Ÿä¼šæŒ‡å‘æ–°çš„fromèŠ‚ç‚¹ã€‚ç”¨äºå°†fromåˆ†æ”¯ä¸Šçš„å·¥ä½œè½¬ç§»åˆ°toåˆ†æ”¯ä¸Šã€‚PSï¼šå¦‚æœfromä¸ºtoçš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œåˆ™rebaseåªæ˜¯å°†fromçš„å¼•ç”¨ç§»åŠ¨åˆ°toä¸Šã€‚</li>
<li>git rebase -i ref~n: äº¤äº’å¼å˜åŸº(ç»å…¸å·¦é—­å³å¼€/ä¸‹é—­ä¸Šå¼€)</li>
<li>git cherry-pick refspec1 refspec2 ...:å¯ä»¥å°†æäº¤æ ‘ä¸Šä»»ä½•å…¶ä»–åœ°æ–¹çš„æäº¤è®°å½•å–è¿‡æ¥è¿½åŠ åˆ°HEADä¸Šï¼ˆä¸èƒ½æ˜¯HEADä¸Šæ¸¸çš„æäº¤ï¼‰</li>
<li>git blame: æŸ¥çœ‹æœ€åä¿®æ”¹æŸè¡Œçš„äºº</li>
<li>git stash: æš‚æ—¶ç§»é™¤å·¥ä½œç›®å½•ä¸‹çš„ä¿®æ”¹å†…å®¹</li>
<li>git bisect: é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æœç´¢å†å²è®°å½•</li>
<li>git describe refspec: ç»“æœæ ¼å¼ä¸ºtagName_distance_ghashï¼ŒtagNameæ˜¯ç¦»refspecæœ€è¿‘çš„tagçš„åç§°ï¼Œdistanceæ˜¯refspecç¦»tagçš„è·ç¦»ï¼Œhashæ˜¯refspec hashå€¼çš„å‰å‡ ä½ã€‚</li>
<li>.gitignore: æŒ‡å®š æ•…æ„ä¸è¿½è¸ªçš„æ–‡ä»¶</li>
</ul>
<h3 id="git-stash"> git stash</h3>
<p><code>git stash</code>å‘½ä»¤ä¼šæš‚æ—¶ç¼“å­˜ä»»ä½•ä½ æœªæäº¤çš„ä¿®æ”¹ï¼ŒåŒ…æ‹¬æš‚å­˜åŒºçš„å’Œæœªæš‚å­˜çš„(æ²¡æœ‰é€šè¿‡<code>git add</code>å‘½ä»¤æ·»åŠ åˆ°æš‚å­˜åŒºçš„ï¼ŒåŒ…æ‹¬æ–°addçš„å¢åˆ æ–‡ä»¶ï¼Œä¿®æ”¹addè¿‡çš„æ–‡ä»¶)ï¼Œä¸åŒ…æ‹¬æœªè¿½è¸ªçš„æ–‡ä»¶ã€‚stashå°±ç›¸å½“äºå°†ä¹‹å‰çš„ä¿®æ”¹éƒ½éšè—äº†èµ·æ¥ï¼Œä¹‹åçš„æ“ä½œä¸ä¼šå—åˆ°ä¹‹å‰ä¿®æ”¹çš„é™åˆ¶ã€‚
æ³¨æ„ï¼šstashåªä¿ç•™åœ¨æœ¬åœ°åº“ä¸­ï¼Œä¸ä¼šè¢«æ¨é€åˆ°è¿œç¨‹åº“ã€‚</p>
<div><pre><code><span># åšä¸€äº›ä¿®æ”¹1</span>
<span>git</span> stash
<span># å†åšä¸€äº›ä¿®æ”¹2</span>
<span>git</span> stash
<span># å†å†åšä¸€äº›ä¿®æ”¹3ï¼Œå¹¶æäº¤ å‡è®¾ä¸‰æ¬¡ä¿®æ”¹çš„æ˜¯ä¸åŒçš„æ–‡ä»¶</span>
<span># some changes</span>
<span>git</span> commit
<span># ä¸æƒ³è¦ä¿®æ”¹2äº†</span>
<span>git</span> stash pop
<span># ç»§ç»­ä»ä¿®æ”¹1å¼€å§‹</span>
<span>git</span> stash apply
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>æ³¨æ„ï¼šgit stash applyä¼šå°†ä¿®æ”¹åº”ç”¨åˆ°æ‰€æœ‰åˆ†æ”¯ã€‚æ¯”å¦‚ï¼Œåœ¨teståˆ†æ”¯ä¿®æ”¹äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œstashä»¥åå†applyå›æ¥ï¼Œè¿™æ ·masteråˆ†æ”¯ä¸­ä¹Ÿä¼šæœ‰ä¸€ä¸ªæœªæäº¤çš„ä¿®æ”¹ã€‚</p>
<h2 id="è¿œç¨‹ä»“åº“"> è¿œç¨‹ä»“åº“</h2>
<h3 id="git-clone"> git clone</h3>
<p>git clone somerepoåï¼Œæœ¬åœ°å°±æœ‰äº†somerepoçš„å®Œæ•´æäº¤æ ‘ï¼Œå¹¶ä¸”å¤šäº†origin/master,origin/dev....ç­‰å¤šäº†origin/å‰ç¼€çš„è¿œç¨‹åˆ†æ”¯(å¦æœ‰origin/HEAD-&gt;origin/mainè¯´æ˜è¿œç¨‹åˆ†æ”¯çš„HEADæŒ‡å‘å“ªé‡Œ)ã€‚</p>
<p>è¿œç¨‹åˆ†æ”¯åæ˜ äº†è¿œç¨‹ä»“åº“(åœ¨ä½ ä¸Šæ¬¡å’Œå®ƒé€šä¿¡æ—¶)çš„çŠ¶æ€ã€‚</p>
<p>è¿œç¨‹åˆ†æ”¯æœ‰ä¸€ä¸ªç‰¹åˆ«çš„å±æ€§ï¼Œåœ¨ä½ æ£€å‡ºæ—¶è‡ªåŠ¨è¿›å…¥åˆ†ç¦»HEADçŠ¶æ€(ä¸æ˜¯HEADæŒ‡å‘çš„åˆ†æ”¯ä¸Šæœ‰*ï¼Œè€Œæ˜¯HEADç‹¬ç«‹æ˜¾ç¤ºå‡ºæ¥)ã€‚Gitè¿™ä¹ˆåšæ˜¯å› ä¸ºä¸èƒ½ç›´æ¥åœ¨è¿™äº›åˆ†æ”¯ä¸Šè¿›è¡Œæ“ä½œ, ä½ å¿…é¡»åœ¨æœ¬åœ°å®Œæˆä½ çš„å·¥ä½œ, ï¼ˆæ›´æ–°äº†è¿œç¨‹åˆ†æ”¯ä¹‹åï¼‰å†ç”¨è¿œç¨‹åˆ†äº«ä½ çš„å·¥ä½œæˆæœã€‚</p>
<h3 id="git-fetch"> git fetch</h3>
<p>å®Œæˆäº†ä»…æœ‰çš„ä½†æ˜¯å¾ˆé‡è¦çš„ä¸¤æ­¥:</p>
<ol>
<li>ä»è¿œç¨‹ä»“åº“ä¸‹è½½æœ¬åœ°ä»“åº“ä¸­ç¼ºå¤±çš„æäº¤è®°å½•</li>
<li>æ›´æ–°è¿œç¨‹åˆ†æ”¯æŒ‡é’ˆ(å¦‚ o/main)</li>
</ol>
<p>å®é™…ä¸Šå°†æœ¬åœ°ä»“åº“ä¸­çš„è¿œç¨‹åˆ†æ”¯æ›´æ–°æˆäº†è¿œç¨‹ä»“åº“ç›¸åº”åˆ†æ”¯æœ€æ–°çš„çŠ¶æ€ã€‚ä½†å¹¶ä¸ä¼šæ”¹å˜ä½ æœ¬åœ°ä»“åº“çš„çŠ¶æ€ã€‚å®ƒä¸ä¼šæ›´æ–°ä½ çš„ main åˆ†æ”¯ï¼Œä¹Ÿä¸ä¼šä¿®æ”¹ä½ ç£ç›˜ä¸Šçš„æ–‡ä»¶ã€‚</p>
<p>è¦å®é™…æ›´æ–°ï¼Œéœ€è¦ä½¿ç”¨git mergeå°†è¿œç¨‹å’Œæœ¬åœ°åˆ†æ”¯åˆå¹¶ã€‚(git cherry-pick, git rebaseä¹Ÿå¯ä»¥)</p>
<h3 id="git-pull"> git pull</h3>
<p>å®é™…ç­‰åŒäº git fetch + git mergeã€‚
ç”¨æ³•å‚è€ƒ<code>git push</code>/<code>git fetch</code></p>
<h3 id="git-push"> git push</h3>
<p><code>git push remoteRepo place</code> (remoteRepo é€šå¸¸ä¸º origin)<br>
<code>git push remoteRepo &lt;source&gt;:&lt;remote branch&gt;</code>  (sourceæ˜¯refspecï¼Œå¦‚æœremote branchæ˜¯è¿œç¨‹ä»“åº“ä¸­çš„åˆ†æ”¯å(æ²¡æœ‰origin/å‰ç¼€)ä¸”ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„)
<code>git push remoteRepo :foo</code> (ä¼šåˆ é™¤è¿œç¨‹çš„fooåˆ†æ”¯)
å°†æœ¬åœ°æäº¤åŒæ­¥åˆ°è¿œç¨‹ï¼Œå¹¶å°†æœ¬åœ°ä»“åº“çš„è¿œç¨‹åˆ†æ”¯ä¹Ÿæ›´æ–°å¥½ã€‚</p>
<p>PSï¼šgit fetch è¯­æ³•ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åç½¢äº†ã€‚</p>
<h3 id="æœ€å¸¸è§å›¢é˜Ÿåˆä½œå·¥ä½œæµ"> æœ€å¸¸è§å›¢é˜Ÿåˆä½œå·¥ä½œæµ</h3>
<p>ä»æŸä¸ªcommitä¹‹åï¼Œä½ å’ŒåŒäº‹åˆ†åˆ«ä¿®æ”¹å„è‡ªçš„ä»£ç ï¼Œç°åœ¨ä½ çš„åŒäº‹å·²ç»å°†ä»–çš„ä»£ç åŒæ­¥åˆ°è¿œç¨‹åº“äº†ï¼Œä½ çš„ä»£ç è¯¥å¦‚ä½•æäº¤ã€‚(å‡è®¾æ²¡æœ‰å†²çª)ã€‚</p>
<p>æ–¹æ¡ˆä¸€ï¼šgit fetch; git rebase origin/main; git push
æ–¹æ¡ˆäºŒ: git fetch; git merge origin/main; git push
æ–¹æ¡ˆä¸€ç®€åŒ–ç‰ˆï¼šgit pull --rebase; git push
æ–¹æ¡ˆäºŒç®€åŒ–ç‰ˆ: git pull; git push</p>
<h3 id="è¿œç¨‹æœåŠ¡å™¨æ‹’ç»-remote-rejected"> è¿œç¨‹æœåŠ¡å™¨æ‹’ç»!(Remote Rejected)</h3>
<p>å¦‚æœä½ æ˜¯åœ¨ä¸€ä¸ªå¤§çš„åˆä½œå›¢é˜Ÿä¸­å·¥ä½œ, å¾ˆå¯èƒ½æ˜¯mainè¢«é”å®šäº†, éœ€è¦ä¸€äº›Pull Requestæµç¨‹æ¥åˆå¹¶ä¿®æ”¹ã€‚å¦‚æœä½ ç›´æ¥æäº¤(commit)åˆ°æœ¬åœ°main, ç„¶åè¯•å›¾æ¨é€(push)ä¿®æ”¹, ä½ å°†ä¼šæ”¶åˆ°è¿™æ ·ç±»ä¼¼çš„ä¿¡æ¯:</p>
<blockquote>
<p>! [è¿œç¨‹æœåŠ¡å™¨æ‹’ç»] main -&gt; main (TF402455: ä¸å…è®¸æ¨é€(push)è¿™ä¸ªåˆ†æ”¯; ä½ å¿…é¡»ä½¿ç”¨pull requestæ¥æ›´æ–°è¿™ä¸ªåˆ†æ”¯.)</p>
</blockquote>
<p>è¿œç¨‹æœåŠ¡å™¨æ‹’ç»ç›´æ¥æ¨é€(push)æäº¤åˆ°main, å› ä¸ºç­–ç•¥é…ç½®è¦æ±‚ pull requests æ¥æäº¤æ›´æ–°.</p>
<p>ä½ åº”è¯¥æŒ‰ç…§æµç¨‹,æ–°å»ºä¸€ä¸ªåˆ†æ”¯, æ¨é€(push)è¿™ä¸ªåˆ†æ”¯å¹¶ç”³è¯·pull request,ä½†æ˜¯ä½ å¿˜è®°å¹¶ç›´æ¥æäº¤ç»™äº†main.ç°åœ¨ä½ å¡ä½å¹¶ä¸”æ— æ³•æ¨é€ä½ çš„æ›´æ–°.</p>
<p>è§£å†³åŠæ³•
æ–°å»ºä¸€ä¸ªåˆ†æ”¯feature, æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨. ç„¶åresetä½ çš„mainåˆ†æ”¯å’Œè¿œç¨‹æœåŠ¡å™¨ä¿æŒä¸€è‡´, å¦åˆ™ä¸‹æ¬¡ä½ pullå¹¶ä¸”ä»–äººçš„æäº¤å’Œä½ å†²çªçš„æ—¶å€™å°±ä¼šæœ‰é—®é¢˜.</p>
<div><pre><code><span>git</span> reset --hard o/main <span># é‡ç½®ç´¢å¼•å’Œå·¥ä½œæ ‘ã€‚ è‡ªo/mainä»¥æ¥çš„å·¥ä½œæ ‘ä¸­è·Ÿè¸ªæ–‡ä»¶çš„ä»»ä½•æ›´æ”¹éƒ½è¢«ä¸¢å¼ƒã€‚</span>
<span>git</span> checkout -b feature rawmainSHA <span># resetä¸ä¼šåˆ é™¤å·²æœ‰çš„commitã€‚æ‰€ä»¥ä»èƒ½checkoutåˆ°ä½ ä¿®æ”¹è¿‡commitï¼ŒåŒæ—¶æ–°å»ºåˆ†æ”¯ã€‚</span>
<span>git</span> push origin feature <span># å°†ä½ çš„ä¿®æ”¹(ç°åœ¨åœ¨featureä¸­)åŒæ­¥åˆ°è¿œç«¯çš„featureåˆ†æ”¯</span>

<span># æˆ‘è®¤ä¸ºæ›´å¥½çš„æ–¹æ³•</span>
<span>git</span> branch feature
<span>git</span> push origin feature
<span>git</span> reset --hard origin/main
<span>git</span> checkout feature
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>ç„¶åå†ç”³è¯·pull requestã€‚</p>
<h3 id="åˆå¹¶ç‰¹æ€§åˆ†æ”¯"> åˆå¹¶ç‰¹æ€§åˆ†æ”¯</h3>
<p>æœ‰äº›å¼€å‘äººå‘˜åªåœ¨ main ä¸Šåš pushã€pull â€”â€” è¿™æ ·çš„è¯ main æ€»æ˜¯æœ€æ–°çš„ï¼Œå§‹ç»ˆä¸è¿œç¨‹åˆ†æ”¯ (o/main) ä¿æŒä¸€è‡´ã€‚</p>
<p>è¿™ä¸ªå·¥ä½œæµï¼Œåˆ†ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>å°†ç‰¹æ€§åˆ†æ”¯é›†æˆåˆ° main ä¸Š</li>
<li>æ¨é€å¹¶æ›´æ–°è¿œç¨‹åˆ†æ”¯ git pull --rebase; git push</li>
</ol>
<h3 id="rebase-å’Œ-merge"> rebase å’Œ merge</h3>
<p>åœ¨å¼€å‘ç¤¾åŒºé‡Œï¼Œæœ‰è®¸å¤šå…³äº merge ä¸ rebase çš„è®¨è®ºã€‚ä»¥ä¸‹æ˜¯å…³äº rebase çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹: Rebase ä½¿ä½ çš„æäº¤æ ‘å˜å¾—å¾ˆå¹²å‡€, æ‰€æœ‰çš„æäº¤éƒ½åœ¨ä¸€æ¡çº¿ä¸Š</li>
<li>ç¼ºç‚¹: Rebase ä¿®æ”¹äº†æäº¤æ ‘çš„å†å²ã€‚æ¯”å¦‚, æäº¤ C1 å¯ä»¥è¢« rebase åˆ° C3 ä¹‹åã€‚è¿™çœ‹èµ·æ¥ C1 ä¸­çš„å·¥ä½œæ˜¯åœ¨ C3 ä¹‹åè¿›è¡Œçš„ï¼Œä½†å®é™…ä¸Šæ˜¯åœ¨ C3 ä¹‹å‰ã€‚</li>
</ul>
<p>ä¸€äº›å¼€å‘äººå‘˜å–œæ¬¢ä¿ç•™æäº¤å†å²ï¼Œå› æ­¤æ›´åçˆ± mergeã€‚è€Œå…¶ä»–äººå¯èƒ½æ›´å–œæ¬¢å¹²å‡€çš„æäº¤æ ‘ï¼Œäºæ˜¯åçˆ± rebaseã€‚</p>
<h3 id="è¿œç¨‹è·Ÿè¸ª"> è¿œç¨‹è·Ÿè¸ª</h3>
<p>ç›´æ¥äº†å½“åœ°è®²ï¼Œmain å’Œ o/main çš„å…³è”å…³ç³»å°±æ˜¯ç”±åˆ†æ”¯çš„â€œremote trackingâ€å±æ€§å†³å®šçš„ã€‚main è¢«è®¾å®šä¸ºè·Ÿè¸ª o/main â€”â€” è¿™æ„å‘³ç€ä¸º main åˆ†æ”¯æŒ‡å®šäº†æ¨é€çš„ç›®çš„åœ°ä»¥åŠæ‹‰å–ååˆå¹¶çš„ç›®æ ‡ã€‚</p>
<p>å½“ä½ å…‹éš†æ—¶, Git ä¼šä¸ºè¿œç¨‹ä»“åº“ä¸­çš„æ¯ä¸ªåˆ†æ”¯åœ¨æœ¬åœ°ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ï¼ˆæ¯”å¦‚ o/mainï¼‰ã€‚ç„¶åå†åˆ›å»ºä¸€ä¸ªè·Ÿè¸ªè¿œç¨‹ä»“åº“ä¸­æ´»åŠ¨åˆ†æ”¯çš„æœ¬åœ°åˆ†æ”¯ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªæœ¬åœ°åˆ†æ”¯ä¼šè¢«å‘½åä¸º mainã€‚
è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šåœ¨å…‹éš†çš„æ—¶å€™ä¼šçœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºï¼š</p>
<blockquote>
<p>local branch &quot;main&quot; set to track remote branch &quot;o/main&quot;</p>
</blockquote>
<p>è‡ªå·±æŒ‡å®šæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„æ˜ å°„</p>
<ol>
<li>git checkout -b notmain origin/main</li>
<li>git branch -u origin/main foo # fooä¸å†™å°±é»˜è®¤ä½¿ç”¨å½“å‰åˆ†æ”¯</li>
</ol>
<p>ä¹‹åcommit,pushè¿™ä¸ªnotmainåˆ†æ”¯åˆ°è¿œç¨‹åº“ï¼Œå®é™…å°±ä¼šæ›´æ–°è¿œç¨‹åº“çš„mainåˆ†æ”¯ã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">ICS-PAå¿ƒå¾—</title>
    <id>https://kigane.github.io/note/cs/ics-pa/</id>
    <link href="https://kigane.github.io/note/cs/ics-pa/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="pa1"> PA1</h2>
<h3 id="nemuå‡†å¤‡"> NEMUå‡†å¤‡</h3>
<div><pre><code>nemu
â”œâ”€â”€ include                    # å­˜æ”¾å…¨å±€ä½¿ç”¨çš„å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ common<span>.</span>h               # å…¬ç”¨çš„å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ cpu
â”‚   â”‚   â”œâ”€â”€ decode<span>.</span>h           # è¯‘ç ç›¸å…³
â”‚   â”‚   â””â”€â”€ exec<span>.</span>h             # æ‰§è¡Œç›¸å…³
â”‚   â”œâ”€â”€ debug<span>.</span>h                # ä¸€äº›æ–¹ä¾¿è°ƒè¯•ç”¨çš„å®
â”‚   â”œâ”€â”€ device                 # è®¾å¤‡ç›¸å…³
â”‚   â”œâ”€â”€ isa                    # <span>ISA</span>ç›¸å…³
â”‚   â”œâ”€â”€ isa<span>.</span>h                  # <span>ISA</span>ç›¸å…³
â”‚   â”œâ”€â”€ macro<span>.</span>h                # ä¸€äº›æ–¹ä¾¿çš„å®å®šä¹‰
â”‚   â”œâ”€â”€ memory                 # è®¿é—®å†…å­˜ç›¸å…³
â”‚   â”œâ”€â”€ monitor
â”‚   â”‚   â”œâ”€â”€ log<span>.</span>h              # æ—¥å¿—æ–‡ä»¶ç›¸å…³
â”‚   â”‚   â””â”€â”€ monitor<span>.</span>h
â”‚   â””â”€â”€ rtl
â”‚       â”œâ”€â”€ pesudo<span>.</span>h           # <span>RTL</span>ä¼ªæŒ‡ä»¤
â”‚       â””â”€â”€ rtl<span>.</span>h              # <span>RTL</span>æŒ‡ä»¤ç›¸å…³å®šä¹‰
â”œâ”€â”€ Makefile                   # æŒ‡ç¤º<span>NEMU</span>çš„ç¼–è¯‘å’Œé“¾æ¥
â”œâ”€â”€ Makefile<span>.</span>git               # gitç‰ˆæœ¬æ§åˆ¶ç›¸å…³
â”œâ”€â”€ runall<span>.</span>sh                  # ä¸€é”®æµ‹è¯•è„šæœ¬
â””â”€â”€ src                        # æºæ–‡ä»¶
    â”œâ”€â”€ device                 # è®¾å¤‡ç›¸å…³
    â”œâ”€â”€ engine
    â”‚   â””â”€â”€ interpreter        # è§£é‡Šå™¨çš„å®ç°
    â”œâ”€â”€ isa                    # <span>ISA</span>ç›¸å…³çš„å®ç°
    â”‚   â”œâ”€â”€ mips32
    â”‚   â”œâ”€â”€ riscv32
    â”‚   â”œâ”€â”€ riscv64
    â”‚   â””â”€â”€ x86
    â”œâ”€â”€ main<span>.</span>c                 # ä½ çŸ¥é“çš„<span>...</span>
    â”œâ”€â”€ memory
    â”‚   â””â”€â”€ paddr<span>.</span>c            # ç‰©ç†å†…å­˜è®¿é—®
    â””â”€â”€ monitor
        â”œâ”€â”€ cpu<span>-</span>exec<span>.</span>c         # æŒ‡ä»¤æ‰§è¡Œçš„ä¸»å¾ªç¯
        â”œâ”€â”€ debug              # ç®€æ˜“è°ƒè¯•å™¨ç›¸å…³
        â”‚   â”œâ”€â”€ expr<span>.</span>c         # è¡¨è¾¾å¼æ±‚å€¼çš„å®ç°
        â”‚   â”œâ”€â”€ log<span>.</span>c          # æ—¥å¿—æ–‡ä»¶ç›¸å…³
        â”‚   â”œâ”€â”€ ui<span>.</span>c           # ç”¨æˆ·ç•Œé¢ç›¸å…³
        â”‚   â””â”€â”€ watchpoint<span>.</span>c   # ç›‘è§†ç‚¹çš„å®ç°
        â””â”€â”€ monitor<span>.</span>c
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br></div></div><ul>
<li>make ISA=$ISA run</li>
<li>åœ¨cmd_c()å‡½æ•°ä¸­, è°ƒç”¨cpu_exec()çš„æ—¶å€™ä¼ å…¥äº†å‚æ•°-1ï¼Œä½†å‚æ•°ç±»å‹æ˜¯uint64_t,å› æ­¤å®é™…çš„å€¼ä¸º<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8974em;vertical-align:-0.0833em;"></span><span><span>2</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>64</span></span></span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:0.6444em;"></span><span>1</span></span></span></span>ï¼Œå³0xffffffffffffffffã€‚</li>
<li>ä¸‰ä¸ªå¯¹è°ƒè¯•æœ‰ç”¨çš„å®(åœ¨nemu/include/debug.hä¸­å®šä¹‰)
<ul>
<li>Log()æ˜¯printf()çš„å‡çº§ç‰ˆ, ä¸“é—¨ç”¨æ¥è¾“å‡ºè°ƒè¯•ä¿¡æ¯, åŒæ—¶è¿˜ä¼šè¾“å‡ºä½¿ç”¨Log()æ‰€åœ¨çš„æºæ–‡ä»¶, è¡Œå·å’Œå‡½æ•°. å½“è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯è¿‡å¤šçš„æ—¶å€™, å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®šä½åˆ°ä»£ç ä¸­çš„ç›¸å…³ä½ç½®</li>
<li>Assert()æ˜¯assert()çš„å‡çº§ç‰ˆ, å½“æµ‹è¯•æ¡ä»¶ä¸ºå‡æ—¶, åœ¨assertion failä¹‹å‰å¯ä»¥è¾“å‡ºä¸€äº›ä¿¡æ¯</li>
<li>panic()ç”¨äºè¾“å‡ºä¿¡æ¯å¹¶ç»“æŸç¨‹åº, ç›¸å½“äºæ— æ¡ä»¶çš„assertion fail</li>
</ul>
</li>
<li>å†…å­˜é€šè¿‡åœ¨nemu/src/memory/paddr.cä¸­å®šä¹‰çš„å¤§æ•°ç»„pmemæ¥æ¨¡æ‹Ÿ. åœ¨å®¢æˆ·ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­, æ€»æ˜¯ä½¿ç”¨vaddr_read()å’Œvaddr_write() (åœ¨nemu/include/memory/vaddr.hä¸­å®šä¹‰)æ¥è®¿é—®æ¨¡æ‹Ÿçš„å†…å­˜. vaddr, paddråˆ†åˆ«ä»£è¡¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€.</li>
<li>&quot;å•å…ƒ&quot;æ˜¯æŒ‡æœ‰ç‹¬ç«‹å«ä¹‰çš„å­ä¸², å®ƒä»¬æ­£å¼çš„ç§°å‘¼å«token.</li>
<li>\33 å³ ESCã€‚</li>
<li>makefileä¸­ä½¿ç”¨awkï¼Œå› ä¸ºmakefileä¸­<code>$</code>ä¼šè¢«ç‰¹æ®Šå¯¹å¾…ï¼Œæ‰€ä»¥awkçš„program textä¸­çš„<code>$</code>è¦ç”¨<code>$$</code>è¡¨ç¤ºã€‚æ³¨æ„awkçš„actionè¦å†™åœ¨<code>{}</code>ä¸­ã€‚</li>
<li>fopenæ–‡ä»¶è·¯å¾„ï¼Œåœ¨nemuç›®å½•ä¸‹make runæ—¶ï¼Œå½“å‰ç›®å½•å°±æ˜¯nemuã€‚</li>
<li>è¶…çº§ç»å…¸é”™è¯¯ï¼Œif (tokens[p].type = '*')ã€‚ã€‚ã€‚ã€‚å°‘å†™ä¸ªç­‰å·</li>
<li>strncpy(dest, src, n) å¦‚æœnä¸ªå­—ç¬¦ä¸­æ²¡æœ‰'\0'ï¼Œdestä¸­ä¸ä¼šä¸»åŠ¨åŠ ã€‚å¦‚æœdestä¸­åŸæ¥å­—ç¬¦æ•°å¤§äºn,åˆ™å¤åˆ¶åè¦ä½¿src==destï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ '\0'(dest[n] = '\0')</li>
</ul>
<div><pre><code><span>&lt;</span>expr<span>></span> <span>:</span><span>:</span><span>=</span> <span>&lt;</span>number<span>></span>    # ä¸€ä¸ªæ•°æ˜¯è¡¨è¾¾å¼
  <span>|</span> <span>"("</span> <span>&lt;</span>expr<span>></span> <span>")"</span>     # åœ¨è¡¨è¾¾å¼ä¸¤è¾¹åŠ ä¸ªæ‹¬å·ä¹Ÿæ˜¯è¡¨è¾¾å¼
  <span>|</span> <span>&lt;</span>expr<span>></span> <span>"+"</span> <span>&lt;</span>expr<span>></span>  # ä¸¤ä¸ªè¡¨è¾¾å¼ç›¸åŠ ä¹Ÿæ˜¯è¡¨è¾¾å¼
  <span>|</span> <span>&lt;</span>expr<span>></span> <span>"-"</span> <span>&lt;</span>expr<span>></span>  # æ¥ä¸‹æ¥ä½ å…¨æ‡‚äº†
  <span>|</span> <span>&lt;</span>expr<span>></span> <span>"*"</span> <span>&lt;</span>expr<span>></span>
  <span>|</span> <span>&lt;</span>expr<span>></span> <span>"/"</span> <span>&lt;</span>expr<span>></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h3 id="å¦‚ä½•è°ƒè¯•"> å¦‚ä½•è°ƒè¯•</h3>
<p>ä¸€äº›è½¯ä»¶å·¥ç¨‹ç›¸å…³çš„æ¦‚å¿µ:</p>
<ul>
<li>Fault: å®ç°é”™è¯¯çš„ä»£ç , ä¾‹å¦‚if (p = NULL)</li>
<li>Error: ç¨‹åºæ‰§è¡Œæ—¶ä¸ç¬¦åˆé¢„æœŸçš„çŠ¶æ€, ä¾‹å¦‚pè¢«é”™è¯¯åœ°èµ‹å€¼æˆNULL</li>
<li>Failure: èƒ½ç›´æ¥è§‚æµ‹åˆ°çš„é”™è¯¯, ä¾‹å¦‚ç¨‹åºè§¦å‘äº†æ®µé”™è¯¯</li>
</ul>
<p>è°ƒè¯•å…¶å®å°±æ˜¯ä»è§‚æµ‹åˆ°çš„failureä¸€æ­¥ä¸€æ­¥å›æº¯å¯»æ‰¾faultçš„è¿‡ç¨‹, æ‰¾åˆ°äº†faultä¹‹å, æˆ‘ä»¬å°±å¾ˆå¿«çŸ¥é“åº”è¯¥å¦‚ä½•ä¿®æ”¹é”™è¯¯çš„ä»£ç äº†. ä½†ä»ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥çœ‹å‡º, è°ƒè¯•ä¹‹æ‰€ä»¥ä¸å®¹æ˜“, æ°æ°æ˜¯å› ä¸º:</p>
<ul>
<li>faultä¸ä¸€å®šé©¬ä¸Šè§¦å‘error</li>
<li>è§¦å‘äº†errorä¹Ÿä¸ä¸€å®šé©¬ä¸Šè½¬å˜æˆå¯è§‚æµ‹çš„failure</li>
<li>errorä¼šåƒæ»šé›ªçƒä¸€èˆ¬è¶Šç§¯è¶Šå¤š, å½“æˆ‘ä»¬è§‚æµ‹åˆ°failureçš„æ—¶å€™, å…¶å®å·²ç»è·ç¦»faultéå¸¸é¥è¿œäº†</li>
</ul>
<p>ç†è§£äº†è¿™äº›åŸå› ä¹‹å, æˆ‘ä»¬å°±å¯ä»¥åˆ¶å®šç›¸åº”çš„ç­–ç•¥äº†:</p>
<ul>
<li>å°½å¯èƒ½æŠŠfaultè½¬å˜æˆerror. è¿™å…¶å®å°±æ˜¯æµ‹è¯•åšçš„äº‹æƒ…, æ‰€ä»¥æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­åŠ å…¥äº†è¡¨è¾¾å¼ç”Ÿæˆå™¨çš„å†…å®¹, æ¥å¸®åŠ©å¤§å®¶è¿›è¡Œæµ‹è¯•, åé¢çš„å®éªŒå†…å®¹ä¹Ÿä¼šæä¾›ä¸°å¯Œçš„æµ‹è¯•ç”¨ä¾‹. ä½†å¹¶ä¸æ˜¯æœ‰äº†æµ‹è¯•ç”¨ä¾‹å°±èƒ½æŠŠæ‰€æœ‰faultéƒ½è½¬å˜æˆerroräº†, å› ä¸ºè¿™å–å†³äºæµ‹è¯•çš„è¦†ç›–åº¦. è¦è®¾è®¡å‡ºä¸€å¥—å…¨è¦†ç›–çš„æµ‹è¯•å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…, è¶Šæ˜¯å¤æ‚çš„ç³»ç»Ÿ, å…¨è¦†ç›–çš„æµ‹è¯•å°±è¶Šéš¾è®¾è®¡. ä½†æ˜¯, å¦‚ä½•æé«˜æµ‹è¯•çš„è¦†ç›–åº¦, æ˜¯å­¦æœ¯ç•Œä¸€ç›´ä»¥æ¥éƒ½åœ¨å…³æ³¨çš„é—®é¢˜.</li>
<li>å°½æ—©è§‚æµ‹åˆ°errorçš„å­˜åœ¨. è§‚æµ‹åˆ°errorçš„æ—¶æœºç›´æ¥å†³å®šäº†è°ƒè¯•çš„éš¾åº¦: å¦‚æœç­‰åˆ°è§¦å‘failureçš„æ—¶å€™æ‰å‘ç°errorçš„å­˜åœ¨, è°ƒè¯•å°±ä¼šæ¯”è¾ƒå›°éš¾; ä½†å¦‚æœèƒ½åœ¨erroråˆšåˆšè§¦å‘çš„æ—¶å€™å°±è§‚æµ‹åˆ°å®ƒ, è°ƒè¯•éš¾åº¦ä¹Ÿå°±å¤§å¤§é™ä½äº†. äº‹å®ä¸Š, ä½ å·²ç»è§è¯†è¿‡ä¸€äº›æœ‰ç”¨çš„å·¥å…·äº†:
<ul>
<li>-Wall, -Werror: åœ¨ç¼–è¯‘æ—¶åˆ»æŠŠæ½œåœ¨çš„faultç›´æ¥è½¬å˜æˆfailure. è¿™ç§å·¥å…·çš„ä½œç”¨å¾ˆæœ‰é™, åªèƒ½å¯»æ‰¾ä¸€äº›åœ¨ç¼–è¯‘æ—¶åˆ»ä¹Ÿè§‰å¾—å¯ç–‘çš„fault, ä¾‹å¦‚if (p = NULL). ä¸è¿‡éšç€ç¼–è¯‘å™¨ç‰ˆæœ¬çš„å¢å¼º, ç¼–è¯‘å™¨ä¹Ÿèƒ½å‘ç°ä»£ç ä¸­çš„ä¸€äº›æœªå®šä¹‰è¡Œä¸º. è¿™äº›éƒ½æ˜¯å…è´¹çš„åˆé¤, ä¸åƒå°±çœŸçš„ç™½ç™½æµªè´¹äº†.</li>
<li>assert(): åœ¨è¿è¡Œæ—¶åˆ»æŠŠerrorç›´æ¥è½¬å˜æˆfailure. assert()æ˜¯ä¸€ä¸ªå¾ˆç®€å•å´åˆéå¸¸å¼ºå¤§çš„å·¥å…·, åªè¦åœ¨ä»£ç ä¸­å®šä¹‰å¥½ç¨‹åºåº”è¯¥æ»¡è¶³çš„ç‰¹å¾, å°±ä¸€å®šèƒ½åœ¨è¿è¡Œæ—¶åˆ»å°†ä¸æ»¡è¶³è¿™äº›ç‰¹å¾çš„erroræ‹¦æˆªä¸‹æ¥. ä¾‹å¦‚é“¾è¡¨çš„å®ç°, æˆ‘ä»¬åªéœ€è¦åœ¨ä»£ç ä¸­æ’å…¥ä¸€äº›å¾ˆç®€å•çš„assert()(ä¾‹å¦‚æŒ‡é’ˆè§£å¼•ç”¨æ—¶ä¸ä¸ºç©º), å°±èƒ½å¤Ÿå‡ ä¹å‘Šåˆ«æ®µé”™è¯¯. ä½†æ˜¯, ç¼–å†™è¿™äº›assert()å…¶å®éœ€è¦æˆ‘ä»¬å¯¹ç¨‹åºçš„è¡Œä¸ºæœ‰ä¸€å®šçš„äº†è§£, åŒæ—¶åœ¨ç¨‹åºç‰¹å¾ä¸æ˜“è¡¨è¾¾çš„æ—¶å€™, assert()çš„ä½œç”¨ä¹Ÿè¾ƒä¸ºæœ‰é™.</li>
<li>printf(): é€šè¿‡è¾“å‡ºçš„æ–¹å¼è§‚å¯Ÿæ½œåœ¨çš„error. è¿™æ˜¯ç”¨äºå›æº¯faultæ—¶æœ€å¸¸ç”¨çš„å·¥å…·, ç”¨äºè§‚æµ‹ç¨‹åºä¸­çš„å˜é‡æ˜¯å¦è¿›å…¥äº†é”™è¯¯çš„çŠ¶æ€. åœ¨NEMUä¸­æˆ‘ä»¬æä¾›äº†è¾“å‡ºæ›´å¤šè°ƒè¯•ä¿¡æ¯çš„å®Log(), å®ƒå®é™…ä¸Šå°è£…äº†printf()çš„åŠŸèƒ½. ä½†ç”±äºprintf()éœ€è¦æ ¹æ®è¾“å‡ºçš„ç»“æœäººå·¥åˆ¤æ–­æ˜¯å¦æ­£ç¡®, åœ¨ä¾¿åˆ©ç¨‹åº¦ä¸Šç›¸å¯¹äºassert()çš„è‡ªåŠ¨åˆ¤æ–­å°±é€Šè‰²äº†ä¸å°‘.</li>
<li>GDB: éšæ—¶éšåœ°è§‚æµ‹ç¨‹åºçš„ä»»ä½•çŠ¶æ€. è°ƒè¯•å™¨æ˜¯æœ€å¼ºå¤§çš„å·¥å…·, ä½†ä½ éœ€è¦åœ¨ç¨‹åºè¡Œä¸ºçš„èŒ«èŒ«å¤§æµ·ä¸­è§‚æµ‹é‚£äº›å¯ç–‘çš„çŠ¶æ€, å› æ­¤ä½¿ç”¨èµ·æ¥çš„ä»£ä»·ä¹Ÿæ˜¯æœ€å¤§çš„.</li>
</ul>
</li>
</ul>
<p>å»ºè®®:</p>
<ul>
<li>æ€»æ˜¯ä½¿ç”¨-Wallå’Œ-Werror</li>
<li>å°½å¯èƒ½å¤šåœ°åœ¨ä»£ç ä¸­æ’å…¥assert()</li>
<li>assert()æ— æ³•æ•æ‰åˆ°erroræ—¶, é€šè¿‡printf()è¾“å‡ºå¯ç–‘çš„å˜é‡, æœŸæœ›èƒ½è§‚æµ‹åˆ°error</li>
<li>printf()ä¸æ˜“è§‚æµ‹erroræ—¶, é€šè¿‡GDBç†è§£ç¨‹åºçš„ç²¾ç¡®è¡Œä¸º</li>
</ul>
<h3 id="ä¸€æ¡æŒ‡ä»¤åœ¨nemuä¸­çš„æ‰§è¡Œè¿‡ç¨‹"> ä¸€æ¡æŒ‡ä»¤åœ¨NEMUä¸­çš„æ‰§è¡Œè¿‡ç¨‹</h3>
<p>äº‹å®ä¸Š, ä¸€ä¸ªå­—èŠ‚æœ€å¤šåªèƒ½åŒºåˆ†256ç§ä¸åŒçš„æŒ‡ä»¤å½¢å¼. å½“æŒ‡ä»¤å½¢å¼çš„æ•°ç›®å¤§äº256æ—¶, æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦å¤–çš„æ–¹æ³•æ¥è¯†åˆ«å®ƒä»¬. x86ä¸­æœ‰ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜(åœ¨PA2ä¸­ä½ éƒ½ä¼šé‡åˆ°è¿™ä¸¤ç§æƒ…å†µ):</p>
<ul>
<li>ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨è½¬ä¹‰ç (escape code), x86ä¸­æœ‰ä¸€ä¸ª2å­—èŠ‚è½¬ä¹‰ç  0x0f, å½“æŒ‡ä»¤opcodeçš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯0x0fæ—¶, è¡¨ç¤ºéœ€è¦å†è¯»å…¥ä¸€ä¸ªå­—èŠ‚æ‰èƒ½å†³å®šå…·ä½“çš„æŒ‡ä»¤å½¢å¼(éƒ¨åˆ†æ¡ä»¶è·³è½¬æŒ‡ä»¤å°±å±äºè¿™ç§æƒ…å†µ). åæ¥éšç€å„ç§SSEæŒ‡ä»¤é›†çš„åŠ å…¥, ä½¿ç”¨2å­—èŠ‚è½¬ä¹‰ç ä¹Ÿä¸è¶³ä»¥è¡¨ç¤ºæ‰€æœ‰çš„æŒ‡ä»¤å½¢å¼äº†, x86åœ¨2å­—èŠ‚è½¬ä¹‰ç çš„åŸºç¡€ä¸Šåˆå¼•å…¥äº†3å­—èŠ‚è½¬ä¹‰ç , å½“æŒ‡ä»¤opcodeçš„å‰ä¸¤ä¸ªå­—èŠ‚æ˜¯0x0få’Œ0x38æ—¶, è¡¨ç¤ºéœ€è¦å†è¯»å…¥ä¸€ä¸ªå­—èŠ‚æ‰èƒ½å†³å®šå…·ä½“çš„æŒ‡ä»¤å½¢å¼.</li>
<li>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ModR/Må­—èŠ‚ä¸­çš„æ‰©å±•opcodeåŸŸæ¥å¯¹opcodeçš„é•¿åº¦è¿›è¡Œæ‰©å……. æœ‰äº›æ—¶å€™, è¯»å…¥ä¸€ä¸ªå­—èŠ‚ä¹Ÿè¿˜ä¸èƒ½å®Œå…¨ç¡®å®šå…·ä½“çš„æŒ‡ä»¤å½¢å¼, è¿™æ—¶å€™éœ€è¦è¯»å…¥ç´§è·Ÿåœ¨opcodeåé¢çš„ModR/Må­—èŠ‚, æŠŠå…¶ä¸­çš„reg/opcodeåŸŸå½“åšopcodeçš„ä¸€éƒ¨åˆ†æ¥è§£é‡Š, æ‰èƒ½å†³å®šå…·ä½“çš„æŒ‡ä»¤å½¢å¼. x86æŠŠè¿™äº›æŒ‡ä»¤åˆ’åˆ†æˆä¸åŒçš„æŒ‡ä»¤ç»„(instruction group), åœ¨åŒä¸€ä¸ªæŒ‡ä»¤ç»„ä¸­çš„æŒ‡ä»¤éœ€è¦é€šè¿‡ModR/Må­—èŠ‚ä¸­çš„æ‰©å±•opcodeåŸŸæ¥åŒºåˆ†.</li>
</ul>
<p>æœ€ä¸€èˆ¬çš„å¯»å€æ ¼å¼æ˜¯<br>
displacement(R[base_reg], R[index_reg], scale_factor)<br>
ç›¸åº”å†…å­˜åœ°å€çš„è®¡ç®—æ–¹å¼ä¸º<br>
addr = R[base_reg] + R[index_reg] * scale_factor + displacement<br>
å…¶å®ƒå¯»å€æ ¼å¼éƒ½å¯ä»¥çœ‹ä½œè¿™ç§ä¸€èˆ¬æ ¼å¼çš„ç‰¹ä¾‹</p>
<p>åœ¨NEMUä¸­, RTLå¯„å­˜å™¨åªæœ‰ä»¥ä¸‹è¿™äº›</p>
<ul>
<li>ä¸åŒISAçš„é€šç”¨å¯„å­˜å™¨(åœ¨nemu/include/isa/$ISA.hä¸­å®šä¹‰)</li>
<li>id_src, id_src2å’Œid_destä¸­çš„æ“ä½œæ•°å†…å®¹val(åœ¨nemu/include/cpu/decode.hä¸­å®šä¹‰).</li>
<li>ä¸´æ—¶å¯„å­˜å™¨s0, s1, s2å’Œt0(åœ¨nemu/include/rtl/rtl.hä¸­å®šä¹‰)</li>
<li>é›¶å¯„å­˜å™¨rz(åœ¨nemu/src/monitor/cpu-exec.cä¸­å®šä¹‰), å®ƒçš„å€¼æ€»æ˜¯0</li>
<li>x86çš„ISAç›¸å…³è¯‘ç ä¿¡æ¯ä¸­çš„å†…å­˜åŸºåœ°å€mbr</li>
</ul>
<p>RTLåŸºæœ¬æŒ‡ä»¤åŒ…æ‹¬(æˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼è®°å·):</p>
<ul>
<li>å¯„å­˜å™¨-å¯„å­˜å™¨ç±»å‹å’Œå¯„å­˜å™¨-ç«‹å³æ•°ç±»å‹çš„åŸºæœ¬ç®—æœ¯/é€»è¾‘è¿ç®—, åŒ…æ‹¬rtl_(add|sub|and|or|xor|shl|shr|sar|setrelop)i?, å®ƒä»¬çš„å®šä¹‰ç”¨åˆ°äº†nemu/src/engine/interpreter/c_op.hä¸­çš„Cè¯­è¨€è¿ç®—å’Œinterpret_relop()å‡½æ•°</li>
<li>å¯„å­˜å™¨-å¯„å­˜å™¨ç±»å‹çš„ä¹˜é™¤æ³•è¿ç®—, åŒ…æ‹¬rtl_i?(mul_[lo|hi]|div_[q|r]),</li>
<li>è¢«é™¤æ•°ä¸º64ä½çš„é™¤æ³•è¿ç®—rtl_i?div64_[q|r]</li>
<li>guestå†…å­˜è®¿é—®rtl_lm, rtl_lmså’Œrtl_sm</li>
<li>hostå†…å­˜è®¿é—®rtl_host_lmå’Œrtl_host_sm</li>
<li>è·³è½¬, åŒ…æ‹¬ç›´æ¥è·³è½¬rtl_j, é—´æ¥è·³è½¬rtl_jrå’Œæ¡ä»¶è·³è½¬rtl_jrelop</li>
<li>ç»ˆæ­¢ç¨‹åºrtl_exit(åœ¨nemu/src/monitor/cpu-exec.cä¸­å®šä¹‰)</li>
</ul>
<p>å°å‹è°ƒç”¨çº¦å®š:</p>
<ul>
<li>å®ç°RTLä¼ªæŒ‡ä»¤çš„æ—¶å€™, å°½å¯èƒ½ä¸ä½¿ç”¨destä¹‹å¤–çš„å¯„å­˜å™¨å­˜æ”¾ä¸­é—´ç»“æœ. ç”±äºdestæœ€åä¼šè¢«å†™å…¥æ–°å€¼, å…¶æ—§å€¼è‚¯å®šè¦è¢«è¦†ç›–, è‡ªç„¶ä¹Ÿå¯ä»¥å®‰å…¨åœ°ä½œä¸ºRTLä¼ªæŒ‡ä»¤çš„ä¸´æ—¶å¯„å­˜å™¨.</li>
<li>å®åœ¨éœ€è¦ä½¿ç”¨ä¸´æ—¶å¯„å­˜å™¨çš„æ—¶å€™, æŒ‰ç…§ä»¥ä¸‹çº¦å®šæ¥ä½¿ç”¨:</li>
<li>t0, t1, ... - åªèƒ½åœ¨RTLä¼ªæŒ‡ä»¤çš„å®ç°è¿‡ç¨‹ä¸­å­˜æ”¾ä¸­é—´ç»“æœ</li>
<li>s0, s1, ... - åªèƒ½åœ¨è¯‘ç è¾…åŠ©å‡½æ•°å’Œæ‰§è¡Œè¾…åŠ©å‡½æ•°çš„å®ç°è¿‡ç¨‹ä¸­å­˜æ”¾ä¸­é—´ç»“æœ</li>
</ul>
<p>RTLå¯„å­˜å™¨çš„ç”Ÿå­˜æœŸ</p>
<p>ä»»ä½•æŒ‡ä»¤éƒ½å¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹4ä¸­æ“ä½œ</p>
<ul>
<li>è¯»å–æŸä¸€ä¸»å­˜å•å…ƒçš„å†…å®¹ï¼Œå¹¶å°†å…¶è£…å…¥æŸä¸ªå¯„å­˜å™¨ï¼ˆå–æŒ‡ï¼Œ å–æ•°ï¼‰</li>
<li>æŠŠä¸€ä¸ªæ•°æ®ä»æŸä¸ªå¯„å­˜å™¨å­˜å…¥ç»™å®šçš„ä¸»å­˜å•å…ƒä¸­ï¼ˆå­˜ç»“æœï¼‰</li>
<li>æŠŠä¸€ä¸ªæ•°æ®ä»æŸå¯„å­˜å™¨é€åˆ°å¦ä¸€å¯„å­˜å™¨æˆ–è€…ALUï¼ˆå–æ•°ï¼Œå­˜ç»“æœï¼‰</li>
<li>è¿›è¡Œç®—æœ¯æˆ–é€»è¾‘è¿ç®—ï¼ˆPC+â€1â€ï¼Œè®¡ç®—åœ°å€ï¼Œè¿ç®—ï¼‰</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">riscv</title>
    <id>https://kigane.github.io/note/cs/isa-riscv/</id>
    <link href="https://kigane.github.io/note/cs/isa-riscv/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">i386</title>
    <id>https://kigane.github.io/note/cs/isa-i386/</id>
    <link href="https://kigane.github.io/note/cs/isa-i386/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="åŸºæœ¬ç¼–ç¨‹æ¨¡å‹"> åŸºæœ¬ç¼–ç¨‹æ¨¡å‹</h2>
<h3 id="å†…å­˜ç»„ç»‡å’Œåˆ†æ®µ-segmentation"> å†…å­˜ç»„ç»‡å’Œåˆ†æ®µ(Segmentation)</h3>
<p>ç‰©ç†å†…å­˜ç”±8-bitçš„å­—èŠ‚ç»„æˆçš„åºåˆ—æ„æˆã€‚æ¯ä¸ªå­—èŠ‚æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ï¼ŒèŒƒå›´<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1.0641em;vertical-align:-0.25em;"></span><span>[</span><span>0</span><span>,</span><span style="margin-right:0.1667em;"></span><span><span>2</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>32</span></span></span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1em;vertical-align:-0.25em;"></span><span>1</span><span>]</span></span></span></span>ï¼Œå…±4GBã€‚</p>
<p>å†…å­˜ç»„ç»‡æ¨¡å‹æœ‰ä¸¤ç§</p>
<ul>
<li>flat address space ç”±å¤§å°ä¸º4GBçš„å•ä¸ªæ•°ç»„ç»„æˆ</li>
<li>segmented address space ç”±16383(<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8974em;vertical-align:-0.0833em;"></span><span><span>2</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>14</span></span></span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:0.6444em;"></span><span>1</span></span></span></span>)ä¸ªçº¿æ€§åœ°å€ç©ºé—´é›†åˆç»„æˆï¼Œæ¯ä¸ªåœ°å€ç©ºé—´æœ€å¤š4GBã€‚
<ul>
<li>å†…å­˜ç©ºé—´æœ€å¤§ä¸º64TB(<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8141em;"></span><span><span>2</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>46</span></span></span></span></span></span></span></span></span></span></span></span>B)ã€‚ç§°ä¸ºé€»è¾‘åœ°å€ç©ºé—´</li>
<li>å¯ä»¥çœ‹ä½œæœ€å¤š16383ä¸ªä¸€ç»´å­ç©ºé—´çš„é›†åˆï¼Œæ¯ä¸ªå­ç©ºé—´å°±æ˜¯ä¸€ä¸ªSegmentã€‚å­ç©ºé—´çš„åœ°å€æ˜¯è¿ç»­çš„ã€‚</li>
<li>é€»è¾‘åœ°å€ç©ºé—´çš„æŒ‡é’ˆç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ
<ul>
<li>16bitsçš„segment selectorï¼Œç”¨äºç¡®å®šSegment</li>
<li>32bitsçš„offsetï¼Œç”¨äºç¡®å®šSegmentå†…çš„å­—èŠ‚ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>è¯¦è§ç¬¬5ç« ã€‚</p>
<h3 id="æ•°æ®ç±»å‹"> æ•°æ®ç±»å‹</h3>
<p>æ“ä½œæ•°(Operand)çš„åŸºç¡€æ•°æ®ç±»å‹</p>
<ul>
<li>Byte 8bits</li>
<li>Word 16bits</li>
<li>DoubleWord 32bits</li>
</ul>
<p>æ³¨æ„ï¼šWordçš„åœ°å€ä¸å¿…å¯¹é½åˆ°å¶æ•°åœ°å€ï¼ŒDoubleWordçš„åœ°å€ä¸å¿…å¯¹é½åˆ°èƒ½è¢«4æ•´é™¤çš„åœ°å€ã€‚è¿™æ ·æ•°æ®ç»“æ„çš„å¼¹æ€§æœ€å¤§ï¼Œå†…å­˜åˆ©ç”¨ç‡æœ€é«˜ã€‚ä½†ä½¿ç”¨32-bitsçš„æ€»çº¿ä¼ è¾“æ•ˆç‡ä¼šè¾ƒä½ã€‚ä¸ºäº†æ›´å¥½çš„ä¼ è¾“æ€§èƒ½ï¼Œæ•°æ®ç»“æ„åº”è¯¥è¦è®¾è®¡ä¸ºå°½é‡å¯¹é½ã€‚</p>
<hr>
<p>æ“ä½œæ•°(Operand)çš„åŸºç¡€æ•°æ®ç±»å‹åªæœ‰ä¸‰ç§ï¼Œä½†æ ¹æ®ä½¿ç”¨æŒ‡ä»¤çš„ä¸åŒï¼Œå¯ä»¥è¯†åˆ«å‡ºé¢å¤–çš„åŸºç¡€æ•°æ®ç±»å‹</p>
<ul>
<li>Integer: ç”¨äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºã€‚æœ€é«˜æœ‰æ•ˆä½(MSB)ä¸ºç¬¦å·ä½ã€‚</li>
<li>Ordinal: ç”¨äºŒè¿›åˆ¶åŸç è¡¨ç¤ºã€‚æ— ç¬¦å·ä½ã€‚</li>
<li>Near Pointer: 32-bit é€»è¾‘åœ°å€ã€‚ç”¨äºflat modelæˆ–Segmentå†…éƒ¨ã€‚</li>
<li>Far Pointer: 48-bit é€»è¾‘åœ°å€ã€‚ä»…ç”¨äºsegmented modelã€‚</li>
<li>String: Byte,Word,DoubleWordçš„è¿ç»­åºåˆ—ã€‚</li>
<li>Bit field: bitçš„è¿ç»­åºåˆ—ã€‚æœ€å¤§32ä½ã€‚èµ·å§‹bitä»»æ„ã€‚</li>
<li>Bit string: bitçš„è¿ç»­åºåˆ—ã€‚èµ·å§‹bitä»»æ„ã€‚æœ€å¤§<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8974em;vertical-align:-0.0833em;"></span><span><span>2</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>32</span></span></span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:0.6444em;"></span><span>1</span></span></span></span>bitsã€‚</li>
<li>BCD: æ¯ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼Œ0-3è¿™4ä¸ªbitè¡¨ç¤ºä¸€ä¸ªæ•°å­—(åªæœ‰0-9æœ‰æ„ä¹‰)ã€‚4-7ä¸ª4ä¸ªbitåœ¨ä¹˜é™¤ä¸­å¿…é¡»ä¸º0ï¼Œåœ¨åŠ å‡ä¸­å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚</li>
<li>Packed BCD:æ¯ä¸ªå­—èŠ‚è¡¨ç¤ºä¸¤ä¸ªåè¿›åˆ¶æ•°å­—ã€‚æ¯åŠä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªæ•°å­—ã€‚</li>
</ul>
<h2 id="å¯„å­˜å™¨"> å¯„å­˜å™¨</h2>
<p>80386å…±æœ‰16ä¸ªå¯„å­˜å™¨ï¼Œå¯åˆ†ä¸º3ç±»</p>
<ul>
<li>é€šç”¨å¯„å­˜å™¨(General registers) 8ä¸ª32-bitå¯„å­˜å™¨ï¼Œä¸»è¦ç”¨äºä¿å­˜æ“ä½œæ•°</li>
<li>æ®µå¯„å­˜å™¨(Segment registers) è¿™6ä¸ªå¯„å­˜å™¨å†³å®šäº†åœ¨ä»»ä¸€æ—¶åˆ»ï¼Œé‚£ä¸ªsegmentæ˜¯å¯å¯»å€çš„ã€‚</li>
<li>çŠ¶æ€å’ŒæŒ‡ä»¤å¯„å­˜å™¨(Status and instruction registers) ç”¨äºè®°å½•å’Œæ”¹å˜å¤„ç†å™¨çš„çŠ¶æ€ã€‚</li>
</ul>
<h3 id="é€šç”¨å¯„å­˜å™¨"> é€šç”¨å¯„å­˜å™¨</h3>
<p><img src="/assets/img/general-registers.png" alt="é€šç”¨å¯„å­˜å™¨" /></p>
<p>å…¶ä¸­</p>
<ul>
<li>EAX, EDX, ECX, EBX, EBP, ESI, EDI, ESPæ˜¯32ä½å¯„å­˜å™¨;</li>
<li>AX, DX, CX, BX, BP, SI, DI, SPæ˜¯16ä½å¯„å­˜å™¨;</li>
<li>AL, DL, CL, BL, AH, DH, CH, BHæ˜¯8ä½å¯„å­˜å™¨.</li>
</ul>
<p>æŸäº›æŒ‡ä»¤ä¼šä½¿ç”¨ç‰¹å®šçš„å¯„å­˜å™¨ï¼Œå¦‚ï¼šåŒç²¾åº¦æµ®ç‚¹ä¹˜é™¤è¿ç®—ï¼ŒI/Oï¼Œå­—ç¬¦ä¸²æŒ‡ä»¤ï¼Œå¾ªç¯ï¼Œæ ˆæ“ä½œç­‰ç­‰ã€‚</p>
<h3 id="æ®µå¯„å­˜å™¨"> æ®µå¯„å­˜å™¨</h3>
<p><img src="/assets/img/other-registers.png" alt="å…¶ä»–å¯„å­˜å™¨" />
å®Œæ•´çš„ç¨‹åºé€šå¸¸ç”±è®¸å¤šä¸åŒçš„æ¨¡å—ç»„æˆï¼Œæ¯ä¸ªæ¨¡å—åŒ…æ‹¬æŒ‡ä»¤å’Œæ•°æ®ã€‚ ä½†æ˜¯ï¼Œåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´çš„ä»»ä¸€æ—¶åˆ»ï¼Œå®é™…ä½¿ç”¨åˆ°çš„ä»…ä¸ºç¨‹åºæ¨¡å—çš„å°å­é›†ã€‚ 80386æ¶æ„é€šè¿‡æä¾›ç›´æ¥è®¿é—®å½“å‰æ¨¡å—ç¯å¢ƒçš„æŒ‡ä»¤å’Œæ•°æ®çš„æœºåˆ¶æ¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¿…è¦æ—¶å¯ä»¥è®¿é—®é¢å¤–çš„æ®µã€‚</p>
<p>æ‰§è¡Œä¸­çš„ç¨‹åºå¯ä»¥åœ¨ä»»ä¸€æ—¶åˆ»ç«‹å³è®¿é—®å…­ä¸ªå†…å­˜æ®µã€‚è¿™å…­ä¸ªå†…å­˜æ®µåˆ†åˆ«ç”¨å¯„å­˜å™¨CS,SS,DS,ES,FS,GSæ ‡è¯†ï¼Œæ¯ä¸ªæ®µå¯„å­˜å™¨å”¯ä¸€ç¡®å®šä¸€ä¸ªç‰¹å®šçš„ç¨‹åºæ®µï¼Œå¹¶å¯ä»¥é«˜é€Ÿè®¿é—®ã€‚</p>
<ul>
<li>CS(Code Segment) å¯¹åº”ä¿å­˜å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—æ‰€åœ¨çš„æ®µã€‚CSçš„å€¼åªèƒ½é€šè¿‡æ§åˆ¶è½¬ç§»æŒ‡ä»¤(e.g JMP,CALL)ï¼Œä¸­æ–­æˆ–å¼‚å¸¸éšå¼æ”¹å˜ã€‚</li>
<li>SS(Stack Segment) å­ç¨‹åºè°ƒç”¨ï¼Œå‚æ•°ï¼Œè¿‡ç¨‹æ¿€æ´»è®°å½•é€šå¸¸ä¼šåœ¨æ ˆä¸Šåˆ†é…å†…å­˜ã€‚æ‰€æœ‰çš„æ ˆæ“ä½œéƒ½ä¼šä½¿ç”¨SSæ¥å®šä½æ ˆã€‚ä¸åƒCS, SSå¯„å­˜å™¨å¯ä»¥æ˜¾å¼åŠ è½½ï¼Œå› æ­¤ç¨‹åºå‘˜å¯ä»¥åŠ¨æ€å®šä¹‰æ ˆã€‚</li>
<li>DSï¼ŒESï¼ŒFSå’ŒGSå¯„å­˜å™¨æŒ‡å®šå››ä¸ªæ•°æ®æ®µï¼Œæ¯ä¸ªæ•°æ®æ®µéƒ½å¯ç”±å½“å‰æ‰§è¡Œçš„ç¨‹åºå¯»å€ã€‚å¯¹å››ä¸ªå•ç‹¬çš„æ•°æ®åŒºåŸŸçš„å¯è®¿é—®æ€§æœ‰åŠ©äºç¨‹åºæœ‰æ•ˆåœ°è®¿é—®ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„ã€‚æœ‰äº›ç¨‹åºå¯èƒ½éœ€è¦è®¿é—®ä¸æ­¢4ä¸ªæ•°æ®æ®µï¼Œæ­¤æ—¶éœ€è¦åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´æ”¹å˜è¿™4ä¸ªå¯„å­˜å™¨çš„å€¼ã€‚è¿™éœ€è¦ç¨‹åºåœ¨è®¿é—®ç‰¹å®šæ•°æ®æ—¶ï¼Œéœ€è¦å…ˆåŠ è½½æ­£ç¡®çš„æ®µå¯„å­˜å™¨ã€‚</li>
</ul>
<p>å¤„ç†å™¨å°†åŸºå€ä¸ç”±æ®µå¯„å­˜å™¨é€‰æ‹©çš„æ®µåœ°å€ç›¸å…³è”ã€‚å³å…ˆé€šè¿‡æ®µå¯„å­˜å™¨æ‰¾åˆ°ç›¸åº”çš„æ®µï¼Œå†ç”¨32-bitåŸºå€åœ¨æ®µå†…å¯»å€ã€‚</p>
<h4 id="æ ˆçš„å®ç°"> æ ˆçš„å®ç°</h4>
<p>æ ˆæ“ä½œç›¸å…³å¯„å­˜å™¨</p>
<ul>
<li>SS ä¸€ä¸ªç³»ç»Ÿå¯ä»¥æœ‰å¤šä¸ªæ ˆï¼Œæ¯ä¸ªæ ˆå¤§å°æœ€å¤šå¯è¾¾4GBã€‚ç”±SSç›´æ¥å¯»å€çš„æ ˆï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œå½“å‰â€æ ˆã€‚SSè‡ªåŠ¨ç”¨äºæ‰€æœ‰æ ˆæ“ä½œï¼Œç”±å¤„ç†å™¨å¤„ç†ã€‚</li>
<li>ESP ESPå§‹ç»ˆæŒ‡å‘æ ˆçš„æ ˆé¡¶(æ ˆæ˜¯ä»é«˜åœ°å€å‘ä½åœ°å€æ‰©å±•çš„ï¼Œæ‰€ä»¥æ ˆé¡¶çš„åœ°å€æœ€å°)ã€‚ESPè¢«PUSH,POP,å­ç¨‹åºè°ƒç”¨å’Œè¿”å›ï¼Œä¸­æ–­éšå¼å¼•ç”¨ã€‚</li>
<li>EBP EBPæŒ‡å‘å½“å‰è¿‡ç¨‹ç¡®å®šçš„æ ˆå¸§çš„åŸºå€(æ ˆå¸§çš„æœ€é«˜åœ°å€ï¼Œä¸ä¼šéšæ ˆçš„å˜æ¢è€Œæ”¹å˜)ã€‚å› æ­¤é€‚ç”¨äºè®¿é—®æ ˆä¸­çš„å…ƒç´ ã€‚</li>
</ul>
<h4 id="æ ‡å¿—å¯„å­˜å™¨-eflags"> æ ‡å¿—å¯„å­˜å™¨--EFLAGS</h4>
<p><img src="/assets/img/EFLAGS.png" alt="EFLAGS" />
æ ‡å¿—å¯ä»¥åˆ†ä¸º3ç»„</p>
<ul>
<li>Status flagsï¼šç”¨äºè®©æŸä¸ªæŒ‡ä»¤çš„ç»“æœå½±å“ä¸‹ä¸€ä¸ªæŒ‡ä»¤ã€‚ç®—æ•°æŒ‡ä»¤ä½¿ç”¨å‰6ä¸ª
<ul>
<li>CF(Carry Flag): æœ‰è¿›ä½æˆ–å€Ÿä½å‘ç”Ÿæ˜¯è®¾ç½®ï¼Œå¦åˆ™æ¸…é™¤ã€‚</li>
<li>PF(Parity Flag): å¦‚æœç»“æœçš„ä½8bitæœ‰å¶æ•°ä¸ª1ï¼Œåˆ™è®¾ç½®ï¼Œå¦åˆ™æ¸…é™¤ã€‚</li>
<li>AF(Adjust Flag): ç”¨äºBCDæ•°æ®è¿ç®—ã€‚å¦‚æœALçš„ä½4ä½æœ‰è¿›ä½æˆ–å€Ÿä½åˆ™è®¾ç½®ï¼Œå¦åˆ™æ¸…é™¤ã€‚</li>
<li>ZF(Zoro Flag): å¦‚æœç»“æœä¸º0åˆ™è®¾ç½®ï¼Œå¦åˆ™æ¸…é™¤ã€‚</li>
<li>SF(Sign Flag): ç»“æœçš„æœ€é«˜æœ‰æ•ˆä½ã€‚</li>
<li>OF(Overflow Flag): æº¢å‡ºæ ‡å¿—ã€‚(<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.07153em;">C</span><span><span><span><span style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>n</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âŠ•</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:0.8917em;vertical-align:-0.2083em;"></span><span><span style="margin-right:0.07153em;">C</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>n</span><span>âˆ’</span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.2083em;"><span></span></span></span></span></span></span><span>,</span><span style="margin-right:0.1667em;"></span><span><span style="margin-right:0.07153em;">C</span><span><span><span><span style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>n</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯æœ€é«˜ä½æ˜¯å¦æº¢å‡ºï¼Œ<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8917em;vertical-align:-0.2083em;"></span><span><span style="margin-right:0.07153em;">C</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>n</span><span>âˆ’</span><span>1</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯æ¬¡é«˜ä½æ˜¯å¦æº¢å‡º)</li>
<li>TF(Trap Flag): é™·é˜±æ ‡å¿—ã€‚Debugæ—¶ç”¨åˆ°ã€‚</li>
</ul>
</li>
<li>Control flagsï¼š
<ul>
<li>DF(Direction Flag): å½“å­—ç¬¦ä¸²æŒ‡ä»¤è‡ªå‡æ—¶è®¾ç½®(å³ä»é«˜åœ°å€å‘ä½åœ°å€å¤„ç†å­—ç¬¦ä¸²æ—¶)ï¼Œåä¹‹æ¸…é™¤ã€‚</li>
</ul>
</li>
<li>System flagsï¼š</li>
</ul>
<hr>
<h4 id="æŒ‡ä»¤æŒ‡é’ˆ"> æŒ‡ä»¤æŒ‡é’ˆ</h4>
<p>ç¨‹åºè®¡æ•°å™¨(PC) -- EIP (Extended Instruction Pointer) æŒ‡å‘è¦æ‰§è¡Œçš„æŒ‡ä»¤</p>
<h3 id="æŒ‡ä»¤æ ¼å¼"> æŒ‡ä»¤æ ¼å¼</h3>
<p>æŒ‡ä»¤=æ“ä½œ+æ“ä½œæ•°ç±»å‹&amp;æ“ä½œæ•°ä½ç½®</p>
<p><strong>æŒ‡ä»¤ä¸­å¸¸è§å…ƒç´ </strong></p>
<ul>
<li>Prefix åœ¨æŒ‡ä»¤ä¹‹å‰çš„1-2ä¸ªå­—èŠ‚ï¼Œä¿®æ”¹æŒ‡ä»¤çš„æ“ä½œã€‚
<ul>
<li>Segment override æ˜¾å¼æŒ‡å®šæŒ‡å®šåº”è¯¥ä½¿ç”¨çš„æ®µå¯„å­˜å™¨ï¼Œè¦†ç›–é»˜è®¤çš„ã€‚</li>
<li>Address size äº§ç”Ÿ16æˆ–32ä½åœ°å€</li>
<li>Operand size äº§ç”Ÿ16æˆ–32ä½æ“ä½œæ•°</li>
<li>Repeat å­—ç¬¦ä¸²æŒ‡ä»¤ä½¿ç”¨è¯¥å‰ç¼€ï¼Œè®©è¯¥æŒ‡ä»¤ä½œç”¨äºstringçš„æ¯ä¸ªå…ƒç´ ã€‚</li>
</ul>
</li>
<li>Opcode æ“ä½œç ã€‚ç¡®å®šæŒ‡ä»¤çš„æ“ä½œ</li>
<li>Register specifier ä¸€æ¡æŒ‡ä»¤å¯ä»¥æŒ‡å®š1-2ä¸ªå¯„å­˜å™¨æ“ä½œæ•°ã€‚å¯„å­˜å™¨æŒ‡ç¤ºç¬¦è¦ä¹ˆå’ŒOpcodeåœ¨ä¸€ä¸ªå­—èŠ‚(+rb,+rw...)ï¼Œè¦ä¹ˆå’ŒAddress modeåœ¨ä¸€ä¸ªå­—èŠ‚ã€‚</li>
<li>Addressing-mode specifier å†³å®šæ“ä½œæ•°æ˜¯å¯„å­˜å™¨è¿˜æ˜¯å†…å­˜ä½ç½®ã€‚å¦‚æœæ˜¯å†…å­˜ä½ç½®ï¼Œå†³å®šæ˜¯å¦ä½¿ç”¨ä½ç§»ï¼ŒåŸºå€å¯„å­˜å™¨ï¼Œç´¢å¼•å¯„å­˜å™¨å’Œç¼©æ”¾å› å­ã€‚</li>
<li>SIB byte (scale, index, base) å½“addressing-mode specifieræš—ç¤ºè¦ä½¿ç”¨ç´¢å¼•å¯„å­˜å™¨æ¥è®¡ç®—æ“ä½œæ•°çš„åœ°å€æ—¶ï¼ŒæŒ‡ä»¤ä¸­ä¼šåŒ…å«ä¸€ä¸ªSIBå­—èŠ‚æ¥ç¼–ç åŸºå€å¯„å­˜å™¨ï¼Œç´¢å¼•å¯„å­˜å™¨å’Œç¼©æ”¾å› å­ã€‚</li>
<li>Displacement å½“addressing-mode specifieræš—ç¤ºè¦ä½¿ç”¨ä½ç§»æ¥è®¡ç®—æ“ä½œæ•°çš„åœ°å€æ—¶ï¼Œä½ç§»ä¼šç¼–ç åœ¨æŒ‡ä»¤ä¸­ã€‚ä½ç§»æ˜¯ä¸€ä¸ª<strong>æœ‰ç¬¦å·æ•´æ•°</strong>ï¼Œé€šå¸¸8-bitå°±è¶³å¤Ÿï¼ŒæŒ‰éœ€è¦å¯ä»¥æ‰©å±•åˆ°16-bitï¼Œ32-bitã€‚</li>
<li>Immediate operand ç«‹å³æ•°ï¼Œå°±æ˜¯æŒ‡ä»¤çš„ç›´æ¥æ“ä½œæ•°ã€‚å¯ä»¥æ˜¯8,16,32ä½ã€‚ä¸ºäº†ä»¥é˜²ä¸‡ä¸€æœ‰8bitæ“ä½œæ•°å’Œ32/16-bitæ“ä½œæ•°åˆå¹¶çš„æ“ä½œï¼Œé€šå¸¸ä¼šè‡ªåŠ¨æ‰©å±•ã€‚</li>
</ul>
<h3 id="æ“ä½œæ•°é€‰æ‹©-operand-selection"> æ“ä½œæ•°é€‰æ‹© Operand Selection</h3>
<p>æ“ä½œæ•°æ˜¯æŒ‡ä»¤æ“çºµçš„æ•°æ®ï¼Œä¸€ä¸ªæŒ‡ä»¤å¯ä»¥æœ‰0æˆ–å¤šä¸ªæ“ä½œæ•°ã€‚æ“ä½œæ•°å¯ä»¥ä½äº</p>
<ul>
<li>æŒ‡ä»¤æœ¬èº«(ç«‹å³æ•°)</li>
<li>å¯„å­˜å™¨</li>
<li>å†…å­˜</li>
<li>I/Oç«¯å£</li>
</ul>
<p>å¯¹äºæœ‰æ“ä½œæ•°çš„æŒ‡ä»¤ï¼Œæ“ä½œæ•°å¯ä»¥æ˜¯éšå¼çš„ï¼Œæ˜¾å¼çš„ï¼Œæˆ–è€…æ—¢æœ‰éšå¼æ“ä½œæ•°åˆæœ‰æ˜¾å¼æ“ä½œæ•°ã€‚ä¾‹å¦‚</p>
<ul>
<li>AAM(Ascii Adjust for mutiplication) ä½œç”¨äºAXå¯„å­˜å™¨ã€‚éšå¼ï¼Œ</li>
<li>XCHG EAX,EBX æ˜¾å¼</li>
<li>PUSH COUNTER æ˜¾å¼+éšå¼ å†…å­˜å˜é‡COUNTERæ‹·è´åˆ°æ ˆä¸­</li>
</ul>
<hr>
<p><strong>å¤§å¤šæ•°æŒ‡ä»¤æœ‰éšå¼æ“ä½œæ•°ã€‚æ‰€æœ‰çš„ç®—æ•°æ“ä½œæ•°éƒ½ä¼šæ›´æ–°EFLAGSã€‚</strong></p>
<hr>
<p>æŒ‡ä»¤å¯ä»¥æ˜¾ç¤ºå¼•ç”¨1-2ä¸ªæ“ä½œæ•°ã€‚æœ‰ä¸¤ä¸ªæ“ä½œæ•°çš„æŒ‡ä»¤ï¼Œå…¶ç»“æœä¸€å®šä¼šè¦†ç›–å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ï¼Œç§°ä¸ºç›®æ ‡æ“ä½œæ•°(dest)ï¼Œå¦ä¸€ä¸ªåˆ™ç§°æºæ“ä½œæ•°(src)ã€‚æœ‰ä¸¤ä¸ªæ˜¾å¼æ“ä½œæ•°çš„æŒ‡ä»¤ï¼Œä¸€ä¸ªæ“ä½œæ•°ä¸ºå†…å­˜(M)æˆ–å¯„å­˜å™¨(R),å¦ä¸€ä¸ªæ“ä½œæ•°ä¸€å®šæ˜¯å¯„å­˜å™¨æˆ–ç«‹å³æ•°(Immediate)å…è®¸çš„æ“ä½œæœ‰</p>
<ul>
<li>R-to-R</li>
<li>R-to-M</li>
<li>M-to-R</li>
<li>I-to-R</li>
<li>I-to-M</li>
</ul>
<p>M-Mæ¨¡å¼åœ¨å­—ç¬¦ä¸²å¤„ç†æŒ‡ä»¤ä¸­å­˜åœ¨ï¼Œä½†ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯éšå¼è¡¨ç¤ºçš„ã€‚Push,Popä¹Ÿæœ‰ç‚¹ç‰¹æ®Šã€‚</p>
<p>I: æŒ‡ä»¤ä¸­çš„æœ‰ç¬¦å·æ•°å­—å­—é¢é‡
R: å¯¹åº”å„ä¸ªå¯„å­˜å™¨</p>
<p>Memory Operand<br>
æ•°æ®æ“çºµæŒ‡ä»¤åœ¨å¤„ç†å†…å­˜æ“ä½œæ•°æ—¶ï¼Œå¿…é¡»æŒ‡æ˜åŒ…å«è¯¥æ“ä½œæ•°çš„æ®µ(segment)å’Œæ“ä½œæ•°åœ¨æ®µä¸­çš„ä½ç½®(offset)ã€‚ç„¶è€Œï¼Œä¸ºäº†é€Ÿåº¦å’ŒæŒ‡ä»¤ç¼–ç çš„ç®€ç»ƒï¼Œå°†æ®µé€‰æ‹©å™¨(segment selector)æ”¾åœ¨é«˜é€Ÿçš„æ®µå¯„å­˜å™¨ä¸­ã€‚å› æ­¤æ•°æ®æ“çºµæŒ‡ä»¤åªéœ€è¦æŒ‡æ˜offsetå³å¯ã€‚<br>
å†…å­˜å¯»å€</p>
<ul>
<li>å¤§å¤šæ•°æ•°æ®æ“çºµæŒ‡ä»¤è®¿é—®å†…å­˜æ—¶éƒ½æ˜¾å¼åŒ…å«ä¸€ä¸ªæŒ‡ç¤ºå¯»å€æ–¹æ³•çš„å­—èŠ‚modR/Må­—èŠ‚ã€‚é€šå¸¸è·Ÿåœ¨opcodeåã€‚å¦‚æœæ“ä½œæ•°ä¸ºå†…å­˜åœ°å€ï¼Œåˆ™æœ€ç»ˆåœ°å€LA = SR + (B,I,s,Dçš„å„ç§ç»„åˆ)ï¼Œå…¶ä¸­(B:åŸºå€å¯„å­˜å™¨ï¼ŒI:ç´¢å¼•å¯„å­˜å™¨ï¼Œs:ç¼©æ”¾å› å­ï¼ŒD:ä½ç§»)ã€‚å½“ç”¨åˆ°ç´¢å¼•å¯„å­˜å™¨çš„æ—¶å€™ï¼ŒmodR/Må­—èŠ‚åä¼šè·Ÿç€ä¸€ä¸ªå­—èŠ‚ï¼ŒæŒ‡ç¤ºä½¿ç”¨çš„ç´¢å¼•å¯„å­˜å™¨å’Œç¼©æ”¾å› å­ã€‚</li>
<li>æŸäº›ç‰¹æ®Šçš„å¯»å€
<ul>
<li>LA = SR + D æŸäº›MOVæŒ‡ä»¤ï¼Œéšå¼ä½¿ç”¨EAXï¼Œoffsetå†™åœ¨æŒ‡ä»¤ä¸­ã€‚</li>
<li>å­—ç¬¦ä¸²æ“ä½œ
<ul>
<li>ä½¿ç”¨ DS:ESI å¯»å€ï¼Œå¦‚MOVS, CMPS, OUTS, LODS, SCAS</li>
<li>ä½¿ç”¨ ES:EDI å¯»å€ï¼Œå¦‚MOVS, CMPS, INS, STOS</li>
</ul>
</li>
<li>æ ˆæ“ä½œï¼Œä½¿ç”¨ SS:ESP å¯»å€ã€‚ å¦‚PUSH, POP, PUSHA, PUSHAD, POPA, POPAD, PUSHF, PUSHFD, POPF, POPFD, CALL, RET, IRET, IRETDä»¥åŠå¼‚å¸¸å’Œä¸­æ–­ã€‚</li>
</ul>
</li>
</ul>
<h4 id="é»˜è®¤çš„æ®µå¯„å­˜å™¨é€‰æ‹©è§„åˆ™"> é»˜è®¤çš„æ®µå¯„å­˜å™¨é€‰æ‹©è§„åˆ™</h4>
<table>
<thead>
<tr>
<th>å†…å­˜å¼•ç”¨</th>
<th>æ®µå¯„å­˜å™¨</th>
<th>è§„åˆ™</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŒ‡ä»¤</td>
<td>CS</td>
<td>åœ¨é¢„å–(prefetch)æŒ‡ä»¤æ—¶è‡ªåŠ¨é€‰æ‹©</td>
</tr>
<tr>
<td>æ ˆ</td>
<td>SS</td>
<td>ä»»ä½•æ ˆpush,popæ“ä½œã€‚ä»¥EBP/ESPä¸ºåŸºå€çš„å¯»å€</td>
</tr>
<tr>
<td>Local Data</td>
<td>DS</td>
<td>å…¶ä»–</td>
</tr>
<tr>
<td>Dest Strings</td>
<td>ES</td>
<td>å­—ç¬¦ä¸²æŒ‡ä»¤çš„ dest</td>
</tr>
</tbody>
</table>
<h4 id="æœ‰æ•ˆåœ°å€è®¡ç®—"> æœ‰æ•ˆåœ°å€è®¡ç®—</h4>
<p><img src="/assets/img/effective-address.png" alt="æœ‰æ•ˆåœ°å€è®¡ç®—" /></p>
<p>å¯¹ä»¥modR/Må®šä¹‰çš„å†…å­˜æ“ä½œæ•°ï¼Œåœ¨ç›®æ ‡æ®µå†…çš„æœ‰æ•ˆåœ°å€ç”±3ä¸ªéƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>æŒ‡ä»¤ä¸­çš„ä½ç§»å…ƒç´ ã€‚å› ä¸ºæ˜¯ç¼–ç åœ¨æŒ‡ä»¤ä¸­ï¼Œæ‰€ä»¥é€‚åˆåœ°å€çš„å›ºå®šéƒ¨åˆ†
<ul>
<li>ç®€å•æ ‡é‡æ“ä½œæ•°çš„ä½ç½®</li>
<li>é™æ€(static)åˆ†é…çš„æ•°ç»„çš„å¼€å¤´</li>
<li>recordä¸­æŸä¸ªitemçš„offset</li>
</ul>
</li>
<li>åŸºå€å¯„å­˜å™¨</li>
<li>å˜å€å¯„å­˜å™¨(å¯èƒ½ä¼šä¹˜ä»¥ç¼©æ”¾å› å­2, 4, æˆ– 8ï¼Œä¸Šå›¾é”™äº†)
<ul>
<li>åŸºå€+å˜å€é€‚åˆåŠ¨æ€å†³å®šçš„åœ°å€</li>
<li>æ ˆä¸­çš„å±€éƒ¨å˜é‡å’Œè¿‡ç¨‹å‚æ•°</li>
<li>records[i]</li>
<li>äºŒç»´æ•°ç»„ä¸­çš„ä¸€ç»´æ•°ç»„çš„èµ·å§‹</li>
<li>åŠ¨æ€åˆ†é…çš„æ•°ç»„åœ°å€</li>
</ul>
</li>
<li>æ³¨æ„ï¼ŒESPä¸èƒ½ä½œä¸ºå˜å€å¯„å­˜å™¨ã€‚EBPï¼ŒESPä½œä¸ºåŸºå€å¯„å­˜å™¨æ—¶ï¼Œé»˜è®¤çš„æ®µå¯„å­˜å™¨ä¸ºSSã€‚</li>
<li>å½“æ•°ç»„å…ƒç´ å¤§å°ä¸º2,4,8æ—¶ï¼Œç”±äºscalingçš„å­˜åœ¨ï¼Œç´¢å¼•æ¯”è¾ƒé«˜æ•ˆ(ä¸ç”¨åˆ†å¼€ç§»åŠ¨æˆ–å¤šæ¬¡ä½¿ç”¨æŒ‡ä»¤)ã€‚</li>
</ul>
<p>å¸¸ç”¨çš„å¯»å€ç»„åˆï¼Œæ®µå¯„å­˜å™¨çœç•¥</p>
<ul>
<li>A = D ä½ç§»æœ¬èº«å°±æ˜¯åœ°å€ã€‚é€šå¸¸ç”¨äºstaticåˆ†é…å†…å­˜çš„æ“ä½œæ•°ã€‚</li>
<li>A = B å¯„å­˜å™¨ä¸­çš„å€¼å°±æ˜¯åœ°å€ã€‚æŸäº›å˜é‡ã€‚</li>
<li>A = B + D
<ul>
<li>å½“ç´¢å¼•çš„static arrayå…ƒç´ å¤§å°ä¸æ˜¯2,4,8Bæ—¶ã€‚Dä¸ºç›®æ ‡å…ƒç´ çš„offsetã€‚</li>
<li>è®¿é—®recordsæ•°ç»„ä¸­çš„æŸä¸ªitemã€‚Bä¸ºæŸä¸ªrecordï¼ŒDä¸ºitemçš„offset</li>
</ul>
</li>
<li>A = Ixs + D å½“ç´¢å¼•çš„static arrayå…ƒç´ å¤§å°æ˜¯2,4,8Bæ—¶ã€‚Dä¸ºæ•°ç»„é¦–åœ°å€ã€‚</li>
<li>A = B + I + D
<ul>
<li>äºŒç»´æ•°ç»„ï¼ŒDä¸ºm[0][0]ï¼Œ</li>
<li>è®¿é—®recordsæ•°ç»„ä¸­çš„æŸä¸ªitemã€‚Bä¸ºrecords[0]ï¼ŒDä¸ºitemçš„offset</li>
</ul>
</li>
<li>A = B + Ixs+ D æœ€ä¸€èˆ¬çš„å¯»å€æ ¼å¼
<ul>
<li>åœ¨æ±‡ç¼–ä»£ç ä¸­å†™ä½œ displacement(R[base_reg], R[index_reg], scale_factor)</li>
<li>å…¶å®ƒå¯»å€æ ¼å¼éƒ½å¯ä»¥çœ‹ä½œè¿™ç§ä¸€èˆ¬æ ¼å¼çš„ç‰¹ä¾‹</li>
</ul>
</li>
</ul>
<h3 id="ä¸­æ–­å’Œå¼‚å¸¸-interrupts-and-exceptions"> ä¸­æ–­å’Œå¼‚å¸¸(Interrupts and Exceptions)</h3>
<p>80386æœ‰ä¸¤ä¸ªæœºåˆ¶æ¥æ‰“æ–­ç¨‹åºæ‰§è¡Œ</p>
<ul>
<li>å¼‚å¸¸ï¼šæ˜¯å¯¹åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´CPUæ£€æµ‹åˆ°çš„ç‰¹å®šæ¡ä»¶ä½œå‡ºå›åº”çš„åŒæ­¥äº‹ä»¶(synchronous event)ã€‚</li>
<li>ä¸­æ–­ï¼šæ˜¯å¤–éƒ¨è®¾å¤‡éœ€è¦æ³¨æ„æ—¶è§¦å‘çš„å¼‚æ­¥äº‹ä»¶(asynchronous event)</li>
</ul>
<p>å¼‚å¸¸å’Œä¸­æ–­å¾ˆç±»ä¼¼ï¼Œéƒ½ä¼šå¼•èµ·å¤„ç†å™¨æš‚æ—¶æš‚åœ(suspend)å½“å‰ç¨‹åºçš„æ‰§è¡Œï¼Œå¹¶æ‰§è¡Œå¦ä¸€ä¸ªä¼˜å…ˆçº§æ›´é«˜çš„ç¨‹åºã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºå¼•å‘åŸå› ã€‚å¼‚å¸¸æ€»æ˜¯å¯é‡ç°çš„ï¼Œåªè¦ä»¥åŒæ ·çš„ç¨‹åºå’Œæ•°æ®å†æ¬¡æ‰§è¡Œã€‚è€Œä¸­æ–­é€šå¸¸ç‹¬ç«‹äºå½“å‰æ‰§è¡Œçš„ç¨‹åºã€‚</p>
<p>ä¸­æ–­è¯¦è§ç¬¬9ç« ã€‚åº”ç”¨ç¨‹åºå‘˜é€šå¸¸ä¸å¤„ç†ä¸­æ–­ï¼Œåªå¤„ç†å¼‚å¸¸ã€‚ç³»ç»Ÿç¨‹åºå‘˜éœ€è¦å®šä¹‰åº”ç”¨ç¨‹åºå’Œå¼‚å¸¸æœºåˆ¶ä¹‹é—´çš„æ¥å£ï¼Œå¹¶æä¾›ç»™åº”ç”¨ç¨‹åºå‘˜ã€‚</p>
<p>//TODO</p>
<p>Reserved Exceptions and Interrupts</p>
<table>
<thead>
<tr>
<th>Vector Number</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Divide Error</td>
</tr>
<tr>
<td>1</td>
<td>Debug Exceptions</td>
</tr>
<tr>
<td>2</td>
<td>NMI Interrupt</td>
</tr>
<tr>
<td>3</td>
<td>Breakpoint</td>
</tr>
<tr>
<td>4</td>
<td>INTO Detected Overflow</td>
</tr>
<tr>
<td>5</td>
<td>BOUND Range Exceeded</td>
</tr>
<tr>
<td>6</td>
<td>Invalid Opcode</td>
</tr>
<tr>
<td>7</td>
<td>Coprocessor Not Available</td>
</tr>
<tr>
<td>8</td>
<td>Double Exception</td>
</tr>
<tr>
<td>9</td>
<td>Coprocessor Segment Overrun</td>
</tr>
<tr>
<td>10</td>
<td>Invalid Task State Segment</td>
</tr>
<tr>
<td>11</td>
<td>Segment Not Present</td>
</tr>
<tr>
<td>12</td>
<td>Stack Fault</td>
</tr>
<tr>
<td>13</td>
<td>General Protection</td>
</tr>
<tr>
<td>14</td>
<td>Page Fault</td>
</tr>
<tr>
<td>15</td>
<td>(reserved)</td>
</tr>
<tr>
<td>16</td>
<td>Coprocessor Error</td>
</tr>
<tr>
<td>17-32</td>
<td>(reserved)</td>
</tr>
</tbody>
</table>
<h2 id="åº”ç”¨æŒ‡ä»¤é›†"> åº”ç”¨æŒ‡ä»¤é›†</h2>
<h3 id="æ•°æ®ç§»åŠ¨æŒ‡ä»¤"> æ•°æ®ç§»åŠ¨æŒ‡ä»¤</h3>
<h4 id="é€šç”¨æ•°æ®ç§»åŠ¨æŒ‡ä»¤"> é€šç”¨æ•°æ®ç§»åŠ¨æŒ‡ä»¤</h4>
<ul>
<li>MOV (move)</li>
<li>XCHG (exchange) äº¤æ¢ä¸¤ä¸ªæ“ä½œæ•°ã€‚ä¸éœ€è¦ä¸´æ—¶å˜é‡ï¼Œå¯ä»£æ›¿3æ¡MOVæŒ‡ä»¤ã€‚åœ¨å®ç°semaphores(ä¿¡å·é‡)åŠç±»ä¼¼çš„è¿›ç¨‹åŒæ­¥æ•°æ®ç»“æ„æ—¶å¾ˆæœ‰ç”¨ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯Mï¼Œåˆ™XCHGè‡ªåŠ¨æ¿€æ´»LOCKä¿¡å·ã€‚</li>
</ul>
<h4 id="æ ˆæ“ä½œæŒ‡ä»¤"> æ ˆæ“ä½œæŒ‡ä»¤</h4>
<ul>
<li>PUSH é™ä½ESPï¼Œå†å°†æºæ“ä½œæ•°æ”¾åˆ°ESPæŒ‡çš„ä½ç½®ã€‚é€šå¸¸ç”¨äºè¿‡ç¨‹è°ƒç”¨æ—¶ä¿å­˜å‚æ•°æˆ–åœ¨æ ˆä¸Šä¿å­˜ä¸´æ—¶å˜é‡ã€‚</li>
<li>PUSHA (Push All Registers) å°†å…«ä¸ªé€šç”¨å¯„å­˜å™¨çš„å€¼å­˜åˆ°æ ˆä¸­ã€‚é¡ºåºä¸ºEAX,EDX,ECX,EBX,OLD ESP,EBP,ESI,EDIã€‚å¯ä»¥ç®€åŒ–è¿‡ç¨‹è°ƒç”¨æ—¶ä¿å­˜å¯„å­˜å™¨çš„å€¼æ“ä½œã€‚</li>
<li>POP å°†æ ˆä¸­ä¿å­˜çš„å€¼æ”¾åˆ°ç›®æ ‡æ“ä½œæ•°ï¼Œå†æé«˜ESPã€‚</li>
<li>POPA å°†æ ˆä¸­çš„ä¸ªé€šç”¨å¯„å­˜å™¨çš„å€¼å–å‡ºï¼Œå¹¶ç”¨è¿™äº›å€¼é‡è®¾å¯„å­˜å™¨ã€‚ä½†å¿½ç•¥OLD ESPã€‚</li>
</ul>
<h4 id="ç±»å‹è½¬æ¢æŒ‡ä»¤"> ç±»å‹è½¬æ¢æŒ‡ä»¤</h4>
<ul>
<li>CWD (Convert Word to Doubleword)</li>
<li>CDQ (Convert Doubleword to Quad-Word)</li>
<li>CBW (Convert Byte to Word)</li>
<li>CWDE (Convert Word to Doubleword Extended)</li>
<li>åªèƒ½æ“ä½œEAXä¸­çš„æ•°æ®ã€‚å¯ç”¨äºè¢«é™¤ä¹‹å‰è¢«é™¤æ•°çš„æ‰©å±•ã€‚éƒ½æ˜¯æœ‰ç¬¦å·æ‰©å±•ã€‚</li>
</ul>
<hr>
<ul>
<li>MOVSX (Move with Sign Extension)</li>
<li>MOVZX (Move with Zero Extension)</li>
<li>å¯ä½¿ç”¨ä»»ä½•å¯„å­˜å™¨ã€‚å¦ä¸€ä¸ªæ“ä½œå¯ä»¥ä¸ºMæˆ–Rã€‚</li>
</ul>
<h3 id="äºŒå…ƒç®—æœ¯æŒ‡ä»¤"> äºŒå…ƒç®—æœ¯æŒ‡ä»¤</h3>
<p>ä¼šå½±å“CF,SF,OF,ZFå››ä¸ªflagã€‚</p>
<h4 id="åŠ å‡æŒ‡ä»¤"> åŠ å‡æŒ‡ä»¤</h4>
<ul>
<li>ADD (Add Integers) å¦‚æœæº¢å‡ºï¼Œè®¾ç½®CF=1</li>
<li>ADC (Add Integers with Carry)  å¦‚æœCF=1ï¼Œå†+1ã€‚å¦åˆ™åŒADD</li>
<li>INC (Increment) +1ã€‚ä¸å½±å“CF</li>
<li>SUB (Subtract Integers) å¦‚æœå€Ÿä½(borrow)ï¼Œè®¾ç½®CF=1</li>
<li>SBB (Subtract Integers with Borrow) å¦‚æœCF=1ï¼Œå†-1ã€‚å¦åˆ™åŒSUB</li>
<li>DEC (Decrement) -1ã€‚ä¸å½±å“CF</li>
</ul>
<h4 id="æ¯”è¾ƒå’Œå–è´ŸæŒ‡ä»¤"> æ¯”è¾ƒå’Œå–è´ŸæŒ‡ä»¤</h4>
<ul>
<li>CMP (Compare)  ç”¨dest-srcï¼Œæ›´æ–°OF, SF, ZF, AF, PF, å’Œ CF æ ‡å¿—ï¼Œä½†ä¸ä¼šæ”¹å˜destå’Œsrcçš„å€¼ã€‚</li>
<li>NEG (Negate)  0-dest</li>
</ul>
<h4 id="ä¹˜æ³•æŒ‡ä»¤"> ä¹˜æ³•æŒ‡ä»¤</h4>
<ul>
<li>MUL (Unsigned Integer Multiply) æºæ“ä½œæ•°å’Œç´¯åŠ å™¨(EAX/AX/AL)ç›¸ä¹˜ï¼Œç»“æœå¤§å°ä¸ºæ“ä½œæ•°çš„ä¸¤å€ã€‚å¦‚æœç»“æœçš„ä¸ŠåŠéƒ¨åˆ†ä¸ä¸º0ï¼Œåˆ™å°†CF,OFè®¾ä¸º1ï¼Œå¦åˆ™è®¾ä¸º0ã€‚</li>
<li>IMUL (Signed Integer Multiply)
<ul>
<li>å•æ“ä½œæ•° å’ŒMULä¸€æ ·ï¼Œå¦ä¸€ä¸ªä¹˜æ•°éšå¼ä¸ºEAX/AX/ALã€‚å–å†³äºæ“ä½œæ•°çš„å¤§å°ã€‚</li>
<li>åŒæ“ä½œæ•° å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ä¸€å®šåœ¨é€šç”¨å¯„å­˜å™¨ä¸­ï¼Œç»“æœä¹Ÿæ”¾åœ¨é€šç”¨å¯„å­˜å™¨ä¸­ã€‚</li>
<li>ä¸‰æ“ä½œæ•° ä¸€ä¸ªå¿…å®šæ˜¯æœ‰ç¬¦å·ç«‹å³æ•°ï¼Œä¸€ä¸ªåœ¨å¯„å­˜å™¨æˆ–å†…å­˜ä¸­ï¼Œå‰©ä¸‹ä¸€ä¸ªé€šå¸¸æ˜¯é€šç”¨å¯„å­˜å™¨ï¼Œå­˜å‚¨ä¹˜ç§¯ã€‚</li>
<li>ç»“æœå¤§å°ä¸ºæ“ä½œæ•°çš„ä¸¤å€ã€‚å¦‚æœç»“æœçš„ä¸ŠåŠéƒ¨åˆ†ä¸ä¸º0ï¼Œåˆ™å°†CF,OFè®¾ä¸º1ï¼Œå¦åˆ™è®¾ä¸º0ã€‚</li>
<li>åŒï¼Œä¸‰æ“ä½œæ•°çš„å½¢å¼ç»“æœä¼šè¢«æˆªæ–­(truncate)åˆ°æºæ“ä½œæ•°çš„é•¿åº¦ã€‚ä¹Ÿå› æ­¤å…¼å®¹æ— ç¬¦å·æ•°çš„ä¹˜ï¼Œå› ä¸ºä¹˜ç§¯çš„ä½åŠéƒ¨åˆ†æ˜¯ç›¸åŒçš„ã€‚</li>
</ul>
</li>
</ul>
<h4 id="é™¤æ³•æŒ‡ä»¤"> é™¤æ³•æŒ‡ä»¤</h4>
<p>å¦‚æœé™¤æ•°ä¸º0æˆ–å•†è¶…è¿‡EAX/AX/ALçš„è¡¨ç¤ºèŒƒå›´ï¼Œåˆ™è§¦å‘ä¸€ä¸ªå¼‚å¸¸(interrupt zero)<br>
DIV (Unsigned Integer Divide) è¢«é™¤æ•°éšå¼å­˜å‚¨åœ¨EAXä¸­ã€‚å•†ä¸ä¸ºæ•´æ•°æ—¶å‘0èˆå…¥ã€‚
IDIV (Signed Integer Divide) åŒDIVã€‚ä½™æ•°çš„ç¬¦å·åŒè¢«é™¤æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>Divisor(SRC é™¤æ•°)</th>
<th>Dividend(è¢«é™¤æ•°)</th>
<th>Quotient(å•†)</th>
<th>Remainder (ä½™æ•°)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Byte</td>
<td>AX</td>
<td>AL</td>
<td>AH</td>
</tr>
<tr>
<td>Word</td>
<td>DX:AX</td>
<td>AX</td>
<td>DX</td>
</tr>
<tr>
<td>Doubleword</td>
<td>EDX:EAX</td>
<td>EAX</td>
<td>EDX</td>
</tr>
</tbody>
</table>
<h3 id="åè¿›åˆ¶ç®—æ•°æŒ‡ä»¤"> åè¿›åˆ¶ç®—æ•°æŒ‡ä»¤</h3>
<h4 id="packed-bcdæŒ‡ä»¤"> packed BCDæŒ‡ä»¤</h4>
<ul>
<li>DAA (Decimal Adjust after Addition)</li>
<li>DAS (Decimal Adjust after Subtraction)</li>
</ul>
<h4 id="unpacked-bcdæŒ‡ä»¤"> unpacked BCDæŒ‡ä»¤</h4>
<ul>
<li>AAA (ASCII Adjust after Addition)</li>
<li>AAS (ASCII Adjust after Subtraction)</li>
<li>AAM (ASCII Adjust after Multiplication)</li>
<li>AAD (ASCII Adjust before Division)</li>
</ul>
<h3 id="é€»è¾‘æŒ‡ä»¤"> é€»è¾‘æŒ‡ä»¤</h3>
<h4 id="å¸ƒå°”æ“ä½œæŒ‡ä»¤"> å¸ƒå°”æ“ä½œæŒ‡ä»¤</h4>
<ul>
<li>NOT å¯¹ä¸€ä¸ªRæˆ–Mä¸­çš„æ“ä½œæ•°å–åç ã€‚ä¸å½±å“flagsã€‚</li>
<li>AND/OR/XOR æ“ä½œæ•°å¯ä»¥æ˜¯R-R,R-M,I-R/Mã€‚ä¼šå°†OFï¼ŒCFç½®é›¶ï¼ŒAFçš„è¡Œä¸ºæœªå®šä¹‰ï¼Œæ›´æ–°SFï¼ŒZFï¼ŒPFã€‚</li>
</ul>
<h4 id="ä½æµ‹è¯•å’Œä¿®æ”¹æŒ‡ä»¤"> ä½æµ‹è¯•å’Œä¿®æ”¹æŒ‡ä»¤</h4>
<p>é¦–å…ˆå°†é€‰ä¸­çš„bitçš„å€¼ç¬¦ç»™CFï¼Œå†å°†æ–°å€¼æ”¾åˆ°è¯¥bitä¸Šã€‚</p>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Effect on CF</th>
<th>Effect on Selected Bit</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bit (Bit Test)</td>
<td>CF â† BIT</td>
<td>(none)</td>
</tr>
<tr>
<td>BTS (Bit Test and Set)</td>
<td>CF â† BIT</td>
<td>BIT â† 1</td>
</tr>
<tr>
<td>BTR (Bit Test and Reset)</td>
<td>CF â† BIT</td>
<td>BIT â† 0</td>
</tr>
<tr>
<td>BTC (Bit Test and Complement)</td>
<td>CF â† BIT</td>
<td>BIT â† NOT(BIT)</td>
</tr>
</tbody>
</table>
<h4 id="ä½æ‰«ææŒ‡ä»¤"> ä½æ‰«ææŒ‡ä»¤</h4>
<ul>
<li>BSF (Bit Scan Forward) ä»0-7/15/31æ‰«æã€‚ä¿å­˜ç¬¬ä¸€ä¸ªset bit(å³1ï¼Œunset bitå°±æ˜¯0)çš„ç´¢å¼•ä½ç½®ã€‚å¦‚æœå…¨ä¸º0ï¼Œåˆ™set ZFã€‚åä¹‹æ¸…é™¤ã€‚å¦å¤–ï¼Œå¦‚æœè¢«æ‰«æçš„æ“ä½œæ•°å…¨ä¸º0ï¼Œåˆ™ç»“æœæœªå®šä¹‰ã€‚</li>
<li>BSR (Bit Scan Reverse) åè¿‡æ¥æ‰«æã€‚</li>
</ul>
<h4 id="shift-rotateæŒ‡ä»¤"> shift&amp;rotateæŒ‡ä»¤</h4>
<h3 id="æ§åˆ¶è½¬ç§»æŒ‡ä»¤"> æ§åˆ¶è½¬ç§»æŒ‡ä»¤</h3>
<h4 id="æ— æ¡ä»¶è½¬ç§»æŒ‡ä»¤"> æ— æ¡ä»¶è½¬ç§»æŒ‡ä»¤</h4>
<ul>
<li>JMP (Jump)
<ul>
<li>ç›´æ¥è·³è½¬ æ“ä½œæ•°å†™åœ¨æŒ‡ä»¤ä¸­ï¼Œä¸”ä¸ºæœ‰ç¬¦å·çš„ç«‹å³æ•°ï¼Œè¡¨ç¤ºç›¸å¯¹ä½ç§»(å•ä½ä¸ºByte,Word,æˆ–DoubleWord)ã€‚è®¡ç®—çš„ç»“æœæ›´æ–°EIPã€‚</li>
<li>é—´æ¥è·³è½¬ é€šè¿‡Ræˆ–MæŒ‡å®šåº”è¯¥æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ç»å¯¹åœ°å€ã€‚</li>
</ul>
</li>
<li>CALL æ¿€æ´»å¦ä¸€ä¸ªè¿‡ç¨‹(å…¶åœ°å€å¯ä»¥åœ¨æŸä¸ªé€šç”¨å¯„å­˜å™¨ä¸­ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¼–ç åœ¨æŒ‡ä»¤ä¸­çš„å†…å­˜åœ°å€)ï¼Œåœ¨æ ˆä¸­ä¿å­˜CALLæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€(å³å½“å‰EIPçš„å€¼)ï¼Œä¾›RETä½¿ç”¨ã€‚</li>
<li>RET (Return From Procedure) ä»æ ˆä¸­æ¢å¤CALLä¿å­˜çš„EIPçš„å€¼ã€‚</li>
<li>IRET (Return From Interrupt) å°†æ§åˆ¶è¿”å›åˆ°è¢«ä¸­æ–­è¿‡ç¨‹ã€‚åœ¨æ¢å¤EIPä¹‹å¤–ï¼Œè¿˜ä¼šæ¢å¤ä¸­æ–­æœºåˆ¶å­˜å‚¨åœ¨æ ˆä¸­çš„flagsã€‚</li>
</ul>
<h4 id="æ¡ä»¶è½¬ç§»æŒ‡ä»¤"> æ¡ä»¶è½¬ç§»æŒ‡ä»¤</h4>
<p>Unsigned Conditional Transfers</p>
<table>
<thead>
<tr>
<th>Mnemonic</th>
<th>Condition Tested</th>
<th>&quot;Jump If...&quot;</th>
</tr>
</thead>
<tbody>
<tr>
<td>JA/JNBE</td>
<td>(CF or ZF) = 0</td>
<td>above/not below nor equal</td>
</tr>
<tr>
<td>JAE/JNB</td>
<td>CF = 0 above or</td>
<td>equal/not below</td>
</tr>
<tr>
<td>JB/JNAE</td>
<td>CF = 1 below/not</td>
<td>above nor equal</td>
</tr>
<tr>
<td>JBE/JNA</td>
<td>(CF or ZF) = 1</td>
<td>below or equal/not above</td>
</tr>
<tr>
<td>JC</td>
<td>CF = 1</td>
<td>carry</td>
</tr>
<tr>
<td>JE/JZ</td>
<td>ZF = 1</td>
<td>equal/zero</td>
</tr>
<tr>
<td>JNC</td>
<td>CF = 0</td>
<td>not carry</td>
</tr>
<tr>
<td>JNE/JNZ</td>
<td>ZF = 0</td>
<td>not equal/not zero</td>
</tr>
<tr>
<td>JNP/JPO</td>
<td>PF = 0</td>
<td>not parity/parity odd</td>
</tr>
<tr>
<td>JP/JPE</td>
<td>PF = 1</td>
<td>parity/parity even</td>
</tr>
</tbody>
</table>
<hr>
<p>Signed Conditional Transfers</p>
<table>
<thead>
<tr>
<th>Mnemonic</th>
<th>Condition Tested</th>
<th>&quot;Jump If...&quot;</th>
</tr>
</thead>
<tbody>
<tr>
<td>JG/JNLE</td>
<td>((SF xor OF) or ZF) = 0</td>
<td>greater/not less nor equal</td>
</tr>
<tr>
<td>JGE/JNL</td>
<td>(SF xor OF) = 0</td>
<td>greater or equal/not less</td>
</tr>
<tr>
<td>JL/JNGE</td>
<td>(SF xor OF) = 1</td>
<td>less/not greater nor equal</td>
</tr>
<tr>
<td>JLE/JNG</td>
<td>((SF xor OF) or ZF) = 1</td>
<td>less or equal/not greater</td>
</tr>
<tr>
<td>JNO</td>
<td>OF = 0 not</td>
<td>overflow</td>
</tr>
<tr>
<td>JNS</td>
<td>SF = 0 not</td>
<td>sign (positive, including 0)</td>
</tr>
<tr>
<td>JO</td>
<td>OF = 1</td>
<td>overflow</td>
</tr>
<tr>
<td>JS</td>
<td>SF = 1</td>
<td>sign (negative)</td>
</tr>
</tbody>
</table>
<h3 id="æ‚é¡¹æŒ‡ä»¤"> æ‚é¡¹æŒ‡ä»¤</h3>
<ul>
<li>LEA (Load Effective Address) LEA DEST SRCã€‚å°†SRC(ä¸€å®šæ˜¯M)çš„åœ°å€å­˜æ”¾åˆ°DEST(ä¸€å®šæ˜¯R)ä¸­ã€‚ä¾‹å¦‚ï¼ŒLEA EBX, EBCDIC_TABLEæ„ä¸ºå°†EBCDIC_TABLEçš„é¦–åœ°å€å­˜æ”¾åˆ°EBXä¸­ã€‚</li>
<li>NOP (No Operation) ç”¨äºå†…å­˜å¯¹é½ã€‚</li>
<li>XLAT (Translate) å°†ALä¸­çš„ä¸€ä¸ªå­—èŠ‚æ›¿æ¢æˆç”¨æˆ·æŒ‡å®šçš„è¡¨ä¸­çš„ä¸€ä¸ªå­—èŠ‚ã€‚å½“æ‰§è¡ŒXLATæ—¶ï¼ŒEBXæ˜¯è¡¨çš„é¦–åœ°å€ï¼ŒALä¸­çš„å€¼ä¸ºè¡¨çš„ç´¢å¼•ã€‚æ‰§è¡ŒXLATåï¼ŒALçš„å†…å®¹å˜ä¸ºè¡¨ä¸­æŒ‡å®šä½ç½®çš„å†…å®¹ï¼ŒEBXçš„å€¼ä¸å˜ã€‚å› ä¸ºALåªæœ‰8-bitï¼Œæ‰€ä»¥è¡¨æœ€å¤š256Bã€‚</li>
</ul>
<h2 id="_80386æŒ‡ä»¤é›†è¯´æ˜"> 80386æŒ‡ä»¤é›†è¯´æ˜</h2>
<h3 id="æ“ä½œæ•°å’Œåœ°å€çš„å¤§å°-operand-size-address-size"> æ“ä½œæ•°å’Œåœ°å€çš„å¤§å°(Operand-Size, Address-Size)</h3>
<ul>
<li>default: æŒ‡ä»¤ä¸­çš„D-bitï¼Œä¸º0è¡¨ç¤º16-bitï¼Œä¸º1è¡¨ç¤º32-bitã€‚</li>
<li>æŒ‡ä»¤å‰ç¼€: Operand-Sizeå¯¹åº”66H,Address-Sizeå¯¹åº”67Hã€‚å…¶æ•ˆæœä¸ºå¯¹å½“å‰D-bitå–åã€‚(ä¾‹å¦‚ï¼Œæœ‰66Hï¼ŒDä¸º0ï¼Œåˆ™æœ‰æ•ˆæ“ä½œæ•°å¤§å°ä¸º32-bit)</li>
<li>æ ˆçš„Address-Size: åœ¨SSä¸­çš„æ•°æ®æ®µçš„B-bitã€‚ä¸º0è¡¨ç¤º16-bitï¼Œå³ä½¿ç”¨SPï¼Œä¸º1è¡¨ç¤º32-bitï¼Œå³ä½¿ç”¨ESPã€‚</li>
<li>é€šå¸¸32-bitæœºå™¨é»˜è®¤D-bitä¸º1ï¼ŒæŒ‡ä»¤å¦‚æœå‡ºç°66Hå‰ç¼€ï¼Œè¡¨ç¤ºè¦æ”¹å˜æ“ä½œæ•°å¤§å°ä¸º16-bitã€‚</li>
</ul>
<h3 id="æŒ‡ä»¤æ ¼å¼-2"> æŒ‡ä»¤æ ¼å¼</h3>
<p><img src="/assets/img/80386-instruction-format.png" alt="æŒ‡ä»¤æ ¼å¼" /></p>
<p>å¯ç”¨çš„æŒ‡ä»¤å‰ç¼€(Hè¡¨ç¤ºè¯¥æ•°ä¸º16è¿›åˆ¶)</p>
<ul>
<li>F3H REP prefix (used only with string instructions)</li>
<li>F3H REPE/REPZ prefix (used only with string instructions)</li>
<li>F2H REPNE/REPNZ prefix (used only with string instructions)</li>
<li>F0H LOCK prefix</li>
</ul>
<hr>
<p>æ®µè¦†ç›–æŒ‡ä»¤å‰ç¼€</p>
<ul>
<li>2EH CS segment override prefix</li>
<li>36H SS segment override prefix</li>
<li>3EH DS segment override prefix</li>
<li>26H ES segment override prefix</li>
<li>64H FS segment override prefix</li>
<li>65H GS segment override prefix</li>
<li>66H Operand-size override</li>
<li>67H Address-size override</li>
</ul>
<h4 id="modr-m-and-sib-bytes"> ModR/M and SIB Bytes</h4>
<p><img src="/assets/img/modrm-sib.png" alt="ModR/M&amp;SIB" />
x86é€šè¿‡ModR/Må­—èŠ‚æ¥æŒ‡ç¤ºå†…å­˜æ“ä½œæ•°</p>
<ul>
<li>mod(MSBçš„ä¸¤ä½) å’Œr/mç»„åˆä¸º32ç§å¯èƒ½çš„å€¼ï¼ŒåŒ…æ‹¬8ä¸ªå¯„å­˜å™¨ï¼Œ24ç§å¯»å€æ¨¡å¼(indexing mode)
<ul>
<li>32ä½å¯»å€</li>
<li>00 é€šå¸¸ä»£è¡¨åœ°å€å€¼åœ¨å¯„å­˜å™¨å†…</li>
<li>01 é€šå¸¸ä»£è¡¨åœ°å€å€¼åœ¨å¯„å­˜å™¨å†…ï¼Œè¿˜è¦åŠ ä¸ŠmodR/Må­—èŠ‚åè·Ÿçš„8-bitä½ç§»</li>
<li>10 é€šå¸¸ä»£è¡¨åœ°å€å€¼åœ¨å¯„å­˜å™¨å†…ï¼Œè¿˜è¦åŠ ä¸ŠmodR/Må­—èŠ‚åè·Ÿçš„32-bitä½ç§»</li>
<li>11 å–å¯„å­˜å™¨å†…çš„å€¼</li>
</ul>
</li>
<li>reg/op(modåä¸‰ä½) å–å†³äºæŒ‡ä»¤çš„opcodeï¼Œé€šå¸¸ä»£è¡¨å¯„å­˜å™¨ç¼–å·ï¼Œåœ¨æŸäº›æŒ‡ä»¤ä¸­ä»£è¡¨opcodeä¿¡æ¯ã€‚</li>
<li>r/m(LSBçš„ä¸‰ä½) å¯èƒ½ä»£è¡¨æ“ä½œæ•°ä½¿ç”¨çš„å¯„å­˜å™¨ï¼Œçœ‹å’Œmodçš„ç»„åˆã€‚</li>
</ul>
<p>SIBå­—èŠ‚åœ¨r/mä¸º100æ—¶ä½¿ç”¨ã€‚åŠ ä¸åŠ ä½ç§»ï¼Œä½ç§»å‡ ä½çœ‹modå­—æ®µã€‚</p>
<ul>
<li>ss æ¯”ä¾‹å› å­ã€‚00:1B, 01:2B, 10:4B, 11:8Bã€‚</li>
<li>index ç´¢å¼•å¯„å­˜å™¨ä½¿ç”¨çš„é€šç”¨å¯„å­˜å™¨ç¼–å·</li>
<li>base åŸºå€å¯„å­˜å™¨ä½¿ç”¨çš„é€šç”¨å¯„å­˜å™¨ç¼–å·</li>
</ul>
<h4 id="å¦‚ä½•é˜…è¯»æŒ‡ä»¤æ ¼å¼è¯´æ˜é¡µ"> å¦‚ä½•é˜…è¯»æŒ‡ä»¤æ ¼å¼è¯´æ˜é¡µ</h4>
<ul>
<li>i386æ‰‹å†Œä¸­çš„æ±‡ç¼–è¯­è¨€æ ¼å¼éƒ½æ˜¯Intelæ ¼å¼, è€Œobjdumpçš„é»˜è®¤æ ¼å¼æ˜¯AT&amp;Tæ ¼å¼, ä¸¤è€…çš„æºæ“ä½œæ•°å’Œç›®çš„æ“ä½œæ•°ä½ç½®ä¸ä¸€æ ·, åƒä¸‡ä¸è¦æŠŠå®ƒä»¬æ··æ·†äº†! å¦åˆ™ä½ å°†ä¼šé™·å…¥éš¾ä»¥ç†è§£çš„bugä¸­.</li>
<li>opcode
<ul>
<li>/digit(0-7) ModR/Må­—èŠ‚åªä½¿ç”¨r/måŸŸï¼Œreg/opcodeå­—æ®µåŒ…å«çš„æ•°å­—ä¸ºæŒ‡ä»¤æ“ä½œç çš„æ‰©å±•ã€‚å¯¹äºå«æœ‰/digitè®°å·çš„æŒ‡ä»¤å½¢å¼, éœ€è¦é€šè¿‡æŒ‡ä»¤æœ¬èº«çš„opcodeå’ŒModR/Mä¸­çš„æ‰©å±•opcodeå…±åŒå†³å®šæŒ‡ä»¤çš„å½¢å¼, ä¾‹å¦‚80 /0è¡¨ç¤ºaddæŒ‡ä»¤çš„ä¸€ç§å½¢å¼, è€Œ80 /5åˆ™è¡¨ç¤ºsubæŒ‡ä»¤çš„ä¸€ç§å½¢å¼, åªçœ‹opcodeçš„é¦–å­—èŠ‚80ä¸èƒ½åŒºåˆ†å®ƒä»¬.</li>
<li>/r è¡¨ç¤ºopcodeåè·Ÿä¸€ä¸ªModR/Må­—èŠ‚ï¼Œreg/opcodeå­—æ®µåŒ…å«çš„æ•°å­—ä¸ºé€šç”¨å¯„å­˜å™¨çš„ç¼–ç ã€‚</li>
<li>cb, cw, cd, cp æ“ä½œç åçš„1-byte(cb),2-byte(cw),4-byte(cd),6-byte(cp)ç”¨äºæŒ‡å®šcode offset(ç›¸å¯¹æ®µå¯„å­˜å™¨çš„åç§»)æˆ–æ˜¯æ®µå¯„å­˜å™¨çš„æ–°å€¼ã€‚ä¾‹å¦‚CALLæŒ‡ä»¤çš„ä¸€ç§</li>
<li>ib, iw, id æ“ä½œç ï¼ŒmodR/Mæˆ–SIBåçš„1-byte(ib),2-byte(iw),4-byte(id)æ˜¯æŒ‡ä»¤çš„ç«‹å³æ•°ã€‚æ˜¯å¦æœ‰ç¬¦å·æœ‰æ“ä½œç å†³å®š</li>
<li>+rb, +rw, +rdåˆ†åˆ«è¡¨ç¤º8ä½, 16ä½, 32ä½é€šç”¨å¯„å­˜å™¨çš„ç¼–ç . å’ŒModR/Mä¸­çš„regåŸŸä¸ä¸€æ ·çš„æ˜¯, è¿™ä¸‰ç§è®°å·è¡¨ç¤ºç›´æ¥å°†é€šç”¨å¯„å­˜å™¨çš„ç¼–å·æŒ‰æ•°å€¼åŠ åˆ°opcodeä¸­ (ä¹Ÿå¯ä»¥çœ‹æˆé€šç”¨å¯„å­˜å™¨çš„ç¼–ç åµŒåœ¨opcodeçš„ä½ä¸‰ä½), å› æ­¤è¯†åˆ«æŒ‡ä»¤çš„æ—¶å€™å¯ä»¥é€šè¿‡opcodeçš„ä½ä¸‰ä½ç¡®å®šä¸€ä¸ªå¯„å­˜å™¨æ“ä½œæ•°.</li>
</ul>
</li>
<li>instruction
<ul>
<li>ä»¥ä¸‹è¡¨ç¤ºæ“ä½œæ•°çš„ç±»å‹</li>
<li>rel8 ç›¸å¯¹åœ°å€ï¼ŒèŒƒå›´ä»åŒ…å«æŒ‡ä»¤æœ«å°¾çš„ä¹‹å‰çš„128ä¸ªå­—ç¬¦åˆ°æŒ‡ä»¤ç»“æŸåçš„127ä¸ªå­—ç¬¦</li>
<li>rel16,rel32 åœ¨åŒä¸€ä¸ªSegmentå†…çš„ç›¸å¯¹åœ°å€ã€‚operand-sizeåˆ†åˆ«ä¸º16-bitå’Œ32-bit</li>
<li>ptr16:16, ptr16:32 FARPOINTERã€‚ç•¥ã€‚</li>
<li>r8 AL, CL, DL, BL, AH, CH, DH, BHä¸­çš„ä¸€ä¸ª</li>
<li>r16 AX, CX, DX, BX, SP, BP, SI, DIä¸­çš„ä¸€ä¸ª</li>
<li>r32 EAX, ECX, EDX, EBX, ESP, EBP, ESI, EDIä¸­çš„ä¸€ä¸ª</li>
<li>imm8 8ä½æœ‰ç¬¦å·ç«‹å³æ•°ã€‚å’Œwordï¼ŒDoubleWordçš„æ“ä½œæ•°åŒæ—¶ä½¿ç”¨æ—¶ï¼Œä¼šè¿›è¡Œæœ‰ç¬¦å·æ‰©å±•ã€‚</li>
<li>imm16 16ä½æœ‰ç¬¦å·ç«‹å³æ•°ã€‚</li>
<li>imm32 32ä½æœ‰ç¬¦å·ç«‹å³æ•°ã€‚</li>
<li>r/m8|16|32 å­˜å‚¨åœ¨å¯„å­˜å™¨æˆ–å†…å­˜ä¸­çš„1B|2B|4Bæ“ä½œæ•°</li>
<li>m8|16|32 å†…å­˜ä¸­çš„æ“ä½œæ•°</li>
<li>m16:16, M16:32 FARPOINTERå†…å­˜æ“ä½œæ•°ã€‚ç•¥ã€‚</li>
<li>m16 &amp; 32, m16 &amp; 16, m32 &amp; 32 å†…å­˜æ•°æ®å¯¹</li>
<li>moffs8, moffs16, moffs32 æŸäº›MOVå˜ä½“ä½¿ç”¨çš„å†…å­˜åç§»(ç›¸å¯¹äºå½“å‰Segmentçš„åŸº)ï¼Œè¿™äº›å˜ä½“ä¸ä¼šç”¨åˆ°modR/Må­—èŠ‚</li>
<li>Sreg æ®µå¯„å­˜å™¨ã€‚ES=0, CS=1, SS=2, DS=3, FS=4, and GS=5.</li>
</ul>
</li>
<li>clock æŒ‡ä»¤æ‰§è¡Œéœ€è¦çš„æ—¶é’Ÿå‘¨æœŸæ•°
<ul>
<li>n é‡å¤æ¬¡æ•°</li>
<li>m æ‰§è¡Œçš„ä¸‹ä¸€ä¸ªæŒ‡ä»¤ä¸­çš„ç»„ä»¶æ•°é‡</li>
<li>pm ä¿æŠ¤æ¨¡å¼</li>
</ul>
</li>
<li>description
<ul>
<li>æœ‰ä¸¤ä¸ªæ“ä½œæ•°æ—¶ï¼Œé€šå¸¸SRCåœ¨å³ï¼ŒDESTåœ¨å·¦ã€‚</li>
<li><code>&quot;(*&quot;å’Œ&quot;*)&quot;</code>ä¹‹é—´æ˜¯æ³¨é‡Š</li>
<li>å¯„å­˜å™¨çš„åå­—ä»£è¡¨å¯„å­˜å™¨çš„å†…å®¹ã€‚åŠ äº†<code>[]</code>åï¼Œè¡¨ç¤ºå¯„å­˜å™¨ä¸­å†…å®¹æ˜¯åœ°å€ï¼Œè¯¥åœ°å€çš„å†…å®¹ä¸º<code>[register]</code>ä»£è¡¨çš„å†…å®¹ã€‚</li>
<li><code>[]</code> å°±æ˜¯å–åœ°å€çš„å†…å®¹ã€‚åœ°å€æ˜¯ç›¸å¯¹äºæ®µåŸºå€çš„åœ°å€ã€‚</li>
<li>A := B å°†Bçš„å€¼èµ‹äºˆA</li>
<li>OperandSize ä»£è¡¨æŒ‡ä»¤ä¸­çš„ operand-size attributeã€‚AddressSizeï¼ŒStackAddrSizeç±»ä¼¼</li>
<li>eSP ä»£è¡¨ESPæˆ–SPï¼Œå–å†³äºå½“å‰æ ˆä¸­çš„B-bitã€‚</li>
</ul>
</li>
<li>opcode map
<ul>
<li>æ“ä½œæ•°ç±»å‹å¯ä»¥ç”¨Zzè¡¨ç¤ºï¼ŒZè¡¨ç¤ºå¯»å€æ–¹å¼ï¼Œzè¡¨ç¤ºæ“ä½œæ•°é•¿åº¦</li>
<li>A ç›´æ¥å¯»å€ã€‚æ²¡æœ‰modR/Må­—èŠ‚ï¼Œæ“ä½œæ•°ç›´æ¥ç¼–ç åœ¨æŒ‡ä»¤ä¸­</li>
<li>E opcodeåé¢ç´§æ¥ç€ä¸€ä¸ªmodR/Må­—èŠ‚ï¼ŒæŒ‡å®šäº†æ“ä½œæ•°ã€‚æ“ä½œæ•°è¦ä¹ˆæ˜¯é€šç”¨å¯„å­˜å™¨ï¼Œè¦ä¹ˆæ˜¯å†…å­˜åœ°å€ã€‚å¦‚æœæ˜¯å†…å­˜åœ°å€</li>
<li>G modR/Må­—èŠ‚çš„regå­—æ®µé€‰æ‹©ä¸€ä¸ªé€šç”¨å¯„å­˜å™¨</li>
<li>F EFLAGS</li>
<li>I ç«‹å³æ•°ã€‚å…¶å€¼ç¼–ç åœ¨æŒ‡ä»¤çš„ä¸‹ä¸€ä¸ªå­—èŠ‚</li>
<li>J æŒ‡ä»¤åŒ…å«ä¸€ä¸ªç›¸å¯¹EIPçš„ç›¸å¯¹ä½ç§»(relative offset)</li>
<li>O æŒ‡ä»¤æ²¡æœ‰modR/Må­—èŠ‚ï¼Œæ“ä½œæ•°çš„åç§»é‡è¢«ç¼–ç ä¸ºå•è¯æˆ–åŒå­—</li>
<li>ä»¥ä¸‹ä¸ºæ“ä½œæ•°ç±»å‹æ ‡è¯†ç¬¦ï¼Œå’Œoperand size attributeæ— å…³çš„å‰é¢åŠ -ã€‚</li>
<li>a ä¸¤ä¸ªå•å­—/åŒå­—æ“ä½œæ•°ï¼Œåœ¨å†…å­˜ä¸­</li>
<li>c byte/word</li>
<li>p 32/48ä½æŒ‡é’ˆ</li>
<li>s Six-byte pseudo-descriptor</li>
<li>v å•å­—/åŒå­—</li>
<li>-b byte</li>
<li>-w word</li>
<li>-d double-word</li>
</ul>
</li>
</ul>
<h3 id="æŒ‡ä»¤"> æŒ‡ä»¤</h3>
<div><pre><code><span>// PUSH</span>
<span>IF</span> StackAddrSize <span>=</span> <span>16</span>
<span>THEN</span>
 <span>IF</span> OperandSize <span>=</span> <span>16</span> <span>THEN</span>
 <span>SP</span> â† <span>SP</span> <span>-</span> <span>2</span><span>;</span>
 <span>(</span><span>SS</span><span>:</span><span>SP</span><span>)</span> <span>â†</span> <span>(</span><span>SOURCE</span><span>)</span><span>;</span> 
 <span>ELSE</span>
 <span>SP</span> â† <span>SP</span> <span>-</span> <span>4</span><span>;</span>
 <span>(</span><span>SS</span><span>:</span><span>SP</span><span>)</span> <span>â†</span> <span>(</span><span>SOURCE</span><span>)</span><span>;</span>
 <span>FI</span><span>;</span>
<span>ELSE</span>
 <span>IF</span> OperandSize <span>=</span> <span>16</span>
 <span>THEN</span>
 <span>ESP</span> â† <span>ESP</span> <span>-</span> <span>2</span><span>;</span>
 <span>(</span><span>SS</span><span>:</span><span>ESP</span><span>)</span> <span>â†</span> <span>(</span><span>SOURCE</span><span>)</span><span>;</span>
 <span>ELSE</span>
 <span>ESP</span> â† <span>ESP</span> <span>-</span> <span>4</span><span>;</span>
 <span>(</span><span>SS</span><span>:</span><span>ESP</span><span>)</span> <span>â†</span> <span>(</span><span>SOURCE</span><span>)</span><span>;</span>
 <span>FI</span><span>;</span>
<span>FI</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><ul>
<li>e8 cw CALL rel16 é¦–å…ˆPUSH(IP)ï¼Œåœ¨EIP=EIP+rel16&amp;0x0000ffff</li>
<li>68 PUSH imm</li>
</ul>
<h2 id="intel-å’Œ-at-t-æ ¼å¼æ±‡ç¼–çš„è¯­æ³•å·®å¼‚"> Intel å’Œ AT&amp;T æ ¼å¼æ±‡ç¼–çš„è¯­æ³•å·®å¼‚</h2>
<table>
<thead>
<tr>
<th>type</th>
<th>Intel</th>
<th>AT&amp;T</th>
</tr>
</thead>
<tbody>
<tr>
<td>Comments</td>
<td>;</td>
<td>//</td>
</tr>
<tr>
<td>Instructions</td>
<td>Untagged add</td>
<td>Tagged with operand sizes: addq</td>
</tr>
<tr>
<td>Registers</td>
<td>eax, ebx, etc.</td>
<td>%eax,%ebx, etc.</td>
</tr>
<tr>
<td>Immediates</td>
<td>0x100</td>
<td>$0x100</td>
</tr>
<tr>
<td>Indirect</td>
<td>[eax]</td>
<td>(%eax)</td>
</tr>
<tr>
<td>General indirect</td>
<td>[base + reg + reg * scale + displacement]</td>
<td>displacement(reg, reg, scale)</td>
</tr>
</tbody>
</table>
<p>AT&amp;T and Intel syntax use the opposite order for source and destination operands. Intel add eax, 4 is addl $4, %eax. The source, dest convention is maintained for compatibility with previous Unix assemblers. Note that instructions with more than one source operand, such as the enter instruction, do not have reversed order.</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Linux - Ubantu</title>
    <id>https://kigane.github.io/note/cs/linux/</id>
    <link href="https://kigane.github.io/note/cs/linux/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å®‰è£…"> å®‰è£…</h2>
<p><a href="https://nju-projectn.github.io/ics-pa-gitbook/ics2020/0.1.html" target="_blank" rel="noopener noreferrer">NJU PA0</a><br>
åˆ†åŒºï¼šæ­¤ç”µè„‘-&gt;ç®¡ç†-&gt;ç£ç›˜ç®¡ç†ï¼Œé€‰æ‹©ç£ç›˜ï¼Œå³é”®-&gt;å‹ç¼©å·ï¼Œåˆ†é…é€‚å½“ç©ºé—´å³å¯ï¼Œä¸ç”¨æ–°å»ºç®€å•å·ã€‚</p>
<h2 id="è®¾ç½®"> è®¾ç½®</h2>
<ul>
<li>sudo apt install gnome-tweaks</li>
<li>sudo apt remove gnome-shell-extension-ubantu-dock</li>
<li>sudo dpkg -i package_file.deb</li>
</ul>
<h2 id="å…³äºé”®ä½"> å…³äºé”®ä½</h2>
<ul>
<li>C == ctrl, S == shift, M == meta | alt | esc</li>
<li>ESC == <code>C-[</code></li>
<li>Up == <code>C-p</code></li>
<li>Down == <code>C-n</code></li>
<li>Left == <code>C-b</code></li>
<li>Right == <code>C-f</code></li>
</ul>
<p>åœ¨vimç­‰åº”ç”¨ä¸­<code>C-s</code>ä¼šå¯¼è‡´æ— æ³•äº¤äº’ï¼Œæ®è¯´æ˜¯å’Œsoftware flow controlæœ‰å…³ã€‚æŒ‰<code>C-q</code>å¯ä»¥é€€å‡ºè¿™ç§çŠ¶æ€ã€‚</p>
<h2 id="ansiè½¬ä¹‰ç "> ANSIè½¬ä¹‰ç </h2>
<ul>
<li>CSI æ§åˆ¶åºåˆ—èµ·å§‹ç¬¦ <code>ESC[</code></li>
<li>SGR ä¿®æ”¹æ¥ä¸‹æ¥çš„å­—ç¬¦å¤–è§‚ <code>CSI n m</code> nä¸ºå­—ç¬¦å¤–è§‚é€‰é¡¹ï¼Œå¯ä»¥æ§åˆ¶å­—ç¬¦é¢œè‰²ï¼Œæ–œä½“ï¼Œä¸‹åˆ’çº¿ï¼Œé—ªçƒç­‰å¤–è§‚ã€‚mä¸ºSGRç»ˆæ­¢ç¬¦ã€‚<code>CSI n m</code>ç›¸å½“äº<code>CSI 0 m</code>ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ªé€‰é¡¹ï¼Œä¸­é—´ç”¨<code>;</code>éš”å¼€å³å¯ã€‚å¦‚<code>\033[4;31m</code>ï¼Œä¸ºçº¢è‰²å¸¦ä¸‹åˆ’çº¿ã€‚</li>
<li><code>ESC</code> = <code>\033</code> = <code>\e</code>(echo -eæ—¶)</li>
</ul>
<table>
<thead>
<tr>
<th>n</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Reset or normal, All attributes off</td>
</tr>
<tr>
<td>1</td>
<td>Bold or increased intensity</td>
</tr>
<tr>
<td>2</td>
<td>Faint, decreased intensity, or dim</td>
</tr>
<tr>
<td>3</td>
<td>Italic</td>
</tr>
<tr>
<td>4</td>
<td>Underline</td>
</tr>
<tr>
<td>5</td>
<td>Slow blink</td>
</tr>
<tr>
<td>9</td>
<td>Crossed-out, or strike</td>
</tr>
<tr>
<td>10</td>
<td>Primary (default) font</td>
</tr>
<tr>
<td>11â€“19</td>
<td>Alternative font</td>
</tr>
<tr>
<td>30â€“37</td>
<td>Set foreground color</td>
</tr>
<tr>
<td>38</td>
<td>Set foreground color, Next arguments are 5;n or 2;r;g;b</td>
</tr>
<tr>
<td>39</td>
<td>Default foreground color</td>
</tr>
<tr>
<td>40â€“47</td>
<td>Set background color</td>
</tr>
<tr>
<td>48</td>
<td>Set background color, Next arguments are 5;n or 2;r;g;b</td>
</tr>
<tr>
<td>49</td>
<td>Default background color</td>
</tr>
</tbody>
</table>
<h3 id="_8-bité¢œè‰²"> 8-bité¢œè‰²</h3>
<ul>
<li>ESC[38;5;âŸ¨nâŸ©m è®¾ç½®å­—ä½“é¢œè‰²</li>
<li>ESC[48;5;âŸ¨nâŸ©m è®¾ç½®èƒŒæ™¯é¢œè‰²</li>
<li>0-  7:  standard colors (as in ESC [ 30â€“37 m)</li>
<li>8- 15:  high intensity colors (as in ESC [ 90â€“97 m)</li>
<li>16-231:  6 Ã— 6 Ã— 6 cube (216 colors): 16 + 36 Ã— r + 6 Ã— g + b (0 â‰¤ r, g, b â‰¤ 5)</li>
<li>232-255:  grayscale from black to white in 24 steps</li>
</ul>
<h3 id="_24-bité¢œè‰²-rgb"> 24-bité¢œè‰²(RGB)</h3>
<ul>
<li>ESC[38;2;âŸ¨râŸ©;âŸ¨gâŸ©;âŸ¨bâŸ©m è®¾ç½®RGBå­—ä½“é¢œè‰²</li>
<li>ESC[48;2;âŸ¨râŸ©;âŸ¨gâŸ©;âŸ¨bâŸ©m è®¾ç½®RGBèƒŒæ™¯é¢œè‰²</li>
</ul>
<h2 id="unixå“²å­¦"> Unixå“²å­¦:</h2>
<ul>
<li>æ¯ä¸ªç¨‹åºåªåšä¸€ä»¶äº‹, ä½†åšåˆ°æè‡´</li>
<li>ç”¨ç¨‹åºä¹‹é—´çš„ç›¸äº’åä½œæ¥è§£å†³å¤æ‚é—®é¢˜</li>
<li>æ¯ä¸ªç¨‹åºéƒ½é‡‡ç”¨æ–‡æœ¬ä½œä¸ºè¾“å…¥å’Œè¾“å‡º, è¿™ä¼šä½¿ç¨‹åºæ›´æ˜“äºä½¿ç”¨</li>
</ul>
<h2 id="linuxå‘½ä»¤"> Linuxå‘½ä»¤</h2>
<div><pre><code><span>df</span> -h <span># æŸ¥çœ‹ç¡¬ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µ</span>
<span>su</span> - <span># åˆ‡æ¢åˆ°rootç”¨æˆ·</span>
adduser username <span>sudo</span> <span># å°†ç”¨æˆ·åˆ†åˆ°sudoç»„</span>
hostnamectl <span># æ˜¾ç¤ºä¸»æœºä¿¡æ¯ åœ¨/etc/hostname /etc/hosts ä¸­ä¿®æ”¹ä¸»æœºå</span>
lscpu <span># æŸ¥çœ‹cpuä¿¡æ¯</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>æ–‡ä»¶ç®¡ç† - cd, pwd, mkdir, rmdir, ls, cp, rm, mv, tar<br>
æ–‡ä»¶æ£€ç´¢ - cat, more, less, head, tail, file, find<br>
è¾“å…¥è¾“å‡ºæ§åˆ¶ - é‡å®šå‘, ç®¡é“, tee, xargs<br>
æ–‡æœ¬å¤„ç† - vim, grep, awk, sed, sort, wc, uniq, cut, tr<br>
ç³»ç»Ÿç›‘æ§ - jobs, ps, top, kill, free, demsg, lsof<br>
å…·ä½“è§Shellé¡µ</p>
<h3 id="åˆ«å"> åˆ«å</h3>
<ul>
<li><code>alias</code> åˆ—å‡ºå·²å®šä¹‰çš„åˆ«å</li>
<li><code>alias shortname=&quot;your custom cmd&quot;</code> å®šä¹‰ä¸´æ—¶åˆ«å</li>
<li><code>unalias shortname</code> å–æ¶ˆ</li>
<li><code>unalias -a</code> å…¨éƒ¨å–æ¶ˆ</li>
<li>åœ¨~/.bashrcä¸­å®šä¹‰ï¼Œå¹¶ source ~/.bashrcã€‚å®šä¹‰æ°¸ä¹…åˆ«å</li>
</ul>
<p>PS:aliasä¸æ”¯æŒå‚æ•°ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å‚æ•°çš„è¯ï¼Œå¯ä»¥åœ¨.bashrcä¸­å®šä¹‰shellå‡½æ•°ã€‚</p>
<h3 id="ç‰¹åˆ«"> ç‰¹åˆ«</h3>
<div><pre><code><span>sudo</span> <span>dmesg</span> <span># è¾“å‡ºOSçš„å¯åŠ¨æ—¥å¿—</span>
</code></pre>
<div><span>1</span><br></div></div><h2 id="ç¯å¢ƒå˜é‡"> ç¯å¢ƒå˜é‡</h2>
<ul>
<li>ä¸´æ—¶å®šä¹‰ï¼š<code>export name=value</code> -- åªå¯¹å½“å‰shellåŠå…¶å­shellæœ‰æ•ˆ</li>
<li>æ°¸ä¹…å®šä¹‰ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶
<ul>
<li>ç”¨æˆ·: <code>~/.bash_profile</code></li>
<li>ç³»ç»Ÿ: <code>/etc/profile</code></li>
</ul>
</li>
</ul>
<p>å…¶ä»–ç›¸å…³å‘½ä»¤</p>
<ul>
<li><code>env</code>: æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡</li>
<li><code>set</code>: æ˜¾ç¤ºæœ¬åœ°å®šä¹‰çš„shellå˜é‡,åŒ…æ‹¬åœ¨.bashrcä¸­å®šä¹‰çš„å‡½æ•°</li>
<li><code>unset</code>: æ¸…é™¤ç¯å¢ƒå˜é‡ unset HELLO</li>
<li><code>readonly</code>: è®¾ç½®åªè¯»ç¯å¢ƒå˜é‡ readonly HELLO</li>
</ul>
<h2 id="å·¥å…·"> å·¥å…·</h2>
<h3 id="tmux"> tmux</h3>
<p><code>sudo apt-get install tmux</code></p>
<ul>
<li>è·å–æ‰€æœ‰å‘½ä»¤åˆ—è¡¨: C-b ?</li>
<li>åˆ›å»ºSession: tmux new -s session_name</li>
<li>ç¦»å¼€Session: C-b d(ç¨‹åºä»ä¼šç»§ç»­è¿è¡Œ)</li>
<li>å›åˆ°Session: tmux ls; tmux attach-session -t 0</li>
<li>ç»“æŸSession: tmux kill-session -t session_name</li>
<li>åˆ—å‡ºæ‰€æœ‰Session: C-b s</li>
<li>é‡å‘½åå½“å‰Session: C-b $</li>
</ul>
<p>ç®¡ç†Tmuxçª—å£</p>
<ul>
<li><code>C-b c</code> åˆ›å»ºæ–°çª—å£</li>
<li><code>C-b w</code> åˆ—å‡ºæ‰€æœ‰çª—å£ï¼Œä»ä¸­é€‰ä¸€ä¸ªä½œä¸ºå½“å‰çª—å£</li>
<li><code>C-b 0-9</code> åˆ‡æ¢åˆ°çª—å£0-9</li>
<li><code>C-b p | n</code> åˆ‡æ¢åˆ°å‰|åä¸€ä¸ªçª—å£</li>
<li><code>C-b ,</code> é‡å‘½åå½“å‰çª—å£</li>
</ul>
<p>pane</p>
<ul>
<li><code>C-b %</code> åˆ†å‰²ä¸ºå·¦å³ä¸¤ä¸ªpane</li>
<li><code>C-b &quot;</code> åˆ†å‰²ä¸ºä¸Šä¸‹ä¸¤ä¸ªpane</li>
<li><code>C-b o</code> è·³è½¬åˆ°ä¸‹ä¸€ä¸ªpane</li>
<li><code>C-b h</code> è·³è½¬åˆ°å·¦è¾¹çš„paneã€‚åŒç† j,k,l.</li>
<li><code>C-b q</code> æ˜¾ç¤ºpaneæ•°é‡</li>
<li><code>C-b ;</code> åœ¨å½“å‰å’Œä¸Šä¸€ä¸ªpaneé—´åå¤æ¨ªè·³</li>
<li><code>C-b x</code> å…³é—­å½“å‰pane</li>
<li><code>C-b {</code> å°†å½“å‰paneç§»åŠ¨åˆ°å‰ä¸€ä¸ªpaneä½ç½®</li>
<li><code>C-b }</code> å°†å½“å‰paneç§»åŠ¨åˆ°åä¸€ä¸ªpaneä½ç½®</li>
<li><code>C-b C-o</code> å°†æ‰€æœ‰çª—å£é¡ºæ—¶é’ˆæ—‹è½¬</li>
<li><code>C-b M-o</code> å°†æ‰€æœ‰çª—å£é€†æ—¶é’ˆæ—‹è½¬</li>
<li><code>C-b !</code>   move the current pane into a new separate window (â€˜break paneâ€™)</li>
</ul>
<p>å‘½ä»¤è¡Œ</p>
<ul>
<li><code>C-b [</code> è¿›å…¥scrollæ¨¡å¼ï¼Œqé€€å‡º</li>
<li><code>C-b PgUp</code> è¿›å…¥scrollæ¨¡å¼ï¼Œå¹¶å‘ä¸Šç¿»ä¸€é¡µ</li>
</ul>
<p>è°ƒæ•´çª—å£å¤§å°</p>
<ul>
<li><code>C-b :</code> ä¼šåœ¨åº•éƒ¨æ˜¾ç¤ºå‘½ä»¤è¡Œ
<ul>
<li>è¾“å…¥ resize-pana -Direction #</li>
<li>Direction: U, D, L, R</li>
<li>#ï¼šæ•°å­—ï¼Œå½“å‰çª—å£å‘æŸæ–¹å‘ä¸Šè°ƒæ•´çš„å°ºå¯¸ã€‚</li>
</ul>
</li>
</ul>
<h3 id="tree"> tree</h3>
<p><code>sudo apt-get install tree</code></p>
<ul>
<li>tree dir: ä»¥æ ‘çŠ¶å½¢å¼å±•ç¤ºæ–‡ä»¶å¤¹å†…å®¹</li>
<li>tree: ç›¸å½“äº<code>tree .</code></li>
<li>-d: åªæ˜¾ç¤ºdir</li>
<li>-f: æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„å®Œæ•´è·¯å¾„</li>
<li>-i: ä¸æ˜¾ç¤ºç¼©è¿›</li>
<li>-L level: è®¾ç½®æœ€å¤§æ˜¾ç¤ºæ·±åº¦</li>
<li>-P pattern: åªæ˜¾ç¤ºpatternåŒ¹é…çš„æ–‡ä»¶(å¦‚æœè¦æ˜¾ç¤º.xxï¼Œéœ€è¦åŠ ä¸Š-a)</li>
<li>-I pattern: ä¸æ˜¾ç¤ºpatternåŒ¹é…çš„æ–‡ä»¶</li>
<li>--ignore-case</li>
<li>--filelimit #: ä¸å±•å¼€åŒ…å«#ä¸ªæ–‡ä»¶ä»¥ä¸Šçš„æ–‡ä»¶å¤¹</li>
</ul>
<p>æ–‡ä»¶æ˜¾ç¤ºé€‰é¡¹</p>
<ul>
<li>-Q: æ–‡ä»¶ååŠ ä¸ŠåŒå¼•å·</li>
<li>-u: æ˜¾ç¤ºç”¨æˆ·å</li>
<li>-g: æ˜¾ç¤ºç”¨æˆ·ç»„å</li>
<li>-D: æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¥æœŸ</li>
<li>-s: æ˜¾ç¤ºæ–‡ä»¶å¤§å°(byte)</li>
<li>-h: æ˜¾ç¤ºæ–‡ä»¶å¤§å°(æ›´äººæ€§åŒ–)</li>
<li>-F: æ˜¾ç¤ºæ–‡ä»¶ç±»å‹(/:dir, =:socket fils, *:å¯æ‰§è¡Œæ–‡ä»¶, |:FIFO, &gt;:doors)</li>
</ul>
<p>æ’åº</p>
<ul>
<li>-t: æœ€åä¿®æ”¹æ—¶é—´</li>
<li>-U: ä¸æ’åº</li>
<li>-r: é€†åº</li>
<li>--dirsfirst: æ–‡ä»¶å¤¹æ”¾å‰é¢</li>
<li>--sort=size (ctime, mtime, version)</li>
</ul>
<p>è¾“å‡ºæ¨¡å¼</p>
<ul>
<li>-X: xml</li>
<li>-J: json</li>
<li>-H baseHREF: html</li>
</ul>
<h2 id="makefile"> makefile</h2>
<p><a href="https://www.gnu.org/software/make/manual/html_node/index.html#SEC_Contents" target="_blank" rel="noopener noreferrer">GNU make æ‰‹å†Œ</a></p>
<p>echoingï¼šå›æ˜¾ã€‚é€šå¸¸makeä¼šå°†å…ˆæ‰§è¡Œçš„å‘½ä»¤æ‰“å°å‡ºæ¥å†æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ä½¿ç”¨-sé€‰é¡¹å…³é—­æ‰€æœ‰å‘½ä»¤çš„å›æ˜¾ã€‚-né€‰é¡¹åªæ‰“å°å‘½ä»¤ï¼Œä¸æ‰§è¡Œã€‚
åœ¨å‘½ä»¤è¡Œå¼€å¤´åŠ ä¸Š<code>@</code>å¯å…³é—­è¯¥å‘½ä»¤çš„å›æ˜¾(-nä»ä¼šæ‰“å°å‡ºæ¥)ã€‚</p>
<p>åœ¨å‘½ä»¤è¡Œå¼€å¤´åŠ ä¸Š<code>-</code>è¡¨ç¤ºå¦‚æœè¯¥å‘½ä»¤æ‰§è¡Œå‘ç”Ÿé”™è¯¯å°±å¿½ç•¥å®ƒã€‚</p>
<h3 id="åŸºæœ¬è§„åˆ™"> åŸºæœ¬è§„åˆ™</h3>
<div><pre><code><span>target</span><span>:</span> file1 file2
    gcc -o a.out file1 file2
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><ul>
<li>#ä»£è¡¨æ³¨é‡Š</li>
<li>å‘½ä»¤è¡Œå‰å¿…é¡»æœ‰&lt;tab&gt;</li>
<li>targetå’Œä¾èµ–æ–‡ä»¶ä¹‹é—´ä»¥ <code>:</code> éš”å¼€</li>
<li>make target : ä¼šæ‰§è¡Œç›¸åº”å‘½ä»¤è¡Œ</li>
<li>make: ä¼šé»˜è®¤æ‰§è¡Œç¬¬ä¸€ä¸ªtarget</li>
</ul>
<div><pre><code>LIBS <span>=</span> -lm
OBJ <span>=</span> file1 file2
<span>target</span><span>:</span> <span>$</span><span>{</span>OBJ<span>}</span>
    gcc -o <span>$@</span> <span>$</span><span>{</span>OBJ<span>}</span> <span>$</span><span>{</span>LIBS<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>makefileçš„å˜é‡</p>
<ul>
<li>å˜é‡ä»è¡Œå¼€å¤´å¼€å§‹å†™</li>
<li>= é™„è¿‘å¯ä»¥æœ‰ç©ºæ ¼</li>
<li>ä¹ æƒ¯ä¸Šï¼Œç”¨å¤§å†™å­—æ¯</li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1em;vertical-align:-0.25em;"></span><span>(</span><span style="margin-right:0.03588em;">v</span><span>a</span><span style="margin-right:0.02778em;">r</span><span>)</span><span>æˆ–</span></span></span></span>{var}å–å¾—å˜é‡çš„å€¼</li>
<li>å¯ä»¥ä½¿ç”¨shellçš„ç¯å¢ƒå˜é‡
<ul>
<li>åœ¨make targetå‘½ä»¤è¡Œä¸­æŒ‡å®šçš„ç¯å¢ƒå˜é‡ä¼˜å…ˆè€ƒè™‘</li>
<li>makefileå†…éƒ¨å®šä¹‰çš„ç¯å¢ƒå˜é‡æ¬¡ä¹‹</li>
<li>shellçš„ç¯å¢ƒå˜é‡æœ€å</li>
</ul>
</li>
<li><code>$@</code> ä»£è¡¨ target ä½ç½®çš„å†…å®¹</li>
<li><code>$xx</code> ç§°ä¸º<a href="https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html" target="_blank" rel="noopener noreferrer">automatic variables</a></li>
</ul>
<h3 id="è®¾ç½®å˜é‡-å˜é‡å±•å¼€"> è®¾ç½®å˜é‡&amp;å˜é‡å±•å¼€</h3>
<p>makeä¸­å˜é‡å±•å¼€æ–¹å¼æœ‰ä¸¤ç§</p>
<ul>
<li>é€’å½’å±•å¼€: ä½¿ç”¨ <code>=</code>æˆ–<code>define\n....\n endef</code>ã€‚ ç±»ä¼¼å¼•ç”¨ã€‚</li>
<li>ç®€å•å±•å¼€ï¼šä½¿ç”¨ <code>:=</code> æˆ– <code>::=</code>ã€‚é€è¡Œå¤„ç†ã€‚</li>
<li>å˜é‡è¿˜æœ‰ä¸€ç§æ¡ä»¶è®¾ç½®æ–¹å¼ï¼šä½¿ç”¨<code>?=</code>ã€‚å³å¦‚æœè¯¥å˜é‡å·²ç»å®šä¹‰äº†ï¼Œä¸ä¼šå†æ¬¡å®šä¹‰è¦†ç›–ä»¥å‰çš„ã€‚</li>
</ul>
<div><pre><code>foo <span>=</span> <span>$</span><span>(</span>bar<span>)</span>
bar <span>=</span> <span>$</span><span>(</span>ugh<span>)</span>
ugh <span>=</span> Huh?

x <span>:=</span> abc
y <span>:=</span> <span>$</span><span>(</span>x<span>)</span> efg
x <span>:=</span> later
x <span>?=</span> condition

<span>recursively</span><span>:</span>
    echo <span>$</span><span>(</span>foo<span>)</span> <span># Huh? </span>
<span>simply</span><span>:</span>
    echo <span>$</span><span>(</span>y<span>)</span> <span># abc efg</span>
<span>condition</span><span>:</span>
    echo <span>$</span><span>(</span>x<span>)</span> <span># later</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h3 id="åˆ¤æ–­"> åˆ¤æ–­</h3>
<div><pre><code><span>ifeq</span> <span>(</span>lhs, rhs<span>)</span> <span># ifneq(l, r)</span>
<span># å¦‚æœlhs=rhsï¼Œåˆ™æ‰§è¡Œ</span>
<span>else</span> <span>ifeq</span><span>(</span>l, r<span>)</span>
<span># å¦‚æœl=rï¼Œåˆ™æ‰§è¡Œ</span>
<span>else</span>
<span># å…¶ä»–æƒ…å†µ</span>
<span>endif</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h3 id="include"> include</h3>
<ul>
<li><code>include filenames</code>: åœ¨makeè¯»åˆ°è¿™ä¸€è¡Œçš„æ—¶å€™æš‚åœï¼Œå»è¯»filenamesï¼Œè¯»å®Œç»§ç»­ã€‚å¦‚æœæŒ‡å®šçš„filenameä¸å­˜åœ¨ï¼Œåˆ™ä¼šå…ˆè¾“å‡ºè­¦å‘Šä¿¡æ¯ï¼Œåœ¨make remadeä¹‹åå¦‚æœè¿˜ä¸å­˜åœ¨ï¼Œåˆ™æŠ¥é”™(fatal)ã€‚æ–‡ä»¶æœå¯»é¡ºåºä¸ºå½“å‰æ–‡ä»¶å¤¹ï¼Œprefix/include (é€šå¸¸æ˜¯/usr/local/include) /usr/gnu/include, /usr/local/include, /usr/includeã€‚</li>
<li><code>-include filenames</code>: å¦‚æœfilenameä¸å­˜åœ¨ï¼Œåˆ™å¿½ç•¥å®ƒã€‚</li>
</ul>
<h3 id="å‡½æ•°"> å‡½æ•°</h3>
<p>å‡½æ•°è°ƒç”¨è¯­æ³•</p>
<div><pre><code><span>$</span><span>(</span>function arg0, arg1, ...<span>)</span>
</code></pre>
<div><span>1</span><br></div></div><h4 id="æ–‡æœ¬å¤„ç†å‡½æ•°"> æ–‡æœ¬å¤„ç†å‡½æ•°</h4>
<ul>
<li>substå‡½æ•°: $(subst from, to , text)</li>
<li>patsubstå‡½æ•°: $(patsubst pattern, replacement, text),æ³¨æ„è¿™é‡Œçš„<code>%</code>ç›¸å½“äºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„é€šé…ç¬¦<code>*</code>ã€‚</li>
<li>stripå‡½æ•°: $(strip string),å°†å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„ç©ºç™½å­—ç¬¦åˆ é™¤ï¼Œå­—ç¬¦ä¸²ä¸­è¯ä¸è¯ä¹‹é—´çš„ç©ºæ ¼åªä¿ç•™ä¸€ä¸ªã€‚</li>
<li>findstringå‡½æ•°: $(findstring find, in),å¦‚æœinä¸­æœ‰findåˆ™è¿”å›findæœ¬èº«ï¼Œå¦åˆ™è¿”å›ç©ºã€‚</li>
<li>filterå‡½æ•°: $(filter pattern..., text)ï¼Œå°†textä¸­æ¯ä¸ªè¯å’Œå„ä¸ªpatternåŒ¹é…ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…ä»»ä¸€patternæˆåŠŸçš„è¯ã€‚</li>
<li>filter-outå‡½æ•°: è¿”å›åŒ¹é…ä¸æˆåŠŸçš„ã€‚</li>
<li>sortå‡½æ•°: $(sort list)ï¼Œå°†listä¸­çš„å•è¯æŒ‰å­—å…¸åºè¿”å›ï¼Œå¹¶ä¸”ä¼šå»é‡ã€‚</li>
<li>wordå‡½æ•°: $(word n, text)ï¼Œå°†textä¸­çš„ç¬¬nä¸ªè¯è¿”å›ã€‚nå¤§äºtextä¸­è¯æ•°åˆ™è¿”å›ç©ºã€‚</li>
<li>wordlistå‡½æ•°: $(wordlist s, e, text),è¿”å›ä»såˆ°eä¸ªå•è¯ã€‚é—­åŒºé—´ã€‚</li>
<li>wordså‡½æ•°: $(words text),è¿”å›textä¸­å•è¯ä¸ªæ•°ã€‚</li>
<li>firstwordå‡½æ•°: $(firstwords text),è¿”å›textä¸­ç¬¬ä¸€ä¸ªå•è¯ã€‚</li>
<li>lastwordå‡½æ•°: $(lastwords text),è¿”å›textä¸­æœ€åä¸€ä¸ªå•è¯ã€‚</li>
</ul>
<div><pre><code>comma<span>:=</span> ,
empty<span>:=</span>
space<span>:=</span> <span>$</span><span>(</span>empty<span>)</span> <span>$</span><span>(</span>empty<span>)</span>
foo<span>:=</span> a b c
bar<span>:=</span> <span>$</span><span>(</span><span>subst</span> <span>$</span><span>(</span>space<span>)</span>,<span>$</span><span>(</span>comma<span>)</span>,<span>$</span><span>(</span>foo<span>)</span><span>)</span> <span># bar is now â€˜a,b,câ€™</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h4 id="æ–‡ä»¶åç›¸å…³å‡½æ•°"> æ–‡ä»¶åç›¸å…³å‡½æ•°</h4>
<div><pre><code><span>$</span><span>(</span><span>dir</span> src/foo.c hacks<span>)</span> <span># src/ ./</span>
<span>$</span><span>(</span><span>notdir</span> src/foo.c hacks<span>)</span> <span># foo.c hacks</span>
<span>$</span><span>(</span><span>suffix</span> src/foo.c src-1.0/bar.c hacks<span>)</span> <span># .c .c</span>
<span>$</span><span>(</span><span>basename</span> src/foo.c src-1.0/bar hacks<span>)</span> <span># src/foo src-1.0/bar hacks</span>
<span>$</span><span>(</span><span>addsuffix</span> .c,foo bar<span>)</span> <span># foo.c bar.c</span>
<span>$</span><span>(</span>addprefix src/,foo bar<span>)</span> <span># src/foo src/bar</span>
<span>$</span><span>(</span><span>join</span> a b,.c .o<span>)</span> <span>#  a.c b.o // join list1,list2 å°†list1å’Œlistä¸­çš„å•è¯ä¸€ä¸€å¯¹åº”çš„è¿æ¥ã€‚</span>
<span>$</span><span>(</span><span>wildcard</span> pattern<span>)</span> <span># è¾“å‡ºå½“å‰ç›®å½•ä¸‹åŒ¹é…çš„æ–‡ä»¶åã€‚</span>
<span>$</span><span>(</span><span>realpath</span> namesâ€¦<span>)</span> <span># è¾“å‡ºnameæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œnameå¿…é¡»æ˜¯å­˜åœ¨çš„æ–‡ä»¶æˆ–æ–‡ä»¶å</span>
<span>$</span><span>(</span><span>abspath</span> namesâ€¦<span>)</span> <span># è¾“å‡ºnameæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œnameå¯ä»¥åŒ…å«é€šé…ç¬¦</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h4 id="wildcard"> wildcard</h4>
<p><code>$(wildcard pattern...)</code>: æŸäº›åœ°æ–¹ä¸èƒ½ä½¿ç”¨<code>%</code>é€šé…ç¬¦æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¯¥å‡½æ•°ã€‚è¾“å‡ºå½“å‰ç›®å½•ä¸‹åŒ¹é…çš„æ–‡ä»¶åã€‚</p>
<div><pre><code>objects <span>:=</span> <span>$</span><span>(</span><span>patsubst</span> %.c,%.o,<span>$</span><span>(</span><span>wildcard</span> *.c<span>)</span><span>)</span>

<span>foo</span> <span>:</span> <span>$</span><span>(</span>objects<span>)</span>
        cc -o foo <span>$</span><span>(</span>objects<span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h4 id="call"> call</h4>
<p><code>$(call variable, param1, param2)</code>,å…¶ä¸­variableæ˜¯makefileä¸­çš„å˜é‡ï¼Œvariableçš„å€¼ä¸­çš„<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1em;vertical-align:-0.25em;"></span><span>(</span><span>0</span><span>)</span><span>ä»£è¡¨è‡ªèº«çš„åå­—ï¼Œ</span></span></span></span>(1)ä»£è¡¨param1,$(2)ä»£è¡¨param2ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<div><pre><code>reverse <span>=</span> <span>$</span><span>(</span>2<span>)</span> <span>$</span><span>(</span>1<span>)</span>

foo <span>=</span> <span>$</span><span>(</span><span>call</span> reverse,a,b<span>)</span> <span># foo = b a</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h4 id="shell"> shell</h4>
<p><code>$(shell shellcmd)</code>: åˆ›å»ºshellæ‰§è¡Œshellcmdï¼Œè¿”å›shellcmdçš„è¾“å‡ºã€‚è¿”å›çŠ¶æ€å­˜å‚¨åœ¨<code>.SHELLSTATUS</code>å˜é‡ä¸­</p>
<div><pre><code>contents <span>:=</span> <span>$</span><span>(</span><span>shell</span> cat foo<span>)</span>
</code></pre>
<div><span>1</span><br></div></div><h2 id="ssh"> ssh</h2>
<div><pre><code><span>sudo</span> <span>apt</span> <span>install</span> openssh-client <span># åªè¿æ¥åˆ«çš„æœºå™¨</span>
<span>sudo</span> <span>apt</span> <span>install</span> openssh-server <span># æœ¬æœºä½œä¸ºæœåŠ¡å™¨</span>
/etc/init.d/ssh start <span># æ‰‹åŠ¨å¯åŠ¨server</span>
/etc/init.d/ssh stop <span># åœæ­¢server</span>
<span>vim</span> /etc/ssh/sshd_config <span># é…ç½®æ–‡ä»¶ï¼Œå¯ä¿®æ”¹ç«¯å£å·</span>
/etc/init.d/ssh restart <span># ä¿®æ”¹åéœ€è¦é‡å¯server</span>
<span>ssh</span> -p <span>22</span> user@ip <span># ç™»å½•å¦ä¸€å°å¼€äº†openssh-serverçš„æœºå™¨</span>
<span>hostname</span> -I <span># æŸ¥çœ‹æœ¬æœºipåœ°å€</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p><a href="https://www.netsarang.com/zh/free-for-home-school/" target="_blank" rel="noopener noreferrer">xshell å…è´¹ç‰ˆ</a></p>
<h2 id="ä»»åŠ¡ç®¡ç†"> ä»»åŠ¡ç®¡ç†</h2>
<ul>
<li>å°†ä»»åŠ¡æ”¾åˆ°åå°æ‰§è¡Œ <code>cmd &amp;</code> ä¼šæ˜¾ç¤ºä»»åŠ¡çš„åºå·å’Œç›¸å…³çš„PID</li>
<li>ä¸ºäº†ä¸è®©åå°ä»»åŠ¡çš„è¾“å‡ºå½±å“å‰å°ï¼Œå¯ä»¥é‡å®šå‘æµ</li>
<li>å°†å½“å‰ä»»åŠ¡æ”¾åˆ°åå°æš‚åœ <code>C-z</code></li>
<li>æŸ¥çœ‹å½“å‰ä»»åŠ¡çŠ¶æ€ <code>jobs</code>
<ul>
<li>-l åˆ—å‡ºä»»åŠ¡åºå·ï¼ŒPIDï¼Œä»»åŠ¡çŠ¶æ€ï¼Œå‘½ä»¤ä¸²</li>
<li>-r ä»…åˆ—å‡ºåå°runçš„ä»»åŠ¡</li>
<li>-s ä»…åˆ—å‡ºåå°stopçš„ä»»åŠ¡</li>
<li><code>+</code> è¡¨ç¤ºæœ€è¿‘è¢«æ”¾åˆ°åå°çš„ä»»åŠ¡ã€‚ <code>-</code> è¡¨ç¤ºæœ€è¿‘ç¬¬äºŒä¸ªè¢«æ”¾åˆ°åå°çš„ä»»åŠ¡</li>
</ul>
</li>
<li>å°†åå°ä»»åŠ¡æ‹¿åˆ°å‰å°å¤„ç† <code>fg [[%]jobnumber]</code>
<ul>
<li>ä¸åŠ jobnumberï¼Œé»˜è®¤å°†æœ€è¿‘è¢«æ”¾åˆ°åå°çš„ä»»åŠ¡æ‹¿å‡ºæ¥</li>
<li><code>fg -</code>ï¼Œé»˜è®¤å°†æœ€è¿‘ç¬¬äºŒä¸ªè¢«æ”¾åˆ°åå°çš„ä»»åŠ¡æ‹¿å‡ºæ¥</li>
<li><code>fg %1</code> æŒ‡å®šå°†ä»»åŠ¡åºå·ä¸º1çš„ä»»åŠ¡æ‹¿å‡ºæ¥</li>
</ul>
</li>
<li>è®©ä»»åŠ¡åœ¨åå°çš„çŠ¶æ€å˜æˆè¿è¡Œä¸­ <code>bg [[%]jobnumber]</code></li>
<li>ç®¡ç†åå°ä»»åŠ¡ <code>kill -signal %jobnumber</code>
<ul>
<li>signal
<ul>
<li>-1: é‡æ–°è¯»å–ä¸€æ¬¡å‚æ•°çš„é…ç½®æ–‡ä»¶</li>
<li>-2: ç›¸å½“äº<code>C-c</code></li>
<li>-9: ç«‹åˆ»å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªä»»åŠ¡</li>
<li>-15: æ­£å¸¸ä¸­æ­¢ä¸€ä¸ªä»»åŠ¡ã€‚é»˜è®¤å€¼ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è¿›ç¨‹ç®¡ç†"> è¿›ç¨‹ç®¡ç†</h2>
<ul>
<li><code>ps -l</code> æŸ¥çœ‹å½“å‰bashçš„ç›¸å…³è¿›ç¨‹
<ul>
<li>F: è¿›ç¨‹æ ‡è¯†(process flag)ï¼Œè¯´æ˜è¿›ç¨‹çš„æƒé™
<ul>
<li>4 rootæƒé™</li>
<li>1 ä»…forkï¼Œæ²¡æœ‰exec</li>
</ul>
</li>
<li>S: è¿›ç¨‹çŠ¶æ€
<ul>
<li>R: Running</li>
<li>S: Sleep</li>
<li>D: ä¸å¯è¢«å”¤é†’çš„ç¡çœ çŠ¶æ€ï¼Œå¦‚ç­‰å¾…I/O</li>
<li>T: åœæ­¢çŠ¶æ€(stop)</li>
<li>Z: Zombieï¼Œåƒµå°¸çŠ¶æ€ï¼Œè¿›ç¨‹å·²ç»è¢«ä¸­æ­¢ä½†æ— æ³•ç§»å‡ºå†…å­˜</li>
</ul>
</li>
<li>UID: è¿›ç¨‹æ‰€å±ç”¨æˆ·çš„UID</li>
<li>PID,PPID: è¿›ç¨‹å·ï¼Œçˆ¶è¿›ç¨‹çš„è¿›ç¨‹å·</li>
<li>C: CPUä½¿ç”¨ç‡(%)</li>
<li>PRI: Priority è¿›ç¨‹ä¼˜å…ˆçº§</li>
<li>NI: Nice è¿›ç¨‹ä¼˜å…ˆçº§ç›¸å…³</li>
<li>ADDR: è¿›ç¨‹åœ¨å†…å­˜çš„é‚£ä¸ªéƒ¨åˆ†ã€‚runningè¿›ç¨‹æ˜¾ç¤º <code>-</code></li>
<li>SZ: è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜å¤§å°</li>
<li>WCHAN: è¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œ <code>-</code>è¡¨ç¤ºè¿è¡Œä¸­</li>
<li>TTY: ç™»å½•è€…çš„ç»ˆç«¯ä½ç½®</li>
<li>TIME: è¿›ç¨‹å®é™…ä½¿ç”¨çš„CPUè¿è¡Œæ—¶é—´</li>
<li>CMD: è§¦å‘è¿›ç¨‹çš„å‘½ä»¤</li>
</ul>
</li>
<li><code>ps aux</code> æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹
<ul>
<li>VSZ: è¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜é‡(kB)</li>
<li>RSS: è¿›ç¨‹ä½¿ç”¨çš„å›ºå®šå†…å­˜é‡(kB)</li>
<li>STAT: åŒS</li>
</ul>
</li>
<li><code>top</code> åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹çš„çŠ¶æ€
<ul>
<li>-d n æŒ‡å®šæ›´æ–°çŠ¶æ€é—´éš”çš„ç§’æ•°</li>
<li>-p PID æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹ã€‚è¦çœ‹å¤šä¸ªè¿›ç¨‹ï¼Œé‡å¤ä½¿ç”¨å¤šæ¬¡-pé€‰é¡¹å³å¯ã€‚</li>
<li>top æŒ‰é”®å‘½ä»¤
<ul>
<li>? å¸®åŠ©</li>
<li>P ä»¥CPUä½¿ç”¨ç‡æ’åº</li>
<li>M ä»¥å†…å­˜ä½¿ç”¨ç‡æ’åº</li>
<li>N ä»¥PIDæ’åº</li>
<li>T ä»¥è¿›ç¨‹ä½¿ç”¨çš„CPUæ—¶é—´æ’åº</li>
<li>q é€€å‡º</li>
<li>k ç»™æŸä¸ªPIDä¸€ä¸ªsignal</li>
<li>r ç»™æŸä¸ªPIDä¸€ä¸ªæ–°niceå€¼</li>
</ul>
</li>
</ul>
</li>
<li><code>kill -signal PID</code> åŒjobs</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">æ­£åˆ™è¡¨è¾¾å¼</title>
    <id>https://kigane.github.io/note/cs/regex/</id>
    <link href="https://kigane.github.io/note/cs/regex/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç½‘ç«™æ¨è"> å­¦ä¹ ç½‘ç«™æ¨è</h2>
<p><a href="https://regexone.com/lesson/introduction_abcs" target="_blank" rel="noopener noreferrer">regexone.com ä¸€ä¸ªäº¤äº’å¼çš„å…¥é—¨ç½‘ç«™</a>
<a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md" target="_blank" rel="noopener noreferrer">learn-regex</a></p>
<h2 id="åŸºç¡€"> åŸºç¡€</h2>
<table>
<thead>
<tr>
<th>å…ƒå­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>match-any-charcater</td>
</tr>
<tr>
<td>[ ]</td>
<td>åŒ¹é…æ–¹æ‹¬å·å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[^ ]</td>
<td>åŒ¹é…é™¤äº†æ–¹æ‹¬å·é‡Œçš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>*</td>
<td>åŒ¹é…&gt;=0ä¸ªé‡å¤çš„åœ¨*å·ä¹‹å‰çš„å­—ç¬¦</td>
</tr>
<tr>
<td>+</td>
<td>åŒ¹é…&gt;=1ä¸ªé‡å¤çš„+å·å‰çš„å­—ç¬¦</td>
</tr>
<tr>
<td>?</td>
<td>æ ‡è®°?ä¹‹å‰çš„å­—ç¬¦ä¸ºå¯æœ‰å¯æ— çš„</td>
</tr>
<tr>
<td>{n,m}</td>
<td>åŒ¹é…numä¸ªå¤§æ‹¬å·ä¹‹å‰çš„å­—ç¬¦æˆ–å­—ç¬¦é›† (n &lt;= num &lt;= m)</td>
</tr>
<tr>
<td>(xyz)</td>
<td>å­æ¨¡å¼ï¼ŒåŒ¹é…ä¸ xyz å®Œå…¨ç›¸ç­‰çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>|</td>
<td>æˆ–è¿ç®—ç¬¦ï¼ŒåŒ¹é…ç¬¦å·å‰æˆ–åçš„å­—ç¬¦</td>
</tr>
<tr>
<td>\</td>
<td>è½¬ä¹‰å­—ç¬¦,ç”¨äºåŒ¹é…ä¸€äº›ä¿ç•™çš„å­—ç¬¦ [ ] ( ) { } . * + ? ^ $ \ |</td>
</tr>
<tr>
<td>^</td>
<td>match-beginning-of-line</td>
</tr>
<tr>
<td>$</td>
<td>match-end-of-line</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>ç®€å†™</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td style="text-align:center">é™¤æ¢è¡Œç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦</td>
</tr>
<tr>
<td>\w</td>
<td style="text-align:center">åŒ¹é…æ‰€æœ‰å­—æ¯æ•°å­—ï¼Œç­‰åŒäº [a-zA-Z0-9_]</td>
</tr>
<tr>
<td>\W</td>
<td style="text-align:center">åŒ¹é…æ‰€æœ‰éå­—æ¯æ•°å­—ï¼Œå³ç¬¦å·ï¼Œç­‰åŒäºï¼š [^\w]</td>
</tr>
<tr>
<td>\d</td>
<td style="text-align:center">åŒ¹é…æ•°å­—ï¼š [0-9]</td>
</tr>
<tr>
<td>\D</td>
<td style="text-align:center">åŒ¹é…éæ•°å­—ï¼š [^\d]</td>
</tr>
<tr>
<td>\s</td>
<td style="text-align:center">åŒ¹é…æ‰€æœ‰ç©ºæ ¼å­—ç¬¦ï¼Œç­‰åŒäºï¼š [\t\n\f\r\p{Z}]</td>
</tr>
<tr>
<td>\S</td>
<td style="text-align:center">åŒ¹é…æ‰€æœ‰éç©ºæ ¼å­—ç¬¦ï¼š [^\s]</td>
</tr>
<tr>
<td>\f</td>
<td style="text-align:center">åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦</td>
</tr>
<tr>
<td>\n</td>
<td style="text-align:center">åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦</td>
</tr>
<tr>
<td>\r</td>
<td style="text-align:center">åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦</td>
</tr>
<tr>
<td>\t</td>
<td style="text-align:center">åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦</td>
</tr>
<tr>
<td>\v</td>
<td style="text-align:center">åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦</td>
</tr>
<tr>
<td>\p</td>
<td style="text-align:center">åŒ¹é… CR/LFï¼ˆç­‰åŒäº \r\nï¼‰ï¼Œç”¨æ¥åŒ¹é… DOS è¡Œç»ˆæ­¢ç¬¦</td>
</tr>
</tbody>
</table>
<h2 id="æ ‡å¿—"> æ ‡å¿—</h2>
<p>ä½¿ç”¨æ ‡å¿—ï¼š<code>/RegEx/flags</code></p>
<table>
<thead>
<tr>
<th>æ ‡å¿—</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td style="text-align:center">å¿½ç•¥å¤§å°å†™</td>
</tr>
<tr>
<td>g</td>
<td style="text-align:center">å…¨å±€æœç´¢(ä¸ä»…ä»…è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ï¼Œè€Œæ˜¯è¿”å›å…¨éƒ¨)</td>
</tr>
<tr>
<td>m</td>
<td style="text-align:center">å¤šè¡Œä¿®é¥°ç¬¦ï¼šé”šç‚¹å…ƒå­—ç¬¦ ^ $ å·¥ä½œèŒƒå›´åœ¨æ¯è¡Œçš„èµ·å§‹</td>
</tr>
</tbody>
</table>
<p>(^,$) ç”¨äºæ£€æŸ¥æ ¼å¼æ˜¯å¦æ˜¯åœ¨å¾…æ£€æµ‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚ä½†æˆ‘ä»¬å¦‚æœæƒ³è¦å®ƒåœ¨æ¯è¡Œçš„å¼€å¤´å’Œç»“å°¾ç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å¤šè¡Œä¿®é¥°ç¬¦ mã€‚</p>
<h2 id="å‰åé¢„æŸ¥"> å‰åé¢„æŸ¥</h2>
<p>ç”¨äºåˆ¤æ–­æ‰€åŒ¹é…çš„æ ¼å¼æ˜¯å¦åœ¨å¦ä¸€ä¸ªç¡®å®šçš„æ ¼å¼(é€šå¸¸ä¼šç”¨å°æ‹¬å·åŒ…è£¹)ä¹‹å‰æˆ–ä¹‹åï¼ŒåŒ¹é…ç»“æœä¸åŒ…å«è¯¥ç¡®å®šæ ¼å¼ï¼ˆä»…ä½œä¸ºçº¦æŸï¼‰ã€‚</p>
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th style="text-align:left">æè¿°</th>
<th style="text-align:left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>?=</td>
<td style="text-align:left">æ­£å…ˆè¡Œæ–­è¨€-å­˜åœ¨(åé¢ä¸€å®šæœ‰)</td>
<td style="text-align:left">&quot;(T</td>
</tr>
<tr>
<td>?!</td>
<td style="text-align:left">è´Ÿå…ˆè¡Œæ–­è¨€-æ’é™¤(åé¢ä¸€å®šæ²¡æœ‰)</td>
<td style="text-align:left">&quot;(T</td>
</tr>
<tr>
<td>?&lt;=</td>
<td style="text-align:left">æ­£åå‘æ–­è¨€-å­˜åœ¨(å‰é¢ä¸€å®šæœ‰)</td>
<td style="text-align:left">&quot;(?&lt;=(T</td>
</tr>
<tr>
<td>?&lt;!</td>
<td style="text-align:left">è´Ÿåå‘æ–­è¨€-æ’é™¤(å‰é¢ä¸€å®šæ²¡æœ‰)</td>
<td style="text-align:left">&quot;(?&lt;!(T</td>
</tr>
</tbody>
</table>
<h2 id="è´ªå©ªåŒ¹é…å’Œæƒ°æ€§åŒ¹é…"> è´ªå©ªåŒ¹é…å’Œæƒ°æ€§åŒ¹é…</h2>
<p>æ­£åˆ™è¡¨è¾¾å¼é»˜è®¤é‡‡ç”¨è´ªå©ªåŒ¹é…æ¨¡å¼(ä¸»è¦é’ˆå¯¹é‡è¯*,+,{l,},{,h},{l,h})ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹æ„å‘³ç€ä¼šåŒ¹é…å°½å¯èƒ½é•¿çš„å­ä¸²ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ?(ç´§è·Ÿåœ¨é‡è¯åé¢) å°†è´ªå©ªåŒ¹é…æ¨¡å¼è½¬åŒ–ä¸ºæƒ°æ€§åŒ¹é…æ¨¡å¼ã€‚</p>
<p>&quot;/(.*at)/&quot; =&gt; <strong>The fat cat sat on the mat</strong>.</p>
<p>&quot;/(.*?at)/&quot; =&gt; <strong>The fat</strong> cat sat on the mat.</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">vim</title>
    <id>https://kigane.github.io/note/cs/vim/</id>
    <link href="https://kigane.github.io/note/cs/vim/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="vimåŸºç¡€"> VimåŸºç¡€</h2>
<h3 id="èµ„æ–™"> èµ„æ–™</h3>
<p><a href="https://missing-semester-cn.github.io/2020/editors/" target="_blank" rel="noopener noreferrer">å­¦ä¹ Vim</a><br>
vimtutor : Vimå®‰è£…æ—¶è‡ªå¸¦çš„æ•™ç¨‹<br>
<a href="https://vim-adventures.com/" target="_blank" rel="noopener noreferrer">Vim Adventures</a><br>
<a href="https://vimways.org/2019/" target="_blank" rel="noopener noreferrer">Vim å°æŠ€å·§</a></p>
<p><img src="/assets/img/vim-keyboard.png" alt="Vim é”®ç›˜å›¾" /></p>
<h3 id="æ”¹é”®"> æ”¹é”®</h3>
<p>ubantu</p>
<ul>
<li>setxkbmap -option caps:escape capslockæ˜ å°„ä¸ºesc</li>
<li>setxkbmap -option ctrl:nocaps capslockæ˜ å°„ä¸ºctrl</li>
</ul>
<h3 id="æ¨¡å¼"> æ¨¡å¼</h3>
<p>Vimçš„è®¾è®¡ä»¥å¤§å¤šæ•°æ—¶é—´éƒ½èŠ±åœ¨é˜…è¯»ã€æµè§ˆå’Œè¿›è¡Œå°‘é‡ç¼–è¾‘æ”¹åŠ¨ä¸ºåŸºç¡€ï¼Œå› æ­¤å®ƒå…·æœ‰å¤šç§æ“ä½œæ¨¡å¼ï¼š</p>
<ul>
<li>æ­£å¸¸æ¨¡å¼ï¼šåœ¨æ–‡ä»¶ä¸­å››å¤„ç§»åŠ¨å…‰æ ‡è¿›è¡Œä¿®æ”¹</li>
<li>æ’å…¥æ¨¡å¼ï¼šæ’å…¥æ–‡æœ¬</li>
<li>æ›¿æ¢æ¨¡å¼ï¼šæ›¿æ¢æ–‡æœ¬</li>
<li>å¯è§†åŒ–(ä¸€èˆ¬ï¼Œè¡Œï¼Œå—)æ¨¡å¼ï¼šé€‰ä¸­æ–‡æœ¬å—</li>
<li>å‘½ä»¤æ¨¡å¼ï¼šç”¨äºæ‰§è¡Œå‘½ä»¤</li>
</ul>
<p>åœ¨ä¸åŒçš„æ“ä½œæ¨¡å¼ä¸‹ï¼Œé”®ç›˜æ•²å‡»çš„å«ä¹‰ä¹Ÿä¸åŒã€‚</p>
<p>æŒ‰ä¸‹ <code>ESC</code> ä»ä»»ä½•å…¶ä»–æ¨¡å¼è¿”å›æ­£å¸¸æ¨¡å¼ã€‚ åœ¨æ­£å¸¸æ¨¡å¼ï¼Œé”®å…¥ <code>i</code> è¿›å…¥æ’å…¥ æ¨¡å¼ï¼Œ <code>R</code> è¿›å…¥æ›¿æ¢æ¨¡å¼ï¼Œ <code>v</code> è¿›å…¥å¯è§†(ä¸€èˆ¬)æ¨¡å¼ï¼Œ <code>V</code> è¿›å…¥å¯è§†(è¡Œ)æ¨¡å¼ï¼Œ <code>Ctrl-V</code>, æœ‰æ—¶ä¹Ÿå†™ä½œ <code>^V</code>è¿›å…¥å¯è§†(å—)æ¨¡å¼ï¼Œ <code>:</code> è¿›å…¥å‘½ä»¤æ¨¡å¼ã€‚</p>
<p>Vim æœ€é‡è¦çš„è®¾è®¡æ€æƒ³æ˜¯ Vim çš„ç•Œé¢æœ¬èº«æ˜¯ä¸€ä¸ªç¨‹åºè¯­è¨€ã€‚é”®å…¥æ“ä½œæœ¬èº«æ˜¯å‘½ä»¤ï¼Œ è¿™äº›å‘½ä»¤å¯ä»¥ç»„åˆä½¿ç”¨ã€‚è¿™ä½¿å¾—ç§»åŠ¨å’Œç¼–è¾‘æ›´åŠ é«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯ä¸€æ—¦å½¢æˆè‚Œè‚‰è®°å¿†ã€‚</p>
<h3 id="ç¼“å­˜-æ ‡ç­¾é¡µ-çª—å£"> ç¼“å­˜ï¼Œæ ‡ç­¾é¡µï¼Œçª—å£</h3>
<p>Vim ä¼šç»´æŠ¤ä¸€ç³»åˆ—æ‰“å¼€çš„æ–‡ä»¶ï¼Œç§°ä¸ºâ€œç¼“å­˜â€ã€‚ä¸€ä¸ª Vim ä¼šè¯åŒ…å«ä¸€ç³»åˆ—æ ‡ç­¾é¡µï¼Œæ¯ä¸ªæ ‡ç­¾é¡µåŒ…å«ä¸€ç³»åˆ—çª—å£(åˆ†éš”é¢æ¿)ã€‚æ¯ä¸ªçª—å£æ˜¾ç¤ºä¸€ä¸ªç¼“å­˜(å¯ä»¥æ˜¯åŒä¸€ä¸ªç¼“å­˜)ã€‚</p>
<p>Vim é»˜è®¤æ‰“å¼€ä¸€ä¸ªæ ‡ç­¾é¡µï¼Œè¿™ä¸ªæ ‡ç­¾ä¹ŸåŒ…å«ä¸€ä¸ªçª—å£ã€‚</p>
<h3 id="åŸºæ“"> åŸºæ“</h3>
<ul>
<li><code>vim $(fzf)</code></li>
<li><code>:q</code>é€€å‡º(å…³é—­çª—å£)</li>
<li><code>:w</code>ä¿å­˜å½“å‰æ–‡ä»¶(å†™)</li>
<li><code>:w FILE</code> å¦å­˜ä¸º</li>
<li><code>:wq</code>ä¿å­˜ç„¶åé€€å‡º</li>
<li><code>:e {æ–‡ä»¶å}</code> æ‰“å¼€è¦ç¼–è¾‘çš„æ–‡ä»¶</li>
<li><code>:ls</code>æ˜¾ç¤ºæ‰“å¼€çš„ç¼“å­˜</li>
<li><code>:help {æ ‡é¢˜}</code> æ‰“å¼€å¸®åŠ©æ–‡æ¡£
<ul>
<li><code>:help :w</code>æ‰“å¼€ <code>:w</code>å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£</li>
<li><code>:help w</code>æ‰“å¼€ <code>w</code> ç§»åŠ¨çš„å¸®åŠ©æ–‡æ¡£</li>
</ul>
</li>
</ul>
<h3 id="ç§»åŠ¨"> ç§»åŠ¨</h3>
<p>æ­£å¸¸æ¨¡å¼ä¸‹
åœ¨ Vim é‡Œé¢ç§»åŠ¨ä¹Ÿè¢«ç§°ä¸º â€œåè¯â€ï¼Œ å› ä¸ºå®ƒä»¬æŒ‡å‘æ–‡å­—å—ã€‚</p>
<ul>
<li>åŸºæœ¬ç§»åŠ¨: hjkl (å·¦ï¼Œ ä¸‹ï¼Œ ä¸Šï¼Œ å³)</li>
<li>å•è¯wordï¼š w (ä¸‹ä¸€ä¸ªè¯çš„é¦–å­—æ¯)ï¼Œ b (å½“å‰è¯é¦–)ï¼Œ e (å½“å‰è¯å°¾) ge(ä¸Šä¸€ä¸ªå•è¯è¯å°¾)</li>
<li>å¹¿ä¹‰å•è¯WORDï¼š W, B, E, gE (å¹¿ä¹‰å•è¯ä¸ºç©ºæ ¼ä¹‹é—´çš„æ‰€æœ‰å­—ç¬¦ï¼Œå•è¯ä¸ºæ•°å­—å­—æ¯ä¸‹åˆ’çº¿çš„åºåˆ—)</li>
<li>æ®µè½ï¼š <code>{</code>, <code>}</code>ã€‚æ®µè½æ˜¯ç”±ç©ºè¡Œéš”å¼€çš„ä»£ç æ®µã€‚</li>
<li>è¡Œï¼š 0 (è¡Œåˆ)ï¼Œ ^ | _ (ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦)ï¼Œ $ (è¡Œå°¾)</li>
<li>å±å¹•ï¼š H (å±å¹•é¦–è¡Œ)ï¼Œ M (å±å¹•ä¸­é—´)ï¼Œ L (å±å¹•åº•éƒ¨)</li>
<li>æ–‡ä»¶ï¼š gg (æ–‡ä»¶å¤´)ï¼Œ G (æ–‡ä»¶å°¾)</li>
<li>è¡Œæ•°ï¼š <code>:{num}&lt;CR&gt;</code> æˆ–è€… <code>{num}G</code> è½¬åˆ°ç¬¬numè¡Œ</li>
<li>ctrl+f å‘ä¸‹ç¿»é¡µ</li>
<li>ctrl+b å‘ä¸Šç¿»é¡µ</li>
<li>ctrl+d å‘ä¸‹ç¿»åŠé¡µ</li>
<li>ctrl+u å‘ä¸Šç¿»åŠé¡µ</li>
<li><strong>æ‚é¡¹ï¼š % (æ‰¾åˆ°é…å¯¹ï¼Œæ¯”å¦‚å„ç§æ‹¬å·)</strong></li>
<li>æŸ¥æ‰¾ï¼š f{å­—ç¬¦}ï¼Œ t{å­—ç¬¦}ï¼Œ F{å­—ç¬¦}ï¼Œ T{å­—ç¬¦}
<ul>
<li>æŸ¥æ‰¾(find)/åˆ°(until) å‘å‰/å‘å åœ¨æœ¬è¡Œçš„{å­—ç¬¦}</li>
<li><code>,</code> / <code>;</code> ç”¨äºå¯¼èˆªåŒ¹é…</li>
</ul>
</li>
</ul>
<h3 id="ç¼–è¾‘"> ç¼–è¾‘</h3>
<p>Vim çš„ç¼–è¾‘å‘½ä»¤ä¹Ÿè¢«ç§°ä¸º â€œåŠ¨è¯â€ï¼Œ å› ä¸ºåŠ¨è¯å¯ä»¥æ–½åŠ¨äºåè¯ã€‚</p>
<ul>
<li>O / o åœ¨ä¹‹ä¸Š/ä¹‹ä¸‹æ’å…¥è¡Œï¼Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</li>
<li>r{char}: æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</li>
<li>R: è¿›å…¥æ›¿æ¢æ¨¡å¼</li>
<li>d{ç§»åŠ¨å‘½ä»¤} åˆ é™¤ {ç§»åŠ¨å‘½ä»¤}
<ul>
<li>ä¾‹å¦‚ï¼Œ dw åˆ é™¤è¯, d$ åˆ é™¤åˆ°è¡Œå°¾, d0 åˆ é™¤åˆ°è¡Œå¤´ã€‚</li>
</ul>
</li>
<li>c{ç§»åŠ¨å‘½ä»¤} æ”¹å˜ {ç§»åŠ¨å‘½ä»¤}
<ul>
<li>ä¾‹å¦‚ï¼Œ cw æ”¹å˜è¯ ç›¸å½“äº d{ç§»åŠ¨å‘½ä»¤} å† i</li>
</ul>
</li>
<li>cc åˆ é™¤è¯¥è¡Œå¹¶åœ¨è¯¥è¡Œè¿›å…¥æ’å…¥æ¨¡å¼</li>
<li>x åˆ é™¤å­—ç¬¦ï¼ˆç­‰åŒäº dlï¼‰</li>
<li>s æ›¿æ¢å­—ç¬¦ï¼ˆç­‰åŒäº xiï¼‰</li>
<li>å¯è§†åŒ–æ¨¡å¼ + æ“ä½œ
<ul>
<li>é€‰ä¸­æ–‡å­—, d åˆ é™¤ æˆ–è€… c æ”¹å˜</li>
</ul>
</li>
<li>u æ’¤é”€, Ctrl-r é‡åš</li>
<li>y å¤åˆ¶ (å¤åˆ¶å¤§æ®µéœ€è¦è¿›å…¥VISUALæ¨¡å¼)</li>
<li>yy å¤åˆ¶ä¸€è¡Œ</li>
<li>p ç²˜è´´ (ä¹Ÿå¯å°†åˆšåˆšåˆ é™¤çš„å†…å®¹(å‚¨å­˜åœ¨Vimå¯„å­˜å™¨ä¸­)ç²˜è´´åˆ°å…‰æ ‡å)</li>
</ul>
<h3 id="è®¡æ•°"> è®¡æ•°</h3>
<p>ä½ å¯ä»¥ç”¨ä¸€ä¸ªè®¡æ•°æ¥ç»“åˆâ€œåè¯â€å’Œâ€œåŠ¨è¯â€ï¼Œè¿™ä¼šæ‰§è¡ŒæŒ‡å®šæ“ä½œè‹¥å¹²æ¬¡ã€‚</p>
<ul>
<li>3w å‘å‰ç§»åŠ¨ä¸‰ä¸ªè¯</li>
<li>5j å‘ä¸‹ç§»åŠ¨5è¡Œ</li>
<li>7dw åˆ é™¤7ä¸ªè¯</li>
</ul>
<h3 id="æœç´¢"> æœç´¢</h3>
<ul>
<li>æœç´¢: <code>/{æ­£åˆ™è¡¨è¾¾å¼}</code>, <code>n</code> / <code>N</code> ç”¨äºå¯¼èˆªåŒ¹é…ï¼Œå‘å/å‘å‰
<ul>
<li>set hls(earch) è®¾ç½®æœç´¢é«˜äº®</li>
<li>:noh æ¸…æ¥šé«˜äº®æ˜¾ç¤º</li>
</ul>
</li>
<li>:grep ç³»ç»Ÿçš„grep</li>
<li>:vimgrep pattern path åœ¨ç›®å½•ä¸­æœç´¢patternã€‚<code>**</code>è¡¨ç¤ºé€’å½’æœç´¢ã€‚ <code>**/*.c</code>æœç´¢å…·ä½“æ–‡ä»¶ç±»å‹ã€‚
<ul>
<li>æ‰§è¡Œåï¼Œvimä¼šè·³è½¬åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹å¤„</li>
<li>:cn, :cp é€ä¸ªæµè§ˆåŒ¹é…é¡¹</li>
<li>:copen æ˜¾ç¤ºåŒ¹é…åˆ—è¡¨</li>
</ul>
</li>
</ul>
<h3 id="ä¿®é¥°è¯­"> ä¿®é¥°è¯­</h3>
<p>ä½ å¯ä»¥ç”¨ä¿®é¥°è¯­æ”¹å˜â€œåè¯â€çš„æ„ä¹‰ã€‚ä¿®é¥°è¯­æœ‰ iï¼Œè¡¨ç¤ºâ€œå†…éƒ¨â€æˆ–è€…â€œåœ¨å†…â€œï¼Œå’Œ aï¼Œ è¡¨ç¤ºâ€å‘¨å›´â€œã€‚</p>
<ul>
<li>ci( æ”¹å˜å½“å‰æ‹¬å·å†…çš„å†…å®¹</li>
<li>ci[ æ”¹å˜å½“å‰æ–¹æ‹¬å·å†…çš„å†…å®¹</li>
<li>da' åˆ é™¤ä¸€ä¸ªå•å¼•å·å­—ç¬¦ä¸²ï¼Œ åŒ…æ‹¬å‘¨å›´çš„å•å¼•å·</li>
</ul>
<h3 id="æ‰©å±•vim"> æ‰©å±•Vim</h3>
<p>Vim æœ‰å¾ˆå¤šæ‰©å±•æ’ä»¶ã€‚ä» Vim 8.0 å¼€å§‹ï¼Œä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„æ’ä»¶ç®¡ç†ç³»ç»Ÿã€‚åªéœ€è¦åˆ›å»ºä¸€ä¸ª ~/.vim/pack/vendor/start/ çš„æ–‡ä»¶å¤¹ï¼Œç„¶åæŠŠæ’ä»¶æ”¾åˆ°è¿™é‡Œã€‚</p>
<p><a href="https://vimawesome.com/" target="_blank" rel="noopener noreferrer">vimawesome</a></p>
<h2 id="practice-vim"> practice vim</h2>
<ul>
<li>
<p><code>.</code> ç”¨äºé‡å¤ä¸€æ¬¡ä¿®æ”¹ã€‚(ä»è¿›å…¥æ’å…¥æ¨¡å¼å¼€å§‹åˆ°æŒ‰ESCé€€å‡ºä¸ºæ­¢çš„æ‰€æœ‰æ“ä½œ)ã€‚</p>
</li>
<li>
<p><code>u</code> æ’¤é”€ä¸€æ¬¡ä¿®æ”¹ã€‚è¾“å…¥é—´éš”çš„åœé¡¿æ—¶é—´è¾ƒé•¿æ—¶ï¼Œå°±é€€å‡ºå§ã€‚å¯ä»¥æ§åˆ¶æ’¤é”€ç²’åº¦ã€‚</p>
</li>
<li>
<p>åœ¨æ’å…¥æ¨¡å¼ä¸­ä½¿ç”¨Up,Downç­‰å…‰æ ‡é”®ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æ’¤é”€å—ã€‚å¯ä»¥è®¤ä¸ºæ˜¯å…ˆé€€å›æ™®é€šæ¨¡å¼ï¼Œåœ¨æ‰§è¡Œjklhã€‚ä¹Ÿä¼šå½±å“<code>.</code>å‘½ä»¤ã€‚</p>
</li>
<li>
<p><code>f{char}</code> ç”¨äºåœ¨ä¸€è¡Œå†…æŸ¥æ‰¾ä¸‹ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ï¼Œå¹¶ç«‹å³å°†å…‰æ ‡ç§»åŠ¨åˆ°é‚£é‡Œã€‚</p>
</li>
<li>
<p><code>;</code> ä¼šé‡å¤å‘åæŸ¥æ‰¾ä¸Šæ¬¡få‘½ä»¤æŸ¥æ‰¾çš„å­—ç¬¦</p>
</li>
<li>
<p><code>,</code> å’Œ<code>;</code>æ–¹å‘ç›¸å</p>
</li>
<li>
<p>j,k,0,$ç”¨äºæ“ä½œå®é™…è¡Œï¼Œä½†åŠ ä¸Šgå‰ç¼€åæ“ä½œå±å¹•è¡Œã€‚</p>
</li>
<li>
<p><code>:s/target/replacement</code> ä½¿ç”¨<code>&amp;</code>é‡å¤ã€‚</p>
</li>
<li>
<p><code>*</code> æŸ¥æ‰¾å½“å‰å…‰æ ‡ä¸‹çš„å•è¯ã€‚å…‰æ ‡ä¼šè·³åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ã€‚</p>
</li>
<li>
<p><code>&lt;C-h&gt;</code> åˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦ï¼ŒåŒBS</p>
</li>
<li>
<p><code>&lt;C-w&gt;</code> åˆ é™¤å‰ä¸€ä¸ªå•è¯</p>
</li>
<li>
<p><code>&lt;C-u&gt;</code> åˆ é™¤è‡³è¡Œé¦–ã€‚è¿™ä¸‰ä¸ªå‘½ä»¤æ¯”è¾ƒé€šç”¨ã€‚</p>
</li>
<li>
<p><code>&lt;C-o&gt;</code> è¿›å…¥æ’å…¥-æ™®é€šæ¨¡å¼ï¼Œæ‰§è¡Œä¸€ä¸ªå‘½ä»¤åè¿”å›æ’å…¥æ¨¡å¼ã€‚</p>
</li>
<li>
<p><code>&lt;C-r&gt;=</code> ä½¿ç”¨è¡¨è¾¾å¼å¯„å­˜å™¨è®¡ç®—ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶æ’å…¥ç»“æœã€‚</p>
</li>
<li>
<p><code>&lt;C-v&gt;{123}</code> æ’å…¥ä¸‰ä½æ•°ASCIIç å¯¹åº”çš„å­—ç¬¦</p>
</li>
<li>
<p><code>&lt;C-v&gt;u{1234}</code> æ’å…¥Unicodeç å¯¹åº”çš„å­—ç¬¦</p>
</li>
<li>
<p><code>&lt;C-k&gt;{char1}{char2}</code> æ’å…¥ç»„åˆå­—ç¬¦è¡¨ç¤ºçš„å•ä¸ªå­—ç¬¦</p>
</li>
<li>
<p><code>ga</code> æŸ¥çœ‹å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„ ASCIIç ï¼ŒUnicodeç ï¼Œå­—ç¬¦ç»„åˆ(digr)</p>
</li>
<li>
<p><code>&lt;C-g&gt;</code> åœ¨å¯è§†æ¨¡å¼å’Œé€‰æ‹©æ¨¡å¼ä¸­åˆ‡æ¢</p>
</li>
<li>
<p><code>o</code> åœ¨å¯è§†æ¨¡å¼ä¸­å¯ä»¥åˆ‡æ¢å›ºå®šçš„ç«¯ç‚¹ã€‚</p>
</li>
<li>
<p><code>gv</code> é‡æ–°é€‰æ‹©ä¸Šæ¬¡çš„é«˜äº®é€‰åŒº</p>
</li>
<li>
<p><code>:xx</code> ç”±äºå†å²åŸå› ï¼Œè¢«ç§°ä¸ºExå‘½ä»¤</p>
</li>
<li>
<p>[range]æ ¼å¼ä¸º{start},{end}ã€‚</p>
<ul>
<li><code>.</code>è¡¨ç¤ºå½“å‰è¡Œ</li>
<li><code>%</code>è¡¨ç¤ºæ‰€æœ‰è¡Œ</li>
<li><code>'&lt;,'&gt;</code>è¡¨ç¤ºå½“å‰é«˜äº®é€‰åŒº</li>
<li>startï¼Œendä¹Ÿå¯ä»¥æ˜¯æ¨¡å¼ã€‚å¦‚<code>:/&lt;html&gt;/,/&lt;\/html&gt;/p</code>æ‰“å°htmlæ ‡ç­¾æ‰€åœ¨è¡ŒåŠä¹‹é—´çš„æ‰€æœ‰è¡Œã€‚</li>
<li>start,endä¹Ÿå¯ä»¥åŠ ä¸Šåç§»ã€‚å¦‚<code>:/&lt;html&gt;/+1,/&lt;\/html&gt;/-1p</code>æ‰“å°htmlæ ‡ç­¾ä¹‹é—´çš„æ‰€æœ‰è¡Œ(ä¸åŒ…æ‹¬æ‰€åœ¨è¡Œ)ã€‚</li>
<li>0 è¡¨ç¤ºæ–‡ä»¶ç¬¬ä¸€è¡Œä¸Šæ–¹çš„è™šæ‹Ÿè¡Œ</li>
</ul>
</li>
<li>
<p>:{num} numè¢«è§£æä¸ºåœ°å€ï¼Œä¼šè·³è½¬åˆ°æŒ‡å®šè¡Œã€‚</p>
</li>
<li>
<p>:[range]normal {commands} å¯¹æŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰è¡Œæ‰§è¡Œç›¸åŒçš„å‘½ä»¤</p>
</li>
<li>
<p>:copy | :co | :t å¤åˆ¶æŒ‡å®šè¡Œå¹¶ç²˜è´´åˆ°å½“å‰è¡Œä¸‹æ–¹ã€‚ä¸ä¼šä½¿ç”¨å¯„å­˜å™¨ã€‚</p>
</li>
<li>
<p><code>@:</code> é‡å¤ä¸Šæ¬¡Exå‘½ä»¤</p>
</li>
<li>
<p><code>q:</code> æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œè®°å½•äº†Exå‘½ä»¤å†å²ï¼Œå¯ä»¥è½»æ¾é‡å¤ä»¥å‰çš„Exå‘½ä»¤</p>
</li>
<li>
<p>:shell æ‰“å¼€shellã€‚exitå›åˆ°vimã€‚</p>
</li>
<li>
<p><code>z&lt;CR&gt;</code> å°†å…‰æ ‡è¡Œæ”¾åˆ°å±å¹•é¡¶ç«¯</p>
</li>
<li>
<p><code>zz</code> å°†å…‰æ ‡è¡Œæ”¾åˆ°å±å¹•ä¸­é—´</p>
</li>
</ul>
<h3 id="text-object"> Text Object</h3>
<ul>
<li>aw: a word</li>
<li>iw: inner word</li>
<li>aW: a WORD</li>
<li>as: a setence</li>
<li>is</li>
<li>ap: a paragraph</li>
<li>ip</li>
<li><code>a[ | a]</code> a [] block, <code>&quot;[content]&quot;-&gt;&quot;[content]&quot;</code></li>
<li><code>i[ | i]</code> inner [] block, <code>&quot;[content]&quot;-&gt;&quot;content&quot;</code></li>
<li>a,iä½œä¸ºå‰ç¼€çœç•¥</li>
<li><code>(,),b</code></li>
<li><code>&lt;,&gt;</code></li>
<li><code>t</code> tag block <code>&lt;a&gt;content&lt;/a&gt;</code></li>
<li><code>{,},B</code></li>
<li>&quot;</li>
<li>'</li>
<li>`</li>
</ul>
<h2 id="vimè¿›é˜¶"> Vimè¿›é˜¶</h2>
<h3 id="vimç”Ÿæˆçš„æ–‡ä»¶"> vimç”Ÿæˆçš„æ–‡ä»¶</h3>
<ul>
<li>backup æ˜¯æ™®é€šçš„åŠ ~å¤‡ä»½.</li>
<li>undofile åŠ åç¼€un~ã€‚ç”¨äºåœ¨ä¸‹æ¬¡æ‰“å¼€æ–‡ä»¶æ—¶ä¹Ÿå¯ä»¥æ‰§è¡Œæ’¤é”€å‘½ä»¤æ’¤é”€ä¸Šæ¬¡çš„ä¿®æ”¹ã€‚</li>
<li>writebackup æ˜¯é˜²æ­¢ç¾éš¾æ—¶çš„åŠ ~å¤‡ä»½, ç‰¹ç‚¹æ˜¯æ–‡ä»¶æ­£å¸¸å†™å…¥ä¹‹åå°±ä¼šè‡ªåŠ¨åˆ é™¤. ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„æ–‡ä»¶æœ‰æ­£å¸¸å†™å…¥(ä¸æ­£å¸¸æƒ…å†µé€šå¸¸å‘ç”Ÿåœ¨ç£ç›˜å¿«è¦æ»¡çš„æ—¶å€™), ä½ æ˜¯å¾ˆéš¾è§åˆ°è¿™ä¸ªæ–‡ä»¶å‡ºç°çš„.</li>
<li>swapfile ä¹Ÿæ˜¯é˜²æ­¢ç¾éš¾, ä¸è¿‡æ˜¯ç¼“å†²åŒºçš„å¤‡ä»½, ä¹Ÿå°±æ˜¯ä½ æ­£åœ¨ç¼–è¾‘çš„å†…å®¹. å¦‚æœä½ åœ¨ç¼–è¾‘çš„æ—¶å€™ç”µè„‘æ–­ç”µæˆ–è€…Vimå‘ç”Ÿå¼‚å¸¸é€€å‡º, è€Œä½ æ²¡æœ‰ä¿å­˜, ä½ å¯ä»¥ä».file.txt.swpé‡Œæ¢å¤è¿™ä¸ªæ–‡ä»¶.</li>
</ul>
<p>ç¦æ­¢å¤‡ä»½åŠŸèƒ½<br>
åœ¨~/.vimrcä¸­æ·»åŠ </p>
<div><pre><code>set nobackup
set noundofile
set nowritebackup
set noswapfile
" å¤‡ä»½åˆ°æŸä¸ªç›®å½•  // è¡¨ç¤ºä¼šä¿å­˜ç›®å½•ä¿¡æ¯åˆ°æ–‡ä»¶åä¸­
set directory=$HOME/.vim/tmp//
set backupdir=$HOME/.vim/tmp//
set undodir=$HOME/.vim/tmp//
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h3 id="æœç´¢å’Œæ›¿æ¢"> æœç´¢å’Œæ›¿æ¢</h3>
<ul>
<li><code>:s/foo/bar/g</code> å½“å‰è¡Œçš„fooæ›¿æ¢æˆbar</li>
<li><code>:%s/foo/bar/gc</code> æ‰€æœ‰è¡Œçš„fooæ›¿æ¢æˆbarï¼Œä¸”éœ€è¦ä¸€ä¸ªä¸ªç¡®è®¤(<code>c</code>)</li>
<li><code>:5,12s/foo/bar/g</code> 5-12è¡Œçš„fooæ›¿æ¢æˆbar</li>
</ul>
<h3 id="å®"> å®</h3>
<ul>
<li>q{å­—ç¬¦} æ¥å¼€å§‹åœ¨å¯„å­˜å™¨{å­—ç¬¦}ä¸­å½•åˆ¶å®</li>
<li>qåœæ­¢å½•åˆ¶</li>
<li>@{å­—ç¬¦} é‡æ”¾å®</li>
<li>å®çš„æ‰§è¡Œé‡é”™è¯¯ä¼šåœæ­¢</li>
<li>{è®¡æ•°}@{å­—ç¬¦}æ‰§è¡Œä¸€ä¸ªå®{è®¡æ•°}æ¬¡</li>
</ul>
<h3 id="åœ¨vimä¸­æ‰§è¡Œå¤–éƒ¨å‘½ä»¤"> åœ¨Vimä¸­æ‰§è¡Œå¤–éƒ¨å‘½ä»¤</h3>
<p><code>:!external command&lt;CR&gt;</code>: <code>!</code>å’Œå›è½¦ä¹‹é—´çš„éƒ½æ˜¯è¢«å½“åšå¤–éƒ¨å‘½ä»¤æ‰§è¡Œã€‚</p>
<h3 id="ä¿å­˜é€‰ä¸­éƒ¨åˆ†-å–å›å†…å®¹"> ä¿å­˜é€‰ä¸­éƒ¨åˆ†ï¼Œå–å›å†…å®¹</h3>
<p>æŒ‰vè¿›å…¥å¯è§†åŒ–æ¨¡å¼ï¼Œç§»åŠ¨ä»¥é€‰æ‹©å†…å®¹ã€‚ç„¶å<code>:w FILE</code>å³å¯ã€‚<br>
æ³¨æ„æŒ‰<code>:</code>ååº•éƒ¨å‡ºç°äº†<code>:'&lt;,'&gt;</code>ã€‚</p>
<p><code>:r FILE</code> å°†FILEå†…å®¹æ”¾å…¥å…‰æ ‡ä¸‹ä¸€è¡Œ<br>
<code>:r !cmd</code> å°†cmdçš„è¾“å‡ºæ”¾å…¥å…‰æ ‡ä¸‹ä¸€è¡Œ</p>
<h3 id="è®¾ç½®"> è®¾ç½®</h3>
<p><code>:set xxx</code></p>
<ul>
<li>ic : æœç´¢æ—¶å¿½ç•¥å¤§å°å†™</li>
<li>hls : é«˜äº®åŒ¹é…çš„å­—ç¬¦</li>
<li>noxxx : å–æ¶ˆxxxè®¾ç½®</li>
</ul>
<h3 id="è‡ªåŠ¨è¡¥å…¨"> è‡ªåŠ¨è¡¥å…¨</h3>
<p>Vimå‘½ä»¤ä¹Ÿæœ‰è‡ªåŠ¨è¡¥å…¨ï¼Œ<code>tab</code>è¡¥å…¨å”¯ä¸€çš„ä¸€ä¸ª,<code>ctrl-d</code>æ˜¾ç¤ºæ‰€æœ‰å€™é€‰ã€‚</p>
<h3 id="ä»£ç æŠ˜å "> ä»£ç æŠ˜å </h3>
<ul>
<li>åœ¨.vimrcä¸­è®¾ç½® set foldmethod=syntax|indent</li>
<li>zc æŠ˜å </li>
<li>zo å±•å¼€</li>
<li>za æŠ˜å å±•å¼€åˆ‡æ¢</li>
<li>zR æ‰“å¼€æ‰€æœ‰æŠ˜å </li>
<li>zM å…³é—­æ‰€æœ‰æŠ˜å </li>
</ul>
<h3 id="å‘½ä»¤é‡æ˜ å°„"> å‘½ä»¤é‡æ˜ å°„</h3>
<ul>
<li>:map é€’å½’æ˜ å°„</li>
<li>:unmap å–æ¶ˆæ˜ å°„</li>
<li>:mapclear æ¸…é™¤æ‰€æœ‰æ˜ å°„</li>
<li>:noremap éé€’å½’æ˜ å°„</li>
<li>å‰ç¼€
<ul>
<li>nore: éé€’å½’</li>
<li>n: åœ¨æ™®é€šæ¨¡å¼ä¸‹ç”Ÿæ•ˆ</li>
<li>v | x: VISUALæ¨¡å¼</li>
<li>i: INSERTæ¨¡å¼</li>
<li>c: å‘½ä»¤æ¨¡å¼</li>
</ul>
</li>
<li>é”®è¡¨
<ul>
<li><code>&lt;k0&gt;</code> - <code>&lt;k9&gt;</code> å°é”®ç›˜ 0 åˆ° 9</li>
<li><code>&lt;S-...&gt;</code> Shiftï¼‹é”®</li>
<li><code>&lt;C-...&gt;</code> Controlï¼‹é”®</li>
<li><code>&lt;M-...&gt;</code> Altï¼‹é”® æˆ– metaï¼‹é”®</li>
<li><code>&lt;A-...&gt;</code> åŒ <code>&lt;M-...&gt;</code></li>
<li><code>&lt;Esc&gt;</code> Escape</li>
<li><code>&lt;Up&gt;</code> å…‰æ ‡ä¸Šç§»é”®</li>
<li><code>&lt;Space&gt;</code> ç©ºæ ¼</li>
<li><code>&lt;Tab&gt;</code> Tab</li>
<li><code>&lt;CR&gt;</code> ç­‰äº<code>&lt;Enter&gt;</code></li>
<li><code>&lt;f1&gt;~&lt;f12&gt;</code></li>
<li><code>&lt;home&gt; &lt;insert&gt; &lt;del&gt; &lt;end&gt;</code></li>
<li><code>&lt;nop&gt;</code> æ— æ“ä½œ</li>
</ul>
</li>
</ul>
<div><pre><code>" åœ¨æ’å…¥æ¨¡å¼ä¸‹åŠ å…¥ä¸€å¯¹å¼•å·æˆ–æ‹¬å·
inoremap ' ''<span><span><span>&lt;</span>esc</span><span>></span></span>i
inoremap " ""<span><span><span>&lt;</span>esc</span><span>></span></span>i
inoremap ( ()<span><span><span>&lt;</span>esc</span><span>></span></span>i
inoremap [ []<span><span><span>&lt;</span>esc</span><span>></span></span>i
inoremap { {}<span><span><span>&lt;</span>esc</span><span>></span></span>i
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h3 id="å…ˆå¯¼é”®-leader-key"> å…ˆå¯¼é”®(leader key)</h3>
<p>æœ¬è´¨æ˜¯ç”¨æˆ·æˆ–æ’ä»¶è‡ªå®šä¹‰çš„å¿«æ·é”®çš„å‘½ä»¤ç©ºé—´ã€‚é»˜è®¤çš„å…ˆå¯¼é”®ä¸º<code>\</code>ã€‚</p>
<div><pre><code>" éœ€è¦æ”¾åœ¨.vimrcçš„é¡¶éƒ¨
" let mapleader = ','
let mapleader = "\<span><span><span>&lt;</span>space</span><span>></span></span>" " mapleaderå˜é‡ä¸­ä¸å«ç‰¹æ®Šå­—ç¬¦ï¼Œæ‰€ä»¥è½¬ä¹‰å­—ç¬¦æ˜¯å¿…è¦çš„
" ä½¿ç”¨å…ˆå¯¼é”®
nnoremap <span><span><span>&lt;</span>leader</span><span>></span></span>w :w<span><span><span>&lt;</span>cr</span><span>></span></span> " ç”¨leader-wä¿å­˜æ–‡ä»¶ 
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h3 id="vimå¯„å­˜å™¨"> vimå¯„å­˜å™¨</h3>
<p>ä½¿ç”¨<code>&quot;</code>è®¿é—®å¯„å­˜å™¨</p>
<ul>
<li>æ— åå¯„å­˜å™¨ å¤åˆ¶ç²˜è´´é»˜è®¤ä½¿ç”¨çš„å¯„å­˜å™¨ã€‚å¯ç”¨<code>&quot;</code>è®¿é—®</li>
<li>a~zå¯„å­˜å™¨ ç”¨äºæ‰‹åŠ¨å¤åˆ¶æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªå•è¯å¤åˆ¶åˆ°aå¯„å­˜å™¨,<code>&quot;ayw</code>,ç²˜è´´<code>&quot;ap</code></li>
<li>0~9å¯„å­˜å™¨ æœ€è¿‘10æ¬¡åˆ é™¤çš„å†å²è®°å½•</li>
<li>åªè¯»å¯„å­˜å™¨
<ul>
<li><code>%</code> å½“å‰æ–‡ä»¶å</li>
<li><code>#</code> æ–‡ä»¶æ‰€åœ¨ç›®å½•</li>
<li><code>.</code> æœ€åæ’å…¥çš„æ–‡æœ¬</li>
<li><code>:</code> æœ€åæ‰§è¡Œçš„å‘½ä»¤</li>
</ul>
</li>
<li><code>*</code> ç³»ç»Ÿçš„ä¸»ç²˜è´´æ¿</li>
<li><code>+</code> Linuxä¸­<code>&lt;C-c|v&gt;</code>ä½¿ç”¨çš„ç²˜è´´æ¿</li>
<li>ä½¿ç”¨:reg rid è®¿é—®å¯„å­˜å™¨å†…å®¹</li>
</ul>
<h2 id="å¤šæ–‡ä»¶-å¤šçª—å£"> å¤šæ–‡ä»¶ï¼Œå¤šçª—å£</h2>
<ul>
<li>:help window-moving</li>
<li>:help window-resize</li>
<li>:ls æ˜¾ç¤ºæ‰€æœ‰bufferã€‚ %å½“å‰ç„¦ç‚¹æ‰€åœ¨çš„æ–‡ä»¶ã€‚#è½®æ¢æ–‡ä»¶ï¼ŒæŒ‰<code>C-^</code>å¯ä»¥åˆ‡æ¢åˆ°è¯¥æ–‡ä»¶ã€‚aæ´»åŠ¨çª—å£ã€‚</li>
<li>:w! å°†ç£ç›˜ä¸­çš„æ–‡ä»¶è¯»å…¥ç¼“å†²åŒºã€‚å³å›æ»šæ‰€æœ‰ä¿®æ”¹ã€‚</li>
<li>:q! ä¸ä¿®æ”¹ï¼Œå…³é—­æ‰€æœ‰çª—å£ã€‚</li>
<li><code>&lt;C-w&gt;&lt;C-w&gt;</code> æŒ‰ä½ctrlï¼Œè¿ç»­æŒ‰wwå¯ä»¥å¾ªç¯åˆ‡æ¢çª—å£ã€‚</li>
<li>:pwd æŸ¥çœ‹vimå½“å‰å·¥ä½œç›®å½•ã€‚é»˜è®¤æ˜¯åœ¨shellä¸­æ‰“å¼€vimæ—¶ï¼Œshellçš„å·¥ä½œç›®å½•ã€‚</li>
<li>:lcd {path} è®¾ç½®å½“å‰çª—å£çš„æœ¬åœ°å·¥ä½œç›®å½•</li>
<li>:windo lcd {path} ä¸ºæ‰€æœ‰çª—å£è®¾ç½®æœ¬åœ°å·¥ä½œç›®å½•</li>
<li>% åœ¨æ–‡ä»¶è·¯å¾„ä¸­è¡¨ç¤ºå½“å‰ç¼“å†²åŒºçš„å®Œæ•´æ–‡ä»¶è·¯å¾„ã€‚æŒ‰tabå±•å¼€ã€‚</li>
<li>%:h å½“å‰ç¼“å†²åŒºçš„å®Œæ•´æ–‡ä»¶è·¯å¾„ï¼Œå»é™¤äº†æ–‡ä»¶åã€‚</li>
<li>é‡æ˜ å°„ <code>cnoremap &lt;expr&gt;%% getcmdtype() == ':' ? expand('%:h').'/' : '%%'</code></li>
</ul>
<p>åœ¨ä¸åŒæ–‡ä»¶bufferé—´åˆ‡æ¢</p>
<ul>
<li>:bn ä¸‹ä¸€ä¸ªæ–‡ä»¶buffer</li>
<li>:bp ä¸Šä¸€ä¸ªæ–‡ä»¶buffer</li>
<li>:ls è¾“å‡ºbufferåˆ—è¡¨ %è¡¨ç¤ºå½“å‰çª—å£çš„ç¼“å†²åŒºï¼Œaè¡¨ç¤ºæ´»åŠ¨çš„ç¼“å†²åŒº(å¯è§)ã€‚</li>
<li>:b[num] åˆ‡æ¢åˆ°ç¬¬numä¸ªbuffer</li>
<li>:b{bufname} ä½¿ç”¨æ–‡ä»¶ååˆ‡æ¢</li>
<li>:bd åˆ é™¤ç¼“å†²åŒº</li>
<li>:e file æ‰“å¼€æ–‡ä»¶</li>
<li>:jumps æ˜¾ç¤ºvimçš„è·³è½¬åˆ—è¡¨ã€‚
<ul>
<li><code>&lt;C-o&gt;</code> åœ¨è·³è½¬åˆ—è¡¨ä¸­åé€€</li>
<li><code>&lt;C-i&gt;</code> å‰è¿›</li>
</ul>
</li>
<li>:changes æ˜¾ç¤ºvimçš„ä¿®æ”¹è®°å½•è¡¨ã€‚
<ul>
<li>g; è·³è½¬åˆ°ä¸Šä¸€æ¬¡ä¿®æ”¹çš„åœ°æ–¹</li>
<li>g, ä¸‹</li>
</ul>
</li>
<li>:find åœ¨å½“å‰pathä¸‹æŸ¥æ‰¾æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚ä¸æ”¯æŒæ¨¡ç³Šã€‚ä¸åŠ **åˆ™ä¸ä¼šè¿›å…¥å­æ–‡ä»¶å¤¹</li>
<li>set path+=...</li>
<li>:set path? æŸ¥çœ‹pathçš„å€¼</li>
<li>gf è·³è½¬åˆ°å…‰æ ‡ä¸‹çš„æ–‡ä»¶</li>
</ul>
<p>ç”¨ <code>:sp</code> / <code>:vsp | :vs</code> æ¥åˆ†å‰²çª—å£<br>
åŒä¸€ä¸ªç¼“å­˜å¯ä»¥åœ¨å¤šä¸ªçª—å£ä¸­æ˜¾ç¤ºã€‚</p>
<p>åˆ‡æ¢</p>
<ul>
<li><code>&lt;C-W&gt; j</code> ä¸‹ä¸€ä¸ª</li>
<li><code>&lt;C-W&gt; k</code> ä¸Šä¸€ä¸ª</li>
<li><code>&lt;C-W&gt; h</code> å·¦è¾¹ä¸€ä¸ª</li>
<li><code>&lt;C-W&gt; l</code> å³è¾¹ä¸€ä¸ª</li>
<li><code>&lt;C-W&gt; w</code> | <code>&lt;C-W&gt; &lt;C-w&gt;</code> ä¸€ä¸ªä¸€ä¸ªéå†çª—å£</li>
<li><code>&lt;C-W&gt; o</code> åªä¿ç•™å½“å‰çª—å£</li>
<li><code>:close</code> å…³é—­å½“å‰çª—å£ï¼Œä¸ä¼šé€€å‡ºVim</li>
</ul>
<p>æ ‡ç­¾é¡µ</p>
<ul>
<li>:tabnew [file] æ‰“å¼€æ–°æ ‡ç­¾é¡µ</li>
<li>:tabedit [file] æ‰“å¼€æ–°æ ‡ç­¾é¡µ</li>
<li>gt | :tabnext</li>
<li>gT | :tabprevious</li>
<li>Ngt è·³è½¬åˆ°æ ‡ç­¾é¡µN</li>
<li>:tabclose</li>
<li>:tabmove N å°†å½“å‰æ ‡ç­¾é¡µç§»åŠ¨åˆ°ç¬¬Nä¸ªæ ‡ç­¾é¡µä¹‹å</li>
<li>:tabonly</li>
<li><code>&lt;C-w&gt; T</code> å°†å½“å‰çª—å£ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°æ ‡ç­¾é¡µ</li>
</ul>
<p>è°ƒæ•´çª—å£å¤§å°</p>
<ul>
<li><code>[num]&lt;C-W&gt; +</code> å½“å‰çª—å£å¢åŠ ä¸€è¡Œ</li>
<li><code>[num]&lt;C-W&gt; -</code> å½“å‰çª—å£å‡å°‘ä¸€è¡Œ</li>
<li>:resize +n|-n ç®€å†™:resã€‚å‚ç›´ã€‚</li>
<li>:vertical resize +n|-n ç®€å†™:vert resã€‚æ°´å¹³</li>
<li><code>&lt;C-W&gt; =</code> å°†æ‰€æœ‰çª—å£å®½é«˜æ¢å¤ä¸€è‡´ã€‚</li>
</ul>
<h2 id="ä¼šè¯-session"> ä¼šè¯(session)</h2>
<ul>
<li>ä¿å­˜ <code>:mksession ~/.vim/sessions/xxx.vim</code> | <code>:mks ~/.vim/sessions/xxx.vim</code></li>
<li>æ¢å¤ <code>vim -S ~/.vim/sessions/xxx.vim</code></li>
</ul>
<h2 id="æ’ä»¶"> æ’ä»¶</h2>
<p>:so % åœ¨vimä¸­ç›´æ¥sourceå½“å‰æ–‡ä»¶</p>
<h3 id="vim-plug"> vim-plug</h3>
<ul>
<li>ä¸‹è½½æ–‡ä»¶ <code>curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.github.com/junegunn/vim-plug/master/plug.vim</code></li>
<li>vim-plugåˆå§‹åŒ– åœ¨.vimrcä¸­æ·»åŠ ä¸¤ä¸ªcallã€‚</li>
<li>æ’ä»¶ç®¡ç†
<ul>
<li>æ·»åŠ æ’ä»¶ <code>Plug &lt;username&gt;/&lt;repo&gt;</code></li>
<li>:PlugInstall å®‰è£…æ·»åŠ çš„æ’ä»¶</li>
<li>:PlugUpdate æ›´æ–°æ’ä»¶</li>
<li>:PlugUpgrade æ›´æ–°vim-plugã€‚éœ€è¦sourceä¸€ä¸‹ã€‚</li>
<li>:PlugClean ç§»é™¤ä¸ç”¨çš„æ’ä»¶</li>
</ul>
</li>
<li>æ’ä»¶å»¶è¿ŸåŠ è½½
<ul>
<li>Plug 'scrooloose/nerdtree', {'on', : 'NERDTreeToggle'} åœ¨æ‰§è¡Œ'NERDTreeToggle'å‘½ä»¤æ—¶å†åŠ è½½</li>
<li>Plug 'junegunn/goyo.vim', {'for', : 'markdown'} æŒ‰æ–‡ä»¶ç±»å‹åŠ è½½</li>
</ul>
</li>
</ul>
<div><pre><code>call plug<span>#begin()</span>
Plug <span>'mileszs/ack.vim'</span>
Plug <span>'easymotion/vim-easymotion.vim'</span>
call plug<span>#end()</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="ctags"> ctags</h3>
<p><code>sudo apt-get install ctags</code></p>
<h4 id="ç”Ÿæˆtagsæ–‡ä»¶"> ç”Ÿæˆtagsæ–‡ä»¶</h4>
<p>åœ¨æºç æ ¹ç›®å½•ä¸‹</p>
<div><pre><code>ctags -R --exclude<span>=</span>.git --exclude<span>=</span>vendor/* --<span>..</span>.
</code></pre>
<div><span>1</span><br></div></div><p>è¿™æ ·å°±ä¼šç”Ÿæˆä¸€ä¸ªtagsæ–‡ä»¶ï¼Œctagséœ€è¦è¿™ä¸ªæ–‡ä»¶å®ç°è·³è½¬ã€‚<br>
å¸¸ç”¨çš„é€‰é¡¹å¯ä»¥å†™åœ¨ ~/.ctags æ–‡ä»¶ä¸­</p>
<div><pre><code>-R
--exclude<span>=</span>.git
--exclude<span>=</span>vendor/*
<span>..</span>.
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>è‡ªåŠ¨ç”Ÿæˆctags</p>
<div><pre><code>autocmd BufWritePost *.c *.h *.cpp silent! !ctags -R &amp;
</code></pre>
<div><span>1</span><br></div></div><h4 id="how-to-use"> How to use</h4>
<ul>
<li>æ‰¾ä¸€ä¸ªæŒ‡å®šçš„tagï¼Œå¹¶ç”¨Vimæ‰“å¼€å…¶å®šä¹‰ä½ç½®ï¼Œåœ¨shellä¸­ä½¿ç”¨ <code>vim -t &lt;tag&gt;</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™</li>
<li>åœ¨Vimä¸­
<ul>
<li><code>ctrl+]</code>(æœ‰å¤šä¸ªtagæ—¶ï¼Œä¼šé€‰ä¸€ä¸ªç›´æ¥è¿›å…¥) æˆ– <code>g]</code>(æœ‰å¤šä¸ªä¼šæ˜¾ç¤ºä¸€ä¸ªåˆ—è¡¨) æˆ– <code>:ta[g] ctrl+rw</code> è·³è½¬åˆ°tag</li>
<li><code>:ts tag_name</code> åˆ—å‡ºæ‰€æœ‰tag_nameåŒ¹é…çš„tag</li>
<li><code>:pts tag_name</code> <code>:ts</code>åŠŸèƒ½ï¼Œä½†æœ‰é¢„è§ˆ</li>
<li><code>ctrl+w}</code> æˆ– <code>:ptag ctrl+rw</code> é¢„è§ˆtag</li>
<li><code>ctrl+wz</code> æˆ– <code>:pc</code> å…³é—­ä¸Šé¢æ‰“å¼€çš„é¢„è§ˆ</li>
<li><code>:tn</code> æˆ– <code>:tp</code> åœ¨å¤šä¸ªåŒ¹é…çš„tagä¸Šè·³è½¬</li>
<li><code>ctrl+t</code> å‘tagæ ˆåº•è·³ä¸€æ ¼(ç›¸å½“äºè¿”å›ä¸Šä¸€ä¸ªtag)</li>
<li><code>:tags</code> æ˜¾ç¤ºtagæ ˆï¼Œå½“å‰æ´»åŠ¨çš„æœ‰ <code>&gt;</code> æ ‡è®°</li>
</ul>
</li>
<li>ä½¿ç”¨æ­£åˆ™
<ul>
<li><code>:tag main</code> ç›´æ¥è·³è½¬åˆ° tag &quot;main&quot;</li>
<li><code>:tag /^get</code> ç›´æ¥è·³è½¬åˆ°ä»¥&quot;get&quot;å¼€å¤´çš„ tag</li>
<li><code>:tag /Final$</code> ç›´æ¥è·³è½¬åˆ°ä»¥&quot;Final&quot;ç»“å°¾çš„ tag</li>
<li><code>:tag /norm</code> åˆ—å‡ºåŒ…å«&quot;norm&quot;çš„ tag</li>
<li><code>:tag /Final$\C</code> åˆ—å‡ºä»¥&quot;Final&quot;ç»“å°¾çš„ tag
PSï¼šè®°å¾—è¦ä¿æŒtagsç´¢å¼•æ–‡ä»¶æœ€æ–°</li>
</ul>
</li>
</ul>
<h3 id="youcompleteme"> YouCompleteMe</h3>
<p>éœ€è¦å®‰è£…cmakeå’Œllvmã€‚å› ä¸ºè¯¥æ’ä»¶éœ€è¦ç¼–è¯‘ä»£ç ã€‚ <code>sudo apt-get install cmake llvm</code></p>
<div><pre><code>" .vimrcä¸­é…ç½®vim-plug
let g:plug_timeout = 300 " ä¸ºæ’ä»¶å¢åŠ è¶…æ—¶æ—¶é—´
Plug 'Valloric/YouCompleteMe', {'do': './install.py'}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>:source ~/.vimrc | PlugInstall</p>
<h3 id="ack"> ack</h3>
<p>mileszs/ack.vim</p>
<ul>
<li>:Ack [opts] {pattern} [{dirs}]</li>
<li>--ccä¸ºcï¼Œ--rrä¸ºrã€‚ackè§„å®šè¯­è¨€å¿…é¡»å¤§äºä¸€ä¸ªå­—ç¬¦ã€‚</li>
<li>åœ¨æœç´¢ç»“æœä¸­
<ul>
<li>? å‘½ä»¤å¸®åŠ©</li>
<li>o åŒ enter</li>
<li>O æ‰“å¼€æ–‡ä»¶å¹¶å…³é—­æœç´¢çª—å£</li>
<li>go æ‰“å¼€æ–‡ä»¶ä½†ç„¦ç‚¹ä¿æŒåœ¨æœç´¢ç»“æœçª—å£</li>
<li>q é€€å‡º</li>
<li>v,h,t,V,H,T å°å†™æ‰“å¼€å¹¶åˆ‡æ¢åˆ°ï¼Œå¤§å†™æ‰“å¼€ä½†ç„¦ç‚¹ä¿æŒåœ¨æœç´¢ç»“æœçª—å£</li>
<li>gv åœ¨å³è¾¹æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œç„¦ç‚¹ä¿æŒåœ¨æœç´¢ç»“æœçª—å£</li>
</ul>
</li>
</ul>
<h3 id="ctrlp"> ctrlp</h3>
<p>å®Œæ•´è·¯å¾„æ¨¡ç³ŠæŸ¥æ‰¾ã€‚å¯æŸ¥æ–‡ä»¶ï¼Œbufferï¼Œæœ€è¿‘ä½¿ç”¨æ–‡ä»¶(MRU)ï¼Œ tagç­‰ç­‰ã€‚</p>
<ul>
<li>c-p æ‰“å¼€æŸ¥æ‰¾é¢æ¿</li>
<li>c-d é€‰æ‹©æ–‡ä»¶æŸ¥æ‰¾|è·¯å¾„æŸ¥æ‰¾</li>
<li>c-r å¼€å…³æ­£åˆ™åŒ¹é…</li>
<li>c-f, c-b åœ¨fileæŸ¥æ‰¾ ,bufferæŸ¥æ‰¾ ,mruæŸ¥æ‰¾ä¸­åˆ‡æ¢ã€‚</li>
<li>c-j, c-k åœ¨æŸ¥æ‰¾ç»“æœä¸­ä¸Šä¸‹ç§»åŠ¨</li>
<li>c-t åœ¨æ–°tabé¡µä¸­æ‰“å¼€</li>
<li>c-x,c-v åœ¨æ–°çª—å£ä¸­æ‰“å¼€ã€‚(x-ä¸Šä¸‹ï¼Œ v-å·¦å³)</li>
<li>c-z æ ‡è®°å¤šä¸ªæ–‡ä»¶ï¼Œc-oæ‰“å¼€è¿™äº›æ–‡ä»¶</li>
<li>c-y æ–°å»ºæ–‡ä»¶å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º</li>
</ul>
<h3 id="easy-motion"> easy-motion</h3>
<p>easymotion/vim-easymotion</p>
<ul>
<li>\w å‘åè·³è½¬åˆ°å•è¯å¤´</li>
<li>\b å‘å‰è·³è½¬åˆ°å•è¯å¤´</li>
<li>\s åŒå‘è·³è½¬åˆ°æŒ‡å®šå­—ç¬¦</li>
<li>\j å‘ä¸‹è·³è½¬åˆ°è¡Œé¦–</li>
<li>\k å‘ä¸Šè·³è½¬åˆ°è¡Œé¦–</li>
</ul>
<h3 id="vim-bookmark"> vim-bookmark</h3>
<table>
<thead>
<tr>
<th>Action</th>
<th>Shortcut</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>åœ¨å½“å‰è¡Œæ·»åŠ /åˆ é™¤ä¹¦ç­¾</td>
<td>mm</td>
<td>:BookmarkToggle</td>
</tr>
<tr>
<td>Add/edit/removeå½“å‰è¡Œçš„ä¹¦ç­¾å</td>
<td>mi</td>
<td>:BookmarkAnnotate name</td>
</tr>
<tr>
<td>æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç­¾</td>
<td>ma</td>
<td>:BookmarkShowAll</td>
</tr>
<tr>
<td>æ¸…é™¤å½“å‰bufferçš„æ‰€æœ‰ä¹¦ç­¾</td>
<td>mc</td>
<td>:BookmarkClear</td>
</tr>
<tr>
<td>æ¸…é™¤æ‰€æœ‰bufferçš„æ‰€æœ‰ä¹¦ç­¾</td>
<td>mx</td>
<td>:BookmarkClearAll</td>
</tr>
<tr>
<td>ä¸‹ä¸€ä¸ªä¹¦ç­¾</td>
<td>mn</td>
<td>:BookmarkNext</td>
</tr>
<tr>
<td>ä¸Šä¸€ä¸ªä¹¦ç­¾</td>
<td>mp</td>
<td>:BookmarkPrev</td>
</tr>
<tr>
<td>å°†å½“å‰è¡Œçš„ä¹¦ç­¾å‘ä¸Šç§»åŠ¨nè¡Œ</td>
<td>nmkk</td>
<td>:BookmarkMoveUp n</td>
</tr>
<tr>
<td>å°†å½“å‰è¡Œçš„ä¹¦ç­¾å‘ä¸‹ç§»åŠ¨nè¡Œ</td>
<td>nmjj</td>
<td>:BookmarkMoveDown n</td>
</tr>
<tr>
<td>å°†å½“å‰è¡Œçš„ä¹¦ç­¾ç§»åŠ¨åˆ°ç¬¬nè¡Œ</td>
<td>nmg</td>
<td>:BookmarkMoveToLine n</td>
</tr>
<tr>
<td>å°†ä¹¦ç­¾ä¿å­˜åˆ°æ–‡ä»¶ä¸­</td>
<td></td>
<td>:BookmarkSave FILE</td>
</tr>
<tr>
<td>ä»æ–‡ä»¶ä¸­åŠ è½½ä¹¦ç­¾</td>
<td></td>
<td>:BookmarkLoad FILE</td>
</tr>
</tbody>
</table>
<h3 id="snippet"> snippet</h3>
<ul>
<li>:UltiSnippetsEdit ç¼–è¾‘å½“å‰ç±»å‹æ–‡ä»¶çš„snippets</li>
<li>æ ¼å¼</li>
</ul>
<h2 id="vim-script"> vim-script</h2>
<h3 id="è¯­æ³•"> è¯­æ³•</h3>
<ul>
<li>set ä¸ºVimå†…éƒ¨é€‰é¡¹èµ‹å€¼</li>
<li>let å¯¹éVimå†…éƒ¨å˜é‡</li>
<li>æ²¡æœ‰boolç±»å‹ï¼Œ1ä¸ºçœŸï¼Œ0ä¸ºå‡</li>
<li>ä½œç”¨åŸŸå‰ç¼€
<ul>
<li>g: å…¨å±€ä½œç”¨åŸŸã€‚é»˜è®¤</li>
<li>v: Vimæ‰€å®šä¹‰çš„å…¨å±€ä½œç”¨åŸŸ</li>
<li>I: å±€éƒ¨ä½œç”¨åŸŸ</li>
<li>b,w,t: å½“å‰ç¼“å†²åŒºï¼Œçª—å£ï¼Œæ ‡ç­¾é¡µ</li>
<li>s: :source'dæ‰§è¡Œçš„Vimè„šæœ¬ä¸­çš„å±€éƒ¨æ–‡ä»¶ä½œç”¨åŸŸ</li>
<li>a: å‡½æ•°çš„å‚æ•°</li>
</ul>
</li>
<li>echom è¾“å‡ºï¼Œå¯ä»¥ç”¨:messageæŸ¥çœ‹è¾“å‡ºå†å²</li>
<li>æ¡ä»¶è¡¨è¾¾å¼
<ul>
<li>if expr</li>
<li>else if expr</li>
<li>else</li>
<li>endif</li>
<li>(expr ? true : false)</li>
</ul>
</li>
<li>æ–‡æœ¬æ¯”è¾ƒ
<ul>
<li>== æ–‡æœ¬æ¯”è¾ƒ</li>
<li>=~ æ­£åˆ™åŒ¹é…</li>
<li>!~ æ­£åˆ™ä¸åŒ¹é…</li>
<li>åç¼€?|#è¡¨ç¤ºå¿½ç•¥|è€ƒè™‘å¤§å°å†™</li>
<li>æ— åç¼€æ˜¯å¦å¿½ç•¥å–å†³äºVimçš„å†…ç½®é€‰é¡¹ignorecase</li>
</ul>
</li>
<li>å‡½æ•°è°ƒç”¨ï¼šå¦‚æœæ˜¯å•ç‹¬è°ƒç”¨ï¼Œå¿…é¡»åœ¨å‰é¢åŠ ä¸ªcallã€‚åœ¨è¡¨è¾¾å¼ä¸­ï¼Œåˆ™ä¸å¿…ã€‚</li>
<li>listï¼šç±»ä¼¼pythonçš„listã€‚add,insert,remove,sort,extend,index,empty,len,count</li>
<li>dict: ä»£ç è·¨å¤šè¡Œæ—¶ï¼Œè¦åœ¨è¡Œå°¾åŠ <code>\</code>. :help dict</li>
<li>å¾ªç¯
<ul>
<li>for expr in exprs</li>
<li>endfor</li>
<li>while expr</li>
<li>endwhile</li>
</ul>
</li>
<li>å‡½æ•°
<ul>
<li>function! Funcname() å‡½æ•°åé¦–å­—æ¯å¿…é¡»å¤§å†™ã€‚!é˜²æ­¢å¤šæ¬¡å®šä¹‰</li>
<li>endfunction</li>
</ul>
</li>
<li>å’ŒVimäº¤äº’
<ul>
<li>execute å°†å‚æ•°è§£æä¸ºVimå‘½ä»¤å¹¶æ‰§è¡Œ</li>
<li>normal æ‰§è¡ŒæŒ‰é”®åºåˆ—</li>
<li>silent éšè—å…¶ä»–å‘½ä»¤çš„è¾“å‡º</li>
<li>has æ£€æŸ¥Vimæ˜¯å¦æ”¯æŒæŸä¸ªåŠŸèƒ½ :help feature-list</li>
<li>confirm</li>
<li>input</li>
</ul>
</li>
<li>:help eval</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="ä½¿ç”¨æŒ‡å—"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">shell</title>
    <id>https://kigane.github.io/note/cs/shell-cheatsheet/</id>
    <link href="https://kigane.github.io/note/cs/shell-cheatsheet/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="shell-æ˜¯ä»€ä¹ˆ"> shell æ˜¯ä»€ä¹ˆ</h2>
<p>æ ¸å¿ƒåŠŸèƒ½ï¼šå…è®¸ä½ æ‰§è¡Œç¨‹åºï¼Œè¾“å…¥å¹¶è·å–æŸç§åŠç»“æ„åŒ–çš„è¾“å‡ºã€‚</p>
<h2 id="shell-åŸºç¡€"> shell åŸºç¡€</h2>
<div><pre><code>hostname:~$ <span># ä¸»æœºå:å½“å‰ç›®å½• $æ˜¾ç¤ºå½“å‰å¹¶érootç”¨æˆ·</span>
hostname:~$ <span>echo</span> hello
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p>shell åŸºäºç©ºæ ¼åˆ†å‰²å‘½ä»¤å¹¶è¿›è¡Œè§£æï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªå•è¯ä»£è¡¨çš„ç¨‹åºï¼Œåç»­å•è¯å°†ä½œä¸ºç¨‹åºè®¿é—®çš„å‚æ•°</p>
<h3 id="ç¯å¢ƒå˜é‡"> ç¯å¢ƒå˜é‡</h3>
<p>shellå»å“ªé‡Œæ‰¾éœ€è¦æ‰§è¡Œçš„ç¨‹åºå‘¢ï¼Ÿshellæ˜¯ä¸€ä¸ªç¼–ç¨‹ç¯å¢ƒï¼Œæœ‰å˜é‡ï¼Œæ¡ä»¶ï¼Œå¾ªç¯å’Œå‡½æ•°ï¼Œåœ¨shellä¸­æ‰§è¡Œå‘½ä»¤å°±æ˜¯åœ¨æ‰§è¡Œä¸€æ®µshellå¯ä»¥ç†è§£çš„ä»£ç ã€‚å¦‚æœæ‰§è¡Œçš„å‘½ä»¤ä¸æ˜¯shellçš„å…³é”®å­—ï¼Œshellå°±ä¼šå’¨è¯¢<strong>ç¯å¢ƒå˜é‡$PATH</strong>ï¼Œå…¶ä¸­ï¼Œä¸åŒçš„è·¯å¾„ç”±&quot;:&quot;åˆ†å‰²ã€‚</p>
<p>å½“ç„¶ï¼Œä¸ç”¨$PATHï¼Œç›´æ¥ç»™å‡ºæ‰§è¡Œç¨‹åºçš„è·¯å¾„ä¹Ÿå¯ä»¥ã€‚</p>
<div><pre><code><span>echo</span> <span>$PATH</span>
/bin/echo <span>$PATH</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><h3 id="ls-l-chmod"> ls -l &amp; chmod</h3>
<div><pre><code><span>#æƒé™     TODO  TODO  TODO æ–‡ä»¶å¤§å°(B)  æœ€åä¿®æ”¹æ—¶é—´ æ–‡ä»¶å</span>
-rw-r--r-- <span>1</span>   user  user    <span>220</span>     May <span>25</span> 02:38 .bash_logout
-rw-r--r-- <span>1</span>   user  user   <span>3771</span>     May <span>25</span> 02:38 .bashrc
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>æƒé™ç”±10ä¸ªå­—ç¬¦è¡¨ç¤ºï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªï¼šd è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç›®å½•</li>
<li>åé¢æ¯3ä¸ªä¸€ç»„ï¼š è¡¨ç¤ºæ–‡ä»¶æ‰€æœ‰è€…(u,user)ï¼Œç”¨æˆ·ç»„(g,group)ï¼Œå…¶ä»–æ‰€æœ‰äºº(o,other)æ‰€å…·æœ‰çš„æƒé™</li>
<li>
<ul>
<li>è¡¨ç¤ºç›¸åº”æ— æƒé™</li>
</ul>
</li>
<li>-rwx åˆ†åˆ«è¡¨ç¤º<strong>è¯»ï¼Œå†™ï¼Œæ‰§è¡Œ</strong>æƒé™</li>
</ul>
<p><code>chmod 0777 FILE</code>: è¡¨ç¤ºå°†FILEæƒé™è®¾ä¸º-rwxrwxrwxã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸çŸ¥é“ä»€ä¹ˆæ„æ€ã€‚å¦‚æœä¸æ˜¯4ä¸ªæ•°ï¼Œä¼šåœ¨å‰é¢è¡¥0ï¼Œå¦‚4å®é™…ä¸º0004ã€‚
<code>chmod u+x FILE</code>: è¡¨ç¤ºä¸ºç”¨æˆ·æ·»åŠ FILEæ‰§è¡Œæƒé™ã€‚[ugoa][+-=][rwx]</p>
<h3 id="åœ¨ç¨‹åºé—´åˆ›å»ºè¿æ¥-é‡å®šå‘"> åœ¨ç¨‹åºé—´åˆ›å»ºè¿æ¥--é‡å®šå‘</h3>
<p>shellä¸­ç¨‹åºæœ‰ä¸¤ä¸ªä¸»è¦çš„æµï¼š</p>
<ul>
<li>è¾“å…¥æµï¼šé”®ç›˜ '/dev/stdin'</li>
<li>è¾“å‡ºæµï¼šæ˜¾ç¤ºå™¨  '/dev/stdout', '/dev/stderr'</li>
<li>ç©ºï¼šå¿½ç•¥è¾“å‡º /dev/null</li>
</ul>
<p>å½“ç„¶ï¼Œå¯ä»¥é‡å®šå‘</p>
<div><pre><code><span>echo</span> hello <span>></span> hello.txt <span># hello</span>
<span>cat</span> <span>&lt;</span> hello.txt <span>></span> hello2.txt <span># hello2.txt ä¸­å†…å®¹: hello</span>
<span>echo</span> world <span>>></span> hello.txt <span># hello\nworld</span>
<span># echo \ world >> hello.txt # hello\n world ç©ºæ ¼éœ€è¦è½¬ä¹‰</span>
<span># echo ' world' >> hello.txt # hello\n world æˆ–ç”¨å¼•å·(å•ï¼ŒåŒéƒ½å¯)åŒ…è£¹</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>&gt;, &lt; ç”¨äºé‡å®šå‘æµï¼Œ&gt;&gt;ç”¨äºè¿½åŠ å†…å®¹ã€‚</p>
<p>ç®¡é“(pipes)ï¼š&quot;|&quot; æ“ä½œç¬¦ï¼Œç”¨äºå°†ä¸€ä¸ªç¨‹åºçš„è¾“å‡ºå’Œå¦ä¸€ä¸ªç¨‹åºçš„è¾“å…¥è¿æ¥èµ·æ¥ã€‚</p>
<h3 id="root"> root</h3>
<p>sudo å¯ä»¥è®©ç”¨æˆ·ä»¥rootçš„èº«ä»½æ‰§è¡Œç´§è·Ÿç€çš„ç¨‹åºã€‚</p>
<p>åªæœ‰æ ¹ç”¨æˆ·æ‰èƒ½åšçš„æ“ä½œï¼šå‘<code>sysfs</code>æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œè¯¥æ–‡ä»¶æš´éœ²äº†ä¸€äº›å†…æ ¸å‚æ•°ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥åœ¨è¿è¡Œæ—¶é…ç½®ç³»ç»Ÿå†…æ ¸ã€‚ç³»ç»Ÿè¢«æŒ‚è½½åœ¨<code>/sys</code>ä¸‹ã€‚</p>
<h2 id="shellè„šæœ¬"> shellè„šæœ¬</h2>
<ul>
<li>å˜é‡èµ‹å€¼ï¼š<code>foo=bar</code>ï¼Œ<strong>ä¸èƒ½æœ‰ç©ºæ ¼</strong></li>
<li>è®¿é—®å˜é‡ï¼š<code>$foo</code></li>
<li>å­—ç¬¦ä¸²ï¼šå•å¼•å·è¡¨ç¤ºåŸä¹‰å­—ç¬¦ä¸²ï¼Œå…¶ä¸­çš„å˜é‡ä¸ä¼šè¢«è½¬ä¹‰ã€‚è€ŒåŒå¼•å·ä¸­å˜é‡ä¼šè¢«è½¬ä¹‰ã€‚</li>
</ul>
<h3 id="bashå‡½æ•°"> bashå‡½æ•°</h3>
<div><pre><code><span>mcd</span><span>(</span><span>)</span><span>{</span>
    <span>mkdir</span> -p <span>"<span>$1</span>"</span>
    <span>cd</span> <span>"<span>$1</span>"</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>bashä½¿ç”¨å¾ˆå¤šç‰¹æ®Šå˜é‡è¡¨ç¤ºå‚æ•°</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç¬¦å·</th>
<th style="text-align:left">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$0</td>
<td style="text-align:left">è„šæœ¬å</td>
</tr>
<tr>
<td style="text-align:center">$1~$9</td>
<td style="text-align:left">ç¬¬nä¸ªå‚æ•°</td>
</tr>
<tr>
<td style="text-align:center">$@</td>
<td style="text-align:left">æ‰€æœ‰å‚æ•°</td>
</tr>
<tr>
<td style="text-align:center">$#</td>
<td style="text-align:left">å‚æ•°ä¸ªæ•°</td>
</tr>
<tr>
<td style="text-align:center">$?</td>
<td style="text-align:left">å‰ä¸€ä¸ªå‘½ä»¤çš„è¿”å›å€¼</td>
</tr>
<tr>
<td style="text-align:center">$$</td>
<td style="text-align:left">å½“å‰è„šæœ¬çš„è¿›ç¨‹è¯†åˆ«ç </td>
</tr>
<tr>
<td style="text-align:center">!!</td>
<td style="text-align:left">å®Œæ•´çš„ä¸Šä¸€æ¡å‘½ä»¤ï¼ŒåŒ…æ‹¬å‚æ•°</td>
</tr>
<tr>
<td style="text-align:center">$_</td>
<td style="text-align:left">ä¸Šä¸€æ¡å‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°</td>
</tr>
</tbody>
</table>
<p>å‘½ä»¤é€šå¸¸ä½¿ç”¨<code>STDOUT</code>è¿”å›è¾“å‡ºå€¼ï¼Œä½¿ç”¨<code>STDERR</code>è¿”å›é”™è¯¯ç ã€‚è¿”å›å€¼0è¡¨ç¤ºæ­£å¸¸æ‰§è¡Œï¼Œå…¶ä»–éƒ½è¡¨ç¤ºæœ‰é”™è¯¯å‘ç”Ÿã€‚å¯ä»¥æ­é…çŸ­è·¯è¿ç®—ç¬¦(<code>&amp;&amp;</code>,<code>||</code>)è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚</p>
<ul>
<li>åŒä¸€è¡Œçš„å¤šä¸ªå‘½ä»¤å¯ä»¥ç”¨ ; åˆ†éš”</li>
<li>å‘½ä»¤æ›¿æ¢ (command substitution):ä»¥å˜é‡çš„å½¢å¼è·å–ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºã€‚é€šè¿‡ $(CMD) è¿™æ ·çš„æ–¹å¼æ¥æ‰§è¡ŒCMDè¿™ä¸ªå‘½ä»¤æ—¶ï¼Œå®ƒçš„è¾“å‡ºç»“æœä¼šæ›¿æ¢æ‰$(CMD)ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‰§è¡Œ for file in $(ls) ï¼Œshellé¦–å…ˆå°†è°ƒç”¨ls ï¼Œç„¶åéå†å¾—åˆ°çš„è¿™äº›è¿”å›å€¼ã€‚</li>
</ul>
<p>ç¤ºä¾‹</p>
<div><pre><code><span>#!/bin/bash</span>

<span>echo</span> <span>"Starting program at <span><span>$(</span><span>date</span><span>)</span></span>"</span> <span># dateä¼šè¢«æ›¿æ¢æˆæ—¥æœŸå’Œæ—¶é—´</span>

<span>echo</span> <span>"Running program <span>$0</span> with <span>$#</span> arguments with pid <span>$$</span>"</span>

<span>for</span> <span>file</span> <span>in</span> <span>"<span>$@</span>"</span><span>;</span> <span>do</span>
    <span>grep</span> foobar <span>"<span>$file</span>"</span> <span>></span> /dev/null <span><span>2</span>></span> /dev/null
    <span># å¦‚æœæ¨¡å¼æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™grepé€€å‡ºçŠ¶æ€ä¸º 1</span>
    <span># æˆ‘ä»¬å°†æ ‡å‡†è¾“å‡ºæµå’Œæ ‡å‡†é”™è¯¯æµé‡å®šå‘åˆ°Nullï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¿™äº›ä¿¡æ¯</span>
    <span>if</span> <span>[</span><span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>]</span><span>;</span> <span>then</span> <span># [[ ä¸­çš„å‘½ä»¤å¿…é¡»å‰åç©ºä¸€æ ¼ ]]</span>
        <span>echo</span> <span>"File <span>$file</span> does not have any foobar, adding one"</span>
        <span>echo</span> <span>"# foobar"</span> <span>>></span> <span>"<span>$file</span>"</span>
    <span>fi</span>
<span>done</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><p>åœ¨bashä¸­è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå°½é‡ä½¿ç”¨åŒæ–¹æ‹¬å· [[ ]] è€Œä¸æ˜¯å•æ–¹æ‹¬å· [ ]ï¼Œè¿™æ ·ä¼šé™ä½çŠ¯é”™çš„å‡ ç‡ï¼Œå°½ç®¡è¿™æ ·å¹¶ä¸èƒ½å…¼å®¹ shã€‚</p>
<p>åœ¨shebangè¡Œ(è„šæœ¬ç¬¬ä¸€è¡Œ)ä¸­ä½¿ç”¨envå‘½ä»¤(!/usr/bin/env bash)æ˜¯ä¸€ç§å¥½çš„å®è·µï¼Œenvä¼šç”¨PATHç¯å¢ƒå˜é‡æ¥è¿›è¡Œå®šä½ï¼Œä»è€Œæé«˜è„šæœ¬çš„å¯ç§»æ¤æ€§ã€‚</p>
<ul>
<li>å‡½æ•°åªèƒ½ç”¨ä¸shellä½¿ç”¨ç›¸åŒçš„è¯­è¨€ï¼Œè„šæœ¬å¯ä»¥ä½¿ç”¨ä»»æ„è¯­è¨€ã€‚å› æ­¤åœ¨è„šæœ¬ä¸­åŒ…å« shebang æ˜¯å¾ˆé‡è¦çš„ã€‚</li>
<li>å‡½æ•°ä»…åœ¨å®šä¹‰æ—¶è¢«åŠ è½½ï¼Œè„šæœ¬ä¼šåœ¨æ¯æ¬¡è¢«æ‰§è¡Œæ—¶åŠ è½½ã€‚è¿™è®©å‡½æ•°çš„åŠ è½½æ¯”è„šæœ¬ç•¥å¿«ä¸€äº›ï¼Œä½†æ¯æ¬¡ä¿®æ”¹å‡½æ•°å®šä¹‰ï¼Œéƒ½è¦é‡æ–°åŠ è½½ä¸€æ¬¡ã€‚</li>
<li>å‡½æ•°ä¼šåœ¨å½“å‰çš„shellç¯å¢ƒä¸­æ‰§è¡Œï¼Œè„šæœ¬ä¼šåœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­æ‰§è¡Œã€‚å› æ­¤ï¼Œå‡½æ•°å¯ä»¥å¯¹ç¯å¢ƒå˜é‡è¿›è¡Œæ›´æ”¹ï¼Œæ¯”å¦‚æ”¹å˜å½“å‰å·¥ä½œç›®å½•ï¼Œè„šæœ¬åˆ™ä¸è¡Œã€‚è„šæœ¬éœ€è¦ä½¿ç”¨exportå°†ç¯å¢ƒå˜é‡å¯¼å‡ºï¼Œå¹¶å°†å€¼ä¼ é€’ç»™ç¯å¢ƒå˜é‡ã€‚</li>
</ul>
<h3 id="æ–‡ä»¶æè¿°ç¬¦"> æ–‡ä»¶æè¿°ç¬¦</h3>
<ul>
<li>0 STDIN  æ ‡å‡†è¾“å…¥ é”®ç›˜ '/dev/stdin'</li>
<li>1 STDOUT æ ‡å‡†è¾“å‡º æ˜¾ç¤ºå™¨ '/dev/stdout', '/dev/stderr'</li>
<li>2 STDERR æ ‡å‡†é”™è¯¯</li>
<li>ç©ºï¼šå¿½ç•¥è¾“å‡º /dev/null</li>
</ul>
<p>å½“æ–‡ä»¶æè¿°ç¬¦(0,1,2)ä¸é‡å®šå‘ç¬¦å·&quot;&lt;, &gt;&quot;ç»„åˆä¹‹åï¼Œå°±å¯ä»¥é‡æ–°å®šå‘è¾“å…¥ï¼Œè¾“å‡ºï¼ŒåŠé”™è¯¯ã€‚</p>
<ul>
<li><code>command 2&gt;file1</code> å‘½ä»¤æ‰§è¡Œçš„é”™è¯¯ä¿¡æ¯ä¿å­˜åˆ°äº†file1æ–‡ä»¶ä¸­ã€‚æ˜¾ç¤ºå±åªæ˜¯æ˜¾ç¤ºæ­£ç¡®çš„ä¿¡æ¯ã€‚</li>
<li><code>command 1&gt;file1 2&gt;file2</code> å‘½ä»¤æ‰§è¡Œåï¼Œæ²¡æœ‰æ˜¾ç¤ºã€‚å› ä¸ºæ­£ç¡®è¾“å‡ºåˆ°file1ï¼Œé”™è¯¯å®šå‘åˆ°file2</li>
<li><code>command &amp;&gt;file1</code> å‘½ä»¤æ‰§è¡Œåï¼Œè¾“å‡ºå’Œé”™è¯¯éƒ½å®šå‘åˆ°file1ä¸­
PS:2&gt;file å¯ä»¥æ”¾åœ¨å‘½ä»¤çš„å‰é¢ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨åé¢ã€‚æ•ˆæœä¸€æ ·ã€‚</li>
</ul>
<p>åœ¨shellè„šæœ¬ä¸­ï¼Œè¿›è¡Œæµçš„é‡å®šå‘</p>
<ul>
<li>exec 1&gt; file1</li>
<li>exec 2&gt; file2</li>
<li>exec 0&lt; file0</li>
</ul>
<p>æŒ‡å®šå‘½ä»¤çš„è¾“å‡ºä¼ åˆ°STDERRæŒ‡å®šçš„æ–‡ä»¶: <code>echo &quot;some output&quot; &gt;&amp;2</code></p>
<h2 id="shellå·¥å…·"> shellå·¥å…·</h2>
<h3 id="æŸ¥çœ‹ç¨‹åºæ‰§è¡Œæ—¶é—´-time"> æŸ¥çœ‹ç¨‹åºæ‰§è¡Œæ—¶é—´--time</h3>
<h3 id="æŸ¥æ‰¾æ–‡ä»¶-find"> æŸ¥æ‰¾æ–‡ä»¶--find</h3>
<p>find [-H] [-L] [-P] [-D debugopts] [-Olevel] [starting-point...] [expression]</p>
<p>findä¼šæœç´¢ä»¥æ¯ä¸ªç»™å‡ºçš„starting-pointä¸ºæ ¹çš„æ–‡ä»¶æ ‘ï¼Œæ‰¾å‡ºåŒ¹é…expressionçš„æ–‡ä»¶ã€‚é»˜è®¤çš„starting-pointä¸º<code>.</code>ã€‚</p>
<p>é€‰é¡¹</p>
<ul>
<li>-P å°†symbolic linksè§†ä¸ºæ–‡ä»¶ï¼Œä¸æœç´¢å…¶æŒ‡å‘çš„æ–‡ä»¶ã€‚è¿™æ˜¯é»˜è®¤è¡Œä¸º</li>
<li>-L æœç´¢symbolic linksæŒ‡å‘çš„æ–‡ä»¶</li>
<li>-H ä¸æœç´¢symbolic linksï¼Œé™¤äº†åœ¨å¤„ç†å‘½ä»¤è¡Œå‚æ•°çš„æ—¶å€™ã€‚(åº”è¯¥è¯´çš„æ˜¯æœ€åçš„expression)</li>
<li>ä»¥ä¸Šä¸‰ä¸ªåªèƒ½é€‰ä¸€ä¸ªã€‚åŒæ—¶å‡ºç°ï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</li>
</ul>
<hr>
<ul>
<li>-D æ‰“å°findå‘½ä»¤çš„è¯Šæ–­ä¿¡æ¯</li>
</ul>
<hr>
<ul>
<li>-Olevel ä¼˜åŒ–ç­‰çº§
<ul>
<li>0,1 é»˜è®¤ç­‰çº§ã€‚expressionsé‡æ–°æ’åºï¼Œ-name,-regexæµ‹è¯•é¦–å…ˆè¿›è¡Œ</li>
<li>2 -type,-xtypeé¦–å…ˆæ‰§è¡Œã€‚</li>
<li>3 æ‰€æœ‰cost-basedæŸ¥è¯¢ä¼˜åŒ–ç¬¦éƒ½ä¼šå¯ç”¨ã€‚å¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œæµ‹è¯•çš„é¡ºåºä¼šä»¥ä»£ä»·å°çš„ä¼˜å…ˆã€‚</li>
</ul>
</li>
</ul>
<p>è¡¨è¾¾å¼--æè¿°å¦‚ä½•åŒ¹é…æ–‡ä»¶å’Œå¦‚ä½•å¤„ç†åŒ¹é…çš„æ–‡ä»¶</p>
<ul>
<li>ç»„æˆ
<ul>
<li>Tests è¿”å›T/Fï¼Œé€šå¸¸ä»¥æ–‡ä»¶çš„å±æ€§ä¸ºåˆ¤æ–­åŸºç¡€ã€‚</li>
<li>Actions ä¼šäº§ç”Ÿå…¶ä»–å½±å“ã€‚ä¹Ÿä¼šè¿”å›T/Fï¼Œä½†ä»¥actionçš„æˆåŠŸä¸å¦ä¸ºåŸºç¡€ã€‚</li>
<li>Global options æ€»è¿”å›trueã€‚ä¼šå½±å“æ‰€æœ‰Testså’ŒActionsçš„è¡Œä¸ºã€‚</li>
<li>Positional options æ€»è¿”å›trueã€‚åªå½±å“ç´§éšå…¶åçš„Testsæˆ–Actionsã€‚</li>
<li>Operators expressionä¸­å…¶ä»–ä¸œè¥¿çš„è¿æ¥ç¬¦ã€‚é»˜è®¤ä¸º <code>-a</code> å³ <code>AND</code></li>
</ul>
</li>
<li>Positional options
<ul>
<li>-daystart æ—¶é—´åº¦é‡ä»ä»Šå¤©0:00å¼€å§‹ï¼Œè€Œé24å°æ—¶å‰ã€‚</li>
<li>-regextype type æ”¹å˜æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•ã€‚å…·ä½“è¯· -regextype help</li>
<li>-warn,-nowarn æ‰“å¼€æˆ–å…³é—­è­¦å‘Šä¿¡æ¯</li>
</ul>
</li>
<li>Global options
<ul>
<li>-d/-depth å…ˆå¤„ç†æ¯ä¸ªç›®å½•çš„å†…å®¹ï¼Œå†å¤„ç†ç›®å½•æœ¬èº«</li>
<li>-maxdepth levels ç›®å½•æ ‘çš„æœ€å¤§å±•å¼€æ·±åº¦ã€‚0è¡¨ç¤ºåªå¤„ç†starting-pointæœ¬èº«è¿™ä¸ªæ ¹èŠ‚ç‚¹ã€‚</li>
<li>-mindepth levels ç›®å½•æ ‘çš„æœ€å°å±•å¼€æ·±åº¦ã€‚1è¡¨ç¤ºåªä¸å¤„ç†starting-pointæœ¬èº«è¿™ä¸ªæ ¹èŠ‚ç‚¹ã€‚</li>
</ul>
</li>
<li>Tests
<ul>
<li>æ•°å­—å‚æ•° +n å¤§äºn, -n å°äºn, n æ­£å¥½nã€‚</li>
</ul>
<hr>
<ul>
<li>-xmin n æ–‡ä»¶æœ€åä¸€æ¬¡xæ˜¯nåˆ†é’Ÿä»¥å‰å—ï¼Ÿ</li>
<li>-xnewer reference æ–‡ä»¶æ¯”æŒ‡å®šæ–‡ä»¶çš„xæ›´æ–°å—ï¼Ÿ</li>
<li>-xtime n æ–‡ä»¶æœ€åä¸€æ¬¡xæ˜¯n*24å°æ—¶ä»¥å†…å—ï¼Ÿ(+1è¡¨ç¤º48å°æ—¶ä»¥å†…ï¼Œä»¥æ¬¡ç±»æ¨)</li>
<li>å…¶ä¸­xå¯ä¸º
<ul>
<li>a accessï¼Œè¡¨ç¤ºæ–‡ä»¶çš„ä¸Šæ¬¡ä½¿ç”¨æ—¶é—´ã€‚</li>
<li>c changeï¼Œè¡¨ç¤ºæ–‡ä»¶çŠ¶æ€çš„ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´ã€‚</li>
<li>m modifyï¼Œè¡¨ç¤ºæ–‡ä»¶æ•°æ®çš„ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´ã€‚æ²¡æœ‰mnewerï¼Œå› ä¸º-newerçš„é»˜è®¤è¡Œä¸ºå°±æ˜¯è¿™ä¸ªã€‚</li>
</ul>
</li>
<li>-newerXY reference å¦‚æœæ–‡ä»¶çš„Xæ—¶é—´æ¯”Yæ—¶é—´æ–°ï¼Œåˆ™è¿”å›trueã€‚X,Yå¯ä»¥æ˜¯
<ul>
<li>a accsess time</li>
<li>B birthtime</li>
<li>c inode status change time</li>
<li>m modification time</li>
<li>t referenceç›´æ¥è§£é‡Šä¸ºæ—¶é—´ã€‚</li>
</ul>
</li>
<li>-used n æ–‡ä»¶ä¸Šæ¬¡statusæ”¹å˜ååˆ°æœ€åaccessæ—¶é—´è¿‡äº†nå¤©</li>
</ul>
<hr>
<ul>
<li>-empty ç©ºæ–‡ä»¶æˆ–ç©ºæ–‡ä»¶å¤¹</li>
<li>-executable å½“å‰ç”¨æˆ·å¯æ‰§è¡Œçš„æ–‡ä»¶</li>
<li>-gid n æ–‡ä»¶çš„æ•°å­—ç»„(group)IDä¸ºn</li>
<li>-group gname æ–‡ä»¶å±äºç‰¹å®šç»„</li>
<li>-uid n</li>
<li>-user uname</li>
<li>-ilname,-iname,-ipath,-iregex å¿½ç•¥å¤§å°å†™ç‰ˆæœ¬</li>
<li>-inum n æ–‡ä»¶æœ‰nä¸ªinode</li>
<li>-links n æ–‡ä»¶æœ‰nä¸ªhard link</li>
<li>-lname pattern æ–‡ä»¶æ˜¯symbolic linkä¸”å†…å®¹å’ŒpatternåŒ¹é…ã€‚(å¦‚æœä½¿ç”¨çš„-Lé€‰é¡¹ï¼Œåˆ™æ€»è¿”å›false)</li>
<li>-name pattern åŒ¹é…æ–‡ä»¶å(åªä¼šç”¨æ–‡ä»¶åå–åŒ¹é…ï¼Œä¸åŒ…å«ä»»ä½•<code>/</code>)ã€‚å…ƒå­—ç¬¦<code>*</code> <code>?</code> <code>[]</code>ä¼šåŒ¹é…ä»¥<code>.</code> å¼€å¤´çš„æ–‡ä»¶ã€‚è¦å¿½ç•¥ä»¥<code>.</code>å¼€å¤´çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨-pruneé€‰é¡¹ã€‚</li>
<li>-path pattern åŒ¹é…å®Œæ•´çš„æ–‡ä»¶å(åŒ…å«ä»¥æŸä¸ªstarting pointå¼€å§‹çš„è·¯å¾„ï¼Œä¾‹å¦‚ ./src/hello.c)ã€‚æ³¨æ„ï¼šæ–‡ä»¶å¤¹çš„æœ«å°¾ä¸ä¼šåŠ <code>/</code>ã€‚</li>
<li>-wholename pattern åŒ¹é…å®Œæ•´çš„æ–‡ä»¶å(ç»å¯¹è·¯å¾„)ã€‚</li>
<li>-regex pattern åŒ¹é…å®Œæ•´çš„æ–‡ä»¶åã€‚(å¿…é¡»åŒ¹é…æ•´ä¸ªå®Œæ•´çš„æ–‡ä»¶åï¼Œä¾‹å¦‚'./fubar3' å¿…é¡»ç”¨'.*bar.'åŒ¹é…)</li>
<li>-perm mode æ‰€æœ‰çš„æƒé™åŒ¹é…ã€‚mode 0xxxï¼Œå‚è€ƒchmod</li>
<li>-perm -mode æ‰€æœ‰çš„æƒé™éƒ½æœ‰ã€‚ -[ugoa][rwx]</li>
<li>-perm /mode æœ‰å…¶ä¸­ä¸€ä¸ªæƒé™</li>
<li>-readable å½“å‰ç”¨æˆ·å¯è¯»</li>
<li>-writable å½“å‰ç”¨æˆ·å¯å†™</li>
<li>-size n[cwbkMG] ä½¿ç”¨nå•ä½çš„ç©ºé—´çš„æ–‡ä»¶ï¼Œä¼šèˆå…¥ã€‚
<ul>
<li>b è¡¨ç¤º512Bä¸ºä¸€ä¸ªå•ä½</li>
<li>c bytes</li>
<li>w two-byte word</li>
<li>k KiB, 1024B</li>
<li>M MiB, 1024k</li>
<li>G GiB, 1024M</li>
</ul>
</li>
<li>-type c ç±»å‹cåŒ…æ‹¬
<ul>
<li>b block(buffered) special</li>
<li>c character(unbuffered) special</li>
<li>d ç›®å½•</li>
<li>p named pipe(FIFO)</li>
<li>f å¸¸è§„æ–‡ä»¶</li>
<li>l symbolic link</li>
<li>s socket</li>
<li>D door</li>
</ul>
</li>
<li>-xtype å¯¹symbolic linkç±»å‹çš„æ–‡ä»¶ï¼Œxtypeä¼šæ£€æŸ¥è¯¥linkæ–‡ä»¶ï¼Œè€Œtypeä¸ä¼šã€‚</li>
</ul>
</li>
<li>Actions
<ul>
<li>-delete åˆ é™¤æ–‡ä»¶ï¼ŒæˆåŠŸæ—¶è¿”å›trueã€‚</li>
<li>-exec cmd; æ‰§è¡Œcmd;ï¼Œå½“cmdè¿”å›çŠ¶æ€0æ—¶è¿”å›trueã€‚cmdä¼šä¸ºæ¯ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰§è¡Œä¸€æ¬¡ã€‚cmdä¼šåœ¨æ‰§è¡Œfindå‘½ä»¤çš„èµ·å§‹ç›®å½•æ‰§è¡Œã€‚<code>{}</code>è¡¨ç¤ºå½“å‰åŒ¹é…çš„æ–‡ä»¶ï¼Œ<code>;</code>è¡¨ç¤ºå‘½ä»¤ç»“æŸã€‚</li>
<li>-exec cmd {} + <code>-exec</code>çš„å˜ä½“ï¼Œæ‰§è¡Œcmdï¼Œæ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶éƒ½ç”¨ç©ºæ ¼è¿æ¥åä½œä¸ºå‚æ•°æ”¾åœ¨cmdåã€‚</li>
<li>-execdir cmd ;</li>
<li>-execdir cmd {} + cmdä¼šåœ¨åŒ¹é…æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œ</li>
<li>-ok cmd ;</li>
<li>-okdir cmd ; æ‰§è¡Œå‘½ä»¤æ—¶ä¼šå¼¹å‡ºæç¤ºæ¡†ï¼Œé—®ä½ æ˜¯å¦æ‰§è¡Œã€‚</li>
<li>-ls ä»¥ls -dils çš„æ ¼å¼è¾“å‡ºå½“å‰æ–‡ä»¶ã€‚</li>
<li>-fls file å°†-lsçš„è¾“å‡ºè¾“å‡ºåˆ°fileæ–‡ä»¶ä¸­ã€‚ å¦‚æœfileä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œå¦åˆ™ï¼Œè¦†ç›–(truncated)ã€‚</li>
<li>-print å°†å®Œæ•´æ–‡ä»¶åè¾“å‡ºï¼Œä»¥newlineéš”å¼€ã€‚é»˜è®¤é€‰é¡¹</li>
<li>-print0  å°†å®Œæ•´æ–‡ä»¶åè¾“å‡ºï¼Œä»¥'\0'éš”å¼€ã€‚</li>
<li>-printf format
<ul>
<li>%p æ–‡ä»¶å '%h/%f'</li>
<li>%P ä¸åŒ…å«starting-pointçš„æ–‡ä»¶å</li>
<li>%f çº¯æ–‡ä»¶å</li>
<li>%F æ–‡ä»¶ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿ</li>
<li>%h æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹å</li>
<li>%y æ–‡ä»¶çš„ç±»å‹</li>
<li>%i æ–‡ä»¶çš„åè¿›åˆ¶inodeæ•°</li>
<li>%k æ–‡ä»¶å¤§å°kB</li>
<li>%m æ–‡ä»¶çš„å…«è¿›åˆ¶æƒé™bit</li>
<li>%M æ–‡ä»¶çš„æƒé™ç¬¦å·è¡¨ç¤º</li>
<li>%s æ–‡ä»¶å¤§å°B</li>
<li>%t/%a/%c/%Tk/%Ak/%Ck æ–‡ä»¶æ—¶é—´ï¼Œkä¸ºæ—¶é—´çš„è¡¨ç¤ºæ–¹å¼ã€‚</li>
<li>%d æ–‡ä»¶åœ¨ç›®å½•æ ‘ä¸­çš„æ·±åº¦ï¼Œ0è¡¨ç¤ºæ ¹èŠ‚ç‚¹starting-pointã€‚</li>
</ul>
</li>
<li>-fprint/-fprint0/-fprintf file [format]</li>
<li>-prune å¦‚æœæ–‡ä»¶æ˜¯ç›®å½•ï¼Œä¸è¦è¿›å…¥ã€‚å¦‚æœä½¿ç”¨äº†-depth,-deleteï¼Œåˆ™æ— æ•ˆã€‚</li>
<li>-quit ç«‹å³é€€å‡ºã€‚</li>
</ul>
</li>
<li>Operators æŒ‰ä¼˜å…ˆçº§é™åº
<ul>
<li>( expr ) å› ä¸ºshellä¸­æ‹¬å·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œæœ€å¥½è¿™ä¹ˆå†™'(expr)'</li>
<li>! expr</li>
<li>expr1 [-a] expr2 -aç­‰äºAND</li>
<li>expr1 -o expr2 -oç­‰äºOR</li>
<li>expr1, expr2 ä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¼šè¢«è¯„ä¼°ï¼Œä½†æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼æˆä¸ºæ•´ä¸ªåˆ—è¡¨çš„è¿”å›å€¼ã€‚å¯ä»¥ç”¨äºæœç´¢ä¸€äº›ä¸åŒç±»å‹çš„ç›®æ ‡ï¼Œä½†åªéå†ä¸€æ¬¡ã€‚</li>
<li>æ³¨æ„-a æ¯” -o ä¼˜å…ˆçº§é«˜ï¼Œæ„å‘³ç€ä»€ä¹ˆã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œfind . -name afile -o -name bfile -print ä¸ä¼šè¾“å‡ºafileã€‚</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚</p>
<div><pre><code><span># æŸ¥æ‰¾æ‰€æœ‰åç§°ä¸ºsrcçš„æ–‡ä»¶å¤¹</span>
<span>find</span> <span>.</span> -name src -type d
<span># æŸ¥æ‰¾æ‰€æœ‰æ–‡ä»¶å¤¹è·¯å¾„ä¸­åŒ…å«testçš„pythonæ–‡ä»¶</span>
<span>find</span> <span>.</span> -path <span>'*/test/*.py'</span> -type f
<span># æŸ¥æ‰¾å‰ä¸€å¤©ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶</span>
<span>find</span> <span>.</span> -mtime -1
<span># æŸ¥æ‰¾æ‰€æœ‰å¤§å°åœ¨500kè‡³10Mçš„tar.gzæ–‡ä»¶</span>
<span>find</span> <span>.</span> -size +500k -size -10M -name <span>'*.tar.gz'</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>é™¤äº†åˆ—å‡ºæ‰€å¯»æ‰¾çš„æ–‡ä»¶ä¹‹å¤–ï¼Œfindè¿˜èƒ½å¯¹æ‰€æœ‰æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚è¿™èƒ½æå¤§åœ°ç®€åŒ–ä¸€äº›å•è°ƒçš„ä»»åŠ¡ã€‚</p>
<div><pre><code><span># åˆ é™¤å…¨éƒ¨æ‰©å±•åä¸º.tmp çš„æ–‡ä»¶</span>
<span>find</span> <span>.</span> -name <span>'*.tmp'</span> -exec <span>rm</span> <span>{</span><span>}</span> <span>\</span><span>;</span>
<span># æŸ¥æ‰¾å…¨éƒ¨çš„ PNG æ–‡ä»¶å¹¶å°†å…¶è½¬æ¢ä¸º JPG</span>
<span>find</span> <span>.</span> -name <span>'*.png'</span> -exec convert <span>{</span><span>}</span> <span>{</span><span>}</span>.jpg <span>\</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="xargs"> xargs</h3>
<p>xargs [opts] [cmd [initial-args]]</p>
<p>xargsä»æ ‡å‡†è¾“å…¥è¯»å–items(ä»¥blankæˆ–newlineä¸ºåˆ†éš”ç¬¦åˆ’åˆ†ï¼Œç©ºè¡Œç›´æ¥å¿½ç•¥)ï¼Œå»ºç«‹å¹¶æ‰§è¡Œcmdå‘½ä»¤ã€‚initial-argsé»˜è®¤æ˜¯ç”¨itemå¡«ï¼Œç›´åˆ°è¾¾åˆ°ç³»ç»Ÿå®šä¹‰çš„å‘½ä»¤è¡Œé™åˆ¶ã€‚è¿™æ ·ï¼Œcmdçš„æ€»è°ƒç”¨æ•°ä¼šç›¸å¯¹å˜å°‘ï¼Œæ€§èƒ½è¡¨ç°å¥½äº›ã€‚å¦å¤–ï¼Œxargsé»˜è®¤ä¼šå°†blankå’Œnewlineç‰¹æ®Šå¤„ç†ï¼Œæ‰€ä»¥ï¼ŒåŒ…å«blankå’Œnewlineçš„æ–‡ä»¶åä¸ä¼šè¢«æ­£ç¡®å¤„ç†ï¼Œéœ€è¦ä½¿ç”¨-0é€‰é¡¹ã€‚</p>
<p>é€‰é¡¹</p>
<ul>
<li>-t, --verbose åœ¨æ‰§è¡Œcmdå‰ï¼Œå°†å…¶ç”¨STDERRè¾“å‡º</li>
<li>-p, --interactive æ‰§è¡Œæ¯ä¸ªå‘½ä»¤å‰è®©ç”¨æˆ·å†³å®šæ˜¯å¦æ‰§è¡Œ</li>
<li>-a file, --arg-file=file ä»fileè¯»å–è¾“å…¥ï¼Œè€ŒéSTDINã€‚å¦‚æœä½¿ç”¨äº†è¿™ä¸ªé€‰é¡¹ï¼Œåˆ™STDINåœ¨æ‰§è¡Œcmdæ—¶ä¸ä¼šå˜ï¼Œå¦åˆ™ä¼šè¢«é‡å®šå‘åˆ°/dev/nullã€‚</li>
<li>-r å¦‚æœæ ‡å‡†è¾“å…¥ä¸ºç©ºï¼Œåˆ™ä¸è¦æ‰§è¡Œä»»ä½•cmdã€‚xargsé»˜è®¤ä¼šè‡³å°‘æ‰§è¡Œä¸€æ¬¡</li>
</ul>
<hr>
<ul>
<li>-L max-lines æ¯ä¸ªcmdä½¿ç”¨çš„éç©ºè¾“å…¥æœ€å¤šä¸ºmax-lineè¡Œã€‚</li>
<li>-n max-args, --max-args=max-args æ¯ä¸ªcmdæœ€å¤šä½¿ç”¨max-argsçš„å‚æ•°ã€‚å¦‚æœåœ¨è¾¾åˆ°max-argsä¹‹å‰ï¼Œsizeè¶…äº†ï¼Œåˆ™åœã€‚</li>
<li>-s max-chars, --max-chars=max-chars é™åˆ¶æ¯ä¸ªcmdæœ€å¤šä½¿ç”¨çš„å­—ç¬¦æ•°ï¼ŒåŒ…æ‹¬cmdå’Œinitail-argså’Œæœ€åçš„'\0'ã€‚æœ€å¤šä¸èƒ½è¶…è¿‡ç³»ç»Ÿå‘½ä»¤è¡Œé™åˆ¶ã€‚</li>
<li>-x, --exit å¦‚æœsizeè¶…äº†ï¼Œç›´æ¥é€€å‡º</li>
</ul>
<hr>
<ul>
<li>--show-limits æ˜¾ç¤ºosçš„å‘½ä»¤è¡Œé•¿åº¦é™åˆ¶ã€‚ æœ€å¥½è¿™ä¹ˆç”¨ï¼š<code>xargs --show-limits 0&lt; /dev/null</code></li>
<li>-P max-procs, --max-procs=max-proc å¤šçº¿ç¨‹æ‰§è¡Œã€‚é»˜è®¤ä¸º1ï¼Œè®¾ä¸º0è¡¨ç¤ºä½¿ç”¨å°½å¯èƒ½å¤šçš„çº¿ç¨‹ã€‚</li>
<li>-0, --null itemsä¼šä»¥'\0'ç»“æŸï¼Œè€Œéç©ºæ ¼ã€‚æ‰€æœ‰å­—ç¬¦éƒ½å–å­—é¢é‡ã€‚é€šå¸¸å’Œfind -print0è¿ç”¨ã€‚</li>
<li>-d delim, --delimiter=delim è¾“å…¥itemè§£æç»ˆæ­¢ç¬¦ã€‚ä»…æ”¯æŒå•ä¸ªå­—ç¬¦ã€‚</li>
<li>-E eof-str å¦‚æœåœ¨è¾“å…¥çš„æŸä¸€è¡Œå‡ºç°äº†eof-strï¼Œåˆ™å…¶ä½™çš„è¾“å…¥è¢«å¿½ç•¥ã€‚</li>
</ul>
<div><pre><code><span>find</span> /tmp -name core -type f -print <span>|</span> <span>xargs</span> /bin/rm -f
<span>find</span> /tmp -name core -type f -print0 <span>|</span> <span>xargs</span> -0 /bin/rm -f
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><h3 id="wc-ä»£ç ç»Ÿè®¡"> wc--ä»£ç ç»Ÿè®¡</h3>
<p>print newline, word, and byte counts for each file.</p>
<p>ç”¨æ³•</p>
<ul>
<li>wc [OPTION] ... [FILE] ...</li>
<li>wc [OPTION] ... --file0-from=F</li>
<li>å¦‚æœæ²¡æœ‰æŒ‡å®šFILEæˆ–FILE=-ï¼Œåˆ™ä»¥æ ‡å‡†è¾“å…¥ä¸ºè¾“å…¥ã€‚</li>
</ul>
<p>é€‰é¡¹</p>
<ul>
<li>ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤ºçš„ç›¸å¯¹é¡ºåºï¼šnewline, word, character, byte, maximum line length</li>
<li>-c, --bytes</li>
<li>-m, --chars</li>
<li>-l, --lines</li>
<li>--files0-from=F ç”¨Cé£æ ¼å­—ç¬¦ä¸²æŒ‡å®šçš„æ‰€æœ‰è¾“å…¥æ–‡ä»¶</li>
<li>-L, --max-line-length</li>
<li>-w, --words</li>
</ul>
<h3 id="æŸ¥æ‰¾ä»£ç -grep"> æŸ¥æ‰¾ä»£ç --grep</h3>
<p>grep æœ‰å¾ˆå¤šé€‰é¡¹ï¼Œå¦‚ -C ï¼šè·å–æŸ¥æ‰¾ç»“æœçš„ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼›-v å°†å¯¹ç»“æœè¿›è¡Œåé€‰ï¼ˆInvertï¼‰ï¼Œä¹Ÿå°±æ˜¯è¾“å‡ºä¸åŒ¹é…çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œ grep -C 5 ä¼šè¾“å‡ºåŒ¹é…ç»“æœå‰åäº”è¡Œã€‚å½“éœ€è¦æœç´¢å¤§é‡æ–‡ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨ -R ä¼šé€’å½’åœ°è¿›å…¥å­ç›®å½•å¹¶æœç´¢æ‰€æœ‰çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p>
<h3 id="sed-æµç¼–è¾‘å™¨"> sed--æµç¼–è¾‘å™¨</h3>
<p>sed [opts] [script] [input-file]</p>
<ul>
<li>-n ä½¿ç”¨å®‰é™æ¨¡å¼ï¼Œä¸ä¼šæ€»æ˜¾ç¤ºstdinçš„æ‰€æœ‰è¡Œï¼Œåªæ˜¾ç¤ºè¢«sedå¤„ç†çš„è¡Œã€‚</li>
<li>-f scriptfile è¯»å–æ–‡ä»¶ä¸­çš„æ“ä½œè„šæœ¬ï¼Œå¹¶æ‰§è¡Œ</li>
<li>-r ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</li>
<li>-i ç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹</li>
<li>script
<ul>
<li>#a content: åœ¨#è¡Œï¼Œåæ–°å¢ä¸€è¡Œï¼Œå†…å®¹ä¸ºcontent</li>
<li>#i content: åœ¨#è¡Œï¼Œå‰æ–°å¢ä¸€è¡Œï¼Œå†…å®¹ä¸ºcontent</li>
<li>l,hc content: å°†lè¡Œåˆ°hè¡Œçš„å†…å®¹æ›¿æ¢ä¸ºcontent</li>
<li>l,hd: åˆ é™¤lè¡Œåˆ°hè¡Œã€‚$è¡¨ç¤ºæœ€åä¸€è¡Œ</li>
<li>l,hp: æ‰“å°lè¡Œåˆ°hè¡Œã€‚</li>
<li>[l,h]s/old/new/g: æŸ¥æ‰¾å¹¶æ›¿æ¢</li>
</ul>
</li>
</ul>
<h3 id="awk-è¡Œæ–‡æœ¬å¤„ç†"> awk--è¡Œæ–‡æœ¬å¤„ç†</h3>
<p>å¸¸è§ç”¨æ³•: awk 'program text' file, ä»fileä¸­è¯»å–è¾“å…¥ï¼Œæ¯ä¸€è¡Œéƒ½ç”¨'program text'å¤„ç†ã€‚</p>
<ul>
<li>awkæ¯æ¬¡å¤„ç†ä¸€è¡Œï¼Œæœ€å°å¤„ç†å•ä½ä¸ºå­—æ®µ(field, ä»¥ç©ºæ ¼åˆ†éš”)</li>
<li>å˜é‡
<ul>
<li>$0 æ•´è¡Œ</li>
<li>$# ç¬¬#ä¸ªå­—æ®µ</li>
<li>NF ç¬¬ä¸€è¡Œçš„å­—æ®µæ€»æ•°</li>
<li>NR å½“å‰awkå¤„ç†çš„æ˜¯ç¬¬å‡ è¡Œ</li>
<li>FS ç›®å‰çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼</li>
</ul>
</li>
<li>é€»è¾‘è¿ç®— &gt;,&lt;,&gt;=, &lt;=, ==, !=</li>
</ul>
<hr>
<p>mawk [-F separator] [-v var=value] [--] 'program text' [file...]<br>
mawk [-F separator] [-v var=value] [-f program-file] [--] [file...]</p>
<ul>
<li>-F æŒ‡å®šåˆ†éš”ç¬¦</li>
<li>-v é¢„å…ˆè®¾ç½®å˜é‡</li>
<li>-f ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–awkç¨‹åº</li>
<li>file è¾“å…¥ï¼ŒæœªæŒ‡å®šåˆ™ä»STDINä¸­è¯»å–</li>
</ul>
<hr>
<p>AWKè¯­è¨€</p>
<ul>
<li>ç¨‹åºç»“æ„ï¼š pattern{action}çš„åºåˆ—
<ul>
<li>patternå¯ä»¥æ˜¯
<ul>
<li>BEGIN åœ¨å¤„ç†ç¬¬ä¸€è¡Œä¹‹å‰é¡ºåºæ‰§è¡Œæ‰€æœ‰çš„ BEGIN åçš„actionã€‚</li>
<li>END åœ¨å¤„ç†æœ€åä¸€è¡Œä¹‹åé¡ºåºæ‰§è¡Œæ‰€æœ‰çš„ END åçš„actionã€‚</li>
<li>expr</li>
<li>expr1, expr2</li>
</ul>
</li>
<li>è¯­å¥ä»¥<code>;</code>æˆ–newlineç»“æŸã€‚</li>
<li>æ§åˆ¶æµ
<ul>
<li>if (expr) statement</li>
<li>if (expr) statement else statement</li>
<li>while (expr) statement</li>
<li>do statement while (expr)</li>
<li>for (opt_expr; opt_expr; opt_expr) statement</li>
<li>for (var in array) statement</li>
<li>continue</li>
<li>break</li>
</ul>
</li>
</ul>
</li>
<li>æ•°æ®ç±»å‹ï¼šnumericå’Œstringã€‚
<ul>
<li>æ‰€æœ‰numericéƒ½æ˜¯ä»¥æµ®ç‚¹æ•°ä¸ºå†…éƒ¨è¡¨ç¤ºå’Œè¿ç®—ã€‚true == 1.0</li>
<li>stringå¸¸é‡ä»¥åŒå¼•å·è¡¨ç¤º</li>
</ul>
</li>
<li>æ­£åˆ™è¡¨è¾¾å¼
<ul>
<li>expr ~ /regex/ å¦‚æœexpråŒ¹é…regexï¼Œåˆ™è¿”å›1.</li>
<li>expr !~ /regex/ å¦‚æœexprä¸åŒ¹é…regexï¼Œåˆ™è¿”å›1.</li>
<li>/r/ {action} ç›¸å½“äº $0 ~ /r/ {action}, å½“è¡ŒåŒ¹é…ræ—¶ï¼Œæ‰æ‰§è¡Œaction</li>
</ul>
</li>
<li>å†…ç½®å˜é‡
<ul>
<li>$0 æ•´è¡Œ</li>
<li>$# ç¬¬#ä¸ªå­—æ®µ</li>
<li>NF ç¬¬ä¸€è¡Œçš„å­—æ®µæ€»æ•°</li>
<li>NR å½“å‰awkå¤„ç†çš„æ˜¯ç¬¬å‡ è¡Œ</li>
<li>FS ç›®å‰çš„fieldåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼</li>
<li>RS recordåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º'\nm'</li>
<li>OFS,ORS è¾“å‡ºæ—¶çš„ç›¸åº”åˆ†éš”ç¬¦</li>
<li>ARGC</li>
<li>ARGV</li>
<li>FILENAME è¾“å…¥æ–‡ä»¶çš„æ–‡ä»¶å</li>
</ul>
</li>
<li>å†…ç½®å‡½æ•°
<ul>
<li>æ•°å­¦å‡½æ•°
<ul>
<li>atan2(y, x)</li>
<li>cos(x)</li>
<li>sin(x)</li>
<li>exp(x)</li>
<li>int(x) å‘0èˆå…¥</li>
<li>log(x) è‡ªç„¶å¯¹æ•°</li>
<li>rand()</li>
<li>srand(seed)</li>
<li>sqrt(x)</li>
</ul>
</li>
<li>mktime(format)</li>
<li>String
<ul>
<li>index(s, t) tåœ¨sä¸­çš„èµ·å§‹ä½ç½®</li>
<li>length(s)</li>
<li>match(s, r) è¿”å›sä¸­ç¬¬ä¸€ä¸ªrçš„ä½ç½®</li>
<li>split(s, A, r) ç”¨råˆ†å‰²sä¸ºä¸€ç³»åˆ—fieldï¼Œå¹¶ä»¥æ•°ç»„å½¢å¼å­˜å‚¨åœ¨Aä¸­ã€‚å¦‚æœrçœç•¥ï¼Œé»˜è®¤ä¸ºFSã€‚</li>
<li>sprintf(format, expr-list) è¿”å›ä¸€ä¸ªæ ¼å¼ä¸²</li>
<li>sub(r, s, t) æ›¿æ¢ä¸€æ¬¡ å°†tä¸­çš„ræ›¿æ¢æˆsã€‚ tç¼ºçœä¸º$0</li>
<li>gsub(r, s, t) å…¨éƒ¨æ›¿æ¢</li>
<li>substr(s, i, n) è¿”å›sç¬¬iä¸ªå­—ç¬¦åçš„nä¸ªå­—ç¬¦ï¼Œnçœç•¥ï¼Œåˆ™è¿”å›iåæ‰€æœ‰å­—ç¬¦ã€‚(åŒ…å«ç¬¬iä¸ª)</li>
<li>tolower(s) å°†sä¸­å…¨éƒ¨å­—ç¬¦æ¢ä¸ºå°å†™</li>
<li>toupper(s)</li>
</ul>
</li>
</ul>
</li>
<li>è¾“å‡º
<ul>
<li>print å°†$0è¾“å‡º</li>
<li>print expr1,expr2,... è¾“å‡º expr1 OFS expr2 OFS...ORS</li>
<li>printf format, expr-list</li>
<li>getline ç•¥</li>
</ul>
</li>
</ul>
<hr>
<p>ç¤ºä¾‹</p>
<ol>
<li>æ¨¡æ‹Ÿcat {print}</li>
<li>æ¨¡æ‹Ÿwc {chars += length($0) + 1 # add 1 for the '\n'
words += NF}
END {print NR, words, chars}</li>
<li>æ’åºæ–‡ä»¶</li>
</ol>
<div><pre><code>{line[NR] = $0 &quot;&quot;} # ç¡®ä¿æ¯ä¸€è¡Œéƒ½æ˜¯stringç±»å‹
END {
    isort(line, NR)
    for (i =1; i &lt;=NR; i++) print line[i]    
}
 
function isort(A, n,  i, j, hold)
{
    for (i = 2; i &lt;= n; i++)
    {
        hold = A[j = i]
        while (A[j-1] &gt; hold)
        { j--; A[j+1] = A[j]}
        A[j] = hold
    }
}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><h3 id="nl-åŠ è¡Œå·æ˜¾ç¤º"> nl--åŠ è¡Œå·æ˜¾ç¤º</h3>
<p><code>nl [opts] [file]</code> fileä¸º<code>-</code>æˆ–æœªæŒ‡å®šæ—¶ï¼Œä»STDINè¯»å…¥ã€‚</p>
<h3 id="æ–‡ä»¶å¤¹å¯¼èˆª"> æ–‡ä»¶å¤¹å¯¼èˆª</h3>
<p>fasdå’Œautojumpè¿™ä¸¤ä¸ªå·¥å…·æ¥æŸ¥æ‰¾æœ€å¸¸ç”¨æˆ–æœ€è¿‘ä½¿ç”¨çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p>
<p>Fasd åŸºäºfrecencyå¯¹æ–‡ä»¶å’Œæ–‡ä»¶æ’åºï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šåŒæ—¶é’ˆå¯¹é¢‘ç‡ï¼ˆfrequency ï¼‰å’Œæ—¶æ•ˆï¼ˆ recencyï¼‰è¿›è¡Œæ’åºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œfasdä½¿ç”¨å‘½ä»¤ z å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåˆ‡æ¢åˆ°æœ€å¸¸è®¿é—®çš„ç›®å½•ã€‚ä¾‹å¦‚ï¼Œ å¦‚æœæ‚¨ç»å¸¸è®¿é—®/home/user/files/cool_project ç›®å½•ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨ z cool è·³è½¬åˆ°è¯¥ç›®å½•ã€‚å¯¹äº autojumpï¼Œåˆ™ä½¿ç”¨j coolä»£æ›¿å³å¯ã€‚</p>
<h2 id="cheatsheet"> cheatsheet</h2>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:left">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">man</td>
<td style="text-align:left">ç”¨æˆ·æ‰‹å†Œ</td>
</tr>
<tr>
<td style="text-align:center">cd</td>
<td style="text-align:left">åˆ‡æ¢ç›®å½•</td>
</tr>
<tr>
<td style="text-align:center">pwd</td>
<td style="text-align:left">å½“å‰å·¥ä½œç›®å½•</td>
</tr>
<tr>
<td style="text-align:center">which</td>
<td style="text-align:left">ç¡®å®šæŸä¸ªç¨‹åºåä»£è¡¨çš„æ˜¯å“ªä¸ªå…·ä½“ç¨‹åº</td>
</tr>
<tr>
<td style="text-align:center">ls</td>
<td style="text-align:left">æ˜¾ç¤ºç›®å½•åŒ…å«çš„æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">mv</td>
<td style="text-align:left">ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">cp</td>
<td style="text-align:left">å¤åˆ¶æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">rm</td>
<td style="text-align:left">åˆ é™¤æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">mkdir</td>
<td style="text-align:left">æ–°å»ºæ–‡ä»¶å¤¹</td>
</tr>
<tr>
<td style="text-align:center">touch</td>
<td style="text-align:left">åˆ›å»ºæ–‡ä»¶æˆ–ä¿®æ”¹æ–‡ä»¶æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">chmod [mode] FILE</td>
<td style="text-align:left">ä¿®æ”¹æ–‡ä»¶æƒé™</td>
</tr>
<tr>
<td style="text-align:center">grep [pattern] FILE</td>
<td style="text-align:left">æ‰“å°patternåŒ¹é…æˆåŠŸçš„è¡Œ</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">å¯¼è¨€</title>
    <id>https://kigane.github.io/note/cv/</id>
    <link href="https://kigane.github.io/note/cv/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="è®¡ç®—æœºè§†è§‰é¢ä¸´çš„æŒ‘æˆ˜"> è®¡ç®—æœºè§†è§‰é¢ä¸´çš„æŒ‘æˆ˜</h2>
<ul>
<li>äººçœ¼æ¥å—çš„è§†è§‰æ•°æ®æå…¶å¤šï¼Œä¸”å¤§éƒ¨åˆ†æ˜¯å†—ä½™çš„</li>
<li>è§†çš®å±‚ä¼šå‹ç¼©ä¿¡æ¯ï¼Œå¤§è„‘é«˜çº§ä¸­æ¢åªå¤„ç†ä¸€éƒ¨åˆ†æŠ½è±¡çš„æ•°æ®ï¼Œä½†ä»æ¯”å…¶ä»–ä¿¡æ¯å¤šè‡³å°‘ä¸¤ä¸ªæ•°é‡çº§</li>
<li>å¤§è„‘æœ‰çº¦100äº¿ä¸ªç»†èƒï¼Œæ¯ä¸ªç»†èƒæœ‰å¤§é‡çªè§¦ï¼Œå¤„ç†èƒ½åŠ›éå¸¸å¼º</li>
<li>äººç±»å¯ä»¥é€šè¿‡ç§¯æçš„ä½¿ç”¨å’Œè®­ç»ƒå¯¹çœ¼è„‘ç³»ç»Ÿè¿›è¡ŒåŠ¨æ€&quot;ç¼–ç¨‹&quot;</li>
</ul>
<hr>
<ul>
<li>è®­ç»ƒé›†ä¸å……åˆ†ï¼Œæ— æ³•ä»£è¡¨å®é™…æƒ…å†µ</li>
<li>è¦æä¾›å……åˆ†çš„è®­ç»ƒé›†ï¼Œå­˜å‚¨æ˜¯ä¸ªé—®é¢˜ï¼Œå‚æ•°å¢åŠ å¯¼è‡´çš„ç»„åˆçˆ†ç‚¸ä¹Ÿæ˜¯é—®é¢˜</li>
</ul>
<hr>
<ul>
<li>å›¾åƒå¤„ç†
<ul>
<li>å°†å›¾åƒè½¬æ¢ä¸ºåŒ…å«ç›¸åŒæ¯”ç‰¹æ•°æ®çš„æ›´å®¹æ˜“å¤„ç†çš„å½¢å¼</li>
<li>åˆ†ç±»,æŠ½è±¡</li>
</ul>
</li>
</ul>
<h2 id="nms"> NMS</h2>
<p>NMSæ˜¯å¤§éƒ¨åˆ†æ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹ç½‘ç»œæ‰€éœ€è¦çš„ï¼Œå¤§è‡´ç®—æ³•æµç¨‹ä¸ºï¼š</p>
<ol>
<li>å¯¹æ‰€æœ‰é¢„æµ‹æ¡†çš„ç½®ä¿¡åº¦é™åºæ’åº</li>
<li>é€‰å‡ºç½®ä¿¡åº¦æœ€é«˜çš„é¢„æµ‹æ¡†ï¼Œç¡®è®¤å…¶ä¸ºæ­£ç¡®é¢„æµ‹ï¼ˆä¸‹æ¬¡å°±æ²¡æœ‰ä»–äº†ï¼Œå·²ç»è¢«ç¡®è®¤äº†ï¼‰ï¼Œå¹¶è®¡ç®—ä»–ä¸å…¶ä»–é¢„æµ‹æ¡†çš„IOU</li>
<li>æ ¹æ®2ä¸­è®¡ç®—çš„IOUå»é™¤é‡å åº¦é«˜çš„ï¼ŒIOU&gt;thresholdå°±åˆ é™¤</li>
<li>å‰©ä¸‹çš„é¢„æµ‹æ¡†è¿”å›ç¬¬1æ­¥ï¼Œç›´åˆ°æ²¡æœ‰å‰©ä¸‹çš„ä¸ºæ­¢</li>
</ol>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">æ•°å­—å›¾åƒå¤„ç†</title>
    <id>https://kigane.github.io/note/cv/dip/</id>
    <link href="https://kigane.github.io/note/cv/dip/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç»ªè®º"> ç»ªè®º</h2>
<h3 id="æ•°å­—å›¾åƒ"> æ•°å­—å›¾åƒ</h3>
<ul>
<li>ä¸€ä¸ªå›¾åƒå®šä¹‰äº†ä¸€ä¸ª2D-å‡½æ•°ï¼Œf(x, y)ï¼Œå…¶ä¸­x, yæ˜¯ç©ºé—´åæ ‡ï¼Œå‡½æ•°å€¼ä¸ºç°åº¦(grey levelæˆ–intensity)ã€‚</li>
<li>å›¾åƒæ•°å­—åŒ–(digitalization)
<ul>
<li>å¿…é¡»æŒ‡å®šåƒç´ å¤§å°</li>
<li>å¿…é¡»æŒ‡å®šç°åº¦èŒƒå›´ï¼Œå³ç°é˜¶ã€‚</li>
<li>ä»è¿ç»­åˆ°ç¦»æ•£ï¼Œä¸€å®šä¼šä¸¢å¤±éƒ¨åˆ†ä¿¡æ¯</li>
</ul>
</li>
<li>æ•°æ®ç‰¹ç‚¹
<ul>
<li>ç»´æ•°ã€‚é€šå¸¸æ˜¯2å’Œ3ï¼Œæœ‰æ—¶ä¼šæ›´å¤šï¼Œå¦‚4Då›¾åƒå¢åŠ äº†æ—¶é—´ç»´åº¦ã€‚</li>
<li>å¤§ã€‚</li>
<li>æ¯ä¸ªvoxelå¯¹åº”ç‰©ç†ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹</li>
</ul>
</li>
<li>å›¾åƒæè¿°
<ul>
<li>2D image: f(i, j)</li>
<li>3D image: f(i, j, k)</li>
<li>4D image: f(i, j, k, t)</li>
<li>æ³¨æ„ï¼šf, i, j, k, téƒ½æ˜¯æ­£æ•´æ•°ã€‚</li>
</ul>
</li>
<li>æ•°å­—å›¾åƒä¸‰è¦ç´ 
<ul>
<li>pixel</li>
<li>grey level</li>
<li>coordinates</li>
</ul>
</li>
</ul>
<h3 id="æ•°å­—å›¾åƒå¤„ç†"> æ•°å­—å›¾åƒå¤„ç†</h3>
<ul>
<li>é‡‡æ ·(sampling):æµ‹é‡å›¾åƒæ¯ä¸ªåƒç´ ä½ç½®çš„ç°åº¦å€¼</li>
<li>é‡åŒ–(quantization):å°†æµ‹é‡å€¼ç”¨æ•´æ•°è¡¨ç¤º</li>
<li>å¯¹æ¯”åº¦(contrast):å›¾åƒå†…ç°åº¦å˜åŒ–çš„å¹…åº¦</li>
<li>è§£åƒåº¦(resolution):</li>
<li>é‡‡æ ·å¯†åº¦(sampling density):åƒç´ é—´è·</li>
<li>æ”¾å¤§ç‡(magnification):å›¾åƒä¸çœŸå®ä¸–ç•Œçš„å°ºåº¦å…³ç³»(æ¯”ä¾‹å°º)</li>
</ul>
<h3 id="å›¾åƒåˆ†ç±»"> å›¾åƒåˆ†ç±»</h3>
<ul>
<li>äºŒå€¼å›¾åƒ(Binary image)</li>
<li>ç°åº¦å›¾åƒ(Gray level image)</li>
<li>å½©è‰²å›¾åƒ(Color image)</li>
<li>ä¼ªå½©å›¾åƒ(False color image)</li>
</ul>
<p>æ ¹æ®ä¼ æ„Ÿå™¨åˆ†ç±»ï¼Œæœ‰çº¢å¤–ï¼Œç´«å¤–ï¼ŒMRIï¼Œè¶…å£°ï¼Œå¾®æ³¢ï¼ŒX-å…‰ç‰‡ï¼ŒPET(æ­£ç”µå­æˆåƒï¼Œæ°§çš„æ–°é™ˆä»£è°¢)ï¼Œç…§ç‰‡...<br>
å…¶ä»–åˆ†ç±»æ–¹å¼ç•¥ã€‚</p>
<h3 id="å›¾åƒå¤„ç†æµç¨‹"> å›¾åƒå¤„ç†æµç¨‹</h3>
<ul>
<li>Low level:ä»å›¾åƒåˆ°å›¾åƒï¼Œä¹Ÿç§°image filtering
<ul>
<li>Enhancement
<ul>
<li>Sharpen</li>
<li>Smooth</li>
<li>...</li>
</ul>
</li>
<li>Interpolate</li>
<li>Reduce Noise</li>
<li>Crop(è£å‰ª)</li>
</ul>
</li>
<li>Intermediate level:ä»å›¾åƒåˆ°ç¬¦å·è¡¨ç¤ºï¼Œä¹Ÿç§°image segmentation
<ul>
<li>Region/Contour Extraction(ROI, Region of Interest)</li>
<li>Labeling</li>
<li>Grouping</li>
</ul>
</li>
<li>High level:ä»ç¬¦å·è¡¨ç¤º(symbolic representation)åˆ°åŠŸèƒ½æ€§æè¿°(functional description)ï¼Œä¹Ÿç§°å›¾åƒç†è§£æˆ–æ¨¡å¼è¯†åˆ«ã€‚
<ul>
<li>Recognition</li>
<li>Modeling</li>
</ul>
</li>
</ul>
<h2 id="åŸºæœ¬å›¾åƒæ“ä½œ"> åŸºæœ¬å›¾åƒæ“ä½œ</h2>
<h3 id="ç°åº¦ç›´æ–¹å›¾"> ç°åº¦ç›´æ–¹å›¾</h3>
<p>å›¾åƒçš„ç°åº¦ç›´æ–¹å›¾æ˜¯åŸºäºç°é˜¶çš„pixelåˆ†å¸ƒå‡½æ•°ã€‚å…¶xåæ ‡ä»£è¡¨ç°é˜¶ï¼Œyä»£è¡¨å¯¹åº”ç°é˜¶çš„åƒç´ æ•°ç›®ã€‚ä¸»è¦ç¼ºç‚¹æ˜¯ä¸¢å¤±äº†åƒç´ çš„ç©ºé—´ä¿¡æ¯ã€‚</p>
<ul>
<li>å›¾åƒçš„ç°åº¦ç›´æ–¹å›¾é€šå¸¸æ˜¯åŒå³°(bimodal)çš„ã€‚</li>
<li>åŒå³°ä¹‹é—´çš„æœ€å°ç°é˜¶æ˜¯æœ€ä¼˜çš„äºŒå€¼åŒ–thresholdé€‰æ‹©ä¹‹ä¸€ã€‚</li>
<li>äºŒå€¼åŒ–çš„thresholdå¯ä»¥æ˜¯å›ºå®šçš„(fixed)æˆ–é€‚åº”æ€§çš„(adaptive)</li>
</ul>
<h3 id="äºŒå€¼åŒ–æ–¹æ³•"> äºŒå€¼åŒ–æ–¹æ³•</h3>
<h4 id="isodata-algorithm"> Isodata Algorithm</h4>
<ul>
<li>é€‰æ‹©ä¸€ä¸ªåˆå§‹thresholdå€¼ï¼ŒT<sub>0</sub>(e.g. mean intensity)</li>
<li>ç”¨T<sub>0</sub>å°†å›¾åƒåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†R<sub>1</sub>,R<sub>2</sub></li>
<li>åˆ†åˆ«è®¡ç®—ä¸¤ä¸ªéƒ¨åˆ†çš„mean intensity u<sub>1</sub>, u<sub>2</sub></li>
<li>é€‰æ‹©æ–°çš„threshold, T<sub>1</sub>=(u<sub>1</sub>+u<sub>2</sub>)/2</li>
<li>é‡å¤ï¼Œç›´åˆ°thresholdä¸å†æ”¹å˜</li>
</ul>
<h4 id="otsu-algorithm"> OTSU Algorithm</h4>
<ul>
<li>t: total</li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.4306em;"></span><span style="margin-right:0.03588em;">Ï‰</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:3.106em;vertical-align:-1.2777em;"></span><span><span><span><span style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>i</span><span>=</span><span>0</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;"></span><span><span>âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span style="margin-right:0.13889em;">T</span></span></span></span></span><span>â€‹</span></span><span><span style="height:1.2777em;"><span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span style="margin-right:0.13889em;">P</span><span>(</span><span>i</span><span>)</span><span>,</span><span style="margin-right:0.1667em;"></span><span style="margin-right:0.13889em;">P</span><span>(</span><span>i</span><span>)</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:1em;vertical-align:-0.25em;"></span><span><span><span>n</span></span><span><span><span><span style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>i</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span>/</span><span style="margin-right:0.10903em;">N</span></span></span></span></li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.625em;vertical-align:-0.1944em;"></span><span>Î¼</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:3.106em;vertical-align:-1.2777em;"></span><span><span><span><span style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>i</span><span>=</span><span>0</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;"></span><span><span>âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span style="margin-right:0.13889em;">T</span></span></span></span></span><span>â€‹</span></span><span><span style="height:1.2777em;"><span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span>i</span><span style="margin-right:0.13889em;">P</span><span>(</span><span>i</span><span>)</span><span>/</span><span style="margin-right:0.03588em;">Ï‰</span></span></span></span></li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1.1111em;vertical-align:-0.247em;"></span><span><span><span style="margin-right:0.03588em;">Ïƒ</span></span><span><span><span><span style="height:0.8641em;"><span style="top:-2.453em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>t</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.247em;"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:3.106em;vertical-align:-1.2777em;"></span><span><span><span><span style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>i</span><span>=</span><span>0</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;"></span><span><span>âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span style="margin-right:0.13889em;">T</span></span></span></span></span><span>â€‹</span></span><span><span style="height:1.2777em;"><span></span></span></span></span></span><span>(</span><span>i</span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1.1141em;vertical-align:-0.25em;"></span><span>u</span><span><span>)</span><span><span><span><span style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span></span></span></span></span><span style="margin-right:0.13889em;">P</span><span>(</span><span>i</span><span>)</span></span></span></span></li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1.1111em;vertical-align:-0.247em;"></span><span><span><span style="margin-right:0.03785em;">Î´</span></span><span><span><span><span style="height:0.8641em;"><span style="top:-2.453em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>b</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.247em;"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:1em;vertical-align:-0.25em;"></span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>0</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span>(</span><span><span>Î¼</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>0</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1.1141em;vertical-align:-0.25em;"></span><span><span>Î¼</span><span><span><span><span style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>t</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span><span>)</span><span><span><span><span style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>2</span></span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>+</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1em;vertical-align:-0.25em;"></span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>1</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span>(</span><span><span>Î¼</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>1</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1.1141em;vertical-align:-0.25em;"></span><span><span>Î¼</span><span><span><span><span style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>t</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span><span>)</span><span><span><span><span style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>2</span></span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.625em;vertical-align:-0.1944em;"></span><span><span>Î¼</span><span><span><span><span style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>t</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.7778em;vertical-align:-0.1944em;"></span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>0</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span><span>Î¼</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>0</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>+</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:0.625em;vertical-align:-0.1944em;"></span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>1</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span><span>Î¼</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>1</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä»£å…¥å¯å¾— <span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1.0972em;vertical-align:-0.2831em;"></span><span><span><span style="margin-right:0.03785em;">Î´</span></span><span><span><span><span style="height:0.8141em;"><span style="top:-2.4169em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>b</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>2</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.2831em;"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:1em;vertical-align:-0.25em;"></span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>0</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span><span style="margin-right:0.03588em;">Ï‰</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>1</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span>(</span><span><span>Î¼</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>1</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1.0641em;vertical-align:-0.25em;"></span><span><span>Î¼</span><span><span><span><span style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>0</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span><span>)</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>2</span></span></span></span></span></span></span></span></span></span></span></li>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.625em;vertical-align:-0.1944em;"></span><span style="margin-right:0.03588em;">Î·</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:2.4229em;vertical-align:-0.9318em;"></span><span><span></span><span><span><span><span style="height:1.4911em;"><span style="top:-2.314em;"><span style="height:3em;"></span><span><span><span style="margin-right:0.03785em;">Î´</span><span><span><span><span style="height:0.7959em;"><span style="top:-2.4542em;margin-left:-0.0379em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>t</span></span></span><span style="top:-3.0448em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>2</span></span></span></span><span>â€‹</span></span><span><span style="height:0.2458em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span style="height:3em;"></span><span style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span style="height:3em;"></span><span><span><span style="margin-right:0.03785em;">Î´</span><span><span><span><span style="height:0.8141em;"><span style="top:-2.4169em;margin-left:-0.0379em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>b</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>2</span></span></span></span><span>â€‹</span></span><span><span style="height:0.2831em;"><span></span></span></span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.9318em;"><span></span></span></span></span></span><span></span></span></span></span></span></li>
<li>å¦‚æœæœ‰256ä¸ªç°é˜¶ï¼Œåˆ™è®¡ç®—å‡º256ä¸ª<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.625em;vertical-align:-0.1944em;"></span><span style="margin-right:0.03588em;">Î·</span></span></span></span>å–æœ€å¤§å€¼</li>
</ul>
<h4 id="entropy-method"> Entropy Method</h4>
<ul>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.08125em;">H</span><span><span><span><span style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>b</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:3.0582em;vertical-align:-1.2777em;"></span><span>âˆ’</span><span style="margin-right:0.1667em;"></span><span><span><span><span style="height:1.7806em;"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>i</span><span>=</span><span>0</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;"></span><span><span>âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>t</span></span></span></span></span><span>â€‹</span></span><span><span style="height:1.2777em;"><span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span><span>p</span><span><span><span><span style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>i</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span>lo<span style="margin-right:0.01389em;">g</span></span><span>(</span><span><span>p</span><span><span><span><span style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>i</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span>)</span><span style="margin-right:1em;"></span><span><span style="margin-right:0.08125em;">H</span><span><span><span><span style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span style="margin-right:0.02691em;">w</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:3.1371em;vertical-align:-1.336em;"></span><span>âˆ’</span><span style="margin-right:0.1667em;"></span><span><span><span><span style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>i</span><span>=</span><span>t</span><span>+</span><span>1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;"></span><span><span>âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;"></span><span><span><span>255</span></span></span></span></span><span>â€‹</span></span><span><span style="height:1.336em;"><span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span><span>p</span><span><span><span><span style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>i</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;"></span><span>lo<span style="margin-right:0.01389em;">g</span></span><span>(</span><span><span>p</span><span><span><span><span style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>i</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span>)</span></span></span></span></li>
<li>åŒæ ·è®¡ç®—256ä¸ªå€¼ï¼Œé€‰æ‹©åˆé€‚çš„ç°é˜¶tä½¿å¾—<span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:0.6833em;"></span><span style="margin-right:0.08125em;">H</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.08125em;">H</span><span><span><span><span style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span>b</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;"></span><span>+</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:0.8333em;vertical-align:-0.15em;"></span><span><span style="margin-right:0.08125em;">H</span><span><span><span><span style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span style="margin-right:0.02691em;">w</span></span></span></span><span>â€‹</span></span><span><span style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> (b:blackï¼Œé€šå¸¸æ˜¯èƒŒæ™¯è‰²ï¼Œ w:whiteï¼Œé€šå¸¸æ˜¯å‰æ™¯è‰²)æœ€å¤§åŒ–</li>
</ul>
<h4 id="adaptive-threshold-local-threshold"> Adaptive Threshold/Local Threshold</h4>
<ul>
<li>å°†å›¾åƒåˆ†æˆä¸€ä¸ªä¸ªå°åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸè®¡ç®—å„è‡ªçš„threshold</li>
<li>é€‚åˆèƒŒæ™¯ä¸å‡åŒ€çš„æƒ…å†µ</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="CV"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">åè¯è§£é‡Š</title>
    <id>https://kigane.github.io/note/cv/nouns/</id>
    <link href="https://kigane.github.io/note/cv/nouns/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç›®æ ‡æ£€æµ‹"> ç›®æ ‡æ£€æµ‹</h2>
<div><p>Tips</p>
<p>Object Localization is finding where and what a single object exists in an image.
Object Detection is finding where and what multiple objects are in an image.</p>
</div>
<div><p>Tips</p>
<p>Sliding Window: é¢„å®šä¹‰ä¸€ä¸ªboxï¼Œåœ¨äºŒç»´çš„å›¾åƒä¸Šæ»‘åŠ¨ã€‚åœ¨æ¯ä¸ªä½ç½®ï¼Œè£å‰ªå›¾åƒï¼Œç¼©æ”¾ä¸º224x224é€å…¥CNNã€‚</p>
<ul>
<li>è®¡ç®—é‡æå¤§(OverFeatæ–¹æ³•å¯ä»¥ç®€åŒ–ä¸€äº›è®¡ç®—)
<ul>
<li>æ»‘åŠ¨æ­¥é•¿ä¸èƒ½å¤§å¤§</li>
<li>éœ€è¦ä¸åŒå¤§å°çš„æ»‘åŠ¨çª—å£</li>
</ul>
</li>
<li>ä¼šäº§ç”Ÿå¤§é‡åŒ…å«ç‰©ä½“çš„bboxes</li>
</ul>
</div>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="CV"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-07T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">ç›´æ–¹å›¾å‡è¡¡åŒ–</title>
    <id>https://kigane.github.io/note/cv/equalize_histogram/</id>
    <link href="https://kigane.github.io/note/cv/equalize_histogram/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="æ€»è§ˆ"> æ€»è§ˆ</h2>
<ul>
<li>æé«˜å…¨å±€å¯¹æ¯”åº¦ï¼Œåœ¨å›¾åƒç°åº¦é›†ä¸­äºæŸä¸ªå°åŒºåŸŸæ—¶æ•ˆæœå°¤ä¸ºæ˜æ˜¾</li>
<li>ç›´æ–¹å›¾å‡è¡¡åŒ–å°†é›†ä¸­åœ¨ä¸€èµ·çš„ç°åº¦åƒç´ å€¼æ‰“æ•£åˆ°å…¨ç°åº¦çº§ä¸Šæ¥è·å¾—å¯¹æ¯”åº¦çš„å¢å¼º</li>
<li>é€‚åˆå¤„ç†æ›å…‰ä¸è¶³çš„ç…§ç‰‡å’Œéª¨éª¼çš„x-rayå›¾åƒï¼Œçƒ­åŠ›å›¾ï¼Œå«æ˜Ÿå›¾</li>
<li>æ˜¯å¯é€†çš„ï¼Œéœ€è¦çŸ¥é“ç›´æ–¹å›¾å‡è¡¡åŒ–å‡½æ•°</li>
<li>ä¸€ä¸ªç¼ºç‚¹æ˜¯å¯¹èƒŒæ™¯å™ªéŸ³å’Œæœ‰ç”¨çš„ä¿¡å·ä¸€è§†åŒä»</li>
<li>ä¼šä½¿å›¾åƒäº§ç”Ÿä¸çœŸå®æ„Ÿ</li>
<li>å¯¹ä½color depthçš„å›¾åƒï¼Œä¼šè¿›ä¸€æ­¥é™ä½å…¶color depth</li>
<li>æ”¹è¿›ï¼Œåœ¨æé«˜å¯¹æ¯”åº¦çš„åŒæ—¶ä¸æ”¹å˜ç°åº¦çš„å‡å€¼å’Œé¿å…ç»†èŠ‚ä¸Šçš„æŸå¤±
<ul>
<li>adaptive histogram equalization</li>
<li>contrast limiting adaptive histogram equalization (CLAHE)</li>
<li>multipeak histogram equalization (MPHE)</li>
<li>multipurpose beta optimized bihistogram equalization (MBOBHE)</li>
</ul>
</li>
</ul>
<h2 id="å…·ä½“ç®—æ³•"> å…·ä½“ç®—æ³•</h2>
<ul>
<li>è®¡ç®—å›¾åƒçš„histç›´æ–¹å›¾ï¼Œå³æ¯ä¸ªç°åº¦æœ‰å¤šå°‘åƒç´ </li>
<li>è®¡ç®—histçš„cumsum()ï¼Œå³cdf</li>
<li>ç”¨cdfå½“æƒå€¼åœ¨ç›®æ ‡RANGEå†…è¿›è¡Œæ’å€¼ã€‚
<ul>
<li><span><span><i>Not supported content</i></span><span aria-hidden="true"><span><span style="height:1em;vertical-align:-0.25em;"></span><span>h</span><span>(</span><span style="margin-right:0.03588em;">v</span><span>)</span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:1.4551em;vertical-align:-0.4451em;"></span><span>ro</span><span>u</span><span>n</span><span>d</span><span>(</span><span><span></span><span><span><span><span style="height:1.01em;"><span style="top:-2.655em;"><span style="height:3em;"></span><span><span><span style="margin-right:0.08125em;">H</span><span>Ã—</span><span style="margin-right:0.13889em;">W</span><span>âˆ’</span><span><span><span style="margin-right:0.07778em;">cdf</span></span><span><span><span><span style="height:0.3281em;"><span style="top:-2.357em;margin-right:0.0714em;"><span style="height:2.5em;"></span><span><span><span>min</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span style="height:3em;"></span><span style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span style="height:3em;"></span><span><span><span><span style="margin-right:0.07778em;">cdf</span></span><span>(</span><span style="margin-right:0.03588em;">v</span><span>)</span><span>âˆ’</span><span><span><span style="margin-right:0.07778em;">cdf</span></span><span><span><span><span style="height:0.3281em;"><span style="top:-2.357em;margin-right:0.0714em;"><span style="height:2.5em;"></span><span><span><span>min</span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span>â€‹</span></span><span><span style="height:0.4451em;"><span></span></span></span></span></span><span></span></span><span style="margin-right:0.2222em;"></span><span>Ã—</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1em;vertical-align:-0.25em;"></span><span>(</span><span>L</span><span style="margin-right:0.2222em;"></span><span>âˆ’</span><span style="margin-right:0.2222em;"></span></span><span><span style="height:1em;vertical-align:-0.25em;"></span><span>1</span><span>))</span></span></span></span></li>
<li>cdf<sub>min</sub>ä»£è¡¨ç°åº¦æœ€ä½åƒç´ çš„ä¸ªæ•°</li>
<li>HxWä¸ºå›¾åƒåƒç´ æ€»æ•°</li>
<li>Lä¸ºç°åº¦çº§ï¼Œé€šå¸¸ä¸º256</li>
</ul>
</li>
</ul>
<h2 id="pythonå®ç°"> pythonå®ç°</h2>
<div><pre><code>TODO
</code></pre>
<div><span>1</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="CV"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-05T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Attention is all you need</title>
    <id>https://kigane.github.io/note/cv/transformer/</id>
    <link href="https://kigane.github.io/note/cv/transformer/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="æ‘˜è¦"> æ‘˜è¦</h2>
<ul>
<li>Transformerï¼Œä¸€ä¸ªæ–°çš„ç½‘ç»œæ¶æ„ï¼Œåªä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶(attention mechanism)ï¼Œå®Œå…¨æ²¡ç”¨å¾ªç¯å’Œå·ç§¯</li>
<li>å¯¹äºæœºå™¨ç¿»è¯‘ä»»åŠ¡ï¼Œæ€§èƒ½è¡¨ç°æ›´å¥½ï¼Œå¯å¹¶è¡Œåº¦æ›´é«˜ï¼Œè®­ç»ƒæ—¶é—´å¤§é‡å‡å°‘</li>
<li>å¯ä»¥æ³›åŒ–åˆ°å…¶å®ƒä»»åŠ¡ä¸Š</li>
<li><a href="https://github.com/tensorflow/tensor2tensor" target="_blank" rel="noopener noreferrer">ä»£ç å®ç°</a></li>
</ul>
<h2 id="ç»“è®º"> ç»“è®º</h2>
<ul>
<li>Transformeræ˜¯ç¬¬ä¸€ä¸ªå®Œå…¨ç”¨æ³¨æ„åŠ›æœºåˆ¶çš„åºåˆ—è½¬å½•æ¨¡å‹(sequence transduction model)ï¼Œå®ƒå°†encoder-decoderæ¶æ„ä¸­æœ€å¸¸ç”¨çš„å¾ªç¯å±‚(recurrent layers)æ›¿æ¢æˆmulti-headed self-attentionã€‚</li>
<li>å¯¹äºæœºå™¨ç¿»è¯‘ä»»åŠ¡ï¼Œç¡®å®æ€§èƒ½è¡¨ç°æ›´å¥½ï¼Œè®­ç»ƒæ—¶é—´æ›´å°‘</li>
<li>ä½œè€…è®¤ä¸ºTransformerä¸ä»…å¯ä»¥åº”ç”¨åˆ°æ–‡æœ¬å¤„ç†ä¸Šï¼Œåœ¨å›¾åƒï¼Œè¯­éŸ³ï¼Œè§†é¢‘ä¸Šåº”è¯¥ä¹Ÿå¯è¡Œã€‚è®©ç”Ÿæˆä¸é‚£ä¹ˆæ—¶åºåŒ–ä¹Ÿæ˜¯å¦ä¸€ä¸ªç ”ç©¶æ–¹å‘ã€‚</li>
</ul>
<h2 id="å¯¼è¨€"> å¯¼è¨€</h2>
<ul>
<li>å¾ªç¯æ¨¡å‹æœ€ä¸»è¦çš„ç¼ºç‚¹æ˜¯éš¾ä»¥å¹¶è¡ŒåŒ–ï¼Œè®­ç»ƒæ—¶é—´é•¿ã€‚å› ä¸ºå®ƒè¦è®¡ç®—åºåˆ—çš„éšè—çŠ¶æ€h<sub>t</sub>æ—¶ï¼Œå¿…é¡»å…ˆè®¡ç®—h<sub>t-1</sub>ã€‚</li>
<li>å·²ç»æœ‰äººå°†attentionæœºåˆ¶åº”ç”¨äºencoder-decoderæ¶æ„äº†ï¼Œä½†æ˜¯æ˜¯å’Œå¾ªç¯æ¨¡å‹ä¸€èµ·ä½¿ç”¨çš„ã€‚</li>
<li>æˆ‘ä»¬åªç”¨attentionæœºåˆ¶ï¼Œæ•ˆæœæ›´å¥½</li>
</ul>
<h2 id="ç›¸å…³å·¥ä½œ"> ç›¸å…³å·¥ä½œ</h2>
<ul>
<li>æœ‰äººè¯•è¿‡ç”¨CNNæ¥æ”¹è¿›RNNï¼Œä½†è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯åºåˆ—ç›¸éš”æ¯”è¾ƒè¿œçš„åƒç´ äº§ç”Ÿè”ç³»å¾ˆéš¾ï¼Œç”¨transformerå°±å¾ˆå®¹æ˜“äº†ã€‚ä½†CNNæœ‰å’Œå¥½å¤„æ˜¯å¯ä»¥æœ‰å¤šä¸ªè¾“å‡ºé€šé“ï¼Œæ‰€ä»¥ä½œè€…åˆæå‡ºäº†multi-headed self-attentionç”¨æ¥æ¨¡æ‹ŸCNNçš„å¤šè¾“å‡ºé€šé“çš„æ•ˆæœã€‚</li>
<li>self-attentionæœºåˆ¶ä¸æ˜¯ä½œè€…çš„åˆ›æ–°ï¼Œç›¸å…³å·¥ä½œå·²ç»æœ‰äº†ã€‚</li>
<li>ä½œè€…çš„åˆ›æ–°åœ¨äºåœ¨encoder-decoderæ¶æ„ä¸­åªä½¿ç”¨self-attentionæœºåˆ¶ã€‚</li>
</ul>
<h2 id="æ¨¡å‹æ¶æ„"> ==æ¨¡å‹æ¶æ„==</h2>
<p>TODO</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Thesis"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-11-14T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">åˆ†æ°´å²­ç®—æ³•</title>
    <id>https://kigane.github.io/note/cv/watershed/</id>
    <link href="https://kigane.github.io/note/cv/watershed/"/>
    <updated>2021-12-18T06:00:06.000Z</updated>
    <content type="html"><![CDATA[<h2 id="opencvä¸­ä½¿ç”¨åˆ†æ°´å²­ç®—æ³•"> opencvä¸­ä½¿ç”¨åˆ†æ°´å²­ç®—æ³•</h2>
<h3 id="ä¸»è¦æ­¥éª¤"> ä¸»è¦æ­¥éª¤</h3>
<ul>
<li>ç”¨ä¸€ç§é¢œè‰²(æˆ–å¼ºåº¦)æ ‡è®°æˆ‘ä»¬ç¡®å®šä¸ºå‰æ™¯æˆ–å¯¹è±¡çš„åŒºåŸŸ</li>
<li>ç”¨å¦ä¸€ç§é¢œè‰²æ ‡è®°æˆ‘ä»¬ç¡®å®šä¸ºèƒŒæ™¯æˆ–éå¯¹è±¡çš„åŒºåŸŸ</li>
<li>æœ€åç”¨ 0 æ ‡è®°æˆ‘ä»¬ä¸ç¡®å®šçš„åŒºåŸŸã€‚</li>
<li>åº”ç”¨åˆ†æ°´å²­ç®—æ³•ã€‚æ ‡è®°å°†ä½¿ç”¨æˆ‘ä»¬ç»™å‡ºçš„æ ‡ç­¾è¿›è¡Œæ›´æ–°ï¼Œå¯¹è±¡çš„è¾¹ç•Œå€¼å°†ä¸º-1ã€‚</li>
</ul>
<h3 id="ä»£ç "> ä»£ç </h3>
<p>TODO</p>
<h2 id="floodfill"> floodFill</h2>
<p>TODO</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="CV"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-07T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">JS å°çŸ¥è¯†</title>
    <id>https://kigane.github.io/note/js/</id>
    <link href="https://kigane.github.io/note/js/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç®­å¤´å‡½æ•°"> ç®­å¤´å‡½æ•°</h2>
<p>ç±»ä¼¼ lambda è¡¨è¾¾å¼ã€‚</p>
<div><pre><code><span>(</span><span>params</span><span>)</span><span>=></span><span>{</span>
    <span>// body...</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰ this, å¦‚æœåœ¨ç®­å¤´å‡½æ•°å†…ä½¿ç”¨äº† thisï¼Œä¼šå¯¼è‡´ this ä½œä¸ºå˜é‡ä¸€ç›´å‘ä¸Šçº§è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´è‡³æ‰¾åˆ°ä¸ºæ­¢ã€‚è¿™ç»å¸¸ä¼šå¯¼è‡´é”™è¯¯ã€‚</p>
<h2 id="æå‡-hoisting"> æå‡(Hoisting)</h2>
<p>JavaScriptå¼•æ“çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œå…ˆè§£æä»£ç ï¼Œè·å–æ‰€æœ‰è¢«å£°æ˜çš„å˜é‡ï¼Œç„¶åå†ä¸€è¡Œä¸€è¡Œåœ°è¿è¡Œã€‚è¿™é€ æˆçš„ç»“æœï¼Œå°±æ˜¯æ‰€æœ‰çš„å˜é‡çš„å£°æ˜è¯­å¥ï¼Œéƒ½ä¼šè¢«æå‡åˆ°ä»£ç çš„å¤´éƒ¨ï¼Œè¿™å°±å«åšå˜é‡æå‡ï¼ˆhoistingï¼‰ã€‚å‡½æ•°å£°æ˜ä¹Ÿä¸€æ ·ã€‚ç±»ä¼¼ C++ ä¸­ static çš„å·¥ä½œæ–¹å¼ã€‚</p>
<h2 id="in"> in</h2>
<ul>
<li>åœ¨å•ç‹¬ä½¿ç”¨æ—¶ï¼Œinæ“ä½œç¬¦ä¼šåœ¨é€šè¿‡å¯¹è±¡èƒ½å¤Ÿè®¿é—®ç»™å®šå±æ€§æ—¶è¿”å›trueï¼Œæ— è®ºè¯¥å±æ€§å­˜åœ¨äºå®ä¾‹ä¸­è¿˜æ˜¯åŸå‹ä¸­</li>
<li>åœ¨ä½¿ç”¨for-inå¾ªç¯æ—¶ï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰èƒ½å¤Ÿé€šè¿‡å¯¹è±¡è®¿é—®çš„ã€å¯æšä¸¾çš„ï¼ˆenumeratedï¼‰å±æ€§ï¼Œå…¶ä¸­æ—¢åŒ…æ‹¬å­˜åœ¨äºå®ä¾‹ä¸­çš„å±æ€§ï¼Œä¹ŸåŒ…æ‹¬å­˜åœ¨äºåŸå‹ä¸­çš„å±æ€§ã€‚å±è”½äº†åŸå‹ä¸­ä¸å¯æšä¸¾å±æ€§ï¼ˆå³å°†<code>[[Enumerable]]</code>æ ‡è®°ä¸ºfalseçš„å±æ€§ï¼‰çš„å®ä¾‹å±æ€§ä¹Ÿä¼šåœ¨for-inå¾ªç¯ä¸­è¿”å›ï¼Œå› ä¸ºæ ¹æ®è§„å®šï¼Œæ‰€æœ‰å¼€å‘äººå‘˜å®šä¹‰çš„å±æ€§éƒ½æ˜¯å¯æšä¸¾çš„ã€‚</li>
</ul>
<h2 id="exports-module-exports"> exports&amp;module.exports</h2>
<p>æ¨¡å—æ˜¯è‡ªåŒ…å«çš„åŠŸèƒ½å•å…ƒï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­å…±äº«å’Œé‡å¤ä½¿ç”¨ã€‚
ç”±äºJavaScriptæœ€åˆæ²¡æœ‰æ¨¡å—çš„æ¦‚å¿µï¼Œéšç€æ—¶é—´çš„æ¨ç§»å‡ºç°äº†å„ç§ç«äº‰æ ¼å¼ã€‚Node.jsä¸­ä½¿ç”¨çš„æ˜¯CommonJSæ ¼å¼ã€‚å…¶ä»–æ ¼å¼(<a href="https://www.jvandemo.com/a-10-minute-primer-to-javascript-modules-module-formats-module-loaders-and-module-bundlers/" target="_blank" rel="noopener noreferrer">å¯ä»¥å‚è€ƒè¿™é‡Œ</a>)ã€‚</p>
<p>Node.js å†…ç½®äº†è®¸å¤šæ¨¡å—ï¼Œä¾‹å¦‚</p>
<div><pre><code><span>const</span> fs <span>=</span> <span>require</span><span>(</span><span>'fs'</span><span>)</span><span>;</span>
<span>const</span> folderPath <span>=</span> <span>'./'</span><span>;</span>

fs<span>.</span><span>readdir</span><span>(</span>folderPath<span>,</span> <span>(</span><span>err<span>,</span> files</span><span>)</span> <span>=></span> <span>{</span>
    files<span>.</span><span>forEach</span><span>(</span><span>file</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span>file<span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>æ›´å¤š<a href="https://www.w3schools.com/nodejs/ref_modules.asp" target="_blank" rel="noopener noreferrer">å¯ä»¥å‚è€ƒè¿™é‡Œ</a></p>
<h3 id="åˆ›å»ºå’Œå¯¼å‡ºæ¨¡å—"> åˆ›å»ºå’Œå¯¼å‡ºæ¨¡å—</h3>
<div><pre><code><span>// in ./user.js</span>
<span>const</span> <span>getName</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>'Zrt'</span><span>;</span>
<span>}</span><span>;</span>

exports<span>.</span>getName <span>=</span> getName<span>;</span>

<span>// in ./index.js</span>
<span>const</span> user <span>=</span> <span>require</span><span>(</span><span>'./user'</span><span>)</span><span>;</span> <span>// .js å¾ˆæ˜¾ç„¶ï¼Œå¯ä»¥çœç•¥</span>
console<span>.</span><span>log</span><span>(</span><span><span>`</span><span>User: </span><span><span>${</span>user<span>.</span><span>getName</span><span>(</span><span>)</span><span>}</span></span><span>`</span></span><span>)</span><span>;</span> <span>// User: Zrt</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id="å¯¼å‡ºå¤šä¸ªæ–¹æ³•å’Œå€¼"> å¯¼å‡ºå¤šä¸ªæ–¹æ³•å’Œå€¼</h3>
<div><pre><code><span>// in ./user.js</span>
<span>const</span> <span>getName</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>'Zrt'</span><span>;</span>
<span>}</span><span>;</span>

<span>const</span> <span>getLocation</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>'dzxx'</span><span>;</span>
<span>}</span><span>;</span>

<span>const</span> dateOfBirth <span>=</span> <span>'9.9.1999'</span><span>;</span>

exports<span>.</span>getName <span>=</span> getName<span>;</span>
exports<span>.</span>getLocation <span>=</span> getLocation<span>;</span>
exports<span>.</span>dob <span>=</span> dateOfBirth<span>;</span>

<span>// in ./index.js</span>
<span>const</span> user <span>=</span> <span>require</span><span>(</span><span>'./user'</span><span>)</span><span>;</span> <span>// .js å¾ˆæ˜¾ç„¶ï¼Œå¯ä»¥çœç•¥</span>
console<span>.</span><span>log</span><span>(</span>
  <span><span>`</span><span><span>${</span>user<span>.</span><span>getName</span><span>(</span><span>)</span><span>}</span></span><span> lives in </span><span><span>${</span>user<span>.</span><span>getLocation</span><span>(</span><span>)</span><span>}</span></span><span> and was born on </span><span><span>${</span>user<span>.</span>dob<span>}</span></span><span>.</span><span>`</span></span>
<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><h3 id="è¯­æ³•å˜ä½“"> è¯­æ³•å˜ä½“</h3>
<div><pre><code><span>// ./user.js</span>
exports<span>.</span><span>getName</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>'Jim'</span><span>;</span>
<span>}</span><span>;</span>

exports<span>.</span><span>getLocation</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>'Munich'</span><span>;</span>
<span>}</span><span>;</span>

exports<span>.</span>dob <span>=</span> <span>'12.01.1982'</span><span>;</span>

<span>// ./index.js</span>
<span>// ES6 è¯­æ³• Destructuring Assignment</span>
<span>const</span> <span>{</span> getName<span>,</span> dob <span>}</span> <span>=</span> <span>require</span><span>(</span><span>'./user'</span><span>)</span><span>;</span> 
console<span>.</span><span>log</span><span>(</span>
  <span><span>`</span><span><span>${</span><span>getName</span><span>(</span><span>)</span><span>}</span></span><span> was born on </span><span><span>${</span>dob<span>}</span></span><span>.</span><span>`</span></span>
<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><h3 id="å¯¼å‡ºé»˜è®¤å€¼"> å¯¼å‡ºé»˜è®¤å€¼</h3>
<p>å¦‚æœä¸€ä¸ªæ¨¡å—åªæƒ³å¯¼å‡ºä¸€ä¸ªä¸œè¥¿ï¼Œmodule.exportsæ›´å¸¸ç”¨ã€‚</p>
<div><pre><code><span>// ./user.js</span>
<span>class</span> <span>User</span> <span>{</span>
  <span>constructor</span><span>(</span><span>name<span>,</span> age<span>,</span> email</span><span>)</span> <span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
    <span>this</span><span>.</span>email <span>=</span> email<span>;</span>
  <span>}</span>

  <span>getUserStats</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span><span>`</span><span>
      Name: </span><span><span>${</span><span>this</span><span>.</span>name<span>}</span></span><span>
      Age: </span><span><span>${</span><span>this</span><span>.</span>age<span>}</span></span><span>
      Email: </span><span><span>${</span><span>this</span><span>.</span>email<span>}</span></span><span>
    </span><span>`</span></span><span>;</span>
  <span>}</span>
<span>}</span>

module<span>.</span>exports <span>=</span> User<span>;</span>

<span>// ./index.js</span>
<span>const</span> User <span>=</span> <span>require</span><span>(</span><span>'./user'</span><span>)</span><span>;</span>
<span>const</span> jim <span>=</span> <span>new</span> <span>User</span><span>(</span><span>'Jim'</span><span>,</span> <span>37</span><span>,</span> <span>'jim@example.com'</span><span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>jim<span>.</span><span>getUserStats</span><span>(</span><span>)</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><h3 id="console-log-module"> console.log(module)</h3>
<p>console.log(module);ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œexportså±æ€§ã€‚</p>
<div><pre><code>Module <span>{</span>
  id<span>:</span> <span>'.'</span><span>,</span>
  path<span>:</span> <span>'f:\\workspace\\MyBlogs\\docs\\guide'</span><span>,</span>
  exports<span>:</span> <span>{</span><span>}</span><span>,</span>
  parent<span>:</span> <span>null</span><span>,</span>
  filename<span>:</span> <span>'f:\\workspace\\MyBlogs\\docs\\guide\\index.js'</span><span>,</span>
  loaded<span>:</span> <span>false</span><span>,</span>
  children<span>:</span> <span>[</span>
    Module <span>{</span>
      id<span>:</span> <span>'f:\\workspace\\MyBlogs\\docs\\guide\\test.js'</span><span>,</span>
      path<span>:</span> <span>'f:\\workspace\\MyBlogs\\docs\\guide'</span><span>,</span>
      exports<span>:</span> <span>[</span>Object<span>]</span><span>,</span>
      parent<span>:</span> <span>[</span>Circular<span>]</span><span>,</span>
      filename<span>:</span> <span>'f:\\workspace\\MyBlogs\\docs\\guide\\test.js'</span><span>,</span>
      loaded<span>:</span> <span>true</span><span>,</span>
      children<span>:</span> <span>[</span><span>]</span><span>,</span>
      paths<span>:</span> <span>[</span>Array<span>]</span>
    <span>}</span>
  <span>]</span><span>,</span>
  paths<span>:</span> <span>[</span>
    <span>'f:\\workspace\\MyBlogs\\docs\\guide\\node_modules'</span><span>,</span>
    <span>'f:\\workspace\\MyBlogs\\docs\\node_modules'</span><span>,</span>
    <span>'f:\\workspace\\MyBlogs\\node_modules'</span><span>,</span>
    <span>'f:\\workspace\\node_modules'</span><span>,</span>
    <span>'f:\\node_modules'</span>
  <span>]</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><h2 id="ä¸‰ä¸ªç‚¹"> ä¸‰ä¸ªç‚¹(<code>...</code>)</h2>
<p>jsä¸­çš„<code>...</code>æœ‰ä¸¤ç§æ„æ€ã€‚<br>
åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­--å‰©ä½™å‚æ•°</p>
<div><pre><code><span>function</span> <span>myFunc</span><span>(</span><span>x<span>,</span> y<span>,</span> <span>...</span>args</span><span>)</span>
<span>{</span>
  console<span>.</span><span>log</span><span>(</span>x<span>)</span><span>;</span>
  console<span>.</span><span>log</span><span>(</span>y<span>)</span><span>;</span>
  console<span>.</span><span>log</span><span>(</span>args<span>)</span><span>;</span>
<span>}</span>

<span>myFunc</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>)</span><span>;</span> <span>// output: 1, 2, [3, 4, 5, 6]</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>spread operator -- å±•å¼€æ“ä½œç¬¦<br>
å±•å¼€å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ </p>
<div><pre><code><span>const</span> featured <span>=</span> <span>[</span><span>'Deep Dish'</span><span>,</span> <span>'Pepperoni'</span><span>,</span> <span>'Hawaiian'</span><span>]</span><span>;</span>
<span>const</span> specialty <span>=</span> <span>[</span><span>'Meatzza'</span><span>,</span> <span>'Spicy Mama'</span><span>,</span> <span>'Margherita'</span><span>]</span><span>;</span>

<span>const</span> pizzas <span>=</span> <span>[</span><span>...</span>featured<span>,</span> <span>'veg pizza'</span><span>,</span> <span>...</span>specialty<span>]</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>pizzas<span>)</span><span>;</span> <span>// 'Deep Dish', 'Pepperoni', 'Hawaiian', 'veg pizza', 'Meatzza', 'Spicy Mama', 'Margherita'</span>

<span>var</span> obj1 <span>=</span> <span>{</span> foo<span>:</span> <span>'bar'</span><span>,</span> x<span>:</span> <span>42</span> <span>}</span><span>;</span>
<span>var</span> obj2 <span>=</span> <span>{</span> foo<span>:</span> <span>'baz'</span><span>,</span> y<span>:</span> <span>13</span> <span>}</span><span>;</span>

<span>var</span> clonedObj <span>=</span> <span>{</span> <span>...</span>obj1 <span>}</span><span>;</span>
<span>// Object { foo: "bar", x: 42 }</span>

<span>var</span> mergedObj <span>=</span> <span>{</span> <span>...</span>obj1<span>,</span> <span>...</span>obj2 <span>}</span><span>;</span>
<span>// Object { foo: "baz", x: 42, y: 13 }</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h2 id="caller-callee"> caller &amp; callee</h2>
<ul>
<li>JSä¸­å‡½æ•°æ˜¯å¯¹è±¡ï¼Œå‡½æ•°åæ˜¯æŒ‡é’ˆï¼Œå‡½æ•°å‚æ•°ç”¨argumentsæ•°ç»„ä¿å­˜ã€‚</li>
<li>arguments.calleeæ˜¯ä¸€ä¸ªæŒ‡å‘æ‹¥æœ‰è¯¥argumentså¯¹è±¡çš„å‡½æ•°çš„æŒ‡é’ˆã€‚é€šå¸¸ç”¨äºè§£è€¦å‡½æ•°å’Œå‡½æ•°åã€‚</li>
<li>functionName.callerä¸­ä¿å­˜ç€è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°çš„å¼•ç”¨ï¼Œå¦‚æœæ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è°ƒç”¨ï¼Œåˆ™ä¸ºnullã€‚</li>
</ul>
<h2 id="apply-call-bind-this"> apply &amp; call &amp; bind &amp; this</h2>
<ul>
<li>thiså¼•ç”¨çš„æ˜¯å‡½æ•°æ‰§è¡Œæ—¶çš„ç¯å¢ƒå¯¹è±¡(å…¨å±€å¯¹è±¡windowï¼Œæˆ–æŸä¸ªå‡½æ•°å¯¹è±¡)ã€‚ä½¿ç”¨varå£°æ˜çš„å˜é‡ä¼šè¢«æ·»åŠ åˆ°æœ€è¿‘çš„ç¯å¢ƒä¸­ã€‚ä¸åŠ varå£°æ˜çš„å˜é‡ä¼šè¢«æ·»åŠ åˆ°å…¨å±€ç¯å¢ƒä¸­ã€‚</li>
<li>applyå’Œcallå¯ä»¥ç”¨äºä¼ é€’å‚æ•°ï¼Œå¯ä»¥å›ºå®šéƒ¨åˆ†å‚æ•°ã€‚ä½†çœŸæ­£å¼ºå¤§çš„åœ°æ–¹æ˜¯èƒ½é€š<strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>ä¿®æ”¹thiså¯¹è±¡ç»‘å®šï¼Œæ‰©å……å‡½æ•°çš„ä½œç”¨åŸŸï¼Œè¿™ç§æ‰©å……ä½œç”¨åŸŸçš„æ–¹å¼ï¼Œä¸éœ€è¦å¯¹è±¡å’Œæ–¹æ³•æœ‰ä»»ä½•è€¦åˆå…³ç³»ã€‚</li>
<li>bindä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°å®ä¾‹ï¼Œå…¶thiså€¼ä¼šè¢«ç»‘å®šåˆ°ä¼ ç»™bindçš„å‚æ•°ã€‚</li>
</ul>
<div><pre><code><span>// ä¼ å‚æ•°</span>
<span>function</span> <span>sum</span><span>(</span><span>num1<span>,</span> num2</span><span>)</span> <span>{</span>
    <span>return</span> num1 <span>+</span> num2<span>;</span>
<span>}</span>

<span>function</span> <span>callSum1</span><span>(</span><span>num1<span>,</span> num2</span><span>)</span> <span>{</span>
    <span>return</span> <span>sum</span><span>.</span><span>apply</span><span>(</span><span>this</span><span>,</span> arguments<span>)</span>
<span>}</span>

<span>function</span> <span>callSum2</span><span>(</span><span>num1</span><span>)</span> <span>{</span>
    <span>return</span> <span>sum</span><span>.</span><span>apply</span><span>(</span><span>this</span><span>,</span> <span>[</span>num1<span>,</span> <span>5</span><span>]</span><span>)</span>
<span>}</span>

<span>function</span> <span>callSum3</span><span>(</span><span>num1<span>,</span> num2</span><span>)</span> <span>{</span>
    <span>return</span> <span>sum</span><span>.</span><span>call</span><span>(</span><span>this</span><span>,</span> num1<span>,</span> num2<span>)</span>
<span>}</span>

<span>var</span> bindSum <span>=</span> <span>sum</span><span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p>ä¿®æ”¹ç»‘å®š</p>
<div><pre><code><span>var</span> o <span>=</span> <span>{</span> color<span>:</span> <span>'blue'</span> <span>}</span>
<span>var</span> color <span>=</span> <span>'red'</span>

<span>function</span> <span>sayColor</span><span>(</span><span>)</span><span>{</span>
  <span>alert</span><span>(</span><span>this</span><span>.</span>color<span>)</span> <span>// red</span>
<span>}</span>

<span>var</span> objColor <span>=</span> <span>sayColor</span><span>.</span><span>bind</span><span>(</span>o<span>)</span>
<span>objColor</span><span>(</span><span>)</span> <span>// blue</span>

<span>sayColor</span><span>.</span><span>apply</span><span>(</span>o<span>)</span> <span>// blue</span>
<span>sayColor</span><span>.</span><span>call</span><span>(</span>o<span>)</span> <span>// blue</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="æ­£åˆ™"> æ­£åˆ™</h2>
<p>è¯­æ³•å¦‚ä¸‹</p>
<div><pre><code><span>var</span> text <span>=</span> <span>"mom and dad and baby"</span>
<span>var</span> pattern <span>=</span> <span><span>/</span><span>mom( and dad( and baby)?)?</span><span>/</span><span>gi</span></span>  <span>// /pattern/flagsã€‚äº§ç”Ÿä¸€ä¸ªRegExå¯¹è±¡ã€‚</span>
<span>var</span> matches <span>=</span> pattern<span>.</span><span>exec</span><span>(</span>text<span>)</span> <span>// pattern.exec(text) === text.match(pattern)</span>
console<span>.</span><span>log</span><span>(</span>matches<span>.</span>index<span>)</span> <span>// åŒ¹é…é¡¹ä½ç½®ï¼š0</span>
console<span>.</span><span>log</span><span>(</span>matches<span>.</span>input<span>)</span> <span>// è¾“å…¥å­—ç¬¦ä¸²ï¼šmom and dad and baby</span>
console<span>.</span><span>log</span><span>(</span>matches<span>[</span><span>0</span><span>]</span><span>)</span> <span>// æ¨¡å¼åŒ¹é…åˆ°çš„å­ä¸²</span>
console<span>.</span><span>log</span><span>(</span>matches<span>[</span><span>1</span><span>]</span><span>)</span> <span>// æ•è·ç»„1 (æ•è·ç»„ï¼Œå³æ­£åˆ™ä¸­æ‹¬å·å†…çš„éƒ¨åˆ†ï¼Œå¦‚æœæ²¡åŒ¹é…ä¸Šï¼Œåˆ™ä¸ºundefined)</span>
console<span>.</span><span>log</span><span>(</span>matches<span>[</span><span>2</span><span>]</span><span>)</span> <span>// æ•è·ç»„2 </span>
<span>// å¦‚æœæ²¡æœ‰æ•è·ç»„ï¼Œåˆ™matchesåªæœ‰ç¬¬ä¸€é¡¹</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><h2 id="json"> JSON</h2>
<ul>
<li>JSON.stringify(obj, filter, indentOption):æŠŠJavaScriptå¯¹è±¡åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ã€‚åªæœ‰æ•°æ®ï¼Œä¸åŒ…æ‹¬æ–¹æ³•ã€‚
<ul>
<li>filterå¯ä»¥æ˜¯æ•°ç»„ï¼ŒåŒ…å«è¦åºåˆ—åŒ–çš„å±æ€§ï¼Œä¸å†å…¶å†…çš„å±æ€§åºåˆ—åŒ–æ—¶è¢«å¿½ç•¥ã€‚</li>
<li>filterä¹Ÿå¯ä»¥æ˜¯å‡½æ•°<code>function(key, value) {}</code>ï¼Œå°†åœ¨æ¯ä¸ªé”®å€¼å¯¹ä¸Šè°ƒç”¨ã€‚é€šå¸¸ä¼šç”¨ä¸€ä¸ªswitchè¯­å¥æ¥åˆ†åˆ«å†³å®šå¦‚ä½•å¤„ç†ä¸åŒçš„å±æ€§ã€‚å‡½æ•°çš„è¿”å›å€¼ä¸ºåºåˆ—åŒ–æ—¶ä½¿ç”¨çš„valueå€¼ã€‚</li>
<li>indentOptionæŒ‡å®šjsonæ–‡ä»¶çš„ç¼©è¿›æ ¼å¼(æ•°å­—è¡¨ç¤ºä»¥å‡ ä¸ªç©ºæ ¼ä¸ºç¼©è¿›)ã€‚</li>
</ul>
</li>
<li>JSON.parse(jsonText, filter):æŠŠJSONå­—ç¬¦ä¸²è§£æä¸ºåŸç”ŸJavaScriptå€¼ã€‚</li>
</ul>
<p>å‡è®¾æŠŠä¸€ä¸ªå¯¹è±¡ä¼ å…¥JSON.stringify()ï¼Œåºåˆ—åŒ–è¯¥å¯¹è±¡çš„é¡ºåºå¦‚ä¸‹</p>
<ol>
<li>å¦‚æœå¯¹è±¡å­˜åœ¨toJSON()æ–¹æ³•è€Œä¸”èƒ½é€šè¿‡å®ƒå–å¾—æœ‰æ•ˆçš„å€¼ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ã€‚å¦åˆ™ï¼Œè¿”å›å¯¹è±¡æœ¬èº«ã€‚</li>
<li>å¦‚æœæä¾›äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œåº”ç”¨è¿™ä¸ªå‡½æ•°è¿‡æ»¤å™¨ã€‚ä¼ å…¥å‡½æ•°è¿‡æ»¤å™¨çš„å€¼ç¬¬(1)æ­¥è¿”å›çš„å€¼ã€‚</li>
<li>å¯¹ç¬¬(2)æ­¥è¿”å›çš„æ¯ä¸ªå€¼è¿›è¡Œç›¸åº”çš„åºåˆ—åŒ–ã€‚</li>
<li>å¦‚æœæä¾›äº†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ‰§è¡Œç›¸åº”çš„æ ¼å¼åŒ–ã€‚</li>
</ol>
<h2 id="proxyå¯¹è±¡"> Proxyå¯¹è±¡</h2>
<p>å¯ä»¥åˆ›å»ºå¦ä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ã€‚æ‹¦æˆªå¹¶é‡æ–°å®šä¹‰å¯¹è±¡çš„åŸºç¡€æ“ä½œï¼Œå¦‚è¯»å†™ã€‚ä½¿ç”¨æ–¹æ³•å’Œå¯¹è±¡ä¸€æ ·ã€‚
ä¸¤ä¸ªå‚æ•°</p>
<ul>
<li>target: ç›®æ ‡å¯¹è±¡</li>
<li>handler: ä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰å“ªäº›æ“ä½œä¼šè¢«æ‹¦æˆªï¼Œå¦‚ä½•é‡å®šä¹‰è¢«æ‹¦æˆªçš„æ“ä½œã€‚</li>
</ul>
<p>PS:Reflectå¯¹è±¡å¯ç”¨äºæŒ‡å®šå¯¹è±¡åŸæ¥çš„æ“ä½œã€‚</p>
<h3 id="åŸºç¡€ç¤ºä¾‹1"> åŸºç¡€ç¤ºä¾‹1</h3>
<div><pre><code><span>const</span> target <span>=</span> <span>{</span>
  message1<span>:</span> <span>"hello"</span><span>,</span>
  message2<span>:</span> <span>"everyone"</span>
<span>}</span><span>;</span>

<span>const</span> handler <span>=</span> <span>{</span>
  <span>get</span><span>:</span> <span>function</span><span>(</span><span>target<span>,</span> prop<span>,</span> receiver</span><span>)</span> <span>{</span>
    <span>// propï¼šæ­£è¦getçš„å±æ€§ï¼Œ receiverï¼šä»£ç†å¯¹è±¡æˆ–ç»§æ‰¿è‡ªä»£ç†çš„å¯¹è±¡</span>
    <span>return</span> <span>"world"</span><span>;</span>
  <span>}</span>
<span>}</span><span>;</span> <span>// è¿™æ ·è®¾ç½®handlerä¹‹åï¼Œæ— è®ºè·å–ä»€ä¹ˆå±æ€§ï¼Œéƒ½åªä¼šè¿”å›"world"</span>

<span>const</span> proxy <span>=</span> <span>new</span> <span>Proxy</span><span>(</span>target<span>,</span> handler<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h3 id="åŸºç¡€ç¤ºä¾‹2"> åŸºç¡€ç¤ºä¾‹2</h3>
<div><pre><code><span>const</span> target <span>=</span> <span>{</span>
  message1<span>:</span> <span>"hello"</span><span>,</span>
  message2<span>:</span> <span>"everyone"</span>
<span>}</span><span>;</span>

<span>const</span> handler <span>=</span> <span>{</span>
  <span>get</span><span>:</span> <span>function</span> <span>(</span><span>target<span>,</span> prop<span>,</span> receiver</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span>prop <span>===</span> <span>"message2"</span><span>)</span> <span>{</span> <span>// åªç‰¹æ®Šå¤„ç†message2å±æ€§</span>
      <span>return</span> <span>"world"</span><span>;</span>
    <span>}</span>
    <span>return</span> Reflect<span>.</span><span>get</span><span>(</span><span>...</span>arguments<span>)</span><span>;</span> <span>// å…¶ä»–å±æ€§æŒ‰åŸå¯¹è±¡æ¥</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>

<span>const</span> proxy <span>=</span> <span>new</span> <span>Proxy</span><span>(</span>target<span>,</span> handler<span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>proxy<span>.</span>message1<span>)</span><span>;</span> <span>// hello</span>
console<span>.</span><span>log</span><span>(</span>proxy<span>.</span>message2<span>)</span><span>;</span> <span>// world</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><h3 id="æ•°ç»„ç¤ºä¾‹"> æ•°ç»„ç¤ºä¾‹</h3>
<div><pre><code><span>let</span> products <span>=</span> <span>new</span> <span>Proxy</span><span>(</span><span>[</span>
  <span>{</span> name<span>:</span> <span>'Firefox'</span><span>,</span> type<span>:</span> <span>'browser'</span> <span>}</span><span>,</span>
  <span>{</span> name<span>:</span> <span>'SeaMonkey'</span><span>,</span> type<span>:</span> <span>'browser'</span> <span>}</span><span>,</span>
  <span>{</span> name<span>:</span> <span>'Thunderbird'</span><span>,</span> type<span>:</span> <span>'mailer'</span> <span>}</span>
<span>]</span><span>,</span>
<span>{</span>
  <span>get</span><span>:</span> <span>function</span><span>(</span><span>obj<span>,</span> prop</span><span>)</span> <span>{</span>
    <span>// The default behavior to return the value; prop is usually an integer</span>
    <span>if</span> <span>(</span>prop <span>in</span> obj<span>)</span> <span>{</span>
      <span>return</span> obj<span>[</span>prop<span>]</span><span>;</span> <span>// products[0]</span>
    <span>}</span>

    <span>// Get the number of products; an alias of products.length</span>
    <span>if</span> <span>(</span>prop <span>===</span> <span>'number'</span><span>)</span> <span>{</span>
      <span>return</span> obj<span>.</span>length<span>;</span> <span>// products.number</span>
    <span>}</span>

    <span>let</span> result<span>,</span> types <span>=</span> <span>{</span><span>}</span><span>;</span>

    <span>for</span> <span>(</span><span>let</span> product <span>of</span> obj<span>)</span> <span>{</span> <span>// products[name]</span>
      <span>if</span> <span>(</span>product<span>.</span>name <span>===</span> prop<span>)</span> <span>{</span>
        result <span>=</span> product<span>;</span>
      <span>}</span>
      <span>if</span> <span>(</span>types<span>[</span>product<span>.</span>type<span>]</span><span>)</span> <span>{</span> <span>// æ ¹æ®typeåˆ†ç±»</span>
        types<span>[</span>product<span>.</span>type<span>]</span><span>.</span><span>push</span><span>(</span>product<span>)</span><span>;</span>
      <span>}</span> <span>else</span> <span>{</span>
        types<span>[</span>product<span>.</span>type<span>]</span> <span>=</span> <span>[</span>product<span>]</span><span>;</span>
      <span>}</span>
    <span>}</span>

    <span>// Get a product by name</span>
    <span>if</span> <span>(</span>result<span>)</span> <span>{</span>
      <span>return</span> result<span>;</span>
    <span>}</span>

    <span>// Get products by type</span>
    <span>if</span> <span>(</span>prop <span>in</span> types<span>)</span> <span>{</span>
      <span>return</span> types<span>[</span>prop<span>]</span><span>;</span>
    <span>}</span>

    <span>// Get product types</span>
    <span>if</span> <span>(</span>prop <span>===</span> <span>'types'</span><span>)</span> <span>{</span>
      <span>return</span> Object<span>.</span><span>keys</span><span>(</span>types<span>)</span><span>;</span>
    <span>}</span>

    <span>return</span> <span>undefined</span><span>;</span>
  <span>}</span>
<span>}</span><span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>products<span>[</span><span>0</span><span>]</span><span>)</span><span>;</span>          <span>// { name: 'Firefox', type: 'browser' }</span>
console<span>.</span><span>log</span><span>(</span>products<span>.</span>number<span>)</span><span>;</span>      <span>// 3</span>
console<span>.</span><span>log</span><span>(</span>products<span>[</span><span>'Firefox'</span><span>]</span><span>)</span><span>;</span>  <span>// { name: 'Firefox', type: 'browser' }</span>
console<span>.</span><span>log</span><span>(</span>products<span>[</span><span>'Chrome'</span><span>]</span><span>)</span><span>;</span>   <span>// undefined</span>
console<span>.</span><span>log</span><span>(</span>products<span>.</span>browser<span>)</span><span>;</span>     <span>// [{ name: 'Firefox', type: 'browser' }, { name: 'SeaMonkey', type: 'browser' }]</span>
console<span>.</span><span>log</span><span>(</span>products<span>.</span>types<span>)</span><span>;</span>       <span>// ['browser', 'mailer']</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">CSS é«˜çº§è¯é¢˜</title>
    <id>https://kigane.github.io/note/js/css-advance/</id>
    <link href="https://kigane.github.io/note/js/css-advance/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯-é˜´å½±å’Œæ··åˆæ¨¡å¼"> èƒŒæ™¯ï¼Œé˜´å½±å’Œæ··åˆæ¨¡å¼</h2>
<p>backgrounpå±æ€§æ˜¯ä»¥ä¸‹8ä¸ªå±æ€§çš„ç®€å†™</p>
<ul>
<li>background-imageâ€”â€”æŒ‡å®šä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç”Ÿæˆçš„é¢œè‰²æ¸å˜ä½œä¸ºèƒŒæ™¯å›¾ç‰‡ã€‚
<ul>
<li>å¯ä»¥æ˜¯ä¸€ä¸ªå›¾ç‰‡urlè·¯å¾„ï¼Œå¦‚url(bg.png)</li>
<li>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ¸å˜å‡½æ•°ï¼Œå¦‚linear-gradient(to-right, white, blue)</li>
</ul>
</li>
<li>background-positionâ€”â€”è®¾ç½®èƒŒæ™¯å›¾ç‰‡çš„åˆå§‹ä½ç½®ã€‚</li>
<li>background-sizeâ€”â€”æŒ‡å®šå…ƒç´ å†…èƒŒæ™¯å›¾ç‰‡çš„æ¸²æŸ“å°ºå¯¸ã€‚</li>
<li>background-repeatâ€”â€”å†³å®šåœ¨éœ€è¦å¡«å……æ•´ä¸ªå…ƒç´ æ—¶ï¼Œæ˜¯å¦å¹³é“ºå›¾ç‰‡ã€‚</li>
<li>background-originâ€”â€”å†³å®šèƒŒæ™¯ç›¸å¯¹äºå…ƒç´ çš„è¾¹æ¡†ç›’ã€å†…è¾¹è·æ¡†ç›’(åˆå§‹å€¼)æˆ–å†…å®¹ç›’å­æ¥å®šä½ã€‚</li>
<li>background-clipâ€”â€”æŒ‡å®šèƒŒæ™¯æ˜¯å¦åº”è¯¥å¡«å……è¾¹æ¡†ç›’(åˆå§‹å€¼)ã€å†…è¾¹è·æ¡†ç›’æˆ–å†…å®¹ç›’å­ã€‚</li>
<li>background-attachmentâ€”â€”æŒ‡å®šèƒŒæ™¯å›¾ç‰‡æ˜¯éšç€å…ƒç´ ä¸Šä¸‹æ»šåŠ¨(åˆå§‹å€¼)ï¼Œè¿˜æ˜¯å›ºå®šåœ¨è§†å£åŒºåŸŸã€‚æ³¨æ„ï¼Œä½¿ç”¨fixedå€¼ä¼šå¯¹é¡µé¢æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</li>
<li>background-colorâ€”â€”æŒ‡å®šçº¯è‰²èƒŒæ™¯ï¼Œæ¸²æŸ“åˆ°èƒŒæ™¯å›¾ç‰‡ä¸‹æ–¹ã€‚</li>
</ul>
<h3 id="æ¸å˜"> æ¸å˜</h3>
<h4 id="linear-gradient"> linear-gradient</h4>
<p>linear-gradientå‡½æ•°ä½¿ç”¨ä¸‰ä¸ªå‚æ•°æ¥å®šä¹‰è¡Œä¸ºï¼šè§’åº¦ã€èµ·å§‹é¢œè‰²å’Œç»ˆæ­¢é¢œè‰²ã€‚ä¾‹å¦‚è§’åº¦å€¼æ˜¯to rightï¼Œæ„æ€æ˜¯æ¸å˜ä»å…ƒç´ çš„å·¦ä¾§å¼€å§‹(èµ·å§‹é¢œè‰²)ï¼Œå¹³æ»‘è¿‡æ¸¡åˆ°å³ä¾§(ç»ˆæ­¢é¢œè‰²)ã€‚</p>
<hr>
<p>æŒ‡å®šæ¸å˜çš„è§’åº¦</p>
<ul>
<li>to rightï¼Œto topï¼Œto bottomï¼Œto bottomrightç­‰</li>
<li>ä½¿ç”¨æ›´ç¡®åˆ‡çš„å•ä½ï¼Œæ›´ç²¾ç¡®åœ°æ§åˆ¶è§’åº¦ã€‚å€¼0degä»£è¡¨å‚ç›´å‘ä¸Šï¼Œæ›´å¤§çš„å€¼ä¼šæ²¿ç€é¡ºæ—¶é’ˆå˜åŒ–
<ul>
<li>degâ€”â€”è§’åº¦</li>
<li>radâ€”â€”å¼§åº¦</li>
<li>turnâ€”â€”ä»£è¡¨ç¯ç»•åœ†å‘¨çš„åœˆæ•°ã€‚å¯ä»¥ä½¿ç”¨å°æ•°æ¥è¡¨ç¤ºä¸è¶³ä¸€åœˆï¼Œæ¯”å¦‚0.25turnç›¸å½“äº90degã€‚</li>
<li>gradâ€”â€”ç™¾åˆ†åº¦(gradian)ã€‚ä¸€ä¸ªå®Œæ•´çš„åœ†æ˜¯400grad,100gradç›¸å½“äº90degã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>æŒ‡å®šæ¸å˜çš„é¢œè‰²èŠ‚ç‚¹</p>
<ul>
<li>ä¸€ä¸ªæ¸å˜å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„é¢œè‰²èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡é€—å·åˆ†éš”ã€‚æ¸å˜ä¼šè‡ªåŠ¨å‡åŒ€åœ°å¹³é“ºè¿™äº›é¢œè‰²èŠ‚ç‚¹ã€‚ä¹Ÿå¯ä»¥åœ¨æ¸å˜å‡½æ•°ä¸­ä¸ºæ¯ä¸ªé¢œè‰²èŠ‚ç‚¹æ˜ç¡®æŒ‡å®šä½ç½®ã€‚ä¾‹å¦‚linear-gradient(90deg, red 0%, white 50%, blue 100%)</li>
<li>æ¡çº¹æ•ˆæœï¼šlinear-gradient(90deg, red 40%, white 40%, white 60%, blue 60%)ã€‚å¦‚æœåœ¨åŒä¸€ä¸ªä½ç½®è®¾ç½®ä¸¤ä¸ªé¢œè‰²èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ¸å˜ä¼šç›´æ¥ä»ä¸€ä¸ªé¢œè‰²å˜æ¢åˆ°å¦ä¸€ä¸ªï¼Œè€Œä¸æ˜¯å¹³æ»‘è¿‡æ¸¡ã€‚å› ä¸ºç¬¬ä¸€ä¸ªé¢œè‰²èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œåœ¨40%çš„ä½ç½®ï¼Œæ‰€ä»¥æ¸å˜ä»å·¦ä¾§è¾¹ç¼˜ä¸€ç›´åˆ°40%æ˜¯çº¯çº¢è‰²ï¼Œæœ€åä¸€ä¸ªé¢œè‰²èŠ‚ç‚¹æ˜¯è“è‰²ï¼Œä¹Ÿæ˜¯åœ¨60%çš„ä½ç½®ï¼Œè¿™æ ·å°±ä¼šç›´æ¥å˜æ¢æˆè“è‰²ï¼Œç„¶åä¸€ç›´åˆ°å³ä¾§è¾¹ç¼˜æ˜¯è“è‰²ã€‚</li>
<li>repeating-linear-gradient(-45deg, #57b, #57b 10px, #148 10px, #148 20px)ã€‚æ¡çº¹è¿›åº¦æ¡ã€‚</li>
</ul>
<h4 id="radial-gradient"> radial-gradient</h4>
<p>å¦ä¸€ç±»æ¸å˜æ˜¯å¾„å‘æ¸å˜ã€‚çº¿æ€§æ¸å˜æ˜¯ä»å…ƒç´ çš„ä¸€ç«¯å¼€å§‹ï¼Œæ²¿ç€ç›´çº¿è¿‡æ¸¡åˆ°å¦ä¸€ç«¯ï¼Œè€Œå¾„å‘æ¸å˜ä¸åŒï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¸å˜åœ¨å…ƒç´ ä¸­æ˜¯ä»ä¸­å¿ƒå¼€å§‹ï¼Œå¹³æ»‘è¿‡æ¸¡åˆ°è¾¹ç¼˜ã€‚æ¸å˜æ•´ä½“å‘ˆæ¤­åœ†å½¢ï¼Œè·Ÿéšå…ƒç´ å¤§å°è¿›è¡Œå˜åŒ–ã€‚</p>
<p>è·Ÿçº¿æ€§æ¸å˜ä¸€æ ·ï¼Œå¾„å‘æ¸å˜åŒæ ·æ”¯æŒé¢œè‰²èŠ‚ç‚¹ã€‚ä½ å¯ä»¥æä¾›å¤šä¸ªèŠ‚ç‚¹ï¼Œä½¿ç”¨ç™¾åˆ†æ¯”æˆ–è€…é•¿åº¦å•ä½æŒ‡å®šèŠ‚ç‚¹ä½ç½®ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠå¾„å‘æ¸å˜è®¾ç½®ä¸ºåœ†å½¢è€Œéæ¤­åœ†ï¼Œç”šè‡³å¯ä»¥æŒ‡å®šæ¸å˜ä¸­å¿ƒç‚¹çš„ä½ç½®ã€‚repeating-radial-gradient()å‡½æ•°å¯ä»¥é‡å¤ç”Ÿæˆå›¾æ ·ï¼Œå½¢æˆåŒå¿ƒåœ†ç¯ã€‚</p>
<p><img src="/assets/img/radial-gradient.png" alt="radial-gradient" /></p>
<h3 id="é˜´å½±"> é˜´å½±</h3>
<p>æœ‰ä¸¤ä¸ªå±æ€§å¯ä»¥åˆ›å»ºé˜´å½±ï¼Œbox-shadowå¯ä»¥ä¸ºå…ƒç´ ç›’å­ç”Ÿæˆé˜´å½±ï¼Œtext-shadowå¯ä»¥ä¸ºæ¸²æŸ“åçš„æ–‡å­—ç”Ÿæˆé˜´å½±ã€‚</p>
<p>box-shadow: x y blur-radius expand-radius shodow-color</p>
<ul>
<li>x æ°´å¹³åç§»</li>
<li>y å‚ç›´åç§»</li>
<li>blur-radius ç”¨æ¥æ§åˆ¶é˜´å½±è¾¹ç¼˜æ¨¡ç³ŠåŒºåŸŸçš„å¤§å°ï¼Œå¯ä»¥ä¸ºé˜´å½±ç”Ÿæˆä¸€ä¸ªæ›´æŸ”å’Œã€æœ‰ç‚¹é€æ˜çš„è¾¹ç¼˜ã€‚</li>
<li>expand-radius ç”¨æ¥æ§åˆ¶é˜´å½±çš„å¤§å°ï¼Œè®¾ç½®ä¸ºæ­£å€¼å¯ä»¥ä½¿é˜´å½±å…¨æ–¹ä½å˜å¤§ï¼Œè®¾ä¸ºè´Ÿå€¼åˆ™ä¼šå˜å°ã€‚</li>
<li>shodow-color é˜´å½±é¢œè‰²</li>
<li>inset å…³é”®å­—ï¼Œè®©é˜´å½±å‡ºç°åœ¨å…ƒç´ å†…éƒ¨</li>
<li>å¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªé˜´å½±ï¼Œç”¨é€—å·åˆ†éš”å³å¯</li>
<li>æ–‡æœ¬é˜´å½±çš„è¯­æ³•ä¹ŸåŸºæœ¬ä¸Šå®Œå…¨ä¸€æ ·ï¼šæ°´å¹³åç§»é‡ã€å‚ç›´åç§»é‡ã€æ¨¡ç³ŠåŠå¾„(å¯é€‰)å’Œé¢œè‰²ã€‚ä½†æ–‡æœ¬é˜´å½±ä¸æ”¯æŒinsetå…³é”®å­—å’Œæ‰©å±•åŠå¾„å€¼ã€‚</li>
</ul>
<div><pre><code><span>.button:active</span> <span>{</span>
    <span>box-shadow</span><span>:</span> inset 0 0 0.5em #124<span>,</span> inset 0 0.5em 1em <span>rgba</span><span>(</span>0<span>,</span>0<span>,</span>0<span>,</span>0.4<span>)</span><span>;</span>
  <span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h3 id="æ··åˆæ¨¡å¼"> æ··åˆæ¨¡å¼</h3>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¸è®ºæ˜¯ä½¿ç”¨çœŸæ­£çš„å›¾ç‰‡è¿˜æ˜¯æ¸å˜ï¼Œå…ƒç´ ä¸€èˆ¬åªä¼šä½¿ç”¨ä¸€å¼ èƒŒæ™¯å›¾ç‰‡ã€‚ä½†æŸäº›æƒ…å†µä¸‹ä½ å¯èƒ½æƒ³è¦ä½¿ç”¨ä¸¤å¼ æˆ–è€…æ›´å¤šçš„èƒŒæ™¯å›¾ç‰‡ï¼ŒCSSæ˜¯æ”¯æŒè¿™ä¹ˆåšçš„ã€‚ä½¿ç”¨å¤šä¸ªèƒŒæ™¯å›¾ç‰‡æ—¶ï¼Œåˆ—è¡¨ä¸­æ’åœ¨å‰é¢çš„å›¾ç‰‡ä¼šæ¸²æŸ“åˆ°æ’åºé åçš„å›¾ç‰‡ä¸Šé¢ã€‚ä¸€èˆ¬æ˜¯å¸Œæœ›ç¬¬äºŒå¼ å›¾ç‰‡ä¹Ÿå¯ä»¥é€è§†æ˜¾ç¤ºã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨æ··åˆæ¨¡å¼(blend mode)ã€‚<br>
<img src="/assets/img/blend-mode.png" alt="blend" /></p>
<div><pre><code><span><span><span>&lt;</span>!doctype</span><span>></span></span>
<span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>blend<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>

<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.blend</span> <span>{</span>
    <span>min-height</span><span>:</span> 400px<span>;</span>
    <span>background-image</span><span>:</span> <span><span>url</span><span>(</span>images/bear.jpg<span>)</span></span><span>,</span> <span><span>url</span><span>(</span>images/bear.jpg<span>)</span></span><span>;</span>
    <span>background-size</span><span>:</span> cover<span>;</span>
    <span>background-repeat</span><span>:</span> no-repeat<span>;</span>
    <span>background-position</span><span>:</span> -30vw<span>,</span> 30vw<span>;</span>
    <span>background-blend-mode</span><span>:</span> multiply<span>;</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h2 id="å¯¹æ¯”-é¢œè‰²å’Œé—´è·"> å¯¹æ¯”ï¼Œé¢œè‰²å’Œé—´è·</h2>
<h3 id="å¯¹æ¯”"> å¯¹æ¯”</h3>
<p>å¯¹æ¯”æ˜¯è®¾è®¡ä¸­çš„ä¸€ç§æ‰‹æ®µï¼Œé€šè¿‡çªå‡ºæŸç‰©æ¥è¾¾åˆ°å¸å¼•æ³¨æ„åŠ›çš„ç›®çš„ã€‚æˆ‘ä»¬çš„çœ¼ç›å’Œæ€ç»´å¤©ç”Ÿå¯¹æ¨¡å¼æ¯”è¾ƒæ•æ„Ÿï¼Œä¸€æ—¦æŸç§ä¸œè¥¿ç ´åäº†æ¨¡å¼çš„æ•´ä½“æ•ˆæœï¼Œæˆ‘ä»¬å°±è‡ªç„¶è€Œç„¶åœ°æ³¨æ„åˆ°äº†å®ƒã€‚<br>
è‹¥è¦èµ·åˆ°å¯¹æ¯”çš„æ•ˆæœï¼Œé¡µé¢å¿…é¡»å…ˆå»ºç«‹æ¨¡å¼ï¼Œå°±å¦‚åŒå¿…é¡»å…ˆæœ‰äº†è§„çŸ©æ‰èƒ½æ‰“ç ´è§„çŸ©ã€‚<br>
æ¨è¿›æ ·å¼ä»£ç å¤ç”¨ï¼Œå°±å¯ä»¥ç¡®ä¿ç½‘ç«™ä¸­ä½¿ç”¨ä¸€è‡´çš„æ¨¡å¼ã€‚å»ºç«‹ç»Ÿä¸€çš„æ¨¡å¼ï¼Œç„¶åæ‰“ç ´æ¨¡å¼ï¼Œçªå‡ºç½‘é¡µä¸Šæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œè¿™æ˜¯ä¸“ä¸šè®¾è®¡å¸ˆçš„ä¸€ä¸ªæ ¸å¿ƒæ€è·¯ã€‚<br>
CTAï¼Œå³Call To Actionçš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§é’ˆå¯¹æ ¸å¿ƒå…ƒç´ çš„è¥é”€æ‰‹æ®µï¼Œå¸Œæœ›å¼•å¯¼ç”¨æˆ·ä½¿ç”¨ã€‚</p>
<h3 id="é¢œè‰²"> é¢œè‰²</h3>
<p>è°ƒè‰²æ¿ï¼šä¸€èˆ¬ä¼šæœ‰ä¸€ç§ä¸»è‰²ï¼Œå…¶ä»–é¢œè‰²åŸºäºä¸»è‰²ã€‚å…¶ä»–é¢œè‰²ä¸€èˆ¬æ˜¯åŒä¸€è‰²ç³»ä¸åŒæ˜æš—åº¦çš„é¢œè‰²ï¼Œè¿˜æœ‰ä¸€äº›è¡¥å……é¢œè‰²ã€‚å¤§éƒ¨åˆ†è°ƒè‰²æ¿ä¹Ÿä¼šæœ‰é»‘è‰²å’Œç™½è‰²ï¼Œä»¥åŠå°‘é‡çš„ç°è‰²ã€‚å› ä¸ºè¿™äº›é¢œè‰²ä¼šåœ¨CSSä¸­å¤šæ¬¡é‡å¤å‡ºç°ï¼Œæ‰€ä»¥å°†å®ƒä»¬æŒ‡å®šä¸ºå˜é‡å¯ä»¥èŠ‚çœå¾ˆå¤šæ—¶é—´</p>
<p>é¢œè‰²è¡¨ç¤ºæ³•ï¼š</p>
<ul>
<li>åå…­è¿›åˆ¶è¡¨ç¤ºæ³•ï¼š#fffffff,#000</li>
<li>rgb(), rgba()ï¼šæè¿°çº¢ã€ç»¿ã€è“å½©è‰²å€¼çš„é¢œè‰²è¡¨ç¤ºæ³•ï¼Œä½¿ç”¨åè¿›åˆ¶è€Œéåå…­è¿›åˆ¶ã€‚å–å€¼èŒƒå›´ä¸º0-255ã€‚</li>
<li>hsl(), hsla()ï¼šæ˜¯ä¸€ç§æ›´é€‚åˆäººç±»è¯»å–çš„é¢œè‰²è¡¨ç¤ºæ³•ã€‚éœ€è¦3ä¸ªå‚æ•°ã€‚
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè‰²ç›¸ï¼Œæ˜¯ä¸€ä¸ª0~359çš„æ•´æ•°å€¼ã€‚è¿™ä»£è¡¨è‰²ç›¸ç¯ä¸Šçš„360åº¦ï¼Œä»çº¢è‰²(0)ã€é»„è‰²(60)ã€ç»¿è‰²(120)ã€é’è‰²(180)ã€è“è‰²(240)ã€æ´‹çº¢è‰²(300)ä¾æ¬¡è¿‡æ¸¡ï¼Œæœ€åå›åˆ°çº¢è‰²ã€‚</li>
<li>ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºé¥±å’Œåº¦ï¼Œæ˜¯ä¸€ä¸ªä»£è¡¨è‰²å½©å¼ºåº¦çš„ç™¾åˆ†æ•°ï¼Œ100%çš„æ—¶å€™é¢œè‰²æœ€é²œè‰³ï¼Œ0%å°±æ„å‘³ç€æ²¡æœ‰å½©è‰²ï¼Œåªæ˜¯ä¸€ç‰‡ç°è‰²ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºæ˜åº¦ï¼Œä¹Ÿæ˜¯ç™¾åˆ†æ•°ï¼Œä»£è¡¨é¢œè‰²æœ‰å¤šäº®(æˆ–è€…å¤šæš—)ã€‚å¤§éƒ¨åˆ†é²œè‰³çš„é¢œè‰²æ˜¯ä½¿ç”¨50%çš„æ˜åº¦å€¼ã€‚æ˜åº¦å€¼è®¾ç½®å¾—è¶Šé«˜ï¼Œé¢œè‰²è¶Šæµ…ï¼Œ100%å°±æ˜¯çº¯ç™½è‰²ï¼›è®¾ç½®å¾—è¶Šä½ï¼Œé¢œè‰²è¶Šæš—ï¼Œ0%å°±æ˜¯é»‘è‰²ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>ä¸ºæŸç§é¢œè‰²å¯»æ‰¾ä¸€ä¸ªæ­é…çš„é¢œè‰²ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯æ‰¾åˆ°å®ƒçš„è¡¥è‰²(complement)ã€‚è¡¥è‰²ä½äºè‰²ç›¸ç¯çš„å¯¹ä¾§ä½ç½®ï¼Œè“è‰²çš„è¡¥è‰²æ˜¯é»„è‰²ï¼›ç»¿è‰²çš„è¡¥è‰²æ˜¯ç´«è‰²ï¼›çº¢è‰²çš„è¡¥è‰²æ˜¯é’è‰²ã€‚ä½¿ç”¨HSLé¢œè‰²å€¼æ—¶ï¼Œè®¡ç®—è¡¥è‰²éå¸¸ç®€å•ï¼Œä¸ºè‰²ç›¸å€¼åŠ ä¸Šæˆ–è€…å‡å»180å³å¯ã€‚</p>
<p>æ£€æŸ¥èƒŒæ™¯å’Œæ–‡æœ¬çš„å¯¹æ¯”åº¦æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚<a href="https://contrast-ratio.com/" target="_blank" rel="noopener noreferrer">CSS colorcontrast checker: contrast-ratio</a></p>
<h3 id="é—´è·"> é—´è·</h3>
<p>è¿™éƒ¨åˆ†å·¥ä½œé‡Œçš„å¤§å¤šæ•°å†…å®¹å¯ä»¥ç®€å•å½’ç»“ä¸ºæ­£ç¡®è®¾ç½®å…ƒç´ çš„å¤–è¾¹è·ã€‚ä¸€èˆ¬ä»æœ€å®¹æ˜“çš„åœ°æ–¹å¼€å§‹ï¼Œå“ªæ€•åé¢å¯èƒ½éœ€è¦å†åšä¸€äº›è°ƒæ•´ã€‚<br>
æˆ‘ä»¬éœ€è¦æ€è€ƒä¸¤ä»¶äº‹æƒ…ï¼Œä¸€ä¸ªæ˜¯æ˜¯å¦éœ€è¦ä½¿ç”¨ç›¸å¯¹å•ä½ï¼Œå¦ä¸€ä¸ªæ˜¯è¡Œé«˜å¦‚ä½•å½±å“å‚ç›´é—´è·ã€‚</p>
<p>ä½¿ç”¨ç»å¯¹å•ä½ä¼šæ¯”è¾ƒå®¹æ˜“ï¼Œä½†æ˜¯ä½¿ç”¨ç›¸å¯¹å•ä½ä¼šæœ‰å¾ˆå¤šå¥½å¤„ï¼Œä¸è®ºemè¿˜æ˜¯rem(æ›´æœ‰å¼¹æ€§ï¼Œå“åº”å¼)ã€‚</p>
<p>åœ¨ç›’æ¨¡å‹ä¸­ï¼Œå…ƒç´ çš„å†…å®¹ç›’å­ä¸ºå†…è¾¹è·æ‰€ç¯ç»•ï¼Œç„¶åæ˜¯è¾¹æ¡†ï¼Œæœ€åæ˜¯å¤–è¾¹è·ã€‚ä½†æ˜¯å¯¹äºæ®µè½å’Œæ ‡é¢˜è¿™æ ·çš„å…ƒç´ ï¼Œå†…å®¹ç›’å­å¹¶ä¸æ˜¯åªæœ‰æ˜¾ç¤ºå‡ºæ¥çš„æ–‡å­—åŒºåŸŸï¼Œå…ƒç´ çš„è¡Œé«˜å†³å®šäº†å†…å®¹ç›’å­æœ€ç»ˆçš„é«˜åº¦ï¼Œè¿™è¦è¶…å‡ºå­—ç¬¦çš„é¡¶éƒ¨å’Œåº•éƒ¨ã€‚
<img src="/assets/img/line-height.png" alt="è¡Œé«˜" /><br>
ç½‘é¡µé‡Œçš„è¡Œé«˜è®¾ä¸º1.4ã€‚åªæœ‰ä¸€è¡Œæ–‡å­—çš„å…ƒç´ ï¼Œå†…å®¹ç›’å­çš„é«˜åº¦å°±æ˜¯1.4emï¼Œæ–‡å­—åœ¨å†…éƒ¨å‚ç›´å±…ä¸­ã€‚å­—å·æ˜¯16pxï¼Œå†…å®¹ç›’å­çš„æœ€ç»ˆé«˜åº¦å°±æ˜¯22.4pxã€‚é¢å¤–çš„6.4pxå¹³å‡åˆ†é…åˆ°æ–‡å­—çš„ä¸Šæ–¹å’Œä¸‹æ–¹ã€‚</p>
<p>å¦‚æœä¸ºè¡Œå†…å…ƒç´ æ·»åŠ å†…è¾¹è·ï¼Œå…ƒç´ æœ¬èº«ä¼šå˜é«˜ï¼Œå´ä¸ä¼šå¢åŠ æ–‡æœ¬è¡Œçš„é«˜åº¦ã€‚æ–‡æœ¬è¡Œçš„é«˜åº¦åªç”±è¡Œé«˜æ¥å†³å®šã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦å¢åŠ æ¯é¡¹çš„è¡Œé«˜ã€‚å¦‚æœä¸€ä¸ªå…ƒç´ æ˜¯å¼¹æ€§å­å…ƒç´ ï¼ˆæˆ–è€…è¡Œå†…å—çº§å…ƒç´ ï¼‰ï¼Œä¸ºäº†å®¹çº³å®ƒï¼Œå…¶æ‰€åœ¨çš„è¡Œä¼šéšä¹‹å¢é«˜ã€‚</p>
<p><strong>ç‰¢è®°è¡Œé«˜å¯ä»¥å½±å“å‚ç›´é—´è·</strong>ã€‚</p>
<h2 id="æ’ç‰ˆ"> æ’ç‰ˆ</h2>
<h3 id="webå­—ä½“"> Webå­—ä½“</h3>
<p>é€šè¿‡åœ¨çº¿æœåŠ¡ä½¿ç”¨Webå­—ä½“æ˜¯æœ€ç®€å•ä¹Ÿæœ€æ™®éçš„æ–¹å¼ã€‚è°·æ­Œå­—ä½“æœ‰å¾ˆå¤šé«˜è´¨é‡å¹¶ä¸”å¼€æºçš„å­—ä½“(è¿˜å…è´¹)ï¼Œå»ºè®®ä½¿ç”¨ã€‚<br>
é€‰ä¸­å­—ä½“åï¼Œå¤åˆ¶linkæ ‡ç­¾å¹¶æ·»åŠ åˆ°é¡µé¢çš„headé‡Œï¼Œè¿™æ ·å°±ä¸ºé¡µé¢æ·»åŠ äº†ä¸€ä¸ªåŒ…å«å­—ä½“æè¿°çš„æ ·å¼è¡¨ã€‚è°·æ­Œé€šè¿‡æ ·å¼è¡¨ä¸ºé¡µé¢é…ç½®å¥½äº†Webå­—ä½“éœ€è¦çš„è®¾ç½®ï¼Œç„¶åå°±å¯ä»¥åœ¨è‡ªå·±çš„æ ·å¼è¡¨ä¸­éšæ„ä½¿ç”¨Webå­—ä½“äº†ã€‚éœ€è¦ä½¿ç”¨font-familyå±æ€§æ¥æŒ‡å®šå­—ä½“ã€‚</p>
<div><p>å…³äºserif</p>
<p>Serifâ€”â€”å­—æ¯ç¬”ç”»æœ«ç«¯çš„å°çº¿æ¡æˆ–è€…â€œçˆªçŠ¶â€è£…é¥°ã€‚åŒ…å«serifçš„å­—ä½“å°±è¢«ç§°ä¸ºserifå­—ä½“ï¼ˆä¾‹å¦‚Times New Romanï¼‰ã€‚å¦‚æœæ²¡æœ‰serifï¼Œé‚£å°±æ˜¯sans-serifå­—ä½“ï¼ˆä¾‹å¦‚Helveticaï¼‰ã€‚</p>
</div>
<div><p>å­—å‹å’Œå­—ä½“</p>
<p>å­—å‹ï¼ˆtypefaceï¼‰å’Œå­—ä½“ï¼ˆfontï¼‰è¿™ä¸¤ä¸ªæœ¯è¯­ç»å¸¸è¢«æ··ä¸ºä¸€è°ˆã€‚å­—å‹é€šå¸¸æ˜¯æŒ‡å­—ä½“ï¼ˆæ¯”å¦‚Robotoï¼‰çš„æ•´ä¸ªå®¶æ—ï¼Œä¸€èˆ¬ç”±åŒä¸€ä¸ªè®¾è®¡å¸ˆåˆ›é€ ã€‚ä¸€ç§å­—å‹å¯èƒ½ä¼šå­˜åœ¨å¤šç§å˜ä½“å’Œå­—é‡ï¼ˆæ¯”å¦‚ç»†ä½“ã€ç²—ä½“ã€æ–œä½“ã€å‹ç¼©ï¼Œç­‰ç­‰ï¼‰ï¼Œè¿™äº›å˜ä½“çš„æ¯ä¸€ç§å¯ç§°ä¹‹ä¸ºä¸€ç§å­—ä½“ï¼ˆfontï¼‰ã€‚</p>
</div>
<h3 id="è°ƒæ•´å­—è·"> è°ƒæ•´å­—è·</h3>
<p>line-heightå’Œletter-spacingï¼Œè¿™ä¸¤ä¸ªå±æ€§å¯ä»¥æ§åˆ¶æ–‡æœ¬è¡Œä¹‹é—´çš„è·ç¦»ï¼ˆå‚ç›´æ–¹å‘ï¼‰å’Œå­—ç¬¦ä¹‹é—´çš„è·ç¦»ï¼ˆæ°´å¹³æ–¹å‘ï¼‰ã€‚</p>
<ul>
<li>line-heightå±æ€§çš„åˆå§‹å€¼æ˜¯å…³é”®å­—normalï¼Œå¤§çº¦ç­‰äº1.2ï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå€¼å¤ªå°äº†ã€‚å¯¹äºæ­£æ–‡ä¸»ä½“æ¥è¯´ï¼Œä»‹äº1.4å’Œ1.6ä¹‹é—´çš„å€¼æ¯”è¾ƒç†æƒ³ã€‚</li>
<li>letter-spacingé€šå¸¸ä»0.01emå¼€å§‹æµ‹è¯•ï¼Œç›´åˆ°ä½ æ»¡æ„ä¸ºæ­¢ã€‚</li>
</ul>
<div><p>Tips</p>
<p>æ–‡å­—è¡Œè¶Šé•¿ï¼Œè¡Œé«˜åº”è¯¥è®¾ç½®å¾—è¶Šå¤§ã€‚è¿™æ ·è¯»è€…çš„çœ¼ç›æ‰«åˆ°ä¸‹ä¸€è¡Œçš„æ—¶å€™æ‰æ›´å®¹æ˜“ï¼Œä¸ä¼šæ³¨æ„åŠ›åˆ†æ•£ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯è¡Œæ–‡å­—çš„é•¿åº¦åº”è¯¥æ§åˆ¶åœ¨45ï½75ä¸ªå­—ç¬¦ï¼Œä¸€èˆ¬è®¤ä¸ºè¿™æ ·çš„é•¿åº¦æœ€åˆ©äºé˜…è¯»ã€‚</p>
</div>
<p>åœ¨è®¾è®¡é¢†åŸŸï¼Œæ–‡æœ¬è¡Œä¹‹é—´çš„è·ç¦»ç§°ä¸ºè¡Œè·ï¼ˆleadingï¼Œä¸beddingæœ‰ç‚¹è°éŸ³ï¼‰ï¼Œæ¥æºäºå°åˆ·ç‰ˆæ¯è¡Œæ–‡å­—ä¹‹é—´æ·»åŠ çš„ä¸€æ¡æ¡çš„å¼•å¯¼çº¿ï¼ˆleadï¼‰ã€‚å­—ç¬¦ä¹‹é—´çš„è·ç¦»ç§°ä¹‹ä¸ºå­—è·ï¼ˆtrackingï¼‰ã€‚è¡Œé«˜ä¸€èˆ¬ä½¿ç”¨â€œç‚¹â€ä½œå•ä½æ¥æè¿°ï¼Œæ¯”å¦‚18ptï¼Œä»£è¡¨çš„æ˜¯ä¸€è¡Œæ–‡å­—çš„é«˜åº¦åŠ ä¸Šå®ƒä¸ä¸‹ä¸€è¡Œæ–‡å­—ä¹‹é—´çš„è·ç¦»ã€‚è¿™å®é™…ä¸Šä¸CSSçš„line-heightä¸€æ ·ã€‚ä½ å¿…é¡»é¦–å…ˆæŠŠå®ƒè½¬åŒ–ä¸ºè·Ÿå­—ä½“ä¸€æ ·ä½¿ç”¨åƒç´ å•ä½ï¼Œç„¶åå†è®¡ç®—å‡ºæ— å•ä½æ•°å­—ã€‚æŠŠptå€¼ä¹˜ä»¥1.333ï¼Œå°±å¯ä»¥æŠŠptè½¬åŒ–ä¸ºpxï¼ˆå› ä¸ºæ¯è‹±å¯¸æ˜¯96pxï¼Œå¹¶ä¸”æ¯è‹±å¯¸ç­‰äº72pt, 96/72=1.333ï¼‰ï¼Œå³18ptÃ—1.333=24pxã€‚ç„¶åé™¤ä»¥å­—å·ï¼Œå¾—åˆ°æ— å•ä½çš„è¡Œé«˜å€¼ï¼Œå³24px/16px=1.5ã€‚å­—è·é€šå¸¸ä¼šç»™å®šä¸€ä¸ªå­—æ•°ï¼Œæ¯”å¦‚100ã€‚å› ä¸ºè¿™ä¸ªæ•°å­—è¡¨ç¤º1emçš„åƒåˆ†ä¹‹ä¸€ï¼Œæ‰€ä»¥é™¤ä»¥1000å°±å¯ä»¥è½¬åŒ–æˆemå•ä½ï¼Œå³100/1000=0.1emã€‚</p>
<p>å¯¹äºæ­£æ–‡ä¸»ä½“æ¥è®²ï¼Œè°ƒæ•´é—´è·æ˜¯ä¸ºäº†ä½¿é˜…è¯»ä½“éªŒæ•ˆæœæ›´ä½³ï¼Œä½†å¯¹äºæ ‡é¢˜å’Œå…¶ä»–å†…å®¹å¾ˆå°‘çš„å…ƒç´ ï¼ˆæ¯”å¦‚æŒ‰é’®ï¼‰æ¥è®²ï¼Œå½±å“ä¸å¤§ã€‚è¿™æ—¶å€™é—´è·å¯è°ƒæ•´èŒƒå›´å¤§å¤§å¢åŠ ï¼Œå°±å¯ä»¥å¤šå¤šå‘æŒ¥åˆ›æ„äº†ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°è®¾ç½®å­—ç¬¦é—´è·ï¼Œè®©å­—ç¬¦æ›´ç´§å‡‘ã€‚</p>
<h2 id="è¿‡æ¸¡"> è¿‡æ¸¡</h2>
<h3 id="ä»è¿™è¾¹åˆ°é‚£è¾¹"> ä»è¿™è¾¹åˆ°é‚£è¾¹</h3>
<p>è¿‡æ¸¡æ˜¯é€šè¿‡ä¸€ç³»åˆ—transition-*å±æ€§æ¥å®ç°çš„ã€‚å¦‚æœæŸä¸ªå…ƒç´ è®¾ç½®äº†è¿‡æ¸¡ï¼Œé‚£ä¹ˆå½“å®ƒçš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¹¶ä¸æ˜¯ç›´æ¥å˜æˆæ–°å€¼ï¼Œè€Œæ˜¯ä½¿ç”¨è¿‡æ¸¡æ•ˆæœã€‚</p>
<details><summary>Code</summary>
<p><button>Hover over me</button>
<style>
button {
background-color: hsl(180, 50%, 50%);
border: 0;
color: white;
font-size: 1rem;
padding: .3em 1em;
transition-property: all; /* æ‰€æœ‰å±æ€§å˜åŒ–éƒ½ä½¿ç”¨è¿‡æ¸¡æ•ˆæœ <em>/
transition-duration: 0.5s; /</em> è¿‡æ¸¡æ—¶é—´ */
}
button:hover {
background-color: hsl(0, 50%, 50%);
border-radius: 1em;
}
</style></p>
</details>
<ul>
<li>transition-propertyï¼šæŒ‡å®šå“ªäº›å±æ€§ä½¿ç”¨è¿‡æ¸¡ã€‚</li>
<li>transition-durationï¼šä»£è¡¨è¿‡æ¸¡åˆ°æœ€ç»ˆå€¼ä¹‹å‰éœ€è¦å¤šé•¿æ—¶é—´</li>
<li>å…ƒç´ å±æ€§ä»»ä½•æ—¶å€™å‘ç”Ÿå˜åŒ–éƒ½ä¼šè§¦å‘è¿‡æ¸¡ï¼šå¯ä»¥æ˜¯çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼šhoverï¼›ä¹Ÿå¯ä»¥æ˜¯JavaScriptå¯¼è‡´å˜åŒ–çš„æ—¶å€™ï¼Œæ¯”å¦‚æ·»åŠ æˆ–è€…ç§»é™¤ç±»å½±å“äº†å…ƒç´ çš„æ ·å¼ã€‚</li>
<li>è¿‡æ¸¡å±æ€§è¦è®¾ç½®åœ¨ä¸€ä¸ªå§‹ç»ˆæŒ‡å‘éœ€è¦è¿‡æ¸¡çš„å…ƒç´ çš„é€‰æ‹©å™¨ã€‚å› ä¸ºè™½ç„¶å…¶ä»–å±æ€§å‘ç”Ÿç€å˜åŒ–ï¼Œä½†ä½ è‚¯å®šä¸æƒ³è¿‡æ¸¡å±æ€§æœ¬èº«å‘ç”Ÿå˜åŒ–ã€‚</li>
<li>ç®€å†™å±æ€§transitionï¼š transition:property duration timing-function delay
<ul>
<li>timing-function å®šæ—¶å‡½æ•°ï¼Œç”¨æ¥æ§åˆ¶å±æ€§çš„ä¸­é—´å€¼å¦‚ä½•è®¡ç®—ï¼Œå®é™…ä¸Šæ§åˆ¶çš„æ˜¯è¿‡æ¸¡è¿‡ç¨‹ä¸­å˜åŒ–ç‡å¦‚ä½•åŠ é€Ÿæˆ–è€…å‡é€Ÿã€‚å®šæ—¶å‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå…³é”®å­—å€¼ï¼Œæ¯”å¦‚linearæˆ–è€…ease-inï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰å‡½æ•°ã€‚</li>
<li>delay å»¶è¿Ÿæ—¶é—´</li>
</ul>
</li>
</ul>
<h3 id="å®šæ—¶å‡½æ•°"> å®šæ—¶å‡½æ•°</h3>
<p>è¿‡æ¸¡è®©æŸä¸ªå±æ€§ä»ä¸€ä¸ªå€¼â€œç§»åŠ¨â€åˆ°å¦ä¸€ä¸ªå€¼ï¼Œå®šæ—¶å‡½æ•°ç”¨æ¥è¯´æ˜å¦‚ä½•ç§»åŠ¨ã€‚</p>
<ul>
<li>linearï¼šå€¼ä»¥å›ºå®šçš„é€Ÿåº¦æ”¹å˜</li>
<li>ease-inï¼šå˜åŒ–é€Ÿåº¦å¼€å§‹æ—¶æ…¢ï¼Œç„¶åä¸€ç›´åŠ é€Ÿï¼Œç›´åˆ°è¿‡æ¸¡å®Œæˆ</li>
<li>ease-outï¼šæ˜¯å‡é€Ÿï¼Œå¼€å§‹æ—¶å¿«é€Ÿå˜åŒ–ï¼Œç»“æŸæ—¶æ¯”è¾ƒæ…¢</li>
</ul>
<p>å®šæ—¶å‡½æ•°æ˜¯åŸºäºæ•°å­¦å®šä¹‰çš„è´å¡å°”æ›²çº¿ï¼ˆBÃ©zier curveï¼‰ã€‚æµè§ˆå™¨ä½¿ç”¨è´å¡å°”æ›²çº¿ä½œä¸ºéšæ—¶é—´å˜åŒ–çš„å‡½æ•°ï¼Œæ¥è®¡ç®—æŸä¸ªå±æ€§çš„å€¼ã€‚
<img src="/assets/img/transition-timing-func.png" alt="å®šæ—¶å‡½æ•°" /><br>
è¿™äº›è´å¡å°”æ›²çº¿éƒ½æ˜¯ä»å·¦ä¸‹æ–¹å¼€å§‹ï¼ŒæŒç»­å»¶ä¼¸åˆ°å³ä¸Šæ–¹ã€‚æ—¶é—´æ˜¯ä»å·¦å‘å³é€’è¿›çš„ï¼Œæ›²çº¿ä»£è¡¨æŸä¸ªå€¼åœ¨åˆ°è¾¾æœ€ç»ˆå€¼çš„è¿‡ç¨‹ä¸­æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚</p>
<div><p>è®¾ç½®å®šæ—¶å‡½æ•°</p>
<p>æ‰“å¼€å¼€å‘è€…å·¥å…·å¹¶æ£€æŸ¥æ ·å¼é¢æ¿ä¸­çš„å®šæ—¶å‡½æ•°ï¼Œæ—è¾¹æœ‰ä¸€ä¸ªå°å°çš„æ ‡å¿—ç¬¦å·ã€‚ç‚¹å‡»æ ‡å¿—ç¬¦å·ä¼šæ‰“å¼€ä¸€ä¸ªå¼¹çª—ï¼Œå¯ä»¥åœ¨å¼¹çª—ä¸­ä¿®æ”¹å®šæ—¶å‡½æ•°çš„æ›²çº¿ã€‚</p>
</div>
<div><p>è¿‡æ¸¡æ—¶é—´</p>
<p>æŒ‰ç…§ç»éªŒæ¥è®²ï¼Œå¤§éƒ¨åˆ†çš„è¿‡æ¸¡æŒç»­æ—¶é—´åº”è¯¥å¤„äº200ï½500msã€‚æ—¶é—´å¦‚æœå†é•¿ï¼Œç”¨æˆ·å°±ä¼šæ„Ÿè§‰é¡µé¢å˜å¾—å¡æ…¢ï¼Œé¡µé¢å“åº”è®©ä»–ä»¬äº§ç”Ÿäº†æ— è°“çš„ç­‰å¾…ï¼Œå°¤å…¶æ˜¯é¢å¯¹é‚£äº›ç»å¸¸æˆ–è€…é‡å¤ä½¿ç”¨çš„è¿‡æ¸¡ç‰¹æ•ˆæ—¶ã€‚<br>
å¯¹äºé¼ æ ‡æ‚¬åœã€æ·¡å…¥æ·¡å‡ºå’Œè½»å¾®ç¼©æ”¾ç‰¹æ•ˆï¼Œåº”è¯¥ä½¿ç”¨è¾ƒå¿«çš„è¿‡æ¸¡é€Ÿåº¦ã€‚ä¸€èˆ¬è¦æ§åˆ¶åœ¨300msä»¥ä¸‹ï¼Œæœ‰æ—¶å€™ç”šè‡³å¯èƒ½è¦ä½åˆ°100msã€‚å¯¹äºé‚£äº›åŒ…å«è¾ƒå¤§ç§»åŠ¨æˆ–è€…å¤æ‚å®šæ—¶å‡½æ•°çš„è¿‡æ¸¡ï¼Œæ¯”å¦‚å¼¹è·³ç‰¹æ•ˆï¼Œè¦ä½¿ç”¨è¾ƒé•¿çš„300ï½500msçš„æŒç»­æ—¶é—´ã€‚</p>
</div>
<div><p>é€‰æ‹©å®šæ—¶å‡½æ•°</p>
<p>å¯ä»¥åœ¨ä¸‹åˆ—åœºæ™¯ä¸­åˆ†åˆ«ä½¿ç”¨è¿™ä¸‰ç§å‡½æ•°ã€‚</p>
<ul>
<li>çº¿æ€§â€”â€”é¢œè‰²å˜åŒ–å’Œæ·¡å‡ºã€æ·¡å…¥æ•ˆæœã€‚</li>
<li>å‡é€Ÿâ€”â€”ç”¨æˆ·å‘èµ·çš„å˜åŒ–ã€‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æˆ–è€…åˆ’è¿‡å…ƒç´ çš„æ—¶å€™ï¼Œä½¿ç”¨ease-outæˆ–è€…ç±»ä¼¼æ›²çº¿ã€‚è¿™æ ·ç”¨æˆ·å°±å¯ä»¥çœ‹åˆ°å¿«é€Ÿå‘ç”Ÿçš„åé¦ˆï¼ŒåŠæ—¶å“åº”è¾“å…¥ï¼Œç„¶åå…ƒç´ æ…¢æ…¢è¿‡æ¸¡åˆ°æœ€ç»ˆçŠ¶æ€ã€‚</li>
<li>åŠ é€Ÿâ€”â€”ç³»ç»Ÿå‘èµ·çš„å˜åŒ–ã€‚å½“å†…å®¹åŠ è½½å®Œæˆæˆ–è€…è¶…æ—¶äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä½¿ç”¨ease-inæˆ–è€…ç±»ä¼¼æ›²çº¿ã€‚è¿™æ ·å…ƒç´ å°±å¯ä»¥æ…¢æ…¢å¼•èµ·ç”¨æˆ·æ³¨æ„ï¼Œç„¶åé€Ÿåº¦è¶Šæ¥è¶Šå¿«ç›´åˆ°å®Œæˆæœ€ç»ˆå˜åŒ–ã€‚</li>
</ul>
</div>
<hr>
<p>å¦ä¸€ç§å®šæ—¶å‡½æ•°--é˜¶è·ƒsteps()<br>
é˜¶è·ƒå‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼šé˜¶è·ƒæ¬¡æ•°å’Œä¸€ä¸ªç”¨æ¥è¡¨ç¤ºæ¯æ¬¡å˜åŒ–å‘ç”Ÿåœ¨é˜¶è·ƒçš„å¼€å§‹è¿˜æ˜¯ç»“æŸçš„å…³é”®è¯ï¼ˆstartæˆ–è€…endï¼‰<br>
<img src="/assets/img/step-func.png" alt="é˜¶è·ƒå‡½æ•°" /><br>
ç¬¬äºŒä¸ªå‚æ•°çš„é»˜è®¤å€¼æ˜¯endï¼Œæ‰€ä»¥steps(3)ç­‰äºsteps(3, end)ã€‚</p>
<h3 id="åˆ›å»ºä¸‹æ‹‰èœå•å¹¶æ·»åŠ è¿‡æ¸¡æ•ˆæœ"> åˆ›å»ºä¸‹æ‹‰èœå•å¹¶æ·»åŠ è¿‡æ¸¡æ•ˆæœ</h3>
<p>ä½¿ç”¨é€æ˜åº¦çš„è¿‡æ¸¡ä¸ºä¸‹æ‹‰èœå•çš„æ‰“å¼€å’Œé—­åˆæ·»åŠ æ·¡å…¥æ·¡å‡ºç‰¹æ•ˆã€‚</p>
<div><pre><code><span>.dropdown__drawer</span> <span>{</span>
    <span>position</span><span>:</span> absolute<span>;</span>
    <span>background-color</span><span>:</span> white<span>;</span>
    <span>width</span><span>:</span> 10em<span>;</span>
    <span>opacity</span><span>:</span> 0<span>;</span>
    <span>visibility</span><span>:</span> hidden<span>;</span>
    <span>transition</span><span>:</span> opacity 0.2s linear<span>,</span> <span>/* é€æ˜åº¦è¿‡æ¸¡æ•ˆæœ--æ·¡å‡º */</span>
                visibility 0s linear 0.2s<span>;</span> <span>/* æ·¡å‡ºæ—¶ï¼Œå¯è§æ€§åœ¨é€æ˜åº¦è¿‡æ¸¡å®Œæˆæ—¶å†å˜åŒ– */</span>
<span>}</span>
<span>.dropdown.is-open .dropdown__drawer</span> <span>{</span>
    <span>opacity</span><span>:</span> 1<span>;</span>
    <span>visibility</span><span>:</span> visible<span>;</span>
    <span>transition-delay</span><span>:</span> 0s<span>;</span> <span>/* èœå•æ·¡å…¥æ—¶ï¼Œå¯è§æ€§è¦ç«‹å³å˜åŒ–ï¼Œå¦åˆ™çœ‹ä¸åˆ°æ·¡å…¥æ•ˆæœ */</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><p>visibilityå±æ€§å¯ä»¥ä»é¡µé¢ä¸Šç§»é™¤æŸä¸ªå…ƒç´ ï¼Œæœ‰ç‚¹ç±»ä¼¼äºdisplayå±æ€§ï¼Œåˆ†åˆ«è®¾ç½®visibleå’Œhiddenå³å¯ã€‚ä½†è·Ÿdisplayä¸åŒçš„æ˜¯ï¼Œvisibilityå¯ä»¥æ”¯æŒåŠ¨ç”»ã€‚ä¸ºå®ƒè®¾ç½®è¿‡æ¸¡ä¸ä¼šä½¿å…¶é€æ¸æ¶ˆå¤±ï¼Œä½†transition-delayå¯ä»¥ç”Ÿæ•ˆï¼Œè€Œåœ¨displayå±æ€§ä¸Šæ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚<br>
ä¸ºæŸä¸ªå…ƒç´ è®¾ç½®visibility: hiddenå¯ä»¥ä»å¯è§é¡µé¢ä¸­ç§»é™¤è¯¥å…ƒç´ ï¼Œä½†ä¸ä¼šä»æ–‡æ¡£æµä¸­ç§»é™¤å®ƒï¼Œè¿™å°±æ„å‘³ç€è¯¥å…ƒç´ ä»ç„¶å ä½ã€‚å…¶ä»–å…ƒç´ ä¼šç»§ç»­å›´ç»•è¯¥å…ƒç´ çš„ä½ç½®å¸ƒå±€ï¼Œåœ¨é¡µé¢ä¸Šä¿ç•™ä¸€ä¸ªç©ºç™½åŒºåŸŸã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸ä¼šå½±å“åˆ°èœå•ï¼Œå› ä¸ºæˆ‘ä»¬åŒæ—¶ä¹Ÿè®¾ç½®äº†ç»å¯¹å®šä½ã€‚</p>
<hr>
<p>å®ç°è‡ªåŠ¨é«˜åº¦</p>
<div><pre><code><span>.dropdown__drawer</span> <span>{</span>
    <span>position</span><span>:</span> absolute<span>;</span>
    <span>background-color</span><span>:</span> white<span>;</span>
    <span>width</span><span>:</span> 10em<span>;</span>
    <span>height</span><span>:</span> 0<span>;</span>
    <span>overflow</span><span>:</span> hidden<span>;</span>
    <span>transition</span><span>:</span> height 0.3s ease-out<span>;</span>
<span>}</span>
<span>.dropdown.is-open .dropdown__drawer</span> <span>{</span>
    <span>height</span><span>:</span> auto<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>å¾ˆé—æ†¾ï¼Œè¿™ç§çº¯csså†™æ³•ä¸ä¼šå¥æ•ˆã€‚å› ä¸ºè¿‡æ¸¡ä¸æ”¯æŒautoï¼Œå¿…é¡»æŒ‡å®šç¡®å®šçš„é«˜åº¦å€¼ã€‚ä½†åœ¨cssä¸­æ²¡åŠæ³•çŸ¥é“å…·ä½“çš„é«˜åº¦å€¼ã€‚å› ä¸ºåªæœ‰å½“å†…å®¹åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“å®Œæˆä¹‹åæ‰èƒ½ç¡®å®šé«˜åº¦ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨JavaScriptæ¥è·å–ã€‚<br>
é¡µé¢åŠ è½½å®Œæˆåï¼Œè®¿é—®DOMå…ƒç´ çš„scrollHeightå±æ€§ï¼Œå°±å¯ä»¥è·å–åˆ°é«˜åº¦å€¼ã€‚</p>
<div><pre><code><span>(</span><span>function</span> <span>(</span><span>)</span> <span>{</span>
    <span>var</span> toggle <span>=</span> document<span>.</span><span>getElementsByClassName</span><span>(</span><span>'dropdown__toggle'</span><span>)</span><span>[</span><span>0</span><span>]</span><span>;</span>
    <span>var</span> dropdown <span>=</span> toggle<span>.</span>parentElement<span>;</span>
    <span>var</span> drawer <span>=</span> document<span>.</span><span>getElementsByClassName</span><span>(</span><span>'dropdown__drawer'</span><span>)</span><span>[</span><span>0</span><span>]</span><span>;</span>
    <span>var</span> height <span>=</span> drawer<span>.</span>scrollHeight<span>;</span> <span>// å…ƒç´ çš„é«˜åº¦å€¼</span>

    toggle<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>function</span> <span>(</span><span>e</span><span>)</span> <span>{</span>
        e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span>
        dropdown<span>.</span>classList<span>.</span><span>toggle</span><span>(</span><span>'is-open'</span><span>)</span><span>;</span>
        <span>if</span> <span>(</span>dropdown<span>.</span>classList<span>.</span><span>contains</span><span>(</span><span>'is-open'</span><span>)</span><span>)</span> <span>{</span>
            drawer<span>.</span>style<span>.</span><span>setProperty</span><span>(</span><span>'height'</span><span>,</span> height <span>+</span> <span>'px'</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>{</span>
            drawer<span>.</span>style<span>.</span><span>setProperty</span><span>(</span><span>'height'</span><span>,</span> <span>'0'</span><span>)</span><span>;</span>
        <span>}</span>
    <span>}</span><span>)</span><span>;</span>
<span>}</span><span>(</span><span>)</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><h2 id="å˜æ¢"> å˜æ¢</h2>
<p>transformå±æ€§ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ”¹å˜é¡µé¢å…ƒç´ çš„å½¢çŠ¶å’Œä½ç½®ï¼Œå…¶ä¸­åŒ…æ‹¬äºŒç»´æˆ–è€…ä¸‰ç»´çš„æ—‹è½¬ã€ç¼©æ”¾å’Œå€¾æ–œã€‚ç”¨æ³•ï¼š<code>transform:rotata(90deg)</code>
<img src="/assets/img/transformation.png" alt="å˜æ¢" /><br>
ä½¿ç”¨å˜æ¢çš„æ—¶å€™è¦æ³¨æ„ä¸€ä»¶äº‹æƒ…ï¼Œè™½ç„¶å…ƒç´ å¯èƒ½ä¼šè¢«ç§»åŠ¨åˆ°é¡µé¢ä¸Šçš„æ–°ä½ç½®ï¼Œä½†å®ƒä¸ä¼šè„±ç¦»æ–‡æ¡£æµã€‚ä½ å¯ä»¥åœ¨å±å¹•èŒƒå›´å†…ä»¥å„ç§æ–¹å¼å¹³ç§»å…ƒç´ ï¼Œå…¶åˆå§‹ä½ç½®ä¸ä¼šè¢«å…¶ä»–å…ƒç´ å ç”¨ã€‚å½“æ—‹è½¬æŸå…ƒç´ çš„æ—¶å€™ï¼Œå®ƒçš„ä¸€è§’å¯èƒ½ä¼šç§»å‡ºå±å¹•è¾¹ç¼˜ï¼ŒåŒæ ·ä¹Ÿå¯èƒ½ä¼šé®ä½æ—è¾¹å…¶ä»–å…ƒç´ çš„éƒ¨åˆ†å†…å®¹ã€‚</p>
<div><p>æ³¨æ„</p>
<p>å˜æ¢ä¸èƒ½ä½œç”¨åœ¨spanæˆ–è€…aè¿™æ ·çš„è¡Œå†…å…ƒç´ ä¸Šã€‚è‹¥ç¡®å®è¦å˜æ¢æ­¤ç±»å…ƒç´ ï¼Œè¦ä¹ˆæ”¹å˜å…ƒç´ çš„displayå±æ€§ï¼Œæ›¿æ¢æ‰inlineï¼ˆæ¯”å¦‚inline-blockï¼‰ï¼Œè¦ä¹ˆæŠŠå…ƒç´ æ”¹ä¸ºå¼¹æ€§å­å…ƒç´ æˆ–è€…ç½‘æ ¼é¡¹ç›®ï¼ˆä¸ºçˆ¶å…ƒç´ åº”ç”¨display: flexæˆ–è€…display: gridï¼‰ã€‚</p>
</div>
<ul>
<li>å˜æ¢æ˜¯å›´ç»•åŸºç‚¹ï¼ˆpoint of originï¼‰å‘ç”Ÿçš„ã€‚åŸºç‚¹æ˜¯æ—‹è½¬çš„è½´å¿ƒï¼Œä¹Ÿæ˜¯ç¼©æ”¾æˆ–è€…å€¾æ–œå¼€å§‹çš„åœ°æ–¹ã€‚è¿™å°±æ„å‘³ç€å…ƒç´ çš„åŸºç‚¹æ˜¯å›ºå®šåœ¨æŸä¸ªä½ç½®ä¸Šï¼Œå…ƒç´ çš„å‰©ä½™éƒ¨åˆ†å›´ç»•åŸºç‚¹å˜æ¢ï¼ˆä½†translate()æ˜¯ä¸ªä¾‹å¤–ï¼Œå› ä¸ºå¹³ç§»è¿‡ç¨‹ä¸­å…ƒç´ æ•´ä½“ç§»åŠ¨ï¼‰ã€‚</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŸºç‚¹å°±æ˜¯å…ƒç´ çš„ä¸­å¿ƒï¼Œä½†å¯ä»¥é€šè¿‡transform-origin:x yå±æ€§æ”¹å˜åŸºç‚¹ä½ç½®ã€‚
<ul>
<li>å¸¸ç”¨å€¼ï¼šleft, right, top, bottom, center</li>
<li>åŸºç‚¹ä¹Ÿå¯ä»¥æŒ‡å®šä¸ºç™¾åˆ†æ¯”ï¼Œä»å…ƒç´ å·¦ä¸Šè§’å¼€å§‹æµ‹é‡ã€‚</li>
</ul>
</li>
<li>å¯ä»¥å¯¹transformå±æ€§æŒ‡å®šå¤šä¸ªå€¼ï¼Œç”¨ç©ºæ ¼éš”å¼€ã€‚å˜æ¢çš„æ¯ä¸ªå€¼ä»å³å‘å·¦æŒ‰é¡ºåºæ‰§è¡Œï¼Œç±»ä¼¼çŸ©é˜µå˜æ¢ã€‚</li>
</ul>
<h3 id="å›¾æ ‡æ”¾å¤§æ•ˆæœ"> å›¾æ ‡æ”¾å¤§æ•ˆæœ</h3>
<p>å›¾æ ‡è®¾ç½®è¿‡å®½åº¦å’Œé«˜åº¦ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡å¢å¤§è¿™äº›å±æ€§æ¥æ”¾å¤§å®ƒã€‚ä½†ä¼šé‡æ–°è®¡ç®—æ–‡æ¡£æµæ—¶ï¼Œå¯¼è‡´å…¶å‘¨å›´çš„ä¸€äº›å…ƒç´ è·Ÿç€ç§»åŠ¨ã€‚å¦‚æœæ”¹ç”¨å˜æ¢ï¼Œé‚£å‘¨å›´çš„å…ƒç´ ä¸ä¼šå—åˆ°å½±å“ã€‚</p>
<div><pre><code><span>.nav-links__icon</span> <span>{</span>
    <span>transition</span><span>:</span> transform 0.2s ease-out<span>;</span>
<span>}</span>

<span>.nav-links a:hover > .nav-links__icon,
.nav-links a:focus > .nav-links__icon</span> <span>{</span>
    <span>transform</span><span>:</span> <span>scale</span><span>(</span>1.3<span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h3 id="é£å…¥æ•ˆæœ"> é£å…¥æ•ˆæœ</h3>
<p>èœå•çš„æ ‡ç­¾æ²¡æœ‰å¿…è¦ä¸€ç›´ä¿æŒå¯è§çŠ¶æ€ã€‚é»˜è®¤æƒ…å†µä¸‹å¯ä»¥æŠŠå®ƒä»¬éšè—ï¼Œåªåœ¨ç›¸åº”ä½ç½®ä¿ç•™å›¾æ ‡ï¼Œå‘Šè¯‰ç”¨æˆ·èœå•çš„ä½ç½®ã€‚å½“ç”¨æˆ·ç§»åŠ¨é¼ æ ‡åˆ°èœå•æˆ–è€…å¯¼èˆªå…ƒç´ ä¸Šæ—¶ï¼Œå†æŠŠæ ‡ç­¾ä»¥æ·¡å…¥çš„æ–¹å¼å±•ç¤ºå‡ºæ¥ã€‚</p>
<div><pre><code><span>.nav-links</span> <span>{</span>
    <span>display</span><span>:</span> block<span>;</span>
    <span>padding</span><span>:</span> 1em<span>;</span>
    <span>margin-bottom</span><span>:</span> 0<span>;</span>
<span>}</span>
<span>.nav-links > li + li</span> <span>{</span>
    <span>margin-left</span><span>:</span> 0<span>;</span>
<span>}</span>

<span>.nav-links__label</span> <span>{</span>
    <span>display</span><span>:</span> inline-block<span>;</span>
    <span>margin-left</span><span>:</span> 1em<span>;</span> <span>/* ä¸ºè¿‡æ¸¡æ•ˆæœé¢„ç•™çš„ç©ºé—´ */</span>
    <span>padding-right</span><span>:</span> 1em<span>;</span>
    <span>opacity</span><span>:</span> 0<span>;</span>
    <span>transform</span><span>:</span> <span>translate</span><span>(</span>-1em<span>)</span><span>;</span>
    <span>transition</span><span>:</span> transform 0.4s <span>cubic-bezier</span><span>(</span>0.2<span>,</span> 0.9<span>,</span> 0.3<span>,</span> 1.3<span>)</span><span>,</span> <span>/*  */</span>
                opacity 0.4s linear<span>;</span> <span>/* èƒŒæ™¯æ·¡å…¥æ·¡å‡º */</span>
<span>}</span>
<span>.nav-links:hover .nav-links__label,
.nav-links a:focus > .nav-links__label</span> <span>{</span>
    <span>opacity</span><span>:</span> 1<span>;</span>
    <span>transform</span><span>:</span> <span>translate</span><span>(</span>0<span>)</span><span>;</span>
<span>}</span>

<span>.nav-links__icon</span> <span>{</span>
    <span>transition</span><span>:</span> transform 0.2s ease-out<span>;</span>
<span>}</span>

<span>.nav-links a:hover > .nav-links__icon,
.nav-links a:focus > .nav-links__icon</span> <span>{</span>
    <span>transform</span><span>:</span> <span>scale</span><span>(</span>1.3<span>)</span><span>;</span>
<span>}</span>

<span>/* ä¸ºæ¯ä¸ªèœå•é¡¹è®¾ç½®ä¸åŒçš„å»¶è¿Ÿæ—¶é—´ã€‚è¿™æ ·å°±å¯ä»¥ä½¿æ¯æ®µåŠ¨ç”»äº¤é”™é£å…¥æ˜¾ç¤º
ï¼Œä¸å†ä¸€æ¬¡æ€§å…¨éƒ¨å±•ç¤ºå‡ºæ¥ï¼Œå°±åƒç¿»æ»šçš„â€œæ³¢æµªâ€ */</span>
<span>.nav-links > li:nth-child(2) .nav-links__label</span> <span>{</span>
    <span>transition-delay</span><span>:</span> 0.1s<span>;</span>
<span>}</span>
<span>.nav-links > li:nth-child(3) .nav-links__label</span> <span>{</span>
    <span>transition-delay</span><span>:</span> 0.2s<span>;</span>
<span>}</span>
<span>.nav-links > li:nth-child(4) .nav-links__label</span> <span>{</span>
    <span>transition-delay</span><span>:</span> 0.3s<span>;</span>
<span>}</span>
<span>.nav-links > li:nth-child(5) .nav-links__label</span> <span>{</span>
    <span>transition-delay</span><span>:</span> 0.4s<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br></div></div><h3 id="_3då˜æ¢"> 3Då˜æ¢</h3>
<p>æ—‹è½¬å’Œå¹³ç§»éƒ½å¯ä»¥åœ¨ä¸‰ä¸ªç»´åº¦ä¸Šå®ç°ï¼šXè½´ã€Yè½´å’ŒZè½´ã€‚</p>
<div><pre><code><span>.a</span> <span>{</span>
    <span>transform</span><span>:</span> <span>translate</span><span>(</span>15px<span>,</span> 50px<span>)</span><span>;</span> <span>/* ç­‰ä»·äºtransform: translateX(15px) translateY(50px); */</span>
    <span>transform</span><span>:</span> <span>rotate</span><span>(</span>30deg<span>)</span><span>;</span> <span>/* ç­‰ä»·äºtransform: rotateZ(30deg); */</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h4 id="é€è§†è·ç¦»"> é€è§†è·ç¦»</h4>
<p>ä¸ºé¡µé¢æ·»åŠ 3Då˜æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®å®šä¸€ä»¶äº‹æƒ…ï¼Œå³é€è§†è·ç¦»ï¼ˆperspectiveï¼‰ã€‚å˜æ¢åçš„å…ƒç´ ä¸€èµ·æ„æˆäº†ä¸€ä¸ª3Dåœºæ™¯ã€‚æ¥ç€æµè§ˆå™¨ä¼šè®¡ç®—è¿™ä¸ª3Dåœºæ™¯çš„2Då›¾åƒï¼Œå¹¶æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚é€è§†è·ç¦»ç±»ä¼¼ç›¸æœºåˆ°è¿‘å¹³é¢çš„è·ç¦»ã€‚</p>
<p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æŒ‡å®šé€è§†è·ç¦»ï¼šä½¿ç”¨perspective()å˜æ¢æˆ–è€…ä½¿ç”¨perspectiveå±æ€§ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>container<span>"</span></span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>row<span>"</span></span><span>></span></span>
        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box<span>"</span></span><span>></span></span>One<span><span><span>&lt;/</span>div</span><span>></span></span>
        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box<span>"</span></span><span>></span></span>Two<span><span><span>&lt;/</span>div</span><span>></span></span>
        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box<span>"</span></span><span>></span></span>Three<span><span><span>&lt;/</span>div</span><span>></span></span>
        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box<span>"</span></span><span>></span></span>Four<span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
    <span>.row</span> <span>{</span>
        <span>display</span><span>:</span> flex<span>;</span>
        <span>justify-content</span><span>:</span> center<span>;</span>
        <span>/* ç»™çˆ¶å®¹å™¨è®¾ç½®é€è§†è·ç¦»ï¼Œåˆ™æ‰€æœ‰å­å®¹å™¨å¯çœ‹ä½œä¸€ä¸ªæ•´ä½“ï¼Œæ•ˆæœå’Œå•ç‹¬è®¾ç½®ä¸åŒ */</span>
        <span>/* perspective: 200px; .boxçš„transformåªè®¾ç½®rotateX */</span>
    <span>}</span>

    <span>.box</span> <span>{</span>
        <span>box-sizing</span><span>:</span> border-box<span>;</span>
        <span>width</span><span>:</span> 150px<span>;</span>
        <span>margin</span><span>:</span> 0 2em<span>;</span>
        <span>padding</span><span>:</span> 60px 0<span>;</span>
        <span>text-align</span><span>:</span> center<span>;</span>
        <span>background-color</span><span>:</span> <span>hsl</span><span>(</span>150<span>,</span> 50%<span>,</span> 40%<span>)</span><span>;</span>
        <span>transform</span><span>:</span> <span>perspective</span><span>(</span>200px<span>)</span> <span>rotateX</span><span>(</span>30deg<span>)</span><span>;</span>
    <span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br></div></div><div><p>æ³¨æ„</p>
<ul>
<li>æ·»åŠ é€è§†è·ç¦»æ˜¯3Då˜æ¢ä¸­éå¸¸é‡è¦çš„éƒ¨åˆ†ã€‚å¦‚æœä¸è®¾ç½®é€è§†è·ç¦»ï¼Œç¦»å¾—è¿œçš„å…ƒç´ ä¸ä¼šæ˜¾å¾—å˜å°ï¼Œç¦»å¾—è¿‘çš„å…ƒç´ ä¹Ÿä¸ä¼šæ˜¾å¾—å˜å¤§ã€‚</li>
<li>é€è§†è·ç¦»å°ï¼Œ3Dæ•ˆæœå°±ä¼šæ¯”è¾ƒå¼ºã€‚é€è§†è·ç¦»å¤§ï¼Œ3Dæ•ˆæœå°±ä¼šæ¯”è¾ƒå¼±ã€‚</li>
</ul>
</div>
<h4 id="å…¶ä»–3då±æ€§"> å…¶ä»–3Då±æ€§</h4>
<ul>
<li>perspective-originï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œé€è§†è·ç¦»çš„æ¸²æŸ“æ˜¯å‡è®¾è§‚å¯Ÿè€…ï¼ˆæˆ–è€…é•œå¤´ï¼‰ä½äºå…ƒç´ ä¸­å¿ƒçš„æ­£å‰æ–¹ã€‚perspective-originå±æ€§å¯ä»¥ä¸Šä¸‹ã€å·¦å³ç§»åŠ¨é•œå¤´çš„ä½ç½®ã€‚</li>
<li>backface-visibilityï¼šå¦‚æœä½ ä½¿ç”¨rotateX()æˆ–è€…rotateY()æ—‹è½¬å…ƒç´ è¶…è¿‡90åº¦ï¼Œå°±ä¼šå‘ç°ä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼šå…ƒç´ çš„â€œè„¸â€ä¸å†ç›´æ¥æœå‘ä½ ã€‚å®ƒçš„â€œè„¸â€è½¬å‘åˆ«çš„åœ°æ–¹ï¼Œä½ ä¼šçœ‹åˆ°å…ƒç´ çš„èƒŒé¢ã€‚é»˜è®¤æƒ…å†µä¸‹èƒŒé¢æ˜¯å¯è§çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä¸ºå…ƒç´ è®¾ç½®backface-visibility:hiddenæ¥æ”¹å˜å®ƒã€‚æ·»åŠ è¿™æ¡å£°æ˜ä¹‹åï¼Œå…ƒç´ åªæœ‰åœ¨æ­£é¢æœå‘è§‚å¯Ÿè€…çš„æ—¶å€™æ‰å¯è§ï¼Œæœå‘åˆ«å¤„çš„æ—¶å€™ä¸å¯è§ã€‚
<ul>
<li>é’ˆå¯¹è¿™é¡¹æŠ€æœ¯ï¼Œä¸€ä¸ªå¯èƒ½çš„åº”ç”¨åœºæ™¯æ˜¯æŠŠä¸¤ä¸ªå…ƒç´ èƒŒé èƒŒæ”¾åœ¨ä¸€èµ·ï¼Œå°±åƒå¡ç‰‡çš„ä¸¤é¢ã€‚å¡ç‰‡çš„æ­£é¢å±•ç¤ºå‡ºæ¥ï¼ŒèƒŒé¢éšè—ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥æ—‹è½¬å®ƒä»¬çš„å®¹å™¨å…ƒç´ ï¼Œä½¿è¿™ä¸¤ä¸ªå…ƒç´ éƒ½ç¿»è½¬è¿‡æ¥ï¼Œè¿™æ ·æ­£é¢éšè—èƒŒé¢æ˜¾ç°ã€‚</li>
</ul>
</li>
<li>transform-style:preserve-3d -- å‡è®¾å¯¹å®¹å™¨è®¾ç½®äº†é€è§†è·ç¦»ï¼Œæ¥ä¸‹æ¥å¯¹å®¹å™¨å†…çš„å…ƒç´ è¿›è¡Œ3Då˜æ¢ã€‚å®¹å™¨å…ƒç´ æ¸²æŸ“æ—¶ï¼Œå®é™…ä¸Šä¼šè¢«ç»˜åˆ¶æˆ2Dåœºæ™¯ï¼Œå°±åƒæ˜¯3Då¯¹è±¡çš„ä¸€å¼ ç…§ç‰‡ã€‚è¿™çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºå…ƒç´ æœ€ç»ˆå°±æ˜¯è¦æ¸²æŸ“åˆ°2Då±å¹•ä¸Šçš„ã€‚å¦‚æœæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹å®¹å™¨å…ƒç´ è¿›è¡Œ3Dæ—‹è½¬ï¼Œå°±æœ‰é—®é¢˜äº†ã€‚è¿™æ˜¯å› ä¸ºå®é™…ä¸Šæ²¡æœ‰å¯¹æ•´ä¸ªåœºæ™¯è¿›è¡Œæ—‹è½¬ï¼Œåªæ˜¯æ—‹è½¬3Dåœºæ™¯çš„2Dç…§ç‰‡ã€‚é€è§†è·ç¦»å…¨éƒ½é”™äº†ï¼Œåœºæ™¯ä¸­çš„ç«‹ä½“æ„Ÿä¹Ÿè¢«ç ´åäº†ã€‚è¿™æ—¶transform-style:preserve-3då°±æœ‰ä½œç”¨äº†ã€‚
<ul>
<li>å‚è€ƒ<a href="https://davidwalsh.name/css-cube" target="_blank" rel="noopener noreferrer">css cube</a></li>
</ul>
</li>
</ul>
<h2 id="åŠ¨ç”»"> åŠ¨ç”»</h2>
<p>CSSä¸­çš„åŠ¨ç”»åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šç”¨æ¥å®šä¹‰åŠ¨ç”»çš„@keyframesè§„åˆ™å’Œä¸ºå…ƒç´ æ·»åŠ åŠ¨ç”»çš„animationå±æ€§ã€‚</p>
<h3 id="å…³é”®å¸§"> å…³é”®å¸§</h3>
<p>å…³é”®å¸§ï¼ˆkeyframeï¼‰æ˜¯æŒ‡åŠ¨ç”»è¿‡ç¨‹ä¸­æŸä¸ªç‰¹å®šæ—¶åˆ»ã€‚æˆ‘ä»¬å®šä¹‰ä¸€äº›å…³é”®å¸§ï¼Œæµè§ˆå™¨è´Ÿè´£å¡«å……æˆ–è€…æ’å…¥è¿™äº›å…³é”®å¸§ä¹‹é—´çš„å¸§å›¾åƒã€‚</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.box</span> <span>{</span>
    <span>width</span><span>:</span> 100px<span>;</span>
    <span>height</span><span>:</span> 100px<span>;</span>
    <span>background-color</span><span>:</span> green<span>;</span>
    <span>animation</span><span>:</span> over-and-back 1.5s linear 3<span>;</span>
<span>}</span>

<span><span>@keyframes</span> over-and-back</span> <span>{</span>
<span>0%</span> <span>{</span>
    <span>background-color</span><span>:</span> <span>hsl</span><span>(</span>0<span>,</span> 50%<span>,</span> 50%<span>)</span><span>;</span>
    <span>transform</span><span>:</span> <span>translate</span><span>(</span>0<span>)</span><span>;</span>
<span>}</span>

<span>50%</span> <span>{</span>
    <span>transform</span><span>:</span> <span>translate</span><span>(</span>50px<span>)</span><span>;</span>
<span>}</span>

<span>100%</span> <span>{</span>
    <span>background-color</span><span>:</span> <span>hsl</span><span>(</span>270<span>,</span> 50%<span>,</span> 90%<span>)</span><span>;</span>
    <span>transform</span><span>:</span> <span>translate</span><span>(</span>0<span>)</span><span>;</span>
<span>}</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div><p>animationæ˜¯ç®€å†™å±æ€§ã€‚</p>
<ul>
<li>animation-nameâ€”â€”ä»£è¡¨åŠ¨ç”»åç§°ï¼Œæ¥è‡ª@keyframesè§„åˆ™å®šä¹‰ã€‚</li>
<li>animation-durationâ€”â€”ä»£è¡¨åŠ¨ç”»æŒç»­æ—¶é—´</li>
<li>animation-timing-functionâ€”â€”ä»£è¡¨å®šæ—¶å‡½æ•°</li>
<li>animation-iteration-countâ€”â€”ä»£è¡¨åŠ¨ç”»é‡å¤çš„æ¬¡æ•°ã€‚åˆå§‹å€¼é»˜è®¤æ˜¯1ã€‚</li>
</ul>
<div><p>æ³¨æ„</p>
<ol>
<li>é¢œè‰²ä»0%çš„çº¢è‰²å¹³æ»‘è¿‡æ¸¡åˆ°100%çš„æ·¡ç´«è‰²ï¼Œä½†æ˜¯æ¥ä¸‹æ¥åŠ¨ç”»é‡å¤çš„æ—¶å€™ç«‹å³å˜å›çº¢è‰²ã€‚å¦‚æœä½ æ‰“ç®—é‡å¤æŸä¸ªåŠ¨ç”»å¹¶å¸Œæœ›æ•´ä½“è¡”æ¥æµç•…ï¼Œéœ€è¦ç¡®ä¿ç»“æŸå€¼å’Œåˆå§‹å€¼ç›¸åŒ¹é…ã€‚</li>
<li>æœ€åä¸€æ¬¡é‡å¤åŠ¨ç”»ç»“æŸåï¼ŒèƒŒæ™¯é¢œè‰²å˜ä¸ºç»¿è‰²ï¼Œå³åŸæ ·å¼è§„åˆ™ä¸­æŒ‡å®šçš„å€¼ã€‚ä½†æ³¨æ„åŠ¨ç”»æŒç»­è¿‡ç¨‹ä¸­ï¼Œè¿™å¥æ ·å¼å£°æ˜è¢«@keyframesä¸­çš„è§„åˆ™è¦†ç›–äº†ã€‚å¦‚æœå‡ºç°æ ·å¼å±‚å ï¼Œé‚£ä¹ˆåŠ¨ç”»ä¸­è®¾ç½®çš„è§„åˆ™æ¯”å…¶ä»–å£°æ˜æ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</li>
<li>ä¼˜å…ˆçº§è§„åˆ™ï¼šç”¨æˆ·ä»£ç†æ ·å¼ &lt; ä½œè€…è‡ªå®šä¹‰æ ·å¼ &lt; @keyframeä¸­å®šä¹‰çš„æ ·å¼ &lt; !important</li>
</ol>
</div>
<h3 id="åŠ¨ç”»å»¶è¿Ÿå’Œå¡«å……æ¨¡å¼"> åŠ¨ç”»å»¶è¿Ÿå’Œå¡«å……æ¨¡å¼</h3>
<p>å¯ä»¥ä½¿ç”¨animation-delayå±æ€§æ¨è¿ŸåŠ¨ç”»å¼€å§‹çš„æ—¶é—´ï¼Œè¯¥å±æ€§è¡Œä¸ºå’Œtransition-delayç±»ä¼¼ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.flyin-grid</span> <span>{</span>
    <span>margin</span><span>:</span> 0 1rem<span>;</span>
    <span>perspective</span><span>:</span> 500px<span>;</span> <span>/* æ·»åŠ é€è§†è·ç¦» */</span>
<span>}</span>

<span>.flyin-grid__item</span> <span>{</span>
    <span>animation</span><span>:</span> fly-in 600ms ease-in<span>;</span> <span>/* æ·»åŠ åŠ¨ç”» */</span>
    <span>/* animation-fill-mode: backwards; åŠ ä¸Šè¿™ä¸€å¥ï¼ŒåŠ¨ç”»å‰çš„å…ƒç´ çš„åˆå§‹ä½ç½®å°±å¯¹äº† */</span>
<span>}</span>
<span>/* æ·»åŠ åŠ¨ç”»å»¶è¿Ÿ */</span>
<span>.flyin-grid__item:nth-child(2)</span> <span>{</span>
    <span>animation-delay</span><span>:</span> 0.15s<span>;</span>
<span>}</span>
<span>.flyin-grid__item:nth-child(3)</span> <span>{</span>
    <span>animation-delay</span><span>:</span> 0.3s<span>;</span>
<span>}</span>
<span>.flyin-grid__item:nth-child(4)</span> <span>{</span>
    <span>animation-delay</span><span>:</span> 0.45s<span>;</span>
<span>}</span>


<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 30em<span>)</span></span> <span>{</span>
<span>.flyin-grid</span> <span>{</span>
    <span>display</span><span>:</span> flex<span>;</span>
    <span>flex-wrap</span><span>:</span> wrap<span>;</span>
    <span>margin</span><span>:</span> 0 5rem<span>;</span>
<span>}</span>

<span>.flyin-grid__item</span> <span>{</span>
    <span>flex</span><span>:</span> 1 1 300px<span>;</span>
    <span>margin-left</span><span>:</span> 0.5em<span>;</span>
    <span>margin-right</span><span>:</span> 0.5em<span>;</span>
    <span>max-width</span><span>:</span> 600px<span>;</span>
<span>}</span>

<span><span>@supports</span> <span>(</span><span>display</span><span>:</span> grid<span>)</span></span> <span>{</span> <span>/* æŸ¥è¯¢æµè§ˆå™¨æ˜¯å¦æ”¯æŒgridå±æ€§ï¼Œå¦‚æœæ”¯æŒï¼Œåˆ™ä¸‹é¢æ ·å¼ç”Ÿæ•ˆ */</span>
    <span>.flyin-grid</span> <span>{</span>
        <span>display</span><span>:</span> grid<span>;</span>
        <span>/* å°½å¯èƒ½å¤šçš„ç”Ÿæˆç½‘æ ¼è½¨é“ï¼Œæ¯ä¸ªè½¨é“è‡³å°‘300pxï¼Œå¦‚æœå…ƒç´ è¾ƒå°‘ï¼Œä¼šå°†éç©ºè½¨é“æ‰©å±•ä»¥å¡«æ»¡ç©ºç™½ */</span>
        <span>grid-template-columns</span><span>:</span> <span>repeat</span><span>(</span>auto-fit<span>,</span> <span>minmax</span><span>(</span>300px<span>,</span> 1fr<span>)</span><span>)</span><span>;</span>
        <span>grid-gap</span><span>:</span> 2em<span>;</span> <span>/* ç½‘æ ¼å…ƒç´ é—´è· */</span>
    <span>}</span>

    <span>.flyin-grid__item</span> <span>{</span>
        <span>max-width</span><span>:</span> initial<span>;</span> <span>/* div çš„ max-width åˆå§‹å€¼ä¸º noneï¼Œå³æ²¡æœ‰é™åˆ¶*/</span>
        <span>margin</span><span>:</span> 0<span>;</span>
    <span>}</span>
<span>}</span>
<span>}</span>

<span>.card</span> <span>{</span>
    <span>margin-bottom</span><span>:</span> 1em<span>;</span>
    <span>padding</span><span>:</span> 0.5em<span>;</span>
    <span>background-color</span><span>:</span> white<span>;</span>
    <span>color</span><span>:</span> <span>hsl</span><span>(</span>210<span>,</span> 15%<span>,</span> 20%<span>)</span><span>;</span>
    <span>box-shadow</span><span>:</span> 0.2em 0.5em 1em <span>rgba</span><span>(</span>0<span>,</span> 0<span>,</span> 0<span>,</span> 0.3<span>)</span><span>;</span>
<span>}</span>
<span>.card > img</span> <span>{</span>
    <span>width</span><span>:</span> 100%<span>;</span>
<span>}</span>

<span><span>@keyframes</span> fly-in</span> <span>{</span>
    <span>0%</span> <span>{</span>
        <span>transform</span><span>:</span> <span>translateZ</span><span>(</span>-800px<span>)</span> <span>rotateY</span><span>(</span>90deg<span>)</span><span>;</span>
        <span>opacity</span><span>:</span> 0<span>;</span>
    <span>}</span>
    <span>56%</span> <span>{</span>
        <span>transform</span><span>:</span> <span>translateZ</span><span>(</span>-160px<span>)</span> <span>rotateY</span><span>(</span>87deg<span>)</span><span>;</span>
        <span>opacity</span><span>:</span> 1<span>;</span>
    <span>}</span>
    <span>100%</span> <span>{</span>
        <span>transform</span><span>:</span> <span>translateZ</span><span>(</span>0<span>)</span> <span>rotateY</span><span>(</span>0<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>

<span><span><span>&lt;</span>main</span> <span>class</span><span><span>=</span><span>"</span>flyin-grid<span>"</span></span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>flyin-grid__item card<span>"</span></span><span>></span></span>
    <span><span><span>&lt;</span>img</span> <span>src</span><span><span>=</span><span>"</span>images/chicken1.jpg<span>"</span></span> <span>alt</span><span><span>=</span><span>"</span>a chicken<span>"</span></span><span>/></span></span>
    <span><span><span>&lt;</span>h4</span><span>></span></span>Mrs. Featherstone<span><span><span>&lt;/</span>h4</span><span>></span></span>
    <span><span><span>&lt;</span>p</span><span>></span></span>
        She may be a bit frumpy, but Mrs Featherstone gets
        the job done. She lays her largish cream-colored
        eggs on a daily basis. She is gregarious to a fault.
    <span><span><span>&lt;/</span>p</span><span>></span></span>
    <span><span><span>&lt;</span>p</span><span>></span></span>This Austra White is our most prolific producer.<span><span><span>&lt;/</span>p</span><span>></span></span>
    <span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>flyin-grid__item card<span>"</span></span><span>></span></span>
    <span><span><span>&lt;</span>img</span> <span>src</span><span><span>=</span><span>"</span>images/chicken2.jpg<span>"</span></span> <span>alt</span><span><span>=</span><span>"</span>a chicken<span>"</span></span><span>/></span></span>
    <span><span><span>&lt;</span>h4</span><span>></span></span>Hen Solo<span><span><span>&lt;/</span>h4</span><span>></span></span>
    <span><span><span>&lt;</span>p</span><span>></span></span>
        Though the most recent addition to our flock, Hen
        Solo is a fast favorite among our laying brood. She
        is a sassy and suspicious hen; we frequently have to
        follow her to find where she has hidden her loot from
        the other hens.
    <span><span><span>&lt;/</span>p</span><span>></span></span>
    <span><span><span>&lt;</span>p</span><span>></span></span>This Snowy Easter Egger lays in delicate shades of
        blue and green. A full dozen of her eggs costs an
        additional $2.<span><span><span>&lt;/</span>p</span><span>></span></span>
    <span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>flyin-grid__item card<span>"</span></span><span>></span></span>
    <span><span><span>&lt;</span>img</span> <span>src</span><span><span>=</span><span>"</span>images/chicken3.jpg<span>"</span></span> <span>alt</span><span><span>=</span><span>"</span>a chicken<span>"</span></span><span>/></span></span>
    <span><span><span>&lt;</span>h4</span><span>></span></span>Cluck Norris<span><span><span>&lt;/</span>h4</span><span>></span></span>
    <span><span><span>&lt;</span>p</span><span>></span></span>
        Every brood has its brawler. Cluck Norris is our
        feistiest hen, frequently picking fights with other
        hens about laying territory and foraging space. Her
        sister hens continue to hope that she will follow the
        steps of her namesake (eventually) and focus the her
        strength of will for good.
    <span><span><span>&lt;/</span>p</span><span>></span></span>
    <span><span><span>&lt;</span>p</span><span>></span></span>This Buff Chantecler is as robust and hardy as her
        Canadian forebears, laying through the coldest parts
        of the winter.<span><span><span>&lt;/</span>p</span><span>></span></span>
    <span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;/</span>main</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br></div></div><p>ä»¥ä¸Šä»£ç æœ‰ä¸€ä¸ªé—®é¢˜ï¼šåé¢çš„å…ƒç´ åœ¨åŠ¨ç”»è¿˜æ²¡å¼€å§‹æ’­æ”¾çš„æ—¶å€™å°±å‡ºç°åœ¨äº†æœ€ç»ˆä½ç½®ï¼Œå¼€å§‹æ’­æ”¾æ—¶æ‰è½¬åˆ°åŠ¨ç”»åˆå§‹ä½ç½®ã€‚</p>
<p>ä½¿ç”¨animation-fill-modeå¯ä»¥åœ¨åŠ¨ç”»æ’­æ”¾å‰æˆ–æ’­æ”¾ååº”ç”¨åŠ¨ç”»æ ·å¼ã€‚</p>
<ul>
<li>åˆå§‹å€¼æ˜¯none--æ„æ€æ˜¯åŠ¨ç”»æ‰§è¡Œå‰æˆ–æ‰§è¡ŒååŠ¨ç”»æ ·å¼éƒ½ä¸ä¼šåº”ç”¨åˆ°å…ƒç´ ä¸Šã€‚</li>
<li>backwards--åœ¨åŠ¨ç”»æ‰§è¡Œä¹‹å‰ï¼Œæµè§ˆå™¨å°±ä¼šå–å‡ºåŠ¨ç”»ä¸­ç¬¬ä¸€å¸§çš„å€¼ï¼Œå¹¶æŠŠå®ƒä»¬åº”ç”¨åœ¨å…ƒç´ ä¸Šã€‚</li>
<li>forwards--åœ¨åŠ¨ç”»æ’­æ”¾å®Œæˆåä»ç„¶åº”ç”¨æœ€åä¸€å¸§çš„å€¼ã€‚</li>
<li>both--ä¼šåŒæ—¶å‘å‰å’Œå‘åå¡«å……ã€‚<br>
ä¸ºé¡µé¢æ·»åŠ åå‘å¡«å……æ¨¡å¼å¯ä»¥ä¿®å¤åŠ¨ç”»å¼€å§‹æ—¶çš„å…ƒç´ è·³åŠ¨ã€‚</li>
</ul>
<h3 id="ç”¨åŠ¨ç”»ä¼ é€’æ„å›¾"> ç”¨åŠ¨ç”»ä¼ é€’æ„å›¾</h3>
<p>å¥½çš„åŠ¨ç”»ä¸æ˜¯æœ€åæ‰åŠ ä¸Šçš„ï¼Œè€Œæ˜¯èå…¥åˆ°äº†å¼€å‘è¿‡ç¨‹ä¸­ã€‚å®ƒä»¬å‘ç”¨æˆ·ä¼ è¾¾é¡µé¢ä¸ŠæŸäº›äº‹ç‰©çš„ç‰¹æ®Šå«ä¹‰ã€‚<br>
åŠ¨ç”»å¯ä»¥å‘ç”¨æˆ·è¡¨æ˜æŒ‰é’®è¢«ç‚¹å‡»äº†æˆ–è€…æ¶ˆæ¯è¢«æ¥æ”¶äº†ã€‚å¦‚æœä½ æ›¾ç»æäº¤è¿‡è¡¨å•ï¼Œå›æƒ³ä¸€ä¸‹æ˜¯å¦ç»å¸¸è®°ä¸æ¸…è‡ªå·±ç‚¹æ²¡ç‚¹è¿‡æ³¨å†ŒæŒ‰é’®ï¼Œå°±çŸ¥é“è¿™æœ‰å¤šé‡è¦äº†ã€‚</p>
<p><a href="https://animista.net/play/basic" target="_blank" rel="noopener noreferrer">CSS Animista</a></p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">CSS åŸºç¡€</title>
    <id>https://kigane.github.io/note/js/css-basic/</id>
    <link href="https://kigane.github.io/note/js/css-basic/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="åŸºç¡€"> åŸºç¡€</h2>
<h3 id="æœ¯è¯­"> æœ¯è¯­</h3>
<ul>
<li>å£°æ˜ï¼šCSSä¸­çš„ä¸€è¡Œï¼Œç”±ä¸€ä¸ªå±æ€§å’Œä¸€ä¸ªå€¼ç»„æˆã€‚ä¾‹å¦‚ color:blackã€‚</li>
<li>å£°æ˜å—ï¼šåŒ…å«åœ¨å¤§æ‹¬å·å†…çš„ä¸€ç»„å£°æ˜ã€‚</li>
<li>è§„åˆ™é›†ï¼šé€‰æ‹©å™¨ + å£°æ˜å—</li>
<li>@è§„åˆ™ï¼šç”¨â€œ@â€ç¬¦å·å¼€å¤´çš„è¯­æ³•ã€‚æ¯”å¦‚@importè§„åˆ™æˆ–è€…@mediaæŸ¥è¯¢ã€‚</li>
<li>å±‚å å€¼ï¼šä½œä¸ºå±‚å ç»“æœï¼Œåº”ç”¨åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šçš„ç‰¹å®šå±æ€§çš„å€¼ã€‚</li>
<li>è®¡ç®—å€¼ï¼šæµè§ˆå™¨æ ¹æ®ç›¸å¯¹å•ä½çš„å€¼è®¡ç®—å‡ºçš„ç»å¯¹å€¼ã€‚</li>
<li>å£°æ˜å€¼ï¼šå£°æ˜ä¸­çš„å€¼</li>
<li>è§†å£ï¼šæµè§ˆå™¨çª—å£é‡Œç½‘é¡µå¯è§éƒ¨åˆ†çš„è¾¹æ¡†åŒºåŸŸã€‚å®ƒä¸åŒ…æ‹¬æµè§ˆå™¨çš„åœ°å€æ ã€å·¥å…·æ ã€çŠ¶æ€æ ã€‚</li>
<li>*ï¼šé€šç”¨é€‰æ‹©å™¨ï¼Œé€‰ä¸­é¡µé¢ä¸Šæ‰€æœ‰å…ƒç´ </li>
<li>æ™®é€šæ–‡æ¡£æµï¼šæŒ‡ç½‘é¡µå…ƒç´ çš„é»˜è®¤å¸ƒå±€è¡Œä¸ºã€‚è¡Œå†…å…ƒç´ è·Ÿéšæ–‡å­—çš„æ–¹å‘ä»å·¦åˆ°å³æ’åˆ—ï¼Œå½“åˆ°è¾¾å®¹å™¨è¾¹ç¼˜æ—¶ä¼šæ¢è¡Œã€‚å—çº§å…ƒç´ ä¼šå æ®å®Œæ•´çš„ä¸€è¡Œï¼Œå‰åéƒ½æœ‰æ¢è¡Œã€‚</li>
</ul>
<h3 id="é€‰æ‹©å™¨"> é€‰æ‹©å™¨</h3>
<p>åŸºç¡€é€‰æ‹©å™¨</p>
<ul>
<li>tagname æ ‡ç­¾é€‰æ‹©å™¨ã€‚ä¼˜å…ˆçº§001</li>
<li>.class ç±»é€‰æ‹©å™¨ã€‚ä¼˜å…ˆçº§010</li>
<li>#id IDé€‰æ‹©å™¨ã€‚ä¼˜å…ˆçº§100</li>
<li><code>*</code> é€šç”¨é€‰æ‹©å™¨ã€‚ä¼˜å…ˆçº§000</li>
</ul>
<hr>
<p>ç»„åˆé€‰æ‹©å™¨</p>
<ul>
<li>a&gt;b å­ç»„åˆå™¨ã€‚açš„ç›´æ¥åä»£b</li>
<li>a+b ç›¸é‚»å…„å¼Ÿç»„åˆå™¨ã€‚ç´§è·Ÿåœ¨aåé¢çš„å…„å¼Ÿå…ƒç´ bã€‚</li>
<li>a~b é€šç”¨å…„å¼Ÿç»„åˆå™¨ã€‚æ‰€æœ‰åœ¨aåé¢çš„å…„å¼Ÿå…ƒç´ bã€‚</li>
<li>a b é€‰æ‹©açš„åä»£ä¸­çš„ä»»ä½•åŒ¹é…bé€‰æ‹©å™¨çš„å…ƒç´ ã€‚</li>
<li>ab  é€‰æ‹©æ‰€æœ‰æ—¢ç¬¦åˆaï¼Œåˆç¬¦åˆbçš„å…ƒç´ ã€‚å¤åˆé€‰æ‹©å™¨ã€‚å¤šä¸ªåŸºç¡€é€‰æ‹©å™¨å¯ä»¥è¿èµ·æ¥(ä¸ä½¿ç”¨ç©ºæ ¼æˆ–è€…å…¶ä»–ç»„åˆå™¨)ç»„æˆä¸€ä¸ªå¤åˆé€‰æ‹©å™¨ã€‚å¤åˆé€‰æ‹©å™¨é€‰ä¸­çš„å…ƒç´ å°†åŒ¹é…å…¶å…¨éƒ¨åŸºç¡€é€‰æ‹©å™¨ã€‚ä¾‹å¦‚.dropdown.is-activeåªèƒ½åŒ¹é…åŒæ—¶æœ‰è¿™ä¸¤ä¸ªç±»çš„å…ƒç´ ã€‚</li>
</ul>
<hr>
<p>ä¼ªç±»é€‰æ‹©å™¨<br>
ç”¨äºé€‰ä¸­å¤„äºæŸä¸ªç‰¹å®šçŠ¶æ€çš„å…ƒç´ ã€‚è¿™ç§çŠ¶æ€å¯èƒ½æ˜¯ç”±äºç”¨æˆ·äº¤äº’ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”±äºå…ƒç´ ç›¸å¯¹äºå…¶çˆ¶çº§æˆ–å…„å¼Ÿå…ƒç´ çš„ä½ç½®ã€‚ä¼ªç±»é€‰æ‹©å™¨å§‹ç»ˆä»¥ä¸€ä¸ªå†’å·(:)å¼€å§‹ã€‚ä¼˜å…ˆçº§ç­‰äºä¸€ä¸ªç±»é€‰æ‹©å™¨(0,1,0)ã€‚</p>
<ul>
<li>:first-childâ€”â€”åŒ¹é…çš„å…ƒç´ æ˜¯å…¶çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚</li>
<li>:last-childâ€”â€”åŒ¹é…çš„å…ƒç´ æ˜¯å…¶çˆ¶å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚</li>
<li>:only-childâ€”â€”åŒ¹é…çš„å…ƒç´ æ˜¯å…¶çˆ¶å…ƒç´ çš„å”¯ä¸€ä¸€ä¸ªå­å…ƒç´ (æ²¡æœ‰å…„å¼Ÿå…ƒç´ )ã€‚</li>
<li>:nth-child(an+b)â€”â€”åŒ¹é…çš„å…ƒç´ åœ¨å…„å¼Ÿå…ƒç´ ä¸­é—´æœ‰ç‰¹å®šçš„ä½ç½®ã€‚å…¬å¼an+bé‡Œé¢çš„aå’Œbæ˜¯æ•´æ•°ï¼Œnå–æ‰€æœ‰è‡ªç„¶æ•°ï¼ŒåŒ…æ‹¬0ã€‚</li>
<li>:nth-last-child(an+b)â€”â€”ç±»ä¼¼äºï¼šnth-child()ï¼Œä½†ä¸æ˜¯ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¾€åæ•°ï¼Œè€Œæ˜¯ä»æœ€åä¸€ä¸ªå…ƒç´ å¾€å‰æ•°ã€‚</li>
<li>:first-of-typeâ€”â€”ç±»ä¼¼äºï¼šfirst-childï¼Œä½†ä¸æ˜¯æ ¹æ®åœ¨å…¨éƒ¨å­å…ƒç´ ä¸­çš„ä½ç½®æŸ¥æ‰¾å…ƒç´ ï¼Œè€Œæ˜¯æ ¹æ®æ‹¥æœ‰ç›¸åŒæ ‡ç­¾åçš„å­å…ƒç´ ä¸­çš„æ•°å­—é¡ºåºæŸ¥æ‰¾ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li>:last-of-typeâ€”â€”åŒ¹é…æ¯ç§ç±»å‹çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚</li>
<li>:only-of-typeâ€”â€”è¯¥é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ æ˜¯æ»¡è¶³è¯¥ç±»å‹çš„å”¯ä¸€ä¸€ä¸ªå­å…ƒç´ ã€‚</li>
<li>:nth-of-type(an+b)â€”â€”æ ¹æ®ç›®æ ‡å…ƒç´ åœ¨ç‰¹å®šç±»å‹ä¸‹çš„æ•°å­—é¡ºåºä»¥åŠç‰¹å®šå…¬å¼é€‰æ‹©å…ƒç´ ï¼Œç±»ä¼¼äºï¼šnth-childã€‚</li>
<li>:nth-last-of-type(an+b)â€”â€”æ ¹æ®å…ƒç´ ç±»å‹ä»¥åŠç‰¹å®šå…¬å¼é€‰æ‹©å…ƒç´ ï¼Œä»å…¶ä¸­æœ€åä¸€ä¸ªå…ƒç´ å¾€å‰ç®—ï¼Œç±»ä¼¼äºï¼šnth-last-childã€‚</li>
<li><code>:not(&lt;selector&gt;)</code>â€”â€”åŒ¹é…çš„å…ƒç´ ä¸åŒ¹é…æ‹¬å·å†…çš„é€‰æ‹©å™¨ã€‚æ‹¬å·å†…çš„é€‰æ‹©å™¨å¿…é¡»æ˜¯åŸºç¡€é€‰æ‹©å™¨ï¼Œå®ƒåªèƒ½æŒ‡å®šå…ƒç´ æœ¬èº«ï¼Œæ— æ³•ç”¨äºæ’é™¤ç¥–å…ˆå…ƒç´ ï¼ŒåŒæ—¶ä¸å…è®¸åŒ…å«å¦ä¸€ä¸ªæ’é™¤é€‰æ‹©å™¨ã€‚</li>
<li>:emptyâ€”â€”åŒ¹é…çš„å…ƒç´ å¿…é¡»æ²¡æœ‰å­å…ƒç´ ã€‚æ³¨æ„ï¼Œå¦‚æœå…ƒç´ åŒ…å«ç©ºæ ¼å°±æ— æ³•ç”±è¯¥é€‰æ‹©å™¨åŒ¹é…ï¼Œå› ä¸ºç©ºæ ¼åœ¨DOMä¸­å±äºæ–‡æœ¬èŠ‚ç‚¹ã€‚</li>
<li>:focusâ€”â€”åŒ¹é…é€šè¿‡é¼ æ ‡ç‚¹å‡»ã€è§¦æ‘¸å±å¹•æˆ–è€…æŒ‰Tabé”®å¯¼èˆªè€Œè·å¾—ç„¦ç‚¹çš„å…ƒç´ ã€‚</li>
<li>:hoverâ€”â€”åŒ¹é…é¼ æ ‡æŒ‡é’ˆæ­£æ‚¬åœåœ¨å…¶ä¸Šæ–¹çš„å…ƒç´ ã€‚</li>
<li>:rootâ€”â€”åŒ¹é…æ–‡æ¡£æ ¹å…ƒç´ ã€‚</li>
</ul>
<hr>
<p>ä¼ªå…ƒç´ é€‰æ‹©å™¨</p>
<ul>
<li>::beforeâ€”â€”åˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ï¼Œä½¿å…¶æˆä¸ºåŒ¹é…å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚è¯¥å…ƒç´ é»˜è®¤æ˜¯è¡Œå†…å…ƒç´ ï¼Œå¯ç”¨äºæ’å…¥æ–‡å­—ã€å›¾ç‰‡æˆ–å…¶ä»–å½¢çŠ¶ã€‚å¿…é¡»æŒ‡å®šcontentå±æ€§æ‰èƒ½è®©å…ƒç´ å‡ºç°ï¼Œä¾‹å¦‚ï¼š.menu::beforeã€‚</li>
<li>::afterâ€”â€”åˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ï¼Œä½¿å…¶æˆä¸ºåŒ¹é…å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚ç±»ä¼¼::beforeã€‚</li>
<li>::first-letterâ€”â€”ç”¨äºæŒ‡å®šåŒ¹é…å…ƒç´ çš„ç¬¬ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦çš„æ ·å¼ï¼Œä¾‹å¦‚ï¼šh2::first-letterã€‚</li>
<li>::first-lineâ€”â€”ç”¨äºæŒ‡å®šåŒ¹é…å…ƒç´ çš„ç¬¬ä¸€è¡Œæ–‡æœ¬çš„æ ·å¼ã€‚</li>
<li>::selectionâ€”â€”ç”¨äºæŒ‡å®šç”¨æˆ·ä½¿ç”¨é¼ æ ‡é«˜äº®é€‰æ‹©çš„ä»»æ„æ–‡æœ¬çš„æ ·å¼ã€‚é€šå¸¸ç”¨äºæ”¹å˜é€‰ä¸­æ–‡æœ¬çš„background-colorã€‚åªæœ‰å°‘æ•°å±æ€§å¯ä»¥ä½¿ç”¨ï¼ŒåŒ…æ‹¬colorã€background-colorã€cursorã€text-decorationã€‚</li>
</ul>
<hr>
<p>å±æ€§é€‰æ‹©å™¨<br>
ç”¨äºæ ¹æ®HTMLå±æ€§åŒ¹é…å…ƒç´ ã€‚å…¶ä¼˜å…ˆçº§ä¸ä¸€ä¸ªç±»é€‰æ‹©å™¨(0,1,0)ç›¸ç­‰ã€‚</p>
<ul>
<li><code>[attr]</code>â€”â€”åŒ¹é…çš„å…ƒç´ æ‹¥æœ‰æŒ‡å®šå±æ€§attrï¼Œæ— è®ºå±æ€§å€¼æ˜¯ä»€ä¹ˆ</li>
<li><code>[attr=&quot;value&quot;]</code>â€”â€”åŒ¹é…çš„å…ƒç´ æ‹¥æœ‰æŒ‡å®šå±æ€§attrï¼Œä¸”å±æ€§å€¼ç­‰äºæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼</li>
<li><code>[attr^=&quot;value&quot;]</code>â€”â€”â€œå¼€å¤´â€å±æ€§é€‰æ‹©å™¨ã€‚è¯¥é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ æ‹¥æœ‰æŒ‡å®šå±æ€§attrï¼Œä¸”å±æ€§å€¼çš„å¼€å¤´æ˜¯æŒ‡å®šçš„å­—ç¬¦ä¸²å€¼ï¼Œä¾‹å¦‚ï¼š<code>a[href^=&quot;https&quot;]</code>ã€‚</li>
<li><code>[attr$=&quot;value&quot;]</code>â€”â€”â€œç»“å°¾â€å±æ€§é€‰æ‹©å™¨ã€‚è¯¥é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ æ‹¥æœ‰æŒ‡å®šå±æ€§attrï¼Œä¸”å±æ€§å€¼çš„ç»“å°¾æ˜¯æŒ‡å®šçš„å­—ç¬¦ä¸²å€¼ï¼Œä¾‹å¦‚ï¼š<code>a[href$= &quot;.pdf&quot;]</code>ã€‚</li>
<li><code>[attr*=&quot;value&quot;]</code>â€”â€”â€œåŒ…å«â€å±æ€§é€‰æ‹©å™¨ã€‚è¯¥é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ æ‹¥æœ‰æŒ‡å®šå±æ€§attrï¼Œä¸”å±æ€§å€¼åŒ…å«æŒ‡å®šçš„å­—ç¬¦ä¸²å€¼ï¼Œä¾‹å¦‚ï¼š<code>[class*=&quot;sprite-&quot;]</code>ã€‚</li>
<li><code>[attr~=&quot;value&quot;]</code>â€”â€”â€œç©ºæ ¼åˆ†éš”çš„åˆ—è¡¨â€å±æ€§é€‰æ‹©å™¨ã€‚è¯¥é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ æ‹¥æœ‰æŒ‡å®šå±æ€§attrï¼Œä¸”å±æ€§å€¼æ˜¯ä¸€ä¸ªç©ºæ ¼åˆ†éš”çš„å€¼åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­çš„æŸä¸ªå€¼ç­‰äºæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼</li>
<li><code>[attr|=&quot;value&quot;]</code>â€”â€”åŒ¹é…çš„å…ƒç´ æ‹¥æœ‰æŒ‡å®šå±æ€§attrï¼Œä¸”å±æ€§å€¼è¦ä¹ˆç­‰äºæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼ï¼Œè¦ä¹ˆä»¥è¯¥å­—ç¬¦ä¸²å¼€å¤´ä¸”ç´§è·Ÿç€ä¸€ä¸ªè¿å­—ç¬¦ã€‚é€‚ç”¨äºè¯­è¨€å±æ€§ï¼Œå› ä¸ºè¯¥å±æ€§æœ‰æ—¶å€™ä¼šæŒ‡å®šä¸€ç§è¯­è¨€çš„å­é›†(æ¯”å¦‚å¢¨è¥¿å“¥è¥¿ç­ç‰™è¯­ï¼Œes-MXï¼Œæˆ–è€…æ™®é€šçš„è¥¿ç­ç‰™è¯­ï¼Œes)ï¼Œä¾‹å¦‚ï¼š<code>[lang|=&quot;es&quot;]</code>ã€‚</li>
</ul>
<h3 id="æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·"> æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·</h3>
<h4 id="æ ·å¼"> æ ·å¼</h4>
<ul>
<li>element.style ä¸ºè¡Œå†…æ ·å¼</li>
<li>é è¿‘é¡¶éƒ¨çš„æ ·å¼ä¼šè¦†ç›–ä¸‹é¢çš„æ ·å¼ã€‚</li>
<li>è¢«è¦†ç›–çš„æ ·å¼ä¸Šåˆ’äº†åˆ é™¤çº¿ã€‚</li>
<li>å³ä¾§æ˜¾ç¤ºäº†æ¯ä¸ªè§„åˆ™é›†çš„æ ·å¼è¡¨å’Œåœ¨æºä»£ç ä¸­è¡Œå·ã€‚</li>
<li>é¡¶éƒ¨çš„ç­›é€‰æ¡†å¯ä»¥é€‰æ‹©ç‰¹å®šçš„å£°æ˜ï¼ŒåŒæ—¶éšè—å…¶ä»–å£°æ˜ã€‚</li>
<li>æŒ‰ä½shiftï¼Œå†ç‚¹å‡»é¢œè‰²å‰çš„æ–¹æ¡†ï¼Œå¯ä»¥æ”¹å˜é¢œè‰²çš„è¡¨ç¤ºæ³•</li>
</ul>
<h4 id="element"> Element</h4>
<ul>
<li>é€‰æ‹©æŒ‡å®šå…ƒç´ ï¼Œå³é”®èœå•ä¸­å¯ä»¥è®¾ç½®å¼ºåˆ¶å…ƒç´ è¿›å…¥:active,:hoverç­‰çŠ¶æ€ã€‚</li>
</ul>
<h3 id="å±‚å "> å±‚å </h3>
<p>å½“å£°æ˜å†²çªæ—¶ï¼Œå±‚å ä¼šä¾æ®ä¸‰ç§æ¡ä»¶è§£å†³å†²çªã€‚</p>
<ol>
<li>æ ·å¼è¡¨çš„æ¥æºï¼šæ ·å¼æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œæœ‰ä¸‰çº§ï¼Œæµè§ˆå™¨é»˜è®¤æ ·å¼(ä¹Ÿç§°ç”¨æˆ·ä»£ç†æ ·å¼)ï¼Œä½œè€…è‡ªå®šä¹‰æ ·å¼(å³å¼€å‘è€…å†™çš„CSS)ï¼Œä½œè€…çš„!importantæ ·å¼ã€‚åé¢çš„ä¼šè¦†ç›–å‰é¢çš„ã€‚</li>
<li>é€‰æ‹©å™¨ä¼˜å…ˆçº§ï¼šè¡Œå†…æ ·å¼ &gt; IDé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾é€‰æ‹©å™¨ã€‚é€‰æ‹©å™¨æœ€é«˜ä¼˜å…ˆçº§ç›¸åŒæ—¶ï¼Œæ¯”å…¶æ•°é‡ï¼Œæ•°é‡å¤šçš„ä¼˜å…ˆçº§é«˜ã€‚
<ul>
<li>ä¼ªç±»é€‰æ‹©å™¨(å¦‚ï¼šhover)å’Œå±æ€§é€‰æ‹©å™¨(å¦‚[type=&quot;input&quot;])ä¸ä¸€ä¸ªç±»é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ç›¸åŒã€‚é€šç”¨é€‰æ‹©å™¨(*)å’Œç»„åˆå™¨(&gt;ã€+ã€~)å¯¹ä¼˜å…ˆçº§æ²¡æœ‰å½±å“ã€‚</li>
</ul>
</li>
<li>æºç é¡ºåºï¼šæ ·å¼åœ¨æ ·å¼è¡¨é‡Œçš„å£°æ˜é¡ºåºã€‚æ™šå‡ºç°çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</li>
</ol>
<h3 id="ç»§æ‰¿-inherit-å±æ€§å€¼"> ç»§æ‰¿(inherit å±æ€§å€¼)</h3>
<ul>
<li>ä¸æ˜¯æ‰€æœ‰çš„å±æ€§éƒ½èƒ½è¢«ç»§æ‰¿ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ç‰¹å®šçš„ä¸€äº›å±æ€§èƒ½è¢«ç»§æ‰¿ï¼Œé€šå¸¸æ˜¯æˆ‘ä»¬å¸Œæœ›è¢«ç»§æ‰¿çš„é‚£äº›ã€‚</li>
<li>æ–‡æœ¬ç›¸å…³çš„å±æ€§ï¼šcolorã€fontã€font-familyã€font-sizeã€font-weightã€font-variantã€font-styleã€line-heightã€letter-spacingã€text-alignã€text-indentã€text-transformã€white-spaceä»¥åŠword-spacingã€‚</li>
<li>åˆ—è¡¨å±æ€§ï¼šlist-styleã€list-style-typeã€list-style-positionä»¥åŠlist-style-imageã€‚</li>
<li>è¡¨æ ¼çš„è¾¹æ¡†å±æ€§border-collapseå’Œborder-spacingä¹Ÿèƒ½è¢«ç»§æ‰¿ã€‚</li>
</ul>
<p>PS: initialå±æ€§ï¼Œå³CSSå±æ€§çš„åˆå§‹å€¼ã€‚å¯ç”¨äºæ’¤é”€æŸå…ƒç´ çš„æ ·å¼ã€‚</p>
<h3 id="ç®€å†™å±æ€§"> ç®€å†™å±æ€§</h3>
<p>ç®€å†™å±æ€§æ˜¯ç”¨äºåŒæ—¶ç»™å¤šä¸ªå±æ€§èµ‹å€¼çš„å±æ€§ã€‚ä¾‹å¦‚</p>
<ul>
<li>fontï¼šå®ƒæŒ‡å®šäº†font-styleã€font-weightã€font-sizeã€font-heightä»¥åŠfont-familyã€‚</li>
<li>backgroundï¼šå®ƒæŒ‡å®šäº†background-colorã€background-imageã€background-sizeã€background-repeatã€background-positionã€background-originã€background-chipä»¥åŠbackground-attachmentã€‚</li>
<li>borderæ˜¯border-widthã€border-styleä»¥åŠborder-colorçš„ç®€å†™å±æ€§</li>
<li>border-widthæ˜¯ä¸Šã€å³ã€ä¸‹ã€å·¦å››ä¸ªè¾¹æ¡†å®½åº¦çš„ç®€å†™å±æ€§ã€‚</li>
</ul>
<p>å¤§å¤šæ•°ç®€å†™å±æ€§å¯ä»¥çœç•¥ä¸€äº›å€¼ï¼ŒåªæŒ‡å®šæˆ‘ä»¬å…³æ³¨çš„å€¼ã€‚ä½†è¢«çœç•¥çš„å€¼ä¼šè¢«éšå¼åœ°è®¾ç½®ä¸ºåˆå§‹å€¼ã€‚<br>
é€šå¸¸å…ƒç´ çš„å››ä¸ªæ–¹å‘ç›¸å…³çš„å±æ€§å£°æ˜é¡ºåºä¸ºä¸Šå³ä¸‹å·¦ï¼Œå³é¡ºæ—¶é’ˆæ–¹å‘ã€‚å¦‚æœå£°æ˜ç»“æŸæ—¶å››ä¸ªå±æ€§å€¼è¿˜å‰©æœ‰æ²¡æŒ‡å®šçš„ï¼Œåˆ™æ²¡æœ‰æŒ‡å®šçš„ä¸€è¾¹ä¼šå–å…¶å¯¹è¾¹çš„å€¼ã€‚æŒ‡å®šä¸‰ä¸ªå€¼æ—¶ï¼Œå·¦è¾¹å’Œå³è¾¹éƒ½ä¼šä½¿ç”¨ç¬¬äºŒä¸ªå€¼ã€‚æŒ‡å®šä¸¤ä¸ªå€¼æ—¶ï¼Œä¸Šè¾¹å’Œä¸‹è¾¹ä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªå€¼ï¼Œå·¦è¾¹å’Œå³è¾¹ä½¿ç”¨ç¬¬äºŒä¸ªå€¼ã€‚å¦‚æœåªæŒ‡å®šä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆå››ä¸ªæ–¹å‘éƒ½ä¼šä½¿ç”¨è¿™ä¸ªå€¼ã€‚</p>
<p>è¿˜æœ‰ä¸€äº›å±æ€§åªæ”¯æŒæœ€å¤šæŒ‡å®šä¸¤ä¸ªå€¼ï¼Œè¿™äº›å±æ€§åŒ…æ‹¬background-positionã€box-shadowã€text-shadow(è™½ç„¶ä¸¥æ ¼æ¥è®²å®ƒä»¬å¹¶ä¸æ˜¯ç®€å†™å±æ€§)ã€‚å…¶å£°æ˜é¡ºåºä¸ºå…ˆx,åyã€‚å³å…ˆæ°´å¹³æ–¹å‘ï¼Œå†å‚ç›´æ–¹å‘ã€‚</p>
<h2 id="ç›¸å¯¹å•ä½"> ç›¸å¯¹å•ä½</h2>
<h3 id="em-rem"> em &amp; rem</h3>
<ul>
<li>em
<ul>
<li>å¯¹äºfont-sizeå±æ€§ï¼Œemæ˜¯æ ¹æ®ç»§æ‰¿çš„å­—å·æ¥è®¡ç®—çš„ï¼Œå³çˆ¶å…ƒç´ çš„font-sizeã€‚</li>
<li>å¯¹äºéfont-sizeå±æ€§ï¼Œemæ˜¯æ ¹æ®å…ƒç´ çš„font-sizeå±æ€§è®¡ç®—çš„ã€‚</li>
<li>emçš„å¤æ‚ä¹‹å¤„å°±åœ¨äºåŒæ—¶ç”¨å®ƒæŒ‡å®šä¸€ä¸ªå…ƒç´ çš„å­—å·å’Œå…¶ä»–å±æ€§ã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨å¿…é¡»å…ˆè®¡ç®—å­—å·ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªè®¡ç®—å€¼å»ç®—å‡ºå…¶ä½™çš„å±æ€§å€¼ã€‚è¿™ä¸¤ç±»å±æ€§å¯ä»¥æ‹¥æœ‰ä¸€æ ·çš„å£°æ˜å€¼ï¼Œä½†æ˜¯è®¡ç®—å€¼ä¸ä¸€æ ·ã€‚</li>
<li>emçš„å¥½å¤„ã€‚å¯ä»¥å®šä¹‰ä¸€ä¸ªå…ƒç´ çš„å¤§å°ï¼Œç„¶ååªéœ€è¦æ”¹å˜å­—å·å°±èƒ½æ•´ä½“ç¼©æ”¾å…ƒç´ ã€‚paddingã€heightã€widthã€border-radiusç­‰å±æ€§ç”¨emå¾ˆæ–¹ä¾¿ã€‚</li>
<li>å¯¹äºåµŒå¥—ç»“æ„ï¼Œå¦‚æœéƒ½ä½¿ç”¨emå•ä½ï¼Œåˆ™å­—ä½“å¤§å°ä¼šé€çº§æ”¾å¤§æˆ–ç¼©å°ï¼Œè¦é¿å…æ­¤æƒ…å†µï¼Œåº”ä½¿ç”¨remå•ä½ã€‚</li>
</ul>
</li>
<li>rem
<ul>
<li>æ ¹æ®æ ¹å…ƒç´ çš„ font-size å±æ€§è®¡ç®—</li>
<li>htmlæ˜¯æ ¹å…ƒç´ ã€‚æ ¹èŠ‚ç‚¹æœ‰ä¸€ä¸ªä¼ªç±»é€‰æ‹©å™¨:rootã€‚</li>
<li>å¯¹å¤§å¤šæ•°æµè§ˆå™¨æ¥è¯´ï¼Œé»˜è®¤çš„å­—å·ä¸º16pxã€‚å‡†ç¡®åœ°è¯´ï¼Œmediumå…³é”®å­—çš„å€¼æ˜¯16pxã€‚</li>
</ul>
</li>
<li>ç™¾åˆ†æ•° åŸºæ•°ä¸ºçˆ¶å…ƒç´ çš„ px å€¼</li>
</ul>
<p>tips:æ‹¿ä¸å‡†çš„æ—¶å€™ï¼Œç”¨remè®¾ç½®å­—å·ï¼Œç”¨pxè®¾ç½®è¾¹æ¡†ï¼Œç”¨emè®¾ç½®å…¶ä»–å¤§éƒ¨åˆ†å±æ€§ã€‚</p>
<h3 id="åª’ä½“æŸ¥è¯¢"> åª’ä½“æŸ¥è¯¢</h3>
<div><pre><code><span>:root</span> <span>{</span>
    <span>font-size</span><span>:</span> 0.75em<span>;</span>
<span>}</span>

<span>/* ä½œç”¨äºå®½åº¦ > 800pxçš„å±å¹•ï¼Œç”Ÿæ•ˆæ—¶ï¼Œå› æºç é¡ºåºï¼Œä¼šè¦†ç›–å‰é¢çš„æ ·å¼ */</span>
<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 800px<span>)</span></span> <span>{</span>
    <span>:root</span> <span>{</span>
    <span>font-size</span><span>:</span> 0.875em<span>;</span>
    <span>}</span>
<span>}</span>

<span>/* ä½œç”¨äºå®½åº¦ > 1200pxçš„å±å¹•ï¼Œç”Ÿæ•ˆæ—¶ï¼Œå› æºç é¡ºåºï¼Œä¼šè¦†ç›–å‰é¢çš„æ ·å¼ */</span>
<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 1200px<span>)</span></span> <span>{</span>
    <span>:root</span> <span>{</span>
    <span>font-size</span><span>:</span> 1em<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><h3 id="è§†å£å•ä½"> è§†å£å•ä½</h3>
<p>è§†å£â€”â€”æµè§ˆå™¨çª—å£é‡Œç½‘é¡µå¯è§éƒ¨åˆ†çš„è¾¹æ¡†åŒºåŸŸã€‚å®ƒä¸åŒ…æ‹¬æµè§ˆå™¨çš„åœ°å€æ ã€å·¥å…·æ ã€çŠ¶æ€æ ã€‚</p>
<ul>
<li>vhï¼šè§†å£é«˜åº¦çš„1/100ã€‚</li>
<li>vwï¼šè§†å£å®½åº¦çš„1/100ã€‚</li>
<li>vminï¼šè§†å£å®½ã€é«˜ä¸­è¾ƒå°çš„ä¸€æ–¹çš„1/100ã€‚</li>
<li>vmaxï¼šè§†å£å®½ã€é«˜ä¸­è¾ƒå¤§çš„ä¸€æ–¹çš„1/100ã€‚</li>
</ul>
<p>ç›¸å¯¹è§†å£å•ä½æœ‰ä¸€ä¸ªä¸èµ·çœ¼çš„ç”¨é€”ï¼Œå°±æ˜¯è®¾ç½®å­—å·ï¼Œè¿™æ ·åšçš„å¥½å¤„åœ¨äºå…ƒç´ èƒ½å¤Ÿåœ¨è¿™ä¸¤ç§å¤§å°ä¹‹é—´å¹³æ»‘åœ°è¿‡æ¸¡ï¼Œå³ä¸ä¼šåœ¨æŸä¸ªæ–­ç‚¹çªç„¶æ”¹å˜ã€‚å½“è§†å£å¤§å°æ”¹å˜æ—¶ï¼Œå…ƒç´ ä¼šé€æ¸è¿‡æ¸¡ã€‚ä½†åªä½¿ç”¨vwæˆ–vhï¼Œå­—å·ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥é€šå¸¸ä¼šç»“åˆemä¸€èµ·ä½¿ç”¨ã€‚<br>
calc()å‡½æ•°å¯ä»¥å¯¹ä¸¤ä¸ªåŠå…¶ä»¥ä¸Šçš„å€¼è¿›è¡ŒåŸºæœ¬è¿ç®—ã€‚å½“è¦ç»“åˆä¸åŒå•ä½çš„å€¼æ—¶ï¼Œcalc()ç‰¹åˆ«å®ç”¨ã€‚å®ƒæ”¯æŒå››åˆ™è¿ç®—ã€‚åŠ å·å’Œå‡å·ä¸¤è¾¹å¿…é¡»æœ‰ç©ºç™½ï¼Œå¦‚calc(.5em + 1vh)ã€‚</p>
<h3 id="æ— å•ä½çš„æ•°å€¼"> æ— å•ä½çš„æ•°å€¼</h3>
<p>æœ‰äº›å±æ€§å…è®¸æ— å•ä½çš„å€¼(å³ä¸€ä¸ªä¸æŒ‡å®šå•ä½çš„æ•°)ã€‚</p>
<ul>
<li>æ”¯æŒè¿™ç§å€¼çš„å±æ€§åŒ…æ‹¬line-heightã€z-indexã€font-weight(700ç­‰äºbold,400ç­‰äºnormalï¼Œç­‰ç­‰)ã€‚</li>
<li>ä»»ä½•é•¿åº¦å•ä½éƒ½å¯ä»¥ç”¨æ— å•ä½çš„å€¼0ï¼Œå› ä¸ºè¿™äº›æƒ…å†µä¸‹å•ä½ä¸å½±å“è®¡ç®—å€¼ï¼Œ0pxã€0%ã€0emå‡ç›¸ç­‰ã€‚</li>
<li>è­¦å‘Š:ä¸€ä¸ªæ— å•ä½çš„0åªèƒ½ç”¨äºé•¿åº¦å€¼å’Œç™¾åˆ†æ¯”ï¼Œæ¯”å¦‚å†…è¾¹è·ã€è¾¹æ¡†å’Œå®½åº¦ç­‰ï¼Œè€Œä¸èƒ½ç”¨äºè§’åº¦å€¼ï¼Œæ¯”å¦‚åº¦ï¼Œæˆ–è€…æ—¶é—´ç›¸å…³çš„å€¼ï¼Œæ¯”å¦‚ç§’ã€‚</li>
</ul>
<p>ç»§æ‰¿çš„æ€ªå¼‚è¡Œä¸º</p>
<ul>
<li>å½“ä¸€ä¸ªå…ƒç´ çš„å€¼å®šä¹‰ä¸ºé•¿åº¦æ—¶ï¼Œå­å…ƒç´ ä¼šç»§æ‰¿å®ƒçš„è®¡ç®—å€¼ã€‚å½“ä½¿ç”¨emç­‰å•ä½å®šä¹‰è¡Œé«˜æ—¶ï¼Œå®ƒä»¬çš„å€¼æ˜¯è®¡ç®—å€¼ï¼Œä¼ é€’åˆ°äº†ä»»ä½•ç»§æ‰¿å­å…ƒç´ ä¸Šã€‚å¦‚æœå­å…ƒç´ æœ‰ä¸åŒçš„å­—å·ï¼Œå¹¶ä¸”ç»§æ‰¿äº†line-heightå±æ€§ï¼Œå°±ä¼šé€ æˆæ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œæ¯”å¦‚æ–‡å­—é‡å ã€‚</li>
<li>ä½¿ç”¨æ— å•ä½çš„æ•°å€¼æ—¶ï¼Œç»§æ‰¿çš„æ˜¯å£°æ˜å€¼ï¼Œå³åœ¨æ¯ä¸ªç»§æ‰¿å­å…ƒç´ ä¸Šä¼šé‡æ–°ç®—å®ƒçš„è®¡ç®—å€¼ã€‚è¿™æ ·å¾—åˆ°çš„ç»“æœå‡ ä¹æ€»æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ— å•ä½çš„æ•°å€¼ç»™bodyè®¾ç½®è¡Œé«˜ï¼Œä¹‹åå°±ä¸ç”¨ä¿®æ”¹äº†ï¼Œé™¤éæœ‰äº›åœ°æ–¹æƒ³è¦ä¸ä¸€æ ·çš„è¡Œé«˜ã€‚</li>
</ul>
<h3 id="è‡ªå®šä¹‰å±æ€§-csså˜é‡"> è‡ªå®šä¹‰å±æ€§(csså˜é‡)</h3>
<div><pre><code><span>:root</span> <span>{</span>
    <span>--main-color</span><span>:</span> white<span>;</span> <span>/* å˜é‡å£°æ˜ï¼Œæ— å®é™…æ•ˆæœ */</span>
    <span>--main-bg</span><span>:</span> #fff<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><ul>
<li>å˜é‡å¿…é¡»åœ¨ä¸€ä¸ªå£°æ˜å—å†…å£°æ˜ã€‚</li>
<li>å˜é‡åå‰é¢å¿…é¡»æœ‰ä¸¤ä¸ªè¿å­—ç¬¦(--)ï¼Œç”¨æ¥è·ŸCSSå±æ€§åŒºåˆ†ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†å¯ä»¥éšæ„å‘½åã€‚</li>
<li>å˜é‡å£°æ˜æœ¬èº«ä»€ä¹ˆä¹Ÿæ²¡åšï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¶æ‰èƒ½çœ‹åˆ°æ•ˆæœã€‚</li>
<li>ä½¿ç”¨å˜é‡éœ€ä½¿ç”¨var()å‡½æ•°ï¼Œå…¶ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šäº†å¤‡ç”¨å€¼ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„å˜é‡æœªå®šä¹‰ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨ç¬¬äºŒä¸ªå€¼ã€‚</li>
<li>æ³¨æ„ï¼šå¦‚æœvar()å‡½æ•°ç®—å‡ºæ¥çš„æ˜¯ä¸€ä¸ªéæ³•å€¼ï¼Œå¯¹åº”çš„å±æ€§å°±ä¼šè®¾ç½®ä¸ºå…¶åˆå§‹å€¼ã€‚æ¯”å¦‚ï¼Œå¦‚æœåœ¨padding: var(--brand-color)ä¸­çš„å˜é‡ç®—å‡ºæ¥æ˜¯ä¸€ä¸ªé¢œè‰²ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªéæ³•çš„å†…è¾¹è·å€¼ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå†…è¾¹è·ä¼šè®¾ç½®ä¸º0ã€‚</li>
<li><strong>è‡ªå®šä¹‰å±æ€§çš„å£°æ˜èƒ½å¤Ÿå±‚å å’Œç»§æ‰¿</strong>ï¼Œå¯ä»¥åœ¨å¤šä¸ªé€‰æ‹©å™¨ä¸­å®šä¹‰ç›¸åŒçš„å˜é‡ï¼Œåˆ™è¯¥å˜é‡åœ¨ç½‘é¡µçš„ä¸åŒåœ°æ–¹æœ‰ä¸åŒçš„å€¼ã€‚</li>
</ul>
<p>ç”¨JSè®¿é—®å’Œä¿®æ”¹è‡ªå®šä¹‰å±æ€§ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>script</span> <span>type</span><span><span>=</span><span>"</span>text/javascript<span>"</span></span><span>></span></span><span><span>
    <span>let</span> rootElement <span>=</span> document<span>.</span>documentElement<span>;</span>
    <span>let</span> styles <span>=</span> <span>getComputedStyle</span><span>(</span>rootElement<span>)</span><span>;</span>
    <span>let</span> mainColor <span>=</span> styles<span>.</span><span>getPropertyValue</span><span>(</span><span>'--main-bg'</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span><span>String</span><span>(</span>mainColor<span>)</span><span>.</span><span>trim</span><span>(</span><span>)</span><span>)</span><span>;</span>

    rootElement <span>=</span> document<span>.</span>documentElement<span>;</span>
    rootElement<span>.</span>style<span>.</span><span>setProperty</span><span>(</span><span>'--main-bg'</span><span>,</span> <span>'#cdf'</span><span>)</span><span>;</span>
</span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><h2 id="ç›’æ¨¡å‹"> ç›’æ¨¡å‹</h2>
<p><img src="/assets/img/box-model.png" alt="box-model" />
å½“ç»™ä¸€ä¸ªå…ƒç´ è®¾ç½®å®½æˆ–é«˜çš„æ—¶å€™ï¼ŒæŒ‡å®šçš„æ˜¯å†…å®¹çš„å®½æˆ–é«˜ï¼Œæ‰€æœ‰å†…è¾¹è·ã€è¾¹æ¡†ã€å¤–è¾¹è·éƒ½æ˜¯è¿½åŠ åˆ°è¯¥å®½åº¦ä¸Šçš„ã€‚</p>
<h3 id="å…ƒç´ å®½åº¦é—®é¢˜"> å…ƒç´ å®½åº¦é—®é¢˜</h3>
<p>åœ¨CSSä¸­å¯ä»¥ä½¿ç”¨box-sizingå±æ€§è°ƒæ•´ç›’æ¨¡å‹çš„è¡Œä¸ºã€‚</p>
<ul>
<li>box-sizingçš„é»˜è®¤å€¼ä¸ºcontent-boxï¼Œè¿™æ„å‘³ä»»ä½•æŒ‡å®šçš„å®½æˆ–é«˜éƒ½åªä¼šè®¾ç½®å†…å®¹ç›’å­çš„å¤§å°ã€‚</li>
<li>box-sizingè®¾ç½®ä¸ºborder-boxåï¼Œheightå’Œwidthå±æ€§ä¼šè®¾ç½®å†…å®¹ã€å†…è¾¹è·ä»¥åŠè¾¹æ¡†çš„å¤§å°æ€»å’Œã€‚</li>
</ul>
<p>å…¨å±€ä¿®æ”¹ç›’æ¨¡å‹ä¸ºborder-box(å·²æ˜¯æ™®éåšæ³•äº†)</p>
<div><pre><code><span>:root</span> <span>{</span>
    <span>box-sizing</span><span>:</span> border-box<span>;</span>
<span>}</span>

<span>*,
::before,
::after</span> <span>{</span>
    <span>box-sizing</span><span>:</span> inherit<span>;</span> <span>/* ç›’æ¨¡å‹é€šå¸¸ä¸ä¼šè¢«ç»§æ‰¿ï¼Œä½†æ˜¯ä½¿ç”¨inheritå…³é”®å­—å¯ä»¥å¼ºåˆ¶ç»§æ‰¿ã€‚ */</span>
<span>}</span>

<span>.third-party-component</span> <span>{</span>
    <span>box-sizing</span><span>:</span> content-box<span>;</span> <span>/* å¦‚æœå¸¦æ ·å¼çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„ç›’æ¨¡å‹ï¼Œåˆ™æ¢å¤ */</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>ç»™åˆ—ä¹‹é—´åŠ ä¸Šé—´éš™</p>
<div><pre><code><span>.main</span> <span>{</span>
    <span>float</span><span>:</span> left<span>;</span>
    <span>width</span><span>:</span> 70%<span>;</span>
    <span>background-color</span><span>:</span> #fff<span>;</span>
    <span>border-radius</span><span>:</span> .5em<span>;</span>
<span>}</span>

<span>.sidebar</span> <span>{</span>
    <span>float</span><span>:</span> left<span>;</span>
    <span>width</span><span>:</span> <span>calc</span><span>(</span>30% - 1.5em<span>)</span><span>;</span> <span>/* ä»å®½åº¦ä¸­åˆ†1.5emç»™å¤–è¾¹è·ä»¥å½¢æˆé—´éš™ */</span>
    <span>margin-left</span><span>:</span> 1.5em<span>;</span>
    <span>padding</span><span>:</span> 1.5em<span>;</span>
    <span>background-color</span><span>:</span> #fff<span>;</span>
    <span>border-radius</span><span>:</span> .5em<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h3 id="å…ƒç´ é«˜åº¦é—®é¢˜"> å…ƒç´ é«˜åº¦é—®é¢˜</h3>
<p>å®¹å™¨çš„é«˜åº¦ç”±å†…å®¹å¤©ç„¶åœ°å†³å®šï¼Œè€Œä¸æ˜¯å®¹å™¨è‡ªå·±å†³å®šã€‚å½“æ˜ç¡®è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„é«˜åº¦æ—¶ï¼Œå†…å®¹å¯èƒ½ä¼šæº¢å‡ºå®¹å™¨ã€‚å½“å†…å®¹åœ¨é™å®šåŒºåŸŸæ”¾ä¸ä¸‹ï¼Œæ¸²æŸ“åˆ°çˆ¶å…ƒç´ å¤–é¢æ—¶ï¼Œå°±ä¼šæº¢å‡ºã€‚<br>
ç”¨overflowå±æ€§å¯ä»¥æ§åˆ¶æº¢å‡ºå†…å®¹çš„è¡Œä¸ºï¼Œè¯¥å±æ€§æ”¯æŒä»¥ä¸‹4ä¸ªå€¼ã€‚</p>
<ul>
<li>visible(é»˜è®¤å€¼)â€”â€”æ‰€æœ‰å†…å®¹å¯è§ï¼Œå³ä½¿æº¢å‡ºå®¹å™¨è¾¹ç¼˜ã€‚</li>
<li>hiddenâ€”â€”æº¢å‡ºå®¹å™¨å†…è¾¹è·è¾¹ç¼˜çš„å†…å®¹è¢«è£å‰ªï¼Œæ— æ³•çœ‹è§ã€‚</li>
<li>scrollâ€”â€”å®¹å™¨å‡ºç°æ»šåŠ¨æ¡ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ»šåŠ¨æŸ¥çœ‹å‰©ä½™å†…å®¹ã€‚åœ¨ä¸€äº›æ“ä½œç³»ç»Ÿä¸Šï¼Œå³ä½¿æ‰€æœ‰å†…å®¹éƒ½å¯è§ï¼Œä¹Ÿä¼šå‡ºç°æ°´å¹³å’Œå‚ç›´ä¸¤ç§æ»šåŠ¨æ¡ã€‚ä¸è¿‡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ»šåŠ¨æ¡ä¸å¯æ»šåŠ¨ã€‚</li>
<li>autoâ€”â€”åªæœ‰å†…å®¹æº¢å‡ºæ—¶å®¹å™¨æ‰ä¼šå‡ºç°æ»šåŠ¨æ¡ã€‚</li>
<li>å¯ä»¥ç”¨overflow-xå±æ€§å•ç‹¬æ§åˆ¶æ°´å¹³æ–¹å‘çš„æº¢å‡ºï¼Œæˆ–è€…ç”¨overflow-yæ§åˆ¶å‚ç›´æ–¹å‘æº¢å‡ºã€‚è¿™äº›å±æ€§æ”¯æŒoverflowçš„æ‰€æœ‰å€¼ï¼Œç„¶è€ŒåŒæ—¶ç»™xå’ŒyæŒ‡å®šä¸åŒçš„å€¼ï¼Œå¾€å¾€ä¼šäº§ç”Ÿéš¾ä»¥é¢„æ–™çš„ç»“æœã€‚</li>
</ul>
<h4 id="ç­‰é«˜åˆ—"> ç­‰é«˜åˆ—</h4>
<p>ä»»æ„ä¸€åˆ—çš„å†…å®¹å¢åŠ ï¼Œä¸¤åˆ—çš„é«˜åº¦éƒ½ä¼šå¢åŠ ï¼ŒåŒæ—¶ä¿æŒåº•éƒ¨å¯¹é½ã€‚<br>
ç°ä»£æµè§ˆå™¨æ”¯æŒäº†CSSè¡¨æ ¼ï¼Œå¯ä»¥è½»æ¾å®ç°ç­‰é«˜åˆ—ï¼Œæ¯”å¦‚IE8+æ”¯æŒdisplay: table,IE10+æ”¯æŒå¼¹æ€§ç›’å­æˆ–è€…Flexboxï¼Œéƒ½é»˜è®¤æ”¯æŒç­‰é«˜åˆ—ã€‚</p>
<p>æ–¹æ¡ˆä¸€ï¼š
ç”¨CSSè¡¨æ ¼å¸ƒå±€æ›¿ä»£æµ®åŠ¨å¸ƒå±€ã€‚ç»™å®¹å™¨è®¾ç½®display: tableï¼Œç»™æ¯ä¸€åˆ—è®¾ç½®display:table-cellã€‚</p>
<ol>
<li>ä¸åƒblockçš„å…ƒç´ ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºä¸ºtableçš„å…ƒç´ å®½åº¦ä¸ä¼šæ‰©å±•åˆ°100%ï¼Œå› æ­¤éœ€è¦æ˜ç¡®æŒ‡å®šå®½åº¦(width:100%)ã€‚</li>
<li>table-cellå…ƒç´ çš„å¤–è¾¹è·å¤±æ•ˆã€‚</li>
<li>å¯ä»¥ç”¨è¡¨æ ¼å…ƒç´ çš„border-spacingå±æ€§æ¥å®šä¹‰å•å…ƒæ ¼çš„é—´è·ã€‚è¯¥å±æ€§æ¥å—ä¸¤ä¸ªé•¿åº¦å€¼ï¼šæ°´å¹³é—´è·å’Œå‚ç›´é—´è·ã€‚ä½†è¿™ä¼šäº§ç”Ÿä¸€ä¸ªç‰¹æ®Šçš„å‰¯ä½œç”¨ï¼Œé—´è·ä¹Ÿä¼šä½œç”¨äºè¡¨æ ¼çš„å¤–è¾¹ç¼˜ï¼Œå¯¼è‡´æ°´å¹³æ–¹å‘æ— æ³•å¯¹é½ã€‚</li>
<li>å¯ä½¿ç”¨è´Ÿå¤–è¾¹è·è§£å†³ï¼Œæ­£çš„å¤–è¾¹è·ä¼šå°†å®¹å™¨çš„è¾¹ç¼˜å¾€é‡Œæ¨ï¼Œè€Œè´Ÿçš„å¤–è¾¹è·åˆ™ä¼šå°†è¾¹ç¼˜å¾€å¤–æ‹‰ã€‚åœ¨è¡¨æ ¼å®¹å™¨å¤–é¢åŒ…ä¸€ä¸ªå…ƒç´ ï¼Œå°†å…¶å·¦å³å¤–è¾¹è·è®¾ç½®ä¸ºâˆ’1.5emï¼Œä»è€ŒæŠµæ¶ˆè¡¨æ ¼å®¹å™¨å¤–ä¾§1.5emçš„border-spacingã€‚</li>
</ol>
<p>æ–¹æ¡ˆäºŒï¼š
ç»™å®¹å™¨è®¾ç½®display: flexï¼Œå®ƒå°±å˜æˆäº†ä¸€ä¸ªå¼¹æ€§å®¹å™¨(flex container)ï¼Œå­å…ƒç´ é»˜è®¤ç­‰é«˜ã€‚ä½ å¯ä»¥ç»™å­å…ƒç´ è®¾ç½®å®½åº¦å’Œå¤–è¾¹è·ï¼Œå°½ç®¡åŠ èµ·æ¥å¯èƒ½è¶…è¿‡100%, Flexboxä¹Ÿèƒ½å¦¥å–„å¤„ç†ã€‚</p>
<h4 id="min-height-max-height"> min-height, max-height</h4>
<ul>
<li>min-heightæŒ‡å®šä¸€ä¸ªæœ€å°é«˜åº¦ã€‚å…ƒç´ è‡³å°‘ç­‰äºä½ æŒ‡å®šçš„é«˜åº¦ï¼Œå¦‚æœå†…å®¹å¤ªå¤šï¼Œæµè§ˆå™¨å°±ä¼šå…è®¸å…ƒç´ è‡ªå·±æ‰©å±•é«˜åº¦ï¼Œä»¥å…å†…å®¹æº¢å‡ºã€‚</li>
<li>max-heghtå…è®¸å…ƒç´ è‡ªç„¶åœ°å¢é«˜åˆ°ä¸€ä¸ªç‰¹å®šç•Œé™ã€‚å¦‚æœåˆ°è¾¾è¿™ä¸ªç•Œé™ï¼Œå…ƒç´ å°±ä¸å†å¢é«˜ï¼Œå†…å®¹ä¼šæº¢å‡ºã€‚</li>
<li>min-width, max-widthåŒç†</li>
</ul>
<h4 id="å‚ç›´å±…ä¸­å†…å®¹"> å‚ç›´å±…ä¸­å†…å®¹</h4>
<p>å…³äºvertical-alignï¼šè¯¥å£°æ˜åªä¼šå½±å“è¡Œå†…å…ƒç´ æˆ–è€…table-cellå…ƒç´ ã€‚</p>
<ul>
<li>å¯¹äºè¡Œå†…å…ƒç´ ï¼Œå®ƒæ§åˆ¶ç€è¯¥å…ƒç´ è·ŸåŒä¸€è¡Œå†…å…¶ä»–å…ƒç´ ä¹‹é—´çš„å¯¹é½å…³ç³»ã€‚æ¯”å¦‚ï¼Œå¯ä»¥ç”¨å®ƒæ§åˆ¶ä¸€ä¸ªè¡Œå†…çš„å›¾ç‰‡è·Ÿç›¸é‚»çš„æ–‡å­—å¯¹é½ã€‚</li>
<li>å¯¹äºæ˜¾ç¤ºä¸ºtable-cellçš„å…ƒç´ ï¼Œvertical-alignæ§åˆ¶äº†å†…å®¹åœ¨å•å…ƒæ ¼å†…çš„å¯¹é½ã€‚å¦‚æœä½¿ç”¨CSSè¡¨æ ¼å¸ƒå±€ï¼Œåˆ™å¯ä»¥ç”¨vertical-alignæ¥å®ç°å‚ç›´å±…ä¸­ã€‚</li>
</ul>
<p>åœ¨å®¹å™¨é‡Œè®©å†…å®¹å±…ä¸­æœ€å¥½çš„æ–¹å¼æ˜¯æ ¹æ®ç‰¹å®šåœºæ™¯è€ƒè™‘ä¸åŒå› ç´ ã€‚åšå‡ºåˆ¤æ–­å‰ï¼Œå…ˆé€ä¸ªè¯¢é—®è‡ªå·±ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚çš„è§£å†³åŠæ³•ã€‚</p>
<ul>
<li>å¯ä»¥ç”¨ä¸€ä¸ªè‡ªç„¶é«˜åº¦çš„å®¹å™¨å—ï¼Ÿç»™å®¹å™¨åŠ ä¸Šç›¸ç­‰çš„ä¸Šä¸‹å†…è¾¹è·è®©å†…å®¹å±…ä¸­ã€‚</li>
<li>å®¹å™¨éœ€è¦æŒ‡å®šé«˜åº¦æˆ–è€…é¿å…ä½¿ç”¨å†…è¾¹è·å—ï¼Ÿå¯¹å®¹å™¨ä½¿ç”¨display: table-cellå’Œvertical-align: middleã€‚</li>
<li>å¯ä»¥ç”¨Flexboxå—ï¼Ÿ å¦‚æœä¸éœ€è¦æ”¯æŒIE9ï¼Œå¯ä»¥ç”¨Flexboxå±…ä¸­å†…å®¹ã€‚</li>
<li>å®¹å™¨é‡Œé¢çš„å†…å®¹åªæœ‰ä¸€è¡Œæ–‡å­—å—ï¼Ÿè®¾ç½®ä¸€ä¸ªå¤§çš„è¡Œé«˜ï¼Œè®©å®ƒç­‰äºç†æƒ³çš„å®¹å™¨é«˜åº¦ã€‚è¿™æ ·ä¼šè®©å®¹å™¨é«˜åº¦æ‰©å±•åˆ°èƒ½å¤Ÿå®¹çº³è¡Œé«˜ã€‚å¦‚æœå†…å®¹ä¸æ˜¯è¡Œå†…å…ƒç´ ï¼Œå¯ä»¥è®¾ç½®ä¸ºinline-blockã€‚</li>
<li>å®¹å™¨å’Œå†…å®¹çš„é«˜åº¦éƒ½çŸ¥é“å—ï¼Ÿå°†å†…å®¹ç»å¯¹å®šä½ã€‚</li>
<li>ä¸çŸ¥é“å†…éƒ¨å…ƒç´ çš„é«˜åº¦ï¼Ÿç”¨ç»å¯¹å®šä½ç»“åˆå˜å½¢(transform)ã€‚</li>
<li>è¿˜ä¸ç¡®å®šçš„è¯ï¼Œå‚è€ƒhowtocenterincssç½‘ç«™ã€‚</li>
</ul>
<h3 id="è´Ÿå¤–è¾¹è·"> è´Ÿå¤–è¾¹è·</h3>
<p>ä¸åŒäºå†…è¾¹è·å’Œè¾¹æ¡†å®½åº¦ï¼Œå¤–è¾¹è·å¯ä»¥è®¾ç½®ä¸ºè´Ÿå€¼ã€‚è´Ÿå¤–è¾¹è·æœ‰ä¸€äº›ç‰¹æ®Šç”¨é€”ï¼Œæ¯”å¦‚è®©å…ƒç´ é‡å æˆ–è€…æ‹‰ä¼¸åˆ°æ¯”å®¹å™¨è¿˜å®½ã€‚
<img src="/assets/img/minus-margin.png" alt="minus-margin" />
è´Ÿå¤–è¾¹è·çš„å…·ä½“è¡Œä¸ºå–å†³äºè®¾ç½®åœ¨å…ƒç´ çš„å“ªè¾¹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚å¦‚æœè®¾ç½®å·¦è¾¹æˆ–é¡¶éƒ¨çš„è´Ÿå¤–è¾¹è·ï¼Œå…ƒç´ å°±ä¼šç›¸åº”åœ°å‘å·¦æˆ–å‘ä¸Šç§»åŠ¨ï¼Œå¯¼è‡´å…ƒç´ ä¸å®ƒå‰é¢çš„å…ƒç´ é‡å ï¼Œå¦‚æœè®¾ç½®å³è¾¹æˆ–è€…åº•éƒ¨çš„è´Ÿå¤–è¾¹è·ï¼Œå¹¶ä¸ä¼šç§»åŠ¨å…ƒç´ ï¼Œè€Œæ˜¯å°†å®ƒåé¢çš„å…ƒç´ æ‹‰è¿‡æ¥ã€‚ç»™å…ƒç´ åº•éƒ¨åŠ ä¸Šè´Ÿå¤–è¾¹è·å¹¶ä¸ç­‰åŒäºç»™å®ƒä¸‹é¢çš„å…ƒç´ é¡¶éƒ¨åŠ ä¸Šè´Ÿå¤–è¾¹è·ã€‚</p>
<h3 id="å¤–è¾¹è·æŠ˜å "> å¤–è¾¹è·æŠ˜å </h3>
<p>å½“é¡¶éƒ¨å’Œ/æˆ–åº•éƒ¨çš„å¤–è¾¹è·ç›¸é‚»æ—¶ï¼Œå°±ä¼šé‡å ï¼Œäº§ç”Ÿå•ä¸ªå¤–è¾¹è·ã€‚è¿™ç§ç°è±¡è¢«ç§°ä½œæŠ˜å ã€‚æŠ˜å å¤–è¾¹è·çš„å¤§å°ç­‰äºç›¸é‚»å¤–è¾¹è·ä¸­çš„æœ€å¤§å€¼ã€‚å³ä½¿ä¸¤ä¸ªå…ƒç´ ä¸æ˜¯ç›¸é‚»çš„å…„å¼ŸèŠ‚ç‚¹ä¹Ÿä¼šäº§ç”Ÿå¤–è¾¹è·æŠ˜å ã€‚åœ¨æ²¡æœ‰å…¶ä»–CSSçš„å½±å“ä¸‹ï¼Œæ‰€æœ‰ç›¸é‚»çš„é¡¶éƒ¨å’Œåº•éƒ¨å¤–è¾¹è·éƒ½ä¼šæŠ˜å ã€‚<br>
PSï¼šåªæœ‰ä¸Šä¸‹å¤–è¾¹è·ä¼šäº§ç”ŸæŠ˜å ï¼Œå·¦å³å¤–è¾¹è·ä¸ä¼šæŠ˜å ã€‚æŠ˜å å¤–è¾¹è·å°±åƒâ€œä¸ªäººç©ºé—´â€ã€‚å¦‚æœåœ¨å…¬äº¤è½¦ç«™ç«™ç€ä¸¤ä¸ªäººï¼Œä»–ä»¬æ¯ä¸ªäººéƒ½è®¤ä¸ºè¾ƒä¸ºèˆ’é€‚çš„ä¸ªäººç©ºé—´åº”ä¸º3è‹±å°ºï¼Œé‚£ä¹ˆä»–ä»¬å°±ä¼šä¹æ„é—´éš”3è‹±å°ºï¼Œè€Œä¸å¿…é—´éš”6è‹±å°ºæ‰è®©åŒæ–¹æ»¡æ„ã€‚</p>
<h3 id="å®¹å™¨å†…å †å å…ƒç´ çš„é—´è·"> å®¹å™¨å†…å †å å…ƒç´ çš„é—´è·</h3>
<p>å®¹å™¨çš„å†…è¾¹è·å’Œå†…å®¹çš„å¤–è¾¹è·ä¹‹é—´çš„ç›¸äº’ä½œç”¨å¤„ç†èµ·æ¥å¾ˆæ£˜æ‰‹ã€‚</p>
<p>ä¾‹å¦‚ï¼šå®¹å™¨æœ‰1.5emçš„padding,æƒ³å°†å®¹å™¨å†…çš„å¤šä¸ªå—çº§å…ƒç´ éš”å¼€ä¸€ä¸ªé—´éš™ï¼Œä½¿ç”¨margin-top:.5emã€‚å…ƒç´ ä¹‹é—´ç¡®å®éš”å¼€äº†ï¼Œä½†å®¹å™¨é¡¶éƒ¨1.5emçš„paddingåŠ ä¸Šç¬¬ä¸€ä¸ªå…ƒç´ çš„.5em marginä¼šå¯¼è‡´å®¹å™¨é¡¶éƒ¨ç©ºé—´è¿‡å¤§ã€‚</p>
<p>è§£å†³æ–¹æ³•ä¸ºï¼šä½¿ç”¨å…„å¼Ÿé€‰æ‹©å™¨ã€‚.button-link+.button-linkï¼Œè¿™ä¸ä¼šé€‰æ‹©ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚<br>
æ›´é€šç”¨çš„æ–¹æ³•ä¸ºï¼šçŒ«å¤´é¹°é€‰æ‹©å™¨ã€‚<code>*+*</code>ã€‚è¿™ä¼šé€‰ä¸­é¡µé¢ä¸Šæœ‰ç€ç›¸åŒçˆ¶çº§çš„éç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚</p>
<h2 id="æ¸²æŸ“"> æ¸²æŸ“</h2>
<p>æµè§ˆå™¨è®¡ç®—å¥½äº†é¡µé¢ä¸Šå“ªäº›æ ·å¼åº”ç”¨äºå“ªäº›å…ƒç´ ä¸Šä¹‹åï¼Œéœ€è¦æŠŠè¿™äº›æ ·å¼è½¬åŒ–æˆå±å¹•ä¸Šçš„åƒç´ ï¼Œè¿™ä¸ªè¿‡ç¨‹å«ä½œæ¸²æŸ“(rending)ã€‚æ¸²æŸ“å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šå¸ƒå±€ã€ç»˜åˆ¶å’Œåˆæˆã€‚</p>
<h3 id="å¸ƒå±€"> å¸ƒå±€</h3>
<p>åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µå¸ƒå±€ä¸­ï¼Œæµè§ˆå™¨éœ€è¦è®¡ç®—æ¯ä¸ªå…ƒç´ å°†åœ¨å±å¹•ä¸Šå å¤šå¤§ç©ºé—´ã€‚å› ä¸ºæ–‡æ¡£æµçš„å·¥ä½œæ–¹å¼ï¼Œæ‰€ä»¥ä¸€ä¸ªå…ƒç´ çš„å¤§å°å’Œä½ç½®å¯ä»¥å½±å“é¡µé¢ä¸Šæ— æ•°å…¶ä»–å…ƒç´ çš„å¤§å°å’Œä½ç½®ã€‚</p>
<p>ä»»ä½•æ—¶å€™æ”¹å˜ä¸€ä¸ªå…ƒç´ çš„å®½åº¦æˆ–é«˜åº¦ï¼Œæˆ–è€…è°ƒæ•´ä½ç½®å±æ€§(æ¯”å¦‚topæˆ–è€…left)ï¼Œå…ƒç´ çš„å¸ƒå±€éƒ½ä¼šé‡æ–°è®¡ç®—ã€‚å¦‚æœä½¿ç”¨JavaScriptåœ¨DOMä¸­æ’å…¥æˆ–è€…ç§»é™¤å…ƒç´ ï¼Œä¹Ÿä¼šé‡æ–°è®¡ç®—å¸ƒå±€ã€‚ä¸€æ—¦å¸ƒå±€å‘ç”Ÿæ”¹å˜ï¼Œæµè§ˆå™¨å°±å¿…é¡» <strong>é‡æ’(reflow)</strong> é¡µé¢ï¼Œé‡æ–°è®¡ç®—æ‰€æœ‰å…¶ä»–è¢«ç§»åŠ¨æˆ–è€…ç¼©æ”¾çš„å…ƒç´ çš„å¸ƒå±€ã€‚</p>
<h3 id="ç»˜åˆ¶"> ç»˜åˆ¶</h3>
<p>å¸ƒå±€ä¹‹åæ˜¯ç»˜åˆ¶ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å¡«å……åƒç´ ï¼šæç»˜æ–‡æœ¬ï¼Œç€è‰²å›¾ç‰‡ã€è¾¹æ¡†å’Œé˜´å½±ã€‚è¿™ä¸ä¼šçœŸæ­£æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œè€Œæ˜¯åœ¨å†…å­˜ä¸­ç»˜åˆ¶ã€‚é¡µé¢å„éƒ¨åˆ†ç”Ÿæˆäº†å¾ˆå¤šçš„<strong>å›¾å±‚(layers)</strong>ã€‚</p>
<p>å¦‚æœæ”¹å˜æŸä¸ªå…ƒç´ çš„èƒŒæ™¯é¢œè‰²ï¼Œå°±å¿…é¡»<strong>é‡æ–°ç»˜åˆ¶</strong>å®ƒã€‚ä½†å› ä¸ºæ›´æ”¹èƒŒæ™¯é¢œè‰²ä¸ä¼šå½±å“åˆ°é¡µé¢ä¸Šä»»ä½•å…ƒç´ çš„ä½ç½®å’Œå¤§å°ï¼Œæ‰€ä»¥è¿™ç§å˜åŒ–ä¸éœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€ã€‚</p>
<p>æŸäº›æ¡ä»¶ä¸‹ï¼Œé¡µé¢å…ƒç´ ä¼šè¢«æå–åˆ°è‡ªå·±çš„å›¾å±‚ã€‚è¿™æ—¶å€™ï¼Œå®ƒä¼šä»é¡µé¢çš„å…¶ä»–å›¾å±‚ä¸­ç‹¬ç«‹å‡ºæ¥å•ç‹¬ç»˜åˆ¶ã€‚æµè§ˆå™¨æŠŠè¿™ä¸ªå›¾å±‚å‘é€åˆ°è®¡ç®—æœºçš„GPUè¿›è¡Œç»˜åˆ¶ï¼Œè€Œä¸æ˜¯åƒä¸»å›¾å±‚é‚£æ ·ä½¿ç”¨ä¸»CPUç»˜åˆ¶ã€‚è¿™å°±æ˜¯ç¡¬ä»¶åŠ é€Ÿ(hardware acceleration)ã€‚</p>
<h3 id="åˆæˆ"> åˆæˆ</h3>
<p>åœ¨åˆæˆ(composite)é˜¶æ®µï¼Œæµè§ˆå™¨æ”¶é›†æ‰€æœ‰ç»˜åˆ¶å®Œæˆçš„å›¾å±‚ï¼Œå¹¶æŠŠå®ƒä»¬æå–ä¸ºæœ€ç»ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å›¾åƒã€‚åˆæˆè¿‡ç¨‹éœ€è¦æŒ‰ç…§ç‰¹å®šé¡ºåºè¿›è¡Œï¼Œä»¥ç¡®ä¿å›¾å±‚å‡ºç°é‡å æ—¶ï¼Œæ­£ç¡®çš„å›¾å±‚æ˜¾ç¤ºåœ¨å…¶ä»–å›¾å±‚ä¹‹ä¸Šã€‚</p>
<p><strong>opacityå’Œtransform</strong>è¿™ä¸¤ä¸ªå±æ€§å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œéœ€è¦çš„æ¸²æŸ“æ—¶é—´å°±ä¼šéå¸¸å°‘ã€‚å½“æˆ‘ä»¬ä¿®æ”¹å…ƒç´ çš„è¿™ä¸¤ä¸ªå±æ€§ä¹‹ä¸€æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šæŠŠå…ƒç´ æå‡åˆ°å…¶è‡ªå·±çš„ç»˜åˆ¶å›¾å±‚å¹¶ä½¿ç”¨GPUåŠ é€Ÿã€‚å› ä¸ºå…ƒç´ å­˜åœ¨äºè‡ªå·±çš„å›¾å±‚ï¼Œæ‰€ä»¥æ•´ä¸ªå›¾åƒå˜åŒ–è¿‡ç¨‹ä¸­ä¸»å›¾å±‚å°†ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿæ— é¡»é‡å¤çš„é‡ç»˜ã€‚</p>
<p>å› æ­¤ï¼Œå¤„ç†è¿‡æ¸¡æˆ–è€…åŠ¨ç”»çš„æ—¶å€™ï¼Œå°½é‡åªæ”¹å˜transformå’Œopacityå±æ€§ã€‚å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥ä¿®æ”¹é‚£äº›åªå¯¼è‡´é‡ç»˜è€Œä¸ä¼šé‡æ–°å¸ƒå±€çš„å±æ€§ã€‚åªæœ‰åœ¨æ²¡æœ‰å…¶ä»–æ›¿ä»£æ–¹æ¡ˆçš„æ—¶å€™ï¼Œå†å»ä¿®æ”¹é‚£äº›å½±å“å¸ƒå±€çš„å±æ€§ã€‚</p>
<h2 id="csså±æ€§å»ºè®®ä¹¦å†™é¡ºåº"> csså±æ€§å»ºè®®ä¹¦å†™é¡ºåº</h2>
<table>
<thead>
<tr>
<th>æ˜¾ç¤ºå±æ€§</th>
<th>è‡ªèº«å±æ€§</th>
<th>æ–‡æœ¬å±æ€§å’Œå…¶ä»–ä¿®é¥°</th>
</tr>
</thead>
<tbody>
<tr>
<td>display</td>
<td>width</td>
<td>font</td>
</tr>
<tr>
<td>visibility</td>
<td>height</td>
<td>text-align</td>
</tr>
<tr>
<td>position</td>
<td>margin</td>
<td>text-decoration</td>
</tr>
<tr>
<td>float</td>
<td>padding</td>
<td>vertical-align</td>
</tr>
<tr>
<td>clear</td>
<td>border</td>
<td>white-space</td>
</tr>
<tr>
<td>list-style</td>
<td>overflow</td>
<td>color</td>
</tr>
<tr>
<td>top</td>
<td>min-width</td>
<td>background</td>
</tr>
</tbody>
</table>
<p>ä»å·¦åˆ°å³ã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">CSSå¸ƒå±€</title>
    <id>https://kigane.github.io/note/js/css-layout/</id>
    <link href="https://kigane.github.io/note/js/css-layout/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="æµ®åŠ¨å¸ƒå±€"> æµ®åŠ¨å¸ƒå±€</h2>
<p>è¦å®ç°å°†å›¾ç‰‡ç§»åŠ¨åˆ°ç½‘é¡µä¸€ä¾§ï¼Œå¹¶ä¸”è®©æ–‡å­—å›´ç»•å›¾ç‰‡çš„æ•ˆæœï¼Œæµ®åŠ¨æ˜¯å”¯ä¸€çš„æ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯è®¾è®¡æµ®åŠ¨çš„åˆè¡·ã€‚</p>
<h3 id="åŒå®¹å™¨æ¨¡å¼"> åŒå®¹å™¨æ¨¡å¼</h3>
<p>é€šè¿‡å°†å†…å®¹æ”¾ç½®åˆ°ä¸¤ä¸ªåµŒå¥—çš„å®¹å™¨ä¸­ï¼Œç„¶åç»™å†…å±‚çš„å®¹å™¨è®¾ç½®å¤–è¾¹è·ï¼Œè®©å®ƒåœ¨å¤–å±‚å®¹å™¨ä¸­å±…ä¸­ã€‚</p>
<details><summary>ç¤ºä¾‹ä»£ç </summary>
<p>åŒå®¹å™¨å¤–å±‚ä¸ºbodyï¼Œå†…å±‚ä¸º.container</p>
<div><pre><code><span><span>&lt;!</span><span>doctype</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>style</span><span>></span></span><span><span>
    <span>/* å…¨å±€è®¾ç½®ä¸ºborder-box */</span>
    <span>:root</span> <span>{</span>
      <span>box-sizing</span><span>:</span> border-box<span>;</span>
    <span>}</span>

    <span>*,
    ::before,
    ::after</span> <span>{</span>
      <span>box-sizing</span><span>:</span> inherit<span>;</span>
    <span>}</span>

    <span>body</span> <span>{</span>
      <span>background-color</span><span>:</span> #eee<span>;</span>
      <span>font-family</span><span>:</span> Helvetica<span>,</span> Arial<span>,</span> sans-serif<span>;</span>
    <span>}</span>

    <span>/* çŒ«å¤´é¹°é€‰æ‹©å™¨ */</span>
    <span>body * + *</span> <span>{</span>
      <span>margin-top</span><span>:</span> 1.5em<span>;</span>
    <span>}</span>

    <span>header</span> <span>{</span>
      <span>padding</span><span>:</span> 1em 1.5em<span>;</span>
      <span>color</span><span>:</span> #fff<span>;</span>
      <span>background-color</span><span>:</span> #0072b0<span>;</span>
      <span>border-radius</span><span>:</span> .5em<span>;</span>
      <span>margin-bottom</span><span>:</span> 1.5em<span>;</span>
    <span>}</span>

    <span>.main</span> <span>{</span>
      <span>padding</span><span>:</span> 0 1.5em<span>;</span>
      <span>background-color</span><span>:</span> #fff<span>;</span>
      <span>border-radius</span><span>:</span> .5em<span>;</span>
    <span>}</span>

    <span>.container</span> <span>{</span>
      <span>max-width</span><span>:</span> 1080px<span>;</span>
      <span>margin</span><span>:</span> 0 auto<span>;</span>
    <span>}</span>

  </span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
<span><span><span>&lt;/</span>head</span><span>></span></span>

<span><span><span>&lt;</span>body</span><span>></span></span>
  <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>container<span>"</span></span><span>></span></span>
    <span><span><span>&lt;</span>header</span><span>></span></span>
      <span><span><span>&lt;</span>h1</span><span>></span></span>Franklin Running Club<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span><span><span>&lt;/</span>header</span><span>></span></span>

    <span><span><span>&lt;</span>main</span> <span>class</span><span><span>=</span><span>"</span>main clearfix<span>"</span></span><span>></span></span>
      <span><span><span>&lt;</span>h2</span><span>></span></span>Running tips<span><span><span>&lt;/</span>h2</span><span>></span></span>

      <span><span><span>&lt;</span>div</span><span>></span></span>
        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>img</span> <span>class</span><span><span>=</span><span>"</span>media-image<span>"</span></span> <span>src</span><span><span>=</span><span>"</span>shoes.png<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media-body<span>"</span></span><span>></span></span>
            <span><span><span>&lt;</span>h4</span><span>></span></span>Strength<span><span><span>&lt;/</span>h4</span><span>></span></span>
            <span><span><span>&lt;</span>p</span><span>></span></span>
              Strength training is an important part of
              injury prevention. Focus on your core<span title="&mdash;">&amp;mdash;</span>
              especially your abs and glutes.
            <span><span><span>&lt;/</span>p</span><span>></span></span>
          <span><span><span>&lt;/</span>div</span><span>></span></span>
        <span><span><span>&lt;/</span>div</span><span>></span></span>

        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>img</span> <span>class</span><span><span>=</span><span>"</span>media-image<span>"</span></span> <span>src</span><span><span>=</span><span>"</span>runner.png<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media-body<span>"</span></span><span>></span></span>
            <span><span><span>&lt;</span>h4</span><span>></span></span>Cadence<span><span><span>&lt;/</span>h4</span><span>></span></span>
            <span><span><span>&lt;</span>p</span><span>></span></span>
              Check your stride turnover. The most efficient
              runners take about 180 steps per minute.
            <span><span><span>&lt;/</span>p</span><span>></span></span>
          <span><span><span>&lt;/</span>div</span><span>></span></span>
        <span><span><span>&lt;/</span>div</span><span>></span></span>

        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>img</span> <span>class</span><span><span>=</span><span>"</span>media-image<span>"</span></span> <span>src</span><span><span>=</span><span>"</span>runner.png<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media-body<span>"</span></span><span>></span></span>
            <span><span><span>&lt;</span>h4</span><span>></span></span>Change it up<span><span><span>&lt;/</span>h4</span><span>></span></span>
            <span><span><span>&lt;</span>p</span><span>></span></span>
              Don't run the same every time you hit the
              road. Vary your pace, and vary the distance
              of your runs.
            <span><span><span>&lt;/</span>p</span><span>></span></span>
          <span><span><span>&lt;/</span>div</span><span>></span></span>
        <span><span><span>&lt;/</span>div</span><span>></span></span>

        <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>img</span> <span>class</span><span><span>=</span><span>"</span>media-image<span>"</span></span> <span>src</span><span><span>=</span><span>"</span>shoes.png<span>"</span></span><span>></span></span>
          <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>media-body<span>"</span></span><span>></span></span>
            <span><span><span>&lt;</span>h4</span><span>></span></span>Focus on form<span><span><span>&lt;/</span>h4</span><span>></span></span>
            <span><span><span>&lt;</span>p</span><span>></span></span>
              Run tall but relaxed. Your feet should hit
              the ground beneath your hips, not out in
              front of you.
            <span><span><span>&lt;/</span>p</span><span>></span></span>
          <span><span><span>&lt;/</span>div</span><span>></span></span>
        <span><span><span>&lt;/</span>div</span><span>></span></span>

      <span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;/</span>main</span><span>></span></span>
  <span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;/</span>body</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br></div></div></details>
<h3 id="å®¹å™¨æŠ˜å "> å®¹å™¨æŠ˜å </h3>
<p>æµ®åŠ¨å…ƒç´ ä¸åŒäºæ™®é€šæ–‡æ¡£æµçš„å…ƒç´ ï¼Œå®ƒä»¬çš„é«˜åº¦ä¸ä¼šåŠ åˆ°çˆ¶å…ƒç´ ä¸Šã€‚è¿™ä¼šé€ æˆå®¹å™¨æŠ˜å é—®é¢˜(å®¹å™¨å†…æ‰€æœ‰å…ƒç´ éƒ½æµ®åŠ¨äº†ï¼Œå®¹å™¨çš„é«˜åº¦å°±æ’‘ä¸å¼€)ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆ1<br>
å› ä¸ºæµ®åŠ¨å…ƒç´ çš„å¤–è¾¹è·ä¸ä¼šæŠ˜å åˆ°æ¸…é™¤æµ®åŠ¨å®¹å™¨çš„å¤–éƒ¨ï¼Œéæµ®åŠ¨å…ƒç´ çš„å¤–è¾¹è·åˆ™ä¼šæ­£å¸¸æŠ˜å ã€‚æ‰€ä»¥h2å’Œ.containerçš„å¤–è¾¹è·æŠ˜å äº†ï¼Œh2çš„å†…å®¹ç´§è´´åœ¨å®¹å™¨é¡¶éƒ¨ã€‚</p>
<div><pre><code><span>.clearfix::after</span> <span>{</span>
    <span>display</span><span>:</span> block<span>;</span> <span>/* clearåªå¯¹å—çº§å…ƒç´ æœ‰æ•ˆã€‚ */</span>
    <span>content</span><span>:</span> <span>" "</span><span>;</span> <span>/* è®¾ç½®contentè®©ä¼ªå…ƒç´ å‡ºç°åœ¨æ–‡æ¡£ä¸­ */</span>
    <span>clear</span><span>:</span> both<span>;</span> <span>/* clear: bothå£°æ˜è®©è¯¥å…ƒç´ ç§»åŠ¨åˆ°æµ®åŠ¨å…ƒç´ çš„ä¸‹é¢ï¼Œè€Œä¸æ˜¯ä¾§é¢ã€‚clearçš„å€¼è¿˜å¯ä»¥è®¾ç½®ä¸ºleftæˆ–è€…rightï¼Œè¿™æ ·åªä¼šç›¸åº”åœ°æ¸…é™¤å‘å·¦æˆ–è€…å‘å³æµ®åŠ¨çš„å…ƒç´ ã€‚å› ä¸ºç©ºdivæœ¬èº«æ²¡æœ‰æµ®åŠ¨ï¼Œæ‰€ä»¥å®¹å™¨å°±ä¼šæ‰©å±•ï¼Œç›´åˆ°åŒ…å«å®ƒï¼Œå› æ­¤ä¹Ÿä¼šåŒ…å«è¯¥divä¸Šé¢çš„æµ®åŠ¨å…ƒç´ ã€‚ */</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>è§£å†³æ–¹æ¡ˆ2<br>
ä½¿ç”¨display: tableèƒ½å¤ŸåŒ…å«å¤–è¾¹è·ï¼Œæ˜¯å› ä¸ºåˆ©ç”¨äº†CSSçš„ä¸€äº›ç‰¹æ€§ã€‚åˆ›å»ºä¸€ä¸ªdisplay: tableå…ƒç´ ï¼Œä¹Ÿå°±åœ¨å…ƒç´ å†…éšå¼åˆ›å»ºäº†ä¸€ä¸ªè¡¨æ ¼è¡Œå’Œä¸€ä¸ªå•å…ƒæ ¼ã€‚å¤–è¾¹è·æ— æ³•é€šè¿‡å•å…ƒæ ¼å…ƒç´ æŠ˜å ï¼Œä»è€Œæ‰€æœ‰å­å…ƒç´ çš„å¤–è¾¹è·éƒ½ä¼šåŒ…å«åœ¨å®¹å™¨çš„é¡¶éƒ¨å’Œåº•éƒ¨ä¹‹é—´ã€‚</p>
<div><pre><code><span>.clearfix::before,
.clearfix::after</span> <span>{</span>
    <span>display</span><span>:</span> table<span>;</span>
    <span>content</span><span>:</span> <span>" "</span><span>;</span>
<span>}</span>
<span>.clearfix::after</span> <span>{</span>
    <span>clear</span><span>:</span> both<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h3 id="æµ®åŠ¨é™·é˜±"> æµ®åŠ¨é™·é˜±</h3>
<p>ç¬¬ä¸€ä¸ªå…ƒç´ ä¸‹æœ‰å¾ˆå¤§ä¸€ç‰‡ç©ºç™½ã€‚
<img src="/assets/img/float-trap.png" alt="æµ®åŠ¨é™·é˜±" /></p>
<p>è¦æƒ³ä¿®å¤è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼šæ¸…é™¤ç¬¬ä¸‰ä¸ªæµ®åŠ¨å…ƒç´ ä¸Šé¢çš„æµ®åŠ¨ã€‚æ›´é€šç”¨çš„åšæ³•æ˜¯ï¼Œæ¸…é™¤æ¯è¡Œçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸Šé¢çš„æµ®åŠ¨ã€‚</p>
<div><pre><code><span>.media</span> <span>{</span>
    <span>float</span><span>:</span> left<span>;</span>
    <span>margin</span><span>:</span> 0 1.5em 1.5em 0<span>;</span> <span>/* çŒ«å¤´é¹°é€‰æ‹©å™¨ä¼šå¯¼è‡´ç¬¬ä¸€ä¸ªå…ƒç´ æ²¡æœ‰margin-topï¼Œä»è€Œç¬¬ä¸€è¡Œé¡¶ç«¯å¯¹ä¸é½ã€‚æ•…é‡è®¾ */</span>
    <span>width</span><span>:</span> <span>calc</span><span>(</span>50% - 1.5em<span>)</span><span>;</span> <span>/* ä¸ºmarginç•™å‡ºç©ºé—´ */</span>
    <span>padding</span><span>:</span> 1.5em<span>;</span>
    <span>background-color</span><span>:</span> #eee<span>;</span>
    <span>border-radius</span><span>:</span> 0.5em<span>;</span>
<span>}</span>

<span>/* æ¸…é™¤æ¯è¡Œçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸Šé¢çš„æµ®åŠ¨ */</span>
<span>.media:nth-child(odd)</span> <span>{</span>
    <span>clear</span><span>:</span> left<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h3 id="åª’ä½“å¯¹è±¡"> åª’ä½“å¯¹è±¡</h3>
<p>å›¾ç‰‡åœ¨ä¸€ä¾§ï¼Œä¸€æ®µæ–‡å­—å‡ºç°åœ¨å›¾ç‰‡çš„æ—è¾¹ã€‚è¿™æ˜¯ä¸€ç§å¾ˆå…¸å‹çš„ç½‘é¡µå¸ƒå±€ï¼Œç§°ä¸ºâ€œåª’ä½“å¯¹è±¡â€ã€‚<br>
å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡(block formatting context, BFC)<br>
BFCæ˜¯ç½‘é¡µçš„ä¸€å—åŒºåŸŸï¼Œå…ƒç´ åŸºäºè¿™å—åŒºåŸŸå¸ƒå±€ã€‚è™½ç„¶BFCæœ¬èº«æ˜¯ç¯ç»•æ–‡æ¡£æµçš„ä¸€éƒ¨åˆ†ï¼Œä½†å®ƒå°†å†…éƒ¨çš„å†…å®¹ä¸å¤–éƒ¨çš„ä¸Šä¸‹æ–‡éš”ç¦»å¼€ã€‚è¿™ç§éš”ç¦»ä¸ºåˆ›å»ºBFCçš„å…ƒç´ åšå‡ºäº†ä»¥ä¸‹3ä»¶äº‹æƒ…ã€‚</p>
<ol>
<li>åŒ…å«äº†å†…éƒ¨æ‰€æœ‰å…ƒç´ çš„ä¸Šä¸‹å¤–è¾¹è·ã€‚å®ƒä»¬ä¸ä¼šè·ŸBFCå¤–é¢çš„å…ƒç´ äº§ç”Ÿå¤–è¾¹è·æŠ˜å ã€‚</li>
<li>åŒ…å«äº†å†…éƒ¨æ‰€æœ‰çš„æµ®åŠ¨å…ƒç´ ã€‚</li>
<li>ä¸ä¼šè·ŸBFCå¤–é¢çš„æµ®åŠ¨å…ƒç´ é‡å ã€‚</li>
</ol>
<hr>
<p>ç»™å…ƒç´ æ·»åŠ ä»¥ä¸‹çš„ä»»æ„å±æ€§å€¼éƒ½ä¼šåˆ›å»ºBFCã€‚</p>
<ul>
<li>float: leftæˆ–rightï¼Œä¸ä¸ºnoneå³å¯ã€‚</li>
<li>overflow:hiddenã€autoæˆ–scrollï¼Œä¸ä¸ºvisibleå³å¯ã€‚æœ€ç®€å•ï¼Œæ¨èä½¿ç”¨ã€‚</li>
<li>display:inline-blockã€table-cellã€table-captionã€flexã€inline-flexã€gridæˆ–inline-gridã€‚æ‹¥æœ‰è¿™äº›å±æ€§çš„å…ƒç´ ç§°ä¸ºå—çº§å®¹å™¨ã€‚</li>
<li>position:absoluteæˆ–position: fixedã€‚</li>
</ul>
<h3 id="ç½‘æ ¼ç³»ç»Ÿ"> ç½‘æ ¼ç³»ç»Ÿ</h3>
<p>å¤§éƒ¨åˆ†æµè¡Œçš„CSSæ¡†æ¶åŒ…å«äº†è‡ªå·±çš„ç½‘æ ¼ç³»ç»Ÿã€‚å®ƒä»¬çš„å®ç°ç»†èŠ‚å„ä¸ç›¸åŒï¼Œä½†æ˜¯è®¾è®¡æ€æƒ³ç›¸åŒï¼šåœ¨ä¸€ä¸ªè¡Œå®¹å™¨é‡Œæ”¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å®¹å™¨ã€‚åˆ—å®¹å™¨çš„ç±»å†³å®šæ¯åˆ—çš„å®½åº¦ã€‚</p>
<ul>
<li>é€šå¸¸ç½‘æ ¼ç³»ç»Ÿçš„æ¯è¡Œè¢«åˆ’åˆ†ä¸ºç‰¹å®šæ•°é‡çš„åˆ—ï¼Œä¸€èˆ¬æ˜¯12ä¸ªï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–æ•°ã€‚æ¯è¡Œå­å…ƒç´ çš„å®½åº¦å¯èƒ½ç­‰äº1~12ä¸ªåˆ—çš„å®½åº¦ã€‚</li>
<li>è¡Œå…ƒç´ è´Ÿè´£æ¸…é™¤æµ®åŠ¨ï¼Œè®¾ç½®è´Ÿå¤–è¾¹è·è°ƒæ•´åˆ—å¤´å°¾å¯¹é½ï¼Œç­‰ç­‰ã€‚</li>
<li>åˆ—å…ƒç´ éƒ½æµ®åŠ¨ï¼Œç”¨ç™¾åˆ†æ¯”å®½åº¦+ä¸åŒç±»æ§åˆ¶åˆ—å®½(<code>.column-n{width:xx%}</code>)ã€‚column-</li>
</ul>
<h2 id="flexbox"> Flexbox</h2>
<ul>
<li>ç»™å…ƒç´ æ·»åŠ display: flexï¼Œè¯¥å…ƒç´ å˜æˆäº†ä¸€ä¸ªå¼¹æ€§å®¹å™¨(flex container)ï¼Œå®ƒçš„ç›´æ¥å­å…ƒç´ å˜æˆäº†å¼¹æ€§å­å…ƒç´ (flex item)ã€‚</li>
<li>å¼¹æ€§å­å…ƒç´ é»˜è®¤æ˜¯åœ¨åŒä¸€è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºå¹¶æ’æ’åˆ—ã€‚</li>
<li>å¼¹æ€§å®¹å™¨åƒå—å…ƒç´ ä¸€æ ·å¡«æ»¡å¯ç”¨å®½åº¦ï¼Œä½†æ˜¯å¼¹æ€§å­å…ƒç´ ä¸ä¸€å®šå¡«æ»¡å…¶å¼¹æ€§å®¹å™¨çš„å®½åº¦ã€‚</li>
<li>å¼¹æ€§å­å…ƒç´ é«˜åº¦ç›¸ç­‰ï¼Œè¯¥é«˜åº¦ç”±å®ƒä»¬çš„å†…å®¹å†³å®šã€‚</li>
<li>å­å…ƒç´ æŒ‰ç…§ä¸»è½´çº¿æ’åˆ—ï¼Œä¸»è½´çš„æ–¹å‘ä¸ºä¸»èµ·ç‚¹(å·¦)åˆ°ä¸»ç»ˆç‚¹(å³)ã€‚å‚ç›´äºä¸»è½´çš„æ˜¯å‰¯è½´ã€‚æ–¹å‘ä»å‰¯èµ·ç‚¹(ä¸Š)åˆ°å‰¯ç»ˆç‚¹(ä¸‹)ã€‚</li>
<li>Flexboxå…è®¸ä½¿ç”¨margin: autoæ¥å¡«å……å¼¹æ€§å­å…ƒç´ ä¹‹é—´æ‰€æœ‰çš„å¯ç”¨ç©ºé—´</li>
<li>flexå±æ€§æ§åˆ¶å¼¹æ€§å­å…ƒç´ åœ¨ä¸»è½´æ–¹å‘ä¸Šçš„å¤§å°,åœ¨è¿™é‡ŒæŒ‡çš„å…ƒç´ çš„å®½åº¦ã€‚flexå±æ€§æ˜¯ä¸‰ä¸ªä¸åŒå¤§å°å±æ€§çš„ç®€å†™ï¼šflex-growã€flex-shrinkå’Œflex-basisã€‚
<ul>
<li>flex-basisï¼šé»˜è®¤å€¼ä¸º0%,å³ä¸å ä»»ä½•å®½åº¦ã€‚flex-basiså®šä¹‰äº†å…ƒç´ å¤§å°çš„åŸºå‡†å€¼ï¼Œå³ä¸€ä¸ªåˆå§‹çš„â€œä¸»å°ºå¯¸â€ã€‚flex-basiså±æ€§å¯ä»¥è®¾ç½®ä¸ºä»»æ„çš„widthå€¼ï¼ŒåŒ…æ‹¬pxã€emã€ç™¾åˆ†æ¯”ã€‚å®ƒçš„åˆå§‹å€¼æ˜¯autoï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šæ£€æŸ¥å…ƒç´ æ˜¯å¦è®¾ç½®äº†widthå±æ€§å€¼ã€‚å¦‚æœæœ‰ï¼Œåˆ™ä½¿ç”¨widthçš„å€¼ä½œä¸ºflex-basisçš„å€¼ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™ç”¨å…ƒç´ å†…å®¹è‡ªèº«çš„å¤§å°ã€‚å¦‚æœflex-basisçš„å€¼ä¸æ˜¯auto, widthå±æ€§ä¼šè¢«å¿½ç•¥ã€‚</li>
<li>flex-growï¼šé»˜è®¤å€¼ä¸º1ã€‚æ¯ä¸ªå¼¹æ€§å­å…ƒç´ çš„flex-basiså€¼è®¡ç®—å‡ºæ¥åï¼Œå®ƒä»¬(åŠ ä¸Šå­å…ƒç´ ä¹‹é—´çš„å¤–è¾¹è·)åŠ èµ·æ¥ä¼šå æ®ä¸€å®šçš„å®½åº¦ã€‚åŠ èµ·æ¥çš„å®½åº¦ä¸ä¸€å®šæ­£å¥½å¡«æ»¡å¼¹æ€§å®¹å™¨çš„å®½åº¦ï¼Œå¯èƒ½ä¼šæœ‰ç•™ç™½ã€‚å¤šå‡ºæ¥çš„ç•™ç™½(æˆ–å‰©ä½™å®½åº¦)ä¼šæŒ‰ç…§flex-grow(å¢é•¿å› å­)çš„å€¼åˆ†é…ç»™æ¯ä¸ªå¼¹æ€§å­å…ƒç´ ï¼Œflex-growçš„å€¼ä¸º<strong>éè´Ÿæ•´æ•°</strong>ã€‚å¦‚æœä¸€ä¸ªå¼¹æ€§å­å…ƒç´ çš„flex-growå€¼ä¸º0ï¼Œé‚£ä¹ˆå®ƒçš„å®½åº¦ä¸ä¼šè¶…è¿‡flex-basisçš„å€¼ï¼›å¦‚æœæŸä¸ªå¼¹æ€§å­å…ƒç´ çš„å¢é•¿å› å­é0ï¼Œé‚£ä¹ˆè¿™äº›å…ƒç´ ä¼šå¢é•¿åˆ°æ‰€æœ‰çš„å‰©ä½™ç©ºé—´è¢«åˆ†é…(æŒ‰ç»™å®šçš„æƒé‡åˆ†é…)å®Œï¼Œä¹Ÿå°±æ„å‘³ç€å¼¹æ€§å­å…ƒç´ ä¼šå¡«æ»¡å®¹å™¨çš„å®½åº¦ã€‚</li>
<li>flex-shrinkï¼šé»˜è®¤å€¼ä¸º1ã€‚lex-shrinkå±æ€§ä¸flex-growéµå¾ªç›¸ä¼¼çš„åŸåˆ™ã€‚è®¡ç®—å‡ºå¼¹æ€§å­å…ƒç´ çš„åˆå§‹ä¸»å°ºå¯¸åï¼Œå®ƒä»¬çš„ç´¯åŠ å€¼å¯èƒ½ä¼šè¶…å‡ºå¼¹æ€§å®¹å™¨çš„å¯ç”¨å®½åº¦ã€‚å¦‚æœä¸ç”¨flex-shrinkï¼Œå°±ä¼šå¯¼è‡´æº¢å‡ºã€‚æ¯ä¸ªå­å…ƒç´ çš„flex-shrinkå€¼ä»£è¡¨äº†å®ƒæ˜¯å¦åº”è¯¥æ”¶ç¼©ä»¥é˜²æ­¢æº¢å‡ºã€‚å¦‚æœæŸä¸ªå­å…ƒç´ ä¸ºflex-shrink: 0ï¼Œåˆ™ä¸ä¼šæ”¶ç¼©ï¼›å¦‚æœå€¼å¤§äº0ï¼Œåˆ™ä¼šæ”¶ç¼©è‡³ä¸å†æº¢å‡ºã€‚æŒ‰ç…§flex-shrinkå€¼çš„æ¯”ä¾‹ï¼Œå€¼è¶Šå¤§çš„å…ƒç´ æ”¶ç¼©å¾—è¶Šå¤šã€‚</li>
<li>PS:å½“flex-basisä¸º0%æ—¶ï¼Œå†…è¾¹è·ä¼šæ”¹å˜å¼¹æ€§å­å…ƒç´ çš„åˆå§‹ä¸»å®½åº¦è®¡ç®—çš„æ–¹å¼ã€‚
<img src="/assets/img/flux-layout-example.png" alt="examples" /></li>
</ul>
</li>
<li>Flexboxçš„å¦ä¸€ä¸ªé‡è¦åŠŸèƒ½æ˜¯èƒ½ç”¨å¼¹æ€§å®¹å™¨çš„flex-directionå±æ€§åˆ‡æ¢ä¸»å‰¯è½´æ–¹å‘ã€‚å®ƒçš„åˆå§‹å€¼(row)æ§åˆ¶å­å…ƒç´ æŒ‰ä»å·¦åˆ°å³çš„æ–¹å‘æ’åˆ—ï¼›æŒ‡å®šflex-direction: columnèƒ½æ§åˆ¶å¼¹æ€§å­å…ƒç´ æ²¿å‚ç›´æ–¹å‘æ’åˆ—(ä»ä¸Šåˆ°ä¸‹)ã€‚Flexboxè¿˜æ”¯æŒrow-reverseè®©å…ƒç´ ä»å³åˆ°å·¦æ’åˆ—ï¼Œcolumn-reverseè®©å…ƒç´ ä»ä¸‹åˆ°ä¸Šæ’åˆ—</li>
</ul>
<h3 id="input"> input</h3>
<ul>
<li>inputå…ƒç´ å¯ä»¥æ˜¯æ–‡æœ¬å’Œå¯†ç è¾“å…¥æ¡†ä»¥åŠå¾ˆå¤šç±»ä¼¼çš„HTML5è¾“å…¥æ¡†ï¼Œæ¯”å¦‚æ•°å­—ã€é‚®ç®±ã€æ—¥æœŸè¾“å…¥æ¡†ã€‚å®ƒè¿˜å¯ä»¥æ˜¯çœ‹èµ·æ¥å®Œå…¨ä¸ä¸€æ ·çš„è¾“å…¥å…ƒç´ ï¼Œå³å•é€‰æŒ‰é’®å’Œå¤é€‰æ¡†ã€‚<code>input:not([type=checkbox]):not([type=radio])</code>å¯ä»¥æ’é™¤å•é€‰æŒ‰é’®å’Œå¤é€‰æ¡†ã€‚</li>
<li>å¯¹inputè®¾ç½®äº†display: blockï¼Œè®©å®ƒä»¬å•ç‹¬å æ®ä¸€è¡Œï¼Œè¿˜è¦å°†å…¶å®½åº¦è®¾ç½®ä¸º100%ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå—çº§å…ƒç´ ä¼šè‡ªåŠ¨å¡«æ»¡å¯ç”¨å®½åº¦ï¼Œä½†æ˜¯inputæ¯”è¾ƒç‰¹æ®Šï¼Œå…¶å®½åº¦ç”±sizeå±æ€§å†³å®šï¼Œè€Œå®ƒè¡¨ç¤ºä¸å‡ºæ»šåŠ¨æ¡çš„æƒ…å†µä¸‹å¤§è‡´èƒ½å®¹çº³çš„å­—ç¬¦æ•°é‡ã€‚å¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œè¯¥å±æ€§å°±ä¼šæ¢å¤ä¸ºé»˜è®¤å€¼ã€‚</li>
</ul>
<h3 id="æ›´å¤šå±æ€§"> æ›´å¤šå±æ€§</h3>
<p>flex-container
<img src="/assets/img/flex-more1.png" alt="flex-container" />
flex-item
<img src="/assets/img/flex-more2.png" alt="flex-item" /></p>
<h2 id="ç½‘æ ¼å¸ƒå±€"> ç½‘æ ¼å¸ƒå±€</h2>
<ul>
<li>è·ŸFlexboxç±»ä¼¼ï¼Œç½‘æ ¼å¸ƒå±€ä¹Ÿæ˜¯ä½œç”¨äºä¸¤çº§çš„DOMç»“æ„ã€‚è®¾ç½®ä¸ºdisplay: gridçš„å…ƒç´ æˆä¸ºä¸€ä¸ªç½‘æ ¼å®¹å™¨(grid container)ã€‚å®ƒçš„å­å…ƒç´ åˆ™å˜æˆç½‘æ ¼å…ƒç´ (griditems)ã€‚å®¹å™¨ä¼šè¡¨ç°å¾—åƒä¸€ä¸ªå—çº§å…ƒç´ ï¼Œ100%å¡«å……å¯ç”¨å®½åº¦ã€‚</li>
<li>å®¹å™¨çš„grid-template-columnså’Œgrid-template-rowsã€‚è¿™ä¸¤ä¸ªå±æ€§å®šä¹‰äº†ç½‘æ ¼æ¯è¡Œæ¯åˆ—çš„å¤§å°ã€‚æ–°å•ä½frï¼Œä»£è¡¨æ¯ä¸€åˆ—(æˆ–æ¯ä¸€è¡Œ)çš„åˆ†æ•°å•ä½(fraction unit)ã€‚è¿™ä¸ªå•ä½è·ŸFlexboxä¸­flex-growå› å­çš„è¡¨ç°ä¸€æ ·ã€‚</li>
<li>å®¹å™¨çš„grid-gapå±æ€§å®šä¹‰äº†æ¯ä¸ªç½‘æ ¼å•å…ƒä¹‹é—´çš„é—´è·ã€‚ä¹Ÿå¯ä»¥ç”¨ä¸¤ä¸ªå€¼åˆ†åˆ«æŒ‡å®šå‚ç›´å’Œæ°´å¹³æ–¹å‘çš„é—´è·(æ¯”å¦‚grid-gap: 0.5em 1em)ã€‚</li>
</ul>
<hr>
<ul>
<li>ç½‘æ ¼çš„ç»„æˆéƒ¨åˆ†
<ul>
<li>ç½‘æ ¼çº¿(grid line)â€”â€”ç½‘æ ¼çº¿æ„æˆäº†ç½‘æ ¼çš„æ¡†æ¶ã€‚ä¸€æ¡ç½‘æ ¼çº¿å¯ä»¥æ°´å¹³æˆ–å‚ç›´ï¼Œä¹Ÿå¯ä»¥ä½äºä¸€è¡Œæˆ–ä¸€åˆ—çš„ä»»æ„ä¸€ä¾§ã€‚å¦‚æœæŒ‡å®šäº†grid-gapçš„è¯ï¼Œå®ƒå°±ä½äºç½‘æ ¼çº¿ä¸Šã€‚</li>
<li>ç½‘æ ¼è½¨é“(grid track)â€”â€”ä¸€ä¸ªç½‘æ ¼è½¨é“æ˜¯ä¸¤æ¡ç›¸é‚»ç½‘æ ¼çº¿ä¹‹é—´çš„ç©ºé—´ã€‚ç½‘æ ¼æœ‰æ°´å¹³è½¨é“(è¡Œ)å’Œå‚ç›´è½¨é“(åˆ—)ã€‚</li>
<li>ç½‘æ ¼å•å…ƒ(grid cell)â€”â€”ç½‘æ ¼ä¸Šçš„å•ä¸ªç©ºé—´ï¼Œæ°´å¹³å’Œå‚ç›´çš„ç½‘æ ¼è½¨é“äº¤å‰é‡å çš„éƒ¨åˆ†ã€‚</li>
<li>ç½‘æ ¼åŒºåŸŸ(grid area)â€”â€”ç½‘æ ¼ä¸Šçš„çŸ©å½¢åŒºåŸŸï¼Œç”±ä¸€ä¸ªåˆ°å¤šä¸ªç½‘æ ¼å•å…ƒç»„æˆã€‚è¯¥åŒºåŸŸä½äºä¸¤æ¡å‚ç›´ç½‘æ ¼çº¿å’Œä¸¤æ¡æ°´å¹³ç½‘æ ¼çº¿ä¹‹é—´ã€‚</li>
<li>repeat(num, pat1, ...)ï¼šå°†paté‡å¤numæ¬¡ã€‚ç±»ä¼¼å®ã€‚ä¾‹å¦‚ï¼Œrepeat(4, auto) === auto auto auto autoã€‚</li>
</ul>
</li>
<li>ç½‘æ ¼çº¿ç¼–å·ä»å·¦ä¸Šè§’ä¸º1å¼€å§‹é€’å¢ï¼Œè´Ÿæ•°åˆ™æŒ‡å‘ä»å³ä¸‹è§’å¼€å§‹çš„ä½ç½®ã€‚</li>
<li>ç½‘æ ¼å…ƒç´ å®šä½ï¼š
<ul>
<li>grid-column, grid-rowï¼šä¸¤ä¸ªå±æ€§ï¼Œæœ‰å››ä¸ªå€¼ï¼Œä»£è¡¨å››ä¸ªç½‘æ ¼çº¿ï¼Œåˆ‡å‡ºçš„å°é—­çŸ©å½¢å³ä¸ºå…ƒç´ å æ®çš„åŒºåŸŸã€‚ä¾‹å¦‚ï¼šgrid-column:1/3; grid-row:2/4;åœ¨ä¹å®«æ ¼ä¸­ä»£è¡¨å·¦ä¸‹å››ä¸ªæ ¼å­ã€‚</li>
<li>span n è¡¨ç¤ºæ‰©å±•è‡³næ ¼ã€‚ä¾‹å¦‚ï¼Œgrid-row:span 1 è¡¨ç¤ºåœ¨æ°´å¹³ç½‘æ ¼è½¨é“åªå ä¸€æ ¼ã€‚</li>
</ul>
</li>
<li>å¦ä¸€ç§å®šä½æ–¹å¼--ä½¿ç”¨å‘½åçš„ç½‘æ ¼åŒºåŸŸ
<ul>
<li>grid-template-areaså±æ€§ï¼šå€¼ä¸ºä¸€ç³»åˆ—åŠ å¼•å·å­—ç¬¦ä¸²ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦ä¸²ä»£è¡¨ç½‘æ ¼çš„ä¸€è¡Œï¼Œå­—ç¬¦ä¸²å†…ç”¨ç©ºæ ¼åŒºåˆ†æ¯ä¸€åˆ—ã€‚åœ¨CSSä¸­ç”»ä¸€ä¸ªå¯è§†åŒ–çš„ç½‘æ ¼å½¢è±¡ã€‚å¥ç‚¹ï¼Œä»£è¡¨ç•™ç©ºã€‚å¿…é¡»æ¯ä¸ªç½‘æ ¼éƒ½è¦å‘½åã€‚</li>
<li>ä¾‹å¦‚<code>&quot;title title&quot;\n &quot;nav nav&quot;\n &quot;main aside1&quot;\n &quot;main aside2&quot;\n</code></li>
</ul>
</li>
<li>å’ŒFlexçš„å¯¹æ¯”ï¼š
<ul>
<li>Flexboxæœ¬è´¨ä¸Šæ˜¯ä¸€ç»´çš„ï¼Œè€Œç½‘æ ¼æ˜¯äºŒç»´çš„ã€‚</li>
<li>Flexboxæ˜¯ä»¥å†…å®¹ä¸ºåˆ‡å…¥ç‚¹ç”±å†…å‘å¤–å·¥ä½œçš„ï¼Œè€Œç½‘æ ¼æ˜¯ä»¥å¸ƒå±€ä¸ºåˆ‡å…¥ç‚¹ä»å¤–å‘å†…å·¥ä½œçš„ã€‚ç”¨ç½‘æ ¼ç»™ç½‘é¡µçš„ä¸»åŒºåŸŸå®šä½æ˜¯å› ä¸ºæˆ‘ä»¬å¸Œæœ›å†…å®¹èƒ½é™åˆ¶åœ¨å®ƒæ‰€åœ¨çš„ç½‘æ ¼å†…ï¼Œä½†æ˜¯å¯¹äºç½‘é¡µä¸Šçš„å…¶ä»–å…ƒç´ ï¼Œæ¯”å¦‚å¯¼èˆªèœå•ï¼Œåˆ™å…è®¸å†…å®¹å¯¹å¸ƒå±€æœ‰æ›´å¤§çš„å½±å“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡å­—å¤šçš„å…ƒç´ å¯ä»¥å®½ä¸€äº›ï¼Œæ–‡å­—å°‘çš„å…ƒç´ åˆ™å¯ä»¥çª„ä¸€äº›ã€‚åŒæ—¶è¿™è¿˜æ˜¯ä¸€ä¸ªæ°´å¹³(ä¸€ç»´)å¸ƒå±€ã€‚å› æ­¤ï¼Œç”¨Flexboxæ¥å¤„ç†è¿™äº›å…ƒç´ æ›´åˆé€‚ã€‚</li>
</ul>
</li>
<li>å½“è®¾è®¡è¦æ±‚å…ƒç´ åœ¨ä¸¤ä¸ªç»´åº¦ä¸Šéƒ½å¯¹é½æ—¶ï¼Œä½¿ç”¨ç½‘æ ¼ã€‚å½“åªå…³å¿ƒä¸€ç»´çš„å…ƒç´ æ’åˆ—æ—¶ï¼Œä½¿ç”¨Flexboxã€‚è¿™æ„å‘³ç€ç½‘æ ¼æ›´é€‚åˆç”¨äºæ•´ä½“çš„ç½‘é¡µå¸ƒå±€ï¼Œè€ŒFlexboxæ›´é€‚åˆå¯¹ç½‘æ ¼åŒºåŸŸå†…çš„ç‰¹å®šå…ƒç´ å¸ƒå±€ã€‚</li>
</ul>
<hr>
<ul>
<li>
<p>éšå¼ç½‘æ ¼(implicit grid)ã€‚ä½¿ç”¨grid-template-*å±æ€§å®šä¹‰ç½‘æ ¼è½¨é“æ—¶ï¼Œåˆ›å»ºçš„æ˜¯æ˜¾å¼ç½‘æ ¼(explicit grid)ï¼Œä½†å¦‚æœç½‘æ ¼å…ƒç´ æ”¾åœ¨å£°æ˜çš„ç½‘æ ¼è½¨é“ä¹‹å¤–ï¼Œå°±ä¼šåˆ›å»ºéšå¼è½¨é“ä»¥æ‰©å±•ç½‘æ ¼ï¼Œç›´åˆ°åŒ…å«è¯¥å…ƒç´ ã€‚</p>
</li>
<li>
<p>éšå¼ç½‘æ ¼è½¨é“é»˜è®¤å¤§å°ä¸ºautoï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬ä¼šæ‰©å±•åˆ°èƒ½å®¹çº³ç½‘æ ¼å…ƒç´ å†…å®¹ã€‚å¯ä»¥ç»™ç½‘æ ¼å®¹å™¨è®¾ç½®grid-auto-columnså’Œgrid-auto-rowsï¼Œä¸ºéšå¼ç½‘æ ¼è½¨é“æŒ‡å®šä¸€ä¸ªå¤§å°(æ¯”å¦‚ï¼Œgrid-auto-columns: 1fr)ã€‚</p>
</li>
<li>
<p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸æƒ³ç»™ä¸€ä¸ªç½‘æ ¼è½¨é“è®¾ç½®å›ºå®šå°ºå¯¸ï¼Œä½†æ˜¯åˆå¸Œæœ›é™åˆ¶å®ƒçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚è¿™æ—¶å€™éœ€è¦ç”¨åˆ°minmax()å‡½æ•°ã€‚å®ƒæŒ‡å®šä¸¤ä¸ªå€¼ï¼šæœ€å°å°ºå¯¸å’Œæœ€å¤§å°ºå¯¸ã€‚æµè§ˆå™¨ä¼šç¡®ä¿ç½‘æ ¼è½¨é“çš„å¤§å°ä»‹äºè¿™ä¸¤è€…ä¹‹é—´ã€‚(å¦‚æœæœ€å¤§å°ºå¯¸å°äºæœ€å°å°ºå¯¸ï¼Œæœ€å¤§å°ºå¯¸å°±ä¼šè¢«å¿½ç•¥ã€‚)é€šè¿‡æŒ‡å®šminmax(200px, 1fr)ï¼Œæµè§ˆå™¨ç¡®ä¿äº†æ‰€æœ‰çš„è½¨é“è‡³å°‘å®½200pxã€‚</p>
</li>
<li>
<p>repeat()å‡½æ•°é‡Œçš„auto-fillå…³é”®å­—æ˜¯ä¸€ä¸ªç‰¹æ®Šå€¼ã€‚è®¾ç½®äº†ä¹‹åï¼Œåªè¦ç½‘æ ¼æ”¾å¾—ä¸‹ï¼Œæµè§ˆå™¨å°±ä¼šå°½å¯èƒ½å¤šåœ°ç”Ÿæˆè½¨é“ï¼Œå¹¶ä¸”ä¸ä¼šè·ŸæŒ‡å®šå¤§å°(minmax()å€¼)çš„é™åˆ¶äº§ç”Ÿå†²çªã€‚</p>
</li>
<li>
<p>auto-fillå’Œminmax(200px, 1fr)åŠ åœ¨ä¸€èµ·ï¼Œå°±ä¼šè®©ç½‘æ ¼åœ¨å¯ç”¨çš„ç©ºé—´å†…å°½å¯èƒ½å¤šåœ°äº§ç”Ÿç½‘æ ¼åˆ—ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ—çš„å®½åº¦ä¸ä¼šå°äº200pxã€‚å› ä¸ºæ‰€æœ‰è½¨é“çš„å¤§å°ä¸Šé™éƒ½ä¸º1fr(æœ€å¤§å€¼)ï¼Œæ‰€ä»¥æ‰€æœ‰çš„ç½‘æ ¼è½¨é“éƒ½ç­‰å®½ã€‚</p>
</li>
<li>
<p>å¦‚æœç½‘æ ¼å…ƒç´ ä¸å¤Ÿå¡«æ»¡æ‰€æœ‰ç½‘æ ¼è½¨é“ï¼Œauto-fillå°±ä¼šå¯¼è‡´ä¸€äº›ç©ºçš„ç½‘æ ¼è½¨é“ã€‚å¦‚æœä¸å¸Œæœ›å‡ºç°ç©ºçš„ç½‘æ ¼è½¨é“ï¼Œå¯ä»¥ä½¿ç”¨auto-fitå…³é”®å­—ä»£æ›¿auto-fillã€‚å®ƒä¼šè®©éç©ºçš„ç½‘æ ¼è½¨é“æ‰©å±•ï¼Œå¡«æ»¡å¯ç”¨ç©ºé—´ã€‚</p>
</li>
</ul>
<hr>
<ul>
<li>å½“ä¸æŒ‡å®šç½‘æ ¼ä¸Šå…ƒç´ çš„ä½ç½®æ—¶ï¼Œå…ƒç´ ä¼šæŒ‰ç…§å…¶å¸ƒå±€ç®—æ³•è‡ªåŠ¨æ”¾ç½®ã€‚
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¸ƒå±€ç®—æ³•ä¼šæŒ‰å…ƒç´ åœ¨æ ‡è®°ä¸­çš„é¡ºåºå°†å…¶é€åˆ—é€è¡Œæ‘†æ”¾ã€‚</li>
<li>grid-auto-flow:row å¦‚æœä¸€è¡Œæ”¾ä¸ä¸‹ï¼Œç®—æ³•ä¼šå°†å®ƒç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œå¯»æ‰¾è¶³å¤Ÿå¤§çš„ç©ºé—´å®¹çº³å®ƒã€‚</li>
<li>grid-auto-flow:column å¦‚æœä¸€åˆ—æ”¾ä¸ä¸‹ï¼Œç®—æ³•ä¼šå°†å®ƒç§»åŠ¨åˆ°ä¸‹ä¸€åˆ—ï¼Œå¯»æ‰¾è¶³å¤Ÿå¤§çš„ç©ºé—´å®¹çº³å®ƒã€‚</li>
<li>è¿˜å¯ä»¥é¢å¤–åŠ ä¸€ä¸ªå…³é”®å­—dense(æ¯”å¦‚ï¼Œgrid-auto-flow: column dense)ã€‚å®ƒè®©ç®—æ³•ç´§å‡‘åœ°å¡«æ»¡ç½‘æ ¼é‡Œçš„ç©ºç™½ï¼Œå°½ç®¡è¿™ä¼šæ”¹å˜æŸäº›ç½‘æ ¼å…ƒç´ çš„é¡ºåºã€‚</li>
</ul>
</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç½‘æ ¼å…ƒç´ éƒ½ä¼šæ‰©å±•å¹¶å¡«æ»¡æ•´ä¸ªç½‘æ ¼åŒºåŸŸï¼Œä½†æ˜¯å­å…ƒç´ ä¸ä¼šï¼Œå› æ­¤ç½‘æ ¼åŒºåŸŸå¯èƒ½ä¼šå‡ºç°å¤šä½™çš„é«˜åº¦ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³åŠæ³•æ˜¯ç”¨Flexboxã€‚ç»™å›¾ç‰‡æ ‡ç­¾åŠ ä¸Šflex-growï¼Œå¼ºåˆ¶æ‹‰ä¼¸å›¾ç‰‡å¡«å……ç©ºç™½åŒºåŸŸã€‚ä½†æ˜¯æ‹‰ä¼¸å›¾ç‰‡å¹¶ä¸å¯å–ï¼Œå› ä¸ºè¿™ä¼šæ”¹å˜å›¾ç‰‡çš„å®½é«˜æ¯”ï¼Œå¯¼è‡´å›¾ç‰‡å˜å½¢ã€‚å¥½åœ¨CSSä¸ºæ§åˆ¶è¿™ä¸€è¡Œä¸ºæä¾›äº†ä¸€ä¸ªç‰¹æ®Šå±æ€§object-fitã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªimgçš„object-fitå±æ€§å€¼ä¸ºfillï¼Œä¹Ÿå°±æ˜¯è¯´æ•´ä¸ªå›¾ç‰‡ä¼šç¼©æ”¾ï¼Œä»¥å¡«æ»¡imgå…ƒç´ ã€‚ä½ ä¹Ÿå¯ä»¥è®¾ç½®å…¶ä»–å€¼æ”¹å˜é»˜è®¤è¡Œä¸ºã€‚
<ul>
<li>coverï¼šæ‰©å±•å›¾ç‰‡ï¼Œè®©å®ƒå¡«æ»¡ç›’å­(å¯¼è‡´å›¾ç‰‡ä¸€éƒ¨åˆ†è¢«è£å‰ª)ã€‚</li>
<li>containï¼šç¼©æ”¾å›¾ç‰‡ï¼Œè®©å®ƒå®Œæ•´åœ°å¡«å……ç›’å­(å¯¼è‡´ç›’å­é‡Œå‡ºç°ç©ºç™½)ã€‚
<img src="/assets/img/img-object-fit.png" alt="å›¾ç‰‡ç¼©æ”¾" /></li>
</ul>
</li>
</ul>
<hr>
<p>å¯¹é½</p>
<ul>
<li>CSSç»™ç½‘æ ¼å¸ƒå±€æä¾›äº†ä¸‰ä¸ªè°ƒæ•´å±æ€§ï¼šjustify-contentã€justify-itemsã€justify-selfã€‚è¿™äº›å±æ€§æ§åˆ¶äº†ç½‘æ ¼å…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„ä½ç½®ã€‚</li>
<li>è¿˜æœ‰ä¸‰ä¸ªå¯¹é½å±æ€§ï¼šalign-contentã€align-itemsã€align-selfã€‚è¿™äº›å±æ€§æ§åˆ¶ç½‘æ ¼å…ƒç´ åœ¨å‚ç›´æ–¹å‘ä¸Šçš„ä½ç½®ã€‚</li>
</ul>
<h3 id="ç‰¹æ€§æŸ¥è¯¢"> ç‰¹æ€§æŸ¥è¯¢</h3>
<p><code>@supports (display:grid) {...}</code></p>
<ul>
<li>@supportsè§„åˆ™åé¢è·Ÿç€ä¸€ä¸ªå°æ‹¬å·åŒ…å›´çš„å£°æ˜ã€‚å¦‚æœæµè§ˆå™¨ç†è§£è¿™ä¸ªå£°æ˜ï¼Œå®ƒå°±ä¼šä½¿ç”¨å¤§æ‹¬å·é‡Œé¢çš„æ‰€æœ‰æ ·å¼è§„åˆ™ã€‚å¦‚æœå®ƒä¸ç†è§£å°æ‹¬å·é‡Œçš„å£°æ˜ï¼Œå°±ä¸ä¼šä½¿ç”¨è¿™äº›æ ·å¼è§„åˆ™ã€‚</li>
<li>@supports not(declaration)</li>
<li>@supports (declaration) or (declaration)</li>
<li>@supports (declaration) and (declaration)</li>
</ul>
<h2 id="å®šä½"> å®šä½</h2>
<p>positionå±æ€§çš„åˆå§‹å€¼æ˜¯staticã€‚å‰é¢çš„ç« èŠ‚é‡Œç”¨çš„éƒ½æ˜¯è¿™ä¸ªé™æ€å®šä½ã€‚å¦‚æœæŠŠå®ƒæ”¹æˆå…¶ä»–å€¼ï¼Œæˆ‘ä»¬å°±è¯´å…ƒç´ å°±è¢«å®šä½äº†ã€‚è€Œå¦‚æœå…ƒç´ ä½¿ç”¨äº†é™æ€å®šä½ï¼Œé‚£ä¹ˆå°±è¯´å®ƒæœªè¢«å®šä½ã€‚</p>
<p>å‰é¢ä»‹ç»çš„å¸ƒå±€æ–¹æ³•æ˜¯ç”¨å„ç§æ“ä½œæ¥æ§åˆ¶æ–‡æ¡£æµçš„è¡Œä¸ºã€‚å®šä½åˆ™ä¸åŒï¼šå®ƒå°†å…ƒç´ å½»åº•ä»æ–‡æ¡£æµä¸­ç§»èµ°ã€‚å®ƒå…è®¸ä½ å°†å…ƒç´ æ”¾åœ¨å±å¹•çš„ä»»æ„ä½ç½®ã€‚è¿˜å¯ä»¥å°†ä¸€ä¸ªå…ƒç´ æ”¾åœ¨å¦ä¸€ä¸ªå…ƒç´ çš„å‰é¢æˆ–åé¢ï¼Œå½¼æ­¤é‡å ã€‚</p>
<h3 id="å›ºå®šå®šä½"> å›ºå®šå®šä½</h3>
<p>ç»™ä¸€ä¸ªå…ƒç´ è®¾ç½®position: fixedå°±èƒ½å°†å…ƒç´ æ”¾åœ¨è§†å£çš„ä»»æ„ä½ç½®ã€‚<br>
è¿™éœ€è¦æ­é…å››ç§å±æ€§ä¸€èµ·ä½¿ç”¨ï¼štopã€rightã€bottomå’Œleftã€‚è¿™äº›å±æ€§çš„å€¼å†³å®šäº†å›ºå®šå®šä½çš„å…ƒç´ ä¸æµè§ˆå™¨è§†å£è¾¹ç¼˜çš„è·ç¦»ã€‚æ¯”å¦‚ï¼Œtop: 3emè¡¨ç¤ºå…ƒç´ çš„ä¸Šè¾¹ç¼˜è·ç¦»è§†å£é¡¶éƒ¨3emã€‚<br>
è®¾ç½®è¿™å››ä¸ªå€¼è¿˜éšå¼åœ°å®šä¹‰äº†å…ƒç´ çš„å®½é«˜ã€‚æ¯”å¦‚æŒ‡å®šleft: 2em; right: 2emè¡¨ç¤ºå…ƒç´ çš„å·¦è¾¹ç¼˜è·ç¦»è§†å£å·¦è¾¹2emï¼Œå³è¾¹ç¼˜è·ç¦»è§†å£å³è¾¹2emã€‚å› æ­¤å…ƒç´ çš„å®½åº¦ç­‰äºè§†å£æ€»å®½åº¦å‡å»4emã€‚topã€bottomå’Œè§†å£é«˜åº¦ä¹Ÿæ˜¯è¿™æ ·çš„å…³ç³»ã€‚</p>
<details><summary>æ¨¡æ€æ¡†èƒŒæ™¯</summary>
<p>ç”¨éšå¼å®šä¹‰çš„å®½é«˜æ‹‰ä¼¸ç©ºdivï¼Œå†è®¾ç½®èƒŒæ™¯è‰²ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>modal-backdrop<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.modal-backdrop</span> <span>{</span>
  <span>position</span><span>:</span> fixed<span>;</span>
  <span>top</span><span>:</span> 0<span>;</span>
  <span>right</span><span>:</span> 0<span>;</span>
  <span>bottom</span><span>:</span> 0<span>;</span>
  <span>left</span><span>:</span> 0<span>;</span>
  <span>background-color</span><span>:</span> <span>rgba</span><span>(</span>0<span>,</span> 0<span>,</span> 0<span>,</span> 0.5<span>)</span><span>;</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div></details>
<h3 id="ç»å¯¹å®šä½"> ç»å¯¹å®šä½</h3>
<ul>
<li>å›ºå®šå®šä½è®©å…ƒç´ ç›¸å¯¹è§†å£å®šä½ï¼Œæ­¤æ—¶è§†å£è¢«ç§°ä½œå…ƒç´ çš„åŒ…å«å—(containingblock)ã€‚ç»å¯¹å®šä½çš„è¡Œä¸ºä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªæ˜¯å®ƒçš„åŒ…å«å—ä¸ä¸€æ ·ã€‚ç»å¯¹å®šä½ä¸æ˜¯ç›¸å¯¹è§†å£ï¼Œè€Œæ˜¯ç›¸å¯¹æœ€è¿‘çš„<strong>ç¥–å…ˆå®šä½å…ƒç´ </strong>ã€‚</li>
<li>å¦‚æœç¥–å…ˆå…ƒç´ éƒ½æ²¡æœ‰å®šä½ï¼Œé‚£ä¹ˆç»å¯¹å®šä½çš„å…ƒç´ ä¼šåŸºäºåˆå§‹åŒ…å«å—(initial containing block)æ¥å®šä½ã€‚åˆå§‹åŒ…å«å—è·Ÿè§†å£ä¸€æ ·å¤§ï¼Œå›ºå®šåœ¨ç½‘é¡µçš„é¡¶éƒ¨ã€‚</li>
</ul>
<details><summary>å…³é—­æŒ‰é’®</summary>
<p>å¯¹äºè¿™ç§CloseæŒ‰é’®ï¼Œç”¨æˆ·é€šå¸¸æœŸæœ›çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼äºxçš„å›¾å½¢åŒ–æ˜¾ç¤ºï¼Œå¦‚ä½•åšåˆ°ï¼Ÿ<br>
ä½ å¯èƒ½é¦–å…ˆæƒ³åˆ°å°†æŒ‰é’®é‡Œçš„æ–‡å­—closeæ¢æˆxï¼Œä½†æ˜¯è¿™ä¼šå¯¼è‡´å¯è®¿é—®æ€§çš„é—®é¢˜ï¼šè¾…åŠ©çš„å±å¹•é˜…è¯»å™¨ä¼šè¯»æŒ‰é’®é‡Œçš„æ–‡å­—ã€‚å› æ­¤è¦ç»™è¿™ä¸ªæŒ‰é’®ä¸€äº›æœ‰æ„ä¹‰çš„æç¤ºã€‚åœ¨ä½¿ç”¨CSSä¹‹å‰ï¼ŒHTMLæœ¬èº«å¿…é¡»æœ‰æ„ä¹‰ã€‚<br>
ç›¸åï¼Œä½ å¯ä»¥ç”¨CSSéšè—closeï¼Œå¹¶æ˜¾ç¤ºxã€‚æ€»å…±éœ€è¦ä¸¤æ­¥ã€‚</p>
<ol>
<li>å°†æŒ‰é’®çš„æ–‡å­—æŒ¤åˆ°å¤–é¢ï¼Œå¹¶éšè—æº¢å‡ºå†…å®¹ã€‚   text-indent:xxem+overflow:hidden</li>
<li>å°†æŒ‰é’®çš„::afterä¼ªå…ƒç´ çš„contentå±æ€§è®¾ç½®ä¸ºxï¼Œå¹¶è®©ä¼ªå…ƒç´ ç»å¯¹å®šä½åˆ°æŒ‰é’®ä¸­é—´ã€‚<br>
PS:ä¹˜æ³•ç¬¦å·çš„Unicodeå­—ç¬¦æ›´å¯¹ç§°ï¼Œä¹Ÿæ›´å¥½çœ‹ã€‚HTMLå­—ç¬¦&amp;timesï¼›å¯ä»¥æ˜¾ç¤ºä¸ºè¿™ä¸ªå­—ç¬¦ï¼Œä½†åœ¨CSSçš„contentå±æ€§é‡Œï¼Œå¿…é¡»å†™æˆè½¬ä¹‰çš„Unicodeæ•°å­—ï¼š\00D7ã€‚</li>
</ol>
</details>
<h3 id="ç›¸å¯¹å®šä½"> ç›¸å¯¹å®šä½</h3>
<p>ç›¸å¯¹å®šä½å°†å…ƒç´ ä»åˆå§‹ä½ç½®ç§»èµ°ï¼Œä½†æ˜¯å…¶ä»–å…ƒç´ ä¸å—å½±å“(å¥½åƒè¢«ç§»èµ°çš„å…ƒç´ è¿˜åœ¨åŸæ¥çš„ä½ç½®ä¸€æ ·)ã€‚<br>
è·Ÿå›ºå®šæˆ–è€…ç»å¯¹å®šä½ä¸ä¸€æ ·ï¼Œä¸èƒ½ç”¨topã€rightã€bottomå’Œleftæ”¹å˜ç›¸å¯¹å®šä½å…ƒç´ çš„å¤§å°ã€‚è¿™äº›å€¼åªèƒ½è®©å…ƒç´ åœ¨ä¸Šã€ä¸‹ã€å·¦ã€å³æ–¹å‘ç§»åŠ¨ã€‚å¯ä»¥ç”¨topæˆ–è€…bottomï¼Œä½†å®ƒä»¬ä¸èƒ½ä¸€èµ·ç”¨(bottomä¼šè¢«å¿½ç•¥)ã€‚åŒç†ï¼Œå¯ä»¥ç”¨leftæˆ–rightï¼Œä½†å®ƒä»¬ä¹Ÿä¸èƒ½ä¸€èµ·ç”¨(rightä¼šè¢«å¿½ç•¥)ã€‚<br>
å¯ä»¥ç”¨è¿™äº›å±æ€§è°ƒæ•´ç›¸å¯¹å…ƒç´ çš„ä½ç½®ï¼ŒæŠŠå®ƒæŒ¤åˆ°æŸä¸ªä½ç½®ï¼Œä½†è¿™åªæ˜¯ç›¸å¯¹å®šä½çš„ä¸€ä¸ªå†·é—¨ç”¨æ³•ã€‚æ›´å¸¸è§çš„ç”¨æ³•æ˜¯ä½¿ç”¨position: relativeç»™å®ƒé‡Œé¢çš„ç»å¯¹å®šä½å…ƒç´ åˆ›å»ºä¸€ä¸ªåŒ…å«å—ã€‚</p>
<h3 id="å±‚å ä¸Šä¸‹æ–‡å’Œz-index"> å±‚å ä¸Šä¸‹æ–‡å’Œz-index</h3>
<p>æµè§ˆå™¨å°†HTMLè§£æä¸ºDOMçš„åŒæ—¶è¿˜åˆ›å»ºäº†å¦ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œå«ä½œæ¸²æŸ“æ ‘(render tree)ã€‚å®ƒä»£è¡¨äº†æ¯ä¸ªå…ƒç´ çš„è§†è§‰æ ·å¼å’Œä½ç½®ã€‚åŒæ—¶è¿˜å†³å®šæµè§ˆå™¨ç»˜åˆ¶å…ƒç´ çš„é¡ºåºã€‚</p>
<ul>
<li>é¡ºåºå¾ˆé‡è¦ï¼Œå› ä¸ºå¦‚æœå…ƒç´ åˆšå¥½é‡å ï¼Œåç»˜åˆ¶çš„å…ƒç´ å°±ä¼šå‡ºç°åœ¨å…ˆç»˜åˆ¶çš„å…ƒç´ å‰é¢ã€‚</li>
<li>é€šå¸¸æƒ…å†µä¸‹(ä½¿ç”¨å®šä½ä¹‹å‰)ï¼Œå…ƒç´ åœ¨HTMLé‡Œå‡ºç°çš„é¡ºåºå†³å®šäº†ç»˜åˆ¶çš„é¡ºåºã€‚</li>
<li>å®šä½å…ƒç´ æ—¶ï¼Œè¿™ç§è¡Œä¸ºä¼šæ”¹å˜ã€‚æµè§ˆå™¨ä¼šå…ˆç»˜åˆ¶æ‰€æœ‰éå®šä½çš„å…ƒç´ ï¼Œç„¶åç»˜åˆ¶å®šä½å…ƒç´ ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å®šä½å…ƒç´ ä¼šå‡ºç°åœ¨éå®šä½å…ƒç´ å‰é¢ã€‚</li>
<li>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¨¡æ€æ¡†è¦æ”¾åœ¨ç½‘é¡µå†…å®¹çš„æœ€åï¼Œbodyå…³é—­æ ‡ç­¾ä¹‹å‰ã€‚ä»¥é˜²æ­¢æ¨¡æ€æ¡†è¢«å…¶ä»–å®šä½å…ƒç´ é®æŒ¡ã€‚</li>
<li>z-indexå±æ€§çš„å€¼å¯ä»¥æ˜¯ä»»æ„æ•´æ•°(æ­£è´Ÿéƒ½è¡Œ)ã€‚zè¡¨ç¤ºçš„æ˜¯ç¬›å¡å„¿x-y-zåæ ‡ç³»é‡Œçš„æ·±åº¦æ–¹å‘ã€‚æ‹¥æœ‰è¾ƒé«˜z-indexçš„å…ƒç´ å‡ºç°åœ¨æ‹¥æœ‰è¾ƒä½z-indexçš„å…ƒç´ å‰é¢ã€‚æ‹¥æœ‰è´Ÿæ•°z-indexçš„å…ƒç´ å‡ºç°åœ¨é™æ€å…ƒç´ åé¢ã€‚
<ul>
<li>z-indexåªåœ¨å®šä½å…ƒç´ ä¸Šç”Ÿæ•ˆï¼Œä¸èƒ½ç”¨å®ƒæ§åˆ¶é™æ€å…ƒç´ ã€‚</li>
<li>ç»™ä¸€ä¸ªå®šä½å…ƒç´ åŠ ä¸Šz-indexå¯ä»¥åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
</li>
<li>å±‚å ä¸Šä¸‹æ–‡ä¹‹å¤–çš„å…ƒç´ æ— æ³•å æ”¾åœ¨å±‚å ä¸Šä¸‹æ–‡å†…çš„ä¸¤ä¸ªå…ƒç´ ä¹‹é—´ã€‚ä¾‹å¦‚aæœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œæœ¬èº«z-indexä¸º2ï¼Œå…¶å†…æœ‰z-indexä¸º100çš„å…ƒç´ ï¼Œbå…ƒç´ å°†aå®Œå…¨é®ä½ï¼Œz-indexä¸º4ã€‚æ¸²æŸ“å‡ºçš„ç»“æœåªèƒ½çœ‹åˆ°bï¼Œaå†…çš„ä»»ä½•å…ƒç´ éƒ½ä¼šä¸ºé®æŒ¡ã€‚(å¯ä»¥è¿™ä¹ˆç†è§£ï¼š2.100 &lt; 4)</li>
<li>æ‰€æœ‰å±‚å ä¸Šä¸‹æ–‡å†…çš„å…ƒç´ ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºï¼Œä»ååˆ°å‰å æ”¾
<ul>
<li>å±‚å ä¸Šä¸‹æ–‡çš„æ ¹</li>
<li>z-indexä¸ºè´Ÿçš„å®šä½å…ƒç´ (åŠå…¶å­å…ƒç´ )</li>
<li>éå®šä½å…ƒç´ </li>
<li>z-indexä¸ºautoçš„å®šä½å…ƒç´ (åŠå…¶å­å…ƒç´ )</li>
<li>z-indexä¸ºæ­£çš„å®šä½å…ƒç´ (åŠå…¶å­å…ƒç´ )</li>
</ul>
</li>
</ul>
<h3 id="ç²˜æ€§å®šä½"> ç²˜æ€§å®šä½</h3>
<p>å®ƒæ˜¯ç›¸å¯¹å®šä½å’Œå›ºå®šå®šä½çš„ç»“åˆä½“ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œå…ƒç´ ä¼šéšç€é¡µé¢æ»šåŠ¨ï¼Œå½“åˆ°è¾¾å±å¹•çš„ç‰¹å®šä½ç½®æ—¶ï¼Œå¦‚æœç”¨æˆ·ç»§ç»­æ»šåŠ¨ï¼Œå®ƒå°±ä¼šâ€œé”å®šâ€åœ¨è¿™ä¸ªä½ç½®ã€‚æœ€å¸¸è§çš„ç”¨ä¾‹æ˜¯ä¾§è¾¹æ å¯¼èˆªã€‚</p>
<div><pre><code><span><span><span>&lt;</span>aside</span> <span>class</span><span><span>=</span><span>"</span>col-sidebar<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>affix<span>"</span></span><span>></span></span>
    <span><span><span>&lt;</span>ul</span> <span>class</span><span><span>=</span><span>"</span>submenu<span>"</span></span><span>></span></span>
      <span><span><span>&lt;</span>li</span><span>></span></span><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/<span>"</span></span><span>></span></span>Home<span><span><span>&lt;/</span>a</span><span>></span></span><span><span><span>&lt;/</span>li</span><span>></span></span>
      <span><span><span>&lt;</span>li</span><span>></span></span><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/coffees<span>"</span></span><span>></span></span>Coffees<span><span><span>&lt;/</span>a</span><span>></span></span><span><span><span>&lt;/</span>li</span><span>></span></span>
      <span><span><span>&lt;</span>li</span><span>></span></span><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/brewers<span>"</span></span><span>></span></span>Brewers<span><span><span>&lt;/</span>a</span><span>></span></span><span><span><span>&lt;/</span>li</span><span>></span></span>
      <span><span><span>&lt;</span>li</span><span>></span></span><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/specials<span>"</span></span><span>></span></span>Specials<span><span><span>&lt;/</span>a</span><span>></span></span><span><span><span>&lt;/</span>li</span><span>></span></span>
      <span><span><span>&lt;</span>li</span><span>></span></span><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/about<span>"</span></span><span>></span></span>About us<span><span><span>&lt;/</span>a</span><span>></span></span><span><span><span>&lt;/</span>li</span><span>></span></span>
    <span><span><span>&lt;/</span>ul</span><span>></span></span>
  <span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;/</span>aside</span><span>></span></span>
<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.affix</span> <span>{</span>
  <span>position</span><span>:</span> sticky<span>;</span>
  <span>top</span><span>:</span> 1em<span>;</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><p>topå€¼è®¾ç½®äº†å…ƒç´ æœ€ç»ˆå›ºå®šçš„ä½ç½®ï¼šè·ç¦»è§†å£çš„é¡¶éƒ¨1emã€‚<br>
ç²˜æ€§å…ƒç´ æ°¸è¿œä¸ä¼šè¶…å‡ºçˆ¶å…ƒç´ çš„èŒƒå›´ï¼Œæ‰€ä»¥æœ¬ä¾‹ä¸­affixä¸ä¼šè¶…å‡ºcol-sidebarçš„èŒƒå›´ã€‚å½“æ»šåŠ¨é¡µé¢çš„æ—¶å€™ï¼Œcol-sidebarä¼šä¸€ç›´æ­£å¸¸æ»šåŠ¨ï¼Œä½†æ˜¯affixä¼šåœ¨æ»šåŠ¨åˆ°ç‰¹å®šä½ç½®æ—¶åœä¸‹æ¥ã€‚å¦‚æœç»§ç»­æ»šåŠ¨å¾—è¶³å¤Ÿè¿œï¼Œç²˜æ€§å…ƒç´ è¿˜ä¼šæ¢å¤æ»šåŠ¨ã€‚è¿™ç§æƒ…å†µåªåœ¨çˆ¶å…ƒç´ çš„åº•è¾¹åˆ°è¾¾ç²˜æ€§å…ƒç´ çš„åº•è¾¹æ—¶å‘ç”Ÿã€‚<br>
æ³¨æ„ï¼Œåªæœ‰å½“çˆ¶å…ƒç´ çš„é«˜åº¦å¤§äºç²˜æ€§å…ƒç´ æ—¶æ‰ä¼šè®©ç²˜æ€§å…ƒç´ å›ºå®š</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">CSS æ¨¡å—åŒ–</title>
    <id>https://kigane.github.io/note/js/css-modular/</id>
    <link href="https://kigane.github.io/note/js/css-modular/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="æ¨¡å—åŒ–css"> æ¨¡å—åŒ–CSS</h2>
<p>æ˜¯æŒ‡æŠŠé¡µé¢åˆ†å‰²æˆä¸åŒçš„ç»„æˆéƒ¨åˆ†ï¼Œè¿™äº›ç»„æˆéƒ¨åˆ†å¯ä»¥åœ¨å¤šç§ä¸Šä¸‹æ–‡ä¸­é‡å¤ä½¿ç”¨ï¼Œå¹¶ä¸”äº’ç›¸ä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ã€‚æœ€ç»ˆç›®çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹å…¶ä¸­ä¸€éƒ¨åˆ†CSSæ—¶ï¼Œä¸ä¼šå¯¹å…¶ä»–éƒ¨åˆ†äº§ç”Ÿæ„æ–™ä¹‹å¤–çš„å½±å“ã€‚</p>
<h3 id="åŸºç¡€æ ·å¼"> åŸºç¡€æ ·å¼</h3>
<p>æ¯ä¸ªæ ·å¼è¡¨çš„å¼€å¤´éƒ½è¦å†™ä¸€äº›ç»™æ•´ä¸ªé¡µé¢ä½¿ç”¨çš„é€šç”¨è§„åˆ™ï¼Œæ¨¡å—åŒ–CSSä¹Ÿä¸ä¾‹å¤–ã€‚è¿™äº›è§„åˆ™é€šå¸¸è¢«ç§°ä¸ºåŸºç¡€æ ·å¼ï¼Œå…¶ä»–çš„æ ·å¼æ˜¯æ„å»ºåœ¨è¿™äº›åŸºç¡€æ ·å¼ä¹‹ä¸Šçš„ã€‚</p>
<details><summary>https://necolas.github.io/normalize.css/</summary>
<div><pre><code><span>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */</span>

<span>/* Document
   ========================================================================== */</span>

<span>/**
 * 1. Correct the line height in all browsers.
 * 2. Prevent adjustments of font size after orientation changes in iOS.
 */</span>

<span>html</span> <span>{</span>
  <span>line-height</span><span>:</span> 1.15<span>;</span> <span>/* 1 */</span>
  <span>-webkit-text-size-adjust</span><span>:</span> 100%<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/* Sections
   ========================================================================== */</span>

<span>/**
 * Remove the margin in all browsers.
 */</span>

<span>body</span> <span>{</span>
  <span>margin</span><span>:</span> 0<span>;</span>
<span>}</span>

<span>/**
 * Render the `main` element consistently in IE.
 */</span>

<span>main</span> <span>{</span>
  <span>display</span><span>:</span> block<span>;</span>
<span>}</span>

<span>/**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */</span>

<span>h1</span> <span>{</span>
  <span>font-size</span><span>:</span> 2em<span>;</span>
  <span>margin</span><span>:</span> 0.67em 0<span>;</span>
<span>}</span>

<span>/* Grouping content
   ========================================================================== */</span>

<span>/**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */</span>

<span>hr</span> <span>{</span>
  <span>box-sizing</span><span>:</span> content-box<span>;</span> <span>/* 1 */</span>
  <span>height</span><span>:</span> 0<span>;</span> <span>/* 1 */</span>
  <span>overflow</span><span>:</span> visible<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */</span>

<span>pre</span> <span>{</span>
  <span>font-family</span><span>:</span> monospace<span>,</span> monospace<span>;</span> <span>/* 1 */</span>
  <span>font-size</span><span>:</span> 1em<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/* Text-level semantics
   ========================================================================== */</span>

<span>/**
 * Remove the gray background on active links in IE 10.
 */</span>

<span>a</span> <span>{</span>
  <span>background-color</span><span>:</span> transparent<span>;</span>
<span>}</span>

<span>/**
 * 1. Remove the bottom border in Chrome 57-
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */</span>

<span>abbr[title]</span> <span>{</span>
  <span>border-bottom</span><span>:</span> none<span>;</span> <span>/* 1 */</span>
  <span>text-decoration</span><span>:</span> underline<span>;</span> <span>/* 2 */</span>
  <span>text-decoration</span><span>:</span> underline dotted<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */</span>

<span>b,
strong</span> <span>{</span>
  <span>font-weight</span><span>:</span> bolder<span>;</span>
<span>}</span>

<span>/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */</span>

<span>code,
kbd,
samp</span> <span>{</span>
  <span>font-family</span><span>:</span> monospace<span>,</span> monospace<span>;</span> <span>/* 1 */</span>
  <span>font-size</span><span>:</span> 1em<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/**
 * Add the correct font size in all browsers.
 */</span>

<span>small</span> <span>{</span>
  <span>font-size</span><span>:</span> 80%<span>;</span>
<span>}</span>

<span>/**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */</span>

<span>sub,
sup</span> <span>{</span>
  <span>font-size</span><span>:</span> 75%<span>;</span>
  <span>line-height</span><span>:</span> 0<span>;</span>
  <span>position</span><span>:</span> relative<span>;</span>
  <span>vertical-align</span><span>:</span> baseline<span>;</span>
<span>}</span>

<span>sub</span> <span>{</span>
  <span>bottom</span><span>:</span> -0.25em<span>;</span>
<span>}</span>

<span>sup</span> <span>{</span>
  <span>top</span><span>:</span> -0.5em<span>;</span>
<span>}</span>

<span>/* Embedded content
   ========================================================================== */</span>

<span>/**
 * Remove the border on images inside links in IE 10.
 */</span>

<span>img</span> <span>{</span>
  <span>border-style</span><span>:</span> none<span>;</span>
<span>}</span>

<span>/* Forms
   ========================================================================== */</span>

<span>/**
 * 1. Change the font styles in all browsers.
 * 2. Remove the margin in Firefox and Safari.
 */</span>

<span>button,
input,
optgroup,
select,
textarea</span> <span>{</span>
  <span>font-family</span><span>:</span> inherit<span>;</span> <span>/* 1 */</span>
  <span>font-size</span><span>:</span> 100%<span>;</span> <span>/* 1 */</span>
  <span>line-height</span><span>:</span> 1.15<span>;</span> <span>/* 1 */</span>
  <span>margin</span><span>:</span> 0<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */</span>

<span>button,
input</span> <span>{</span> <span>/* 1 */</span>
  <span>overflow</span><span>:</span> visible<span>;</span>
<span>}</span>

<span>/**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */</span>

<span>button,
select</span> <span>{</span> <span>/* 1 */</span>
  <span>text-transform</span><span>:</span> none<span>;</span>
<span>}</span>

<span>/**
 * Correct the inability to style clickable types in iOS and Safari.
 */</span>

<span>button,
[type="button"],
[type="reset"],
[type="submit"]</span> <span>{</span>
  <span>-webkit-appearance</span><span>:</span> button<span>;</span>
<span>}</span>

<span>/**
 * Remove the inner border and padding in Firefox.
 */</span>

<span>button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner</span> <span>{</span>
  <span>border-style</span><span>:</span> none<span>;</span>
  <span>padding</span><span>:</span> 0<span>;</span>
<span>}</span>

<span>/**
 * Restore the focus styles unset by the previous rule.
 */</span>

<span>button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring</span> <span>{</span>
  <span>outline</span><span>:</span> 1px dotted ButtonText<span>;</span>
<span>}</span>

<span>/**
 * Correct the padding in Firefox.
 */</span>

<span>fieldset</span> <span>{</span>
  <span>padding</span><span>:</span> 0.35em 0.75em 0.625em<span>;</span>
<span>}</span>

<span>/**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */</span>

<span>legend</span> <span>{</span>
  <span>box-sizing</span><span>:</span> border-box<span>;</span> <span>/* 1 */</span>
  <span>color</span><span>:</span> inherit<span>;</span> <span>/* 2 */</span>
  <span>display</span><span>:</span> table<span>;</span> <span>/* 1 */</span>
  <span>max-width</span><span>:</span> 100%<span>;</span> <span>/* 1 */</span>
  <span>padding</span><span>:</span> 0<span>;</span> <span>/* 3 */</span>
  <span>white-space</span><span>:</span> normal<span>;</span> <span>/* 1 */</span>
<span>}</span>

<span>/**
 * Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */</span>

<span>progress</span> <span>{</span>
  <span>vertical-align</span><span>:</span> baseline<span>;</span>
<span>}</span>

<span>/**
 * Remove the default vertical scrollbar in IE 10+.
 */</span>

<span>textarea</span> <span>{</span>
  <span>overflow</span><span>:</span> auto<span>;</span>
<span>}</span>

<span>/**
 * 1. Add the correct box sizing in IE 10.
 * 2. Remove the padding in IE 10.
 */</span>

<span>[type="checkbox"],
[type="radio"]</span> <span>{</span>
  <span>box-sizing</span><span>:</span> border-box<span>;</span> <span>/* 1 */</span>
  <span>padding</span><span>:</span> 0<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */</span>

<span>[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button</span> <span>{</span>
  <span>height</span><span>:</span> auto<span>;</span>
<span>}</span>

<span>/**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */</span>

<span>[type="search"]</span> <span>{</span>
  <span>-webkit-appearance</span><span>:</span> textfield<span>;</span> <span>/* 1 */</span>
  <span>outline-offset</span><span>:</span> -2px<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/**
 * Remove the inner padding in Chrome and Safari on macOS.
 */</span>

<span>[type="search"]::-webkit-search-decoration</span> <span>{</span>
  <span>-webkit-appearance</span><span>:</span> none<span>;</span>
<span>}</span>

<span>/**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */</span>

<span>::-webkit-file-upload-button</span> <span>{</span>
  <span>-webkit-appearance</span><span>:</span> button<span>;</span> <span>/* 1 */</span>
  <span>font</span><span>:</span> inherit<span>;</span> <span>/* 2 */</span>
<span>}</span>

<span>/* Interactive
   ========================================================================== */</span>

<span>/*
 * Add the correct display in Edge, IE 10+, and Firefox.
 */</span>

<span>details</span> <span>{</span>
  <span>display</span><span>:</span> block<span>;</span>
<span>}</span>

<span>/*
 * Add the correct display in all browsers.
 */</span>

<span>summary</span> <span>{</span>
  <span>display</span><span>:</span> list-item<span>;</span>
<span>}</span>

<span>/* Misc
   ========================================================================== */</span>

<span>/**
 * Add the correct display in IE 10+.
 */</span>

<span>template</span> <span>{</span>
  <span>display</span><span>:</span> none<span>;</span>
<span>}</span>

<span>/**
 * Add the correct display in IE 10.
 */</span>

<span>[hidden]</span> <span>{</span>
  <span>display</span><span>:</span> none<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br><span>124</span><br><span>125</span><br><span>126</span><br><span>127</span><br><span>128</span><br><span>129</span><br><span>130</span><br><span>131</span><br><span>132</span><br><span>133</span><br><span>134</span><br><span>135</span><br><span>136</span><br><span>137</span><br><span>138</span><br><span>139</span><br><span>140</span><br><span>141</span><br><span>142</span><br><span>143</span><br><span>144</span><br><span>145</span><br><span>146</span><br><span>147</span><br><span>148</span><br><span>149</span><br><span>150</span><br><span>151</span><br><span>152</span><br><span>153</span><br><span>154</span><br><span>155</span><br><span>156</span><br><span>157</span><br><span>158</span><br><span>159</span><br><span>160</span><br><span>161</span><br><span>162</span><br><span>163</span><br><span>164</span><br><span>165</span><br><span>166</span><br><span>167</span><br><span>168</span><br><span>169</span><br><span>170</span><br><span>171</span><br><span>172</span><br><span>173</span><br><span>174</span><br><span>175</span><br><span>176</span><br><span>177</span><br><span>178</span><br><span>179</span><br><span>180</span><br><span>181</span><br><span>182</span><br><span>183</span><br><span>184</span><br><span>185</span><br><span>186</span><br><span>187</span><br><span>188</span><br><span>189</span><br><span>190</span><br><span>191</span><br><span>192</span><br><span>193</span><br><span>194</span><br><span>195</span><br><span>196</span><br><span>197</span><br><span>198</span><br><span>199</span><br><span>200</span><br><span>201</span><br><span>202</span><br><span>203</span><br><span>204</span><br><span>205</span><br><span>206</span><br><span>207</span><br><span>208</span><br><span>209</span><br><span>210</span><br><span>211</span><br><span>212</span><br><span>213</span><br><span>214</span><br><span>215</span><br><span>216</span><br><span>217</span><br><span>218</span><br><span>219</span><br><span>220</span><br><span>221</span><br><span>222</span><br><span>223</span><br><span>224</span><br><span>225</span><br><span>226</span><br><span>227</span><br><span>228</span><br><span>229</span><br><span>230</span><br><span>231</span><br><span>232</span><br><span>233</span><br><span>234</span><br><span>235</span><br><span>236</span><br><span>237</span><br><span>238</span><br><span>239</span><br><span>240</span><br><span>241</span><br><span>242</span><br><span>243</span><br><span>244</span><br><span>245</span><br><span>246</span><br><span>247</span><br><span>248</span><br><span>249</span><br><span>250</span><br><span>251</span><br><span>252</span><br><span>253</span><br><span>254</span><br><span>255</span><br><span>256</span><br><span>257</span><br><span>258</span><br><span>259</span><br><span>260</span><br><span>261</span><br><span>262</span><br><span>263</span><br><span>264</span><br><span>265</span><br><span>266</span><br><span>267</span><br><span>268</span><br><span>269</span><br><span>270</span><br><span>271</span><br><span>272</span><br><span>273</span><br><span>274</span><br><span>275</span><br><span>276</span><br><span>277</span><br><span>278</span><br><span>279</span><br><span>280</span><br><span>281</span><br><span>282</span><br><span>283</span><br><span>284</span><br><span>285</span><br><span>286</span><br><span>287</span><br><span>288</span><br><span>289</span><br><span>290</span><br><span>291</span><br><span>292</span><br><span>293</span><br><span>294</span><br><span>295</span><br><span>296</span><br><span>297</span><br><span>298</span><br><span>299</span><br><span>300</span><br><span>301</span><br><span>302</span><br><span>303</span><br><span>304</span><br><span>305</span><br><span>306</span><br><span>307</span><br><span>308</span><br><span>309</span><br><span>310</span><br><span>311</span><br><span>312</span><br><span>313</span><br><span>314</span><br><span>315</span><br><span>316</span><br><span>317</span><br><span>318</span><br><span>319</span><br><span>320</span><br><span>321</span><br><span>322</span><br><span>323</span><br><span>324</span><br><span>325</span><br><span>326</span><br><span>327</span><br><span>328</span><br><span>329</span><br><span>330</span><br><span>331</span><br><span>332</span><br><span>333</span><br><span>334</span><br><span>335</span><br><span>336</span><br><span>337</span><br><span>338</span><br><span>339</span><br><span>340</span><br><span>341</span><br><span>342</span><br><span>343</span><br><span>344</span><br><span>345</span><br><span>346</span><br><span>347</span><br><span>348</span><br><span>349</span><br></div></div></details>
<h3 id="ç®€å•çš„æ¨¡å—ç»„ç»‡è§„åˆ™"> ç®€å•çš„æ¨¡å—ç»„ç»‡è§„åˆ™</h3>
<ul>
<li>
<p>æ¨¡å—çš„é€‰æ‹©å™¨ç”±å•ä¸ªç±»åæ„æˆï¼Œè¿™éå¸¸é‡è¦ã€‚è¿™æ ·é€šè¿‡ç»™å…ƒç´ æ·»åŠ ç±»åï¼Œå°±å¯ä»¥æŠŠè¿™äº›æ ·å¼å¤ç”¨åˆ°å¾ˆå¤šåœºæ™¯ï¼Œæ¯”å¦‚é’ˆå¯¹è¡¨å•è¾“å…¥ç»™ç”¨æˆ·åé¦ˆï¼Œæä¾›é†’ç›®çš„å¸®åŠ©æ–‡å­—ï¼Œæˆ–è€…æé†’ç”¨æˆ·æ³¨æ„å…è´£å£°æ˜æ¡æ¬¾ç­‰ã€‚ä½¿ç”¨ç›¸åŒçš„ç»„ä»¶ï¼Œå°±èƒ½äº§ç”Ÿä¸€å¥—é£æ ¼ä¸€è‡´çš„UIã€‚</p>
</li>
<li>
<p>è¦æŠŠä¸€ä¸ªæ¨¡å—æ‰€æœ‰çš„ä»£ç é›†ä¸­æ”¾åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œè¿™æ ·ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ¨¡å—å°±ä¼šç»„æˆæˆ‘ä»¬æœ€ç»ˆçš„æ ·å¼è¡¨ã€‚</p>
</li>
<li>
<p>é€šè¿‡å®šä¹‰ä¸€ä¸ªä»¥æ¨¡å—åç§°å¼€å¤´çš„æ–°ç±»åæ¥åˆ›å»ºä¸€ä¸ªä¿®é¥°ç¬¦(ä¹Ÿå«å˜ä½“ç±»)ã€‚å¸¸ç”¨çš„å†™æ³•æ˜¯ä½¿ç”¨ä¸¤ä¸ªè¿å­—ç¬¦æ¥è¡¨ç¤ºä¿®é¥°ç¬¦ï¼Œæ¯”å¦‚message--errorã€‚åŒè¿å­—ç¬¦çš„å†™æ³•å¾ˆå®¹æ˜“åŒºåˆ†å“ªéƒ¨åˆ†æ˜¯æ¨¡å—åç§°ï¼Œå“ªéƒ¨åˆ†æ˜¯ä¿®é¥°ç¬¦ã€‚</p>
</li>
<li>
<p>å½“æ¨¡å—éœ€è¦æœ‰ä¸åŒçš„å¤–è§‚æˆ–è€…è¡¨ç°çš„æ—¶å€™ï¼Œå°±åˆ›å»ºä¸€ä¸ªå¯ä»¥ç›´æ¥åº”ç”¨åˆ°æŒ‡å®šå…ƒç´ çš„ä¿®é¥°ç¬¦ç±»ã€‚æ¯”å¦‚ï¼Œå†™ï¼dropdown--darkï¼Œè€Œä¸æ˜¯å†™æˆpage-header.dropdownã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¨¡å—æœ¬èº«ï¼Œå¹¶ä¸”åªèƒ½æ˜¯å®ƒæœ¬èº«ï¼Œå¯ä»¥å†³å®šè‡ªå·±çš„æ ·å¼è¡¨ç°ã€‚å…¶ä»–æ¨¡å—ä¸èƒ½è¿›å…¥åˆ«çš„æ¨¡å—å†…éƒ¨å»ä¿®æ”¹å®ƒã€‚è¿™æ ·ä¸€æ¥ï¼Œæ·±è‰²ä¸‹æ‹‰åˆ—è¡¨å¹¶æ²¡æœ‰ç»‘å®šåˆ°æ·±å±‚åµŒå¥—çš„HTMLç»“æ„ä¸Šï¼Œä¹Ÿå°±å¯ä»¥åœ¨é¡µé¢ä¸Šéœ€è¦çš„åœ°æ–¹éšæ„ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>å¯¹äºå¤šå…ƒç´ æ¨¡å—ï¼Œå¦‚åª’ä½“å¯¹è±¡ã€‚ç»™ä¸»å®¹å™¨æ·»åŠ mediaç±»åæ¥åŒ¹é…æ¨¡å—åç§°ã€‚å¯¹äºå®¹å™¨å†…çš„å›¾ç‰‡å’Œæ­£æ–‡ï¼Œå¯ä»¥ä½¿ç”¨ç±»åmedia__imageå’Œmedia__bodyã€‚è¿™äº›ç±»åä»¥æ¨¡å—åç§°å¼€å¤´ï¼Œåè·ŸåŒä¸‹åˆ’çº¿ï¼Œç„¶åæ˜¯å­å…ƒç´ çš„åç§°ã€‚</p>
</li>
<li>
<p>æ¨¡å—å°è£…çš„ä¸€ä¸ªéå¸¸é‡è¦çš„åŸåˆ™--å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principleï¼‰ã€‚æœ‰ä¸€æ¡ç»éªŒï¼šâ€œå¦‚æœä½ ä¸å¾—ä¸ä½¿ç”¨å¹¶ï¼ˆæˆ–è€…å’Œï¼‰è¿™ä¸ªè¯æ¥è¡¨è¿°æ¨¡å—çš„èŒè´£ï¼Œé‚£ä½ å¯èƒ½æ­£åœ¨æè¿°å¤šé¡¹èŒè´£ã€‚â€ å°½å¯èƒ½è®©ä¸€ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚</p>
</li>
<li>
<p>åº”è¯¥å°½é‡è®©éœ€è¦å®šä½çš„å…ƒç´ å…³è”åˆ°åŒä¸€ä¸ªæ¨¡å—å†…çš„å…¶ä»–å…ƒç´ ã€‚åªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬æŠŠæ¨¡å—æ”¾åœ¨å¦ä¸€ä¸ªæœ‰å®šä½çš„å®¹å™¨é‡Œçš„æ—¶å€™ï¼Œæ‰ä¸ä¼šå¼„ä¹±æ ·å¼ã€‚</p>
</li>
<li>
<p>çŠ¶æ€ç±»ï¼ˆstate classï¼‰ä»£è¡¨ç€æ¨¡å—åœ¨å½“å‰çŠ¶æ€ä¸‹çš„è¡¨ç°ã€‚é€šå¸¸åœ¨æ¨¡å—é‡Œä½¿ç”¨JavaScriptåŠ¨æ€åœ°æ·»åŠ æˆ–ç§»é™¤å®ƒã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼ŒçŠ¶æ€ç±»ä¸€èˆ¬ä»¥is-æˆ–è€…has-å¼€å¤´ã€‚è¿™æ ·çŠ¶æ€ç±»çš„ç›®çš„å°±ä¼šæ¯”è¾ƒæ˜æ˜¾ï¼Œå®ƒä»¬è¡¨ç¤ºæ¨¡å—å½“å‰çŠ¶æ€ä¸‹çš„ä¸€äº›ç‰¹å¾æˆ–è€…å³å°†å‘ç”Ÿçš„å˜åŒ–ã€‚çŠ¶æ€ç±»çš„ä»£ç è¦å’Œæ¨¡å—çš„å…¶ä»–ä»£ç æ”¾åœ¨ä¸€èµ·ã€‚ä½¿ç”¨JavaScriptåŠ¨æ€æ›´æ”¹æ¨¡å—è¡¨ç°çš„æ—¶å€™ï¼Œè¦ä½¿ç”¨çŠ¶æ€ç±»å»è§¦å‘æ”¹å˜ã€‚</p>
</li>
</ul>
<h3 id="é¢„å¤„ç†å™¨"> é¢„å¤„ç†å™¨</h3>
<p>æ‰€æœ‰çš„é¢„å¤„ç†å™¨ï¼ˆæ¯”å¦‚Sassæˆ–è€…LESSï¼‰éƒ½æä¾›äº†æŠŠåˆ†æ•£çš„CSSæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å¤šä¸ªæ–‡ä»¶å’Œå¤šä¸ªç›®å½•æ¥ç»„ç»‡æ ·å¼ï¼Œæœ€åæä¾›ä¸€ä¸ªæ–‡ä»¶ç»™æµè§ˆå™¨ã€‚è¿™æ ·å¯ä»¥å‡å°‘æµè§ˆå™¨å‘èµ·çš„ç½‘ç»œè¯·æ±‚æ•°ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æŠŠä»£ç æ–‡ä»¶æ‹†åˆ†æˆæ˜“äºç»´æŠ¤çš„å¤§å°ã€‚
//TODO</p>
<h3 id="å·¥å…·ç±»"> å·¥å…·ç±»</h3>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªç±»æ¥å¯¹å…ƒç´ åšä¸€ä»¶ç®€å•æ˜ç¡®çš„äº‹ï¼Œæ¯”å¦‚è®©æ–‡å­—å±…ä¸­ã€è®©å…ƒç´ å·¦æµ®åŠ¨ï¼Œæˆ–è€…æ¸…é™¤æµ®åŠ¨ã€‚è¿™æ ·çš„ç±»è¢«ç§°ä¸ºå·¥å…·ç±»ï¼ˆutility classï¼‰ã€‚å·¥å…·ç±»æ˜¯å”¯ä¸€åº”è¯¥ä½¿ç”¨importantæ³¨é‡Šçš„åœ°æ–¹ã€‚äº‹å®ä¸Šï¼Œå·¥å…·ç±»åº”è¯¥ä¼˜å…ˆä½¿ç”¨å®ƒã€‚è¿™æ ·çš„è¯ï¼Œä¸ç®¡åœ¨å“ªé‡Œç”¨åˆ°å·¥å…·ç±»ï¼Œéƒ½å¯ä»¥ç”Ÿæ•ˆã€‚</p>
<p>å·¥å…·ç±»çš„ä½œç”¨ç«‹ç«¿è§å½±ã€‚åœ¨é¡µé¢ä¸Šåšç‚¹å°äº‹å„¿çš„æ—¶å€™ä¸éœ€è¦åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„æ¨¡å—ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ç”¨ä¸€ä¸ªå·¥å…·ç±»æ¥å®ç°ã€‚ä½†æ˜¯ä¸è¦æ»¥ç”¨å·¥å…·ç±»ã€‚å¯¹äºå¤§éƒ¨åˆ†ç½‘ç«™ï¼Œæœ€å¤šåå‡ ä¸ªå·¥å…·ç±»å°±å¤Ÿç”¨äº†ã€‚</p>
<details><summary>ç¤ºä¾‹</summary>
<div><pre><code><span>.text-center</span> <span>{</span>
  <span>text-align</span><span>:</span> center <span>!important</span><span>;</span>
<span>}</span>

<span>.float-left</span> <span>{</span>
  <span>float</span><span>:</span> left<span>;</span>
<span>}</span>

<span>.clearfix::before,
.clearfix::after</span> <span>{</span>
    <span>content</span><span>:</span> <span>" "</span><span>;</span>
    <span>display</span><span>:</span> table<span>;</span>
<span>}</span>

<span>.clearfix::after</span> <span>{</span>
    <span>clear</span><span>:</span> both<span>;</span>
<span>}</span>

<span>.hidden</span> <span>{</span>
  <span>display</span><span>:</span> none <span>!important</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div></details>
<h2 id="æ¨¡å¼åº“"> æ¨¡å¼åº“</h2>
<p>æŠŠæ¨¡å—æ¸…å•æ•´åˆæˆä¸€ç»„æ–‡æ¡£ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­å·²ç»æˆä¸ºé€šç”¨åšæ³•ã€‚è¿™ç»„æ–‡æ¡£è¢«ç§°ä¸ºæ¨¡å¼åº“ï¼ˆpattern libraryï¼‰æˆ–è€…æ ·å¼æŒ‡å—ï¼ˆstyle guideï¼‰ã€‚æ¨¡å¼åº“ä¸æ˜¯ç½‘ç«™æˆ–è€…åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯å•ç‹¬çš„ä¸€ç»„HTMLé¡µé¢ï¼Œç”¨æ¥å±•ç¤ºæ¯ä¸ªCSSæ¨¡å—ã€‚æ¨¡å¼åº“æ˜¯ä½ å’Œä½ çš„å›¢é˜Ÿåœ¨å»ºç«™çš„æ—¶å€™ä½¿ç”¨çš„ä¸€ä¸ªå¼€å‘å·¥å…·ã€‚</p>
<h3 id="kss"> KSS</h3>
<p>ä¸€ä¸ªæ¨¡å¼åº“æ„å»ºå·¥å…·ã€‚</p>
<ol>
<li>åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹</li>
<li>npm init -y åˆå§‹åŒ–é¡¹ç›®</li>
<li>npm install --save-dev kss å®‰è£…KSS</li>
<li>é…ç½®KSSé…ç½®æ–‡ä»¶</li>
</ol>
<ul>
<li>æ–°å»ºkss-config.json</li>
<li>åœ¨package.jsonä¸­æ·»åŠ ä¸€æ¡æ„å»ºå‘½ä»¤ <code>&quot;build&quot;: &quot;kss --config kss-config.json&quot;</code></li>
</ul>
<ol start="5">
<li>ç¼–å†™KSSæ–‡æ¡£</li>
<li>npm run build æ„å»ºKSSæ¨¡å¼åº“</li>
</ol>
<details><summary>kss-config.json</summary>
<div><pre><code><span>{</span>
  <span>"title"</span><span>:</span> <span>"My pattern library"</span><span>,</span>
  <span>"source"</span><span>:</span> <span>[</span>
    <span>"./css"</span> <span>// KSSå°†æ‰«æçš„CSSæºæ–‡ä»¶è·¯å¾„</span>
    <span>// å¦‚æœä½¿ç”¨äº†é¢„å¤„ç†å™¨ï¼Œæ¯”å¦‚SASSæˆ–è€…Lessï¼Œæºæ–‡ä»¶ç›®å½•åº”è¯¥æŒ‡å‘SASSæˆ–è€…Lessæ–‡ä»¶ï¼Œ</span>
    <span>// ä½†æ˜¯csså­—æ®µåº”è¯¥æŒ‡å‘ç¼–è¯‘ç”Ÿæˆçš„CSSæ ·å¼è¡¨ã€‚</span>
  <span>]</span><span>,</span>
  <span>"destination"</span><span>:</span>  <span>"docs/"</span><span>,</span> <span>// ç”Ÿæˆçš„æ¨¡å¼åº“æ–‡ä»¶è·¯å¾„</span>
  <span>"css"</span><span>:</span> <span>[</span>
    <span>"../css/styles.css"</span> <span>// ç›¸å¯¹äºdestinationè·¯å¾„çš„cssæ–‡ä»¶è·¯å¾„</span>
  <span>]</span><span>,</span>
  <span>"js"</span><span>:</span> <span>[</span>
    <span>"../js/docs.js"</span> <span>// ç›¸å¯¹äºdestinationè·¯å¾„çš„jsæ–‡ä»¶è·¯å¾„</span>
  <span>]</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div></details>
<h3 id="ç¼–å†™kssæ–‡æ¡£"> ç¼–å†™KSSæ–‡æ¡£</h3>
<p>KSSä¼šæŒ‰ç…§ç‰¹å®šçš„æ–¹å¼åœ¨æ ·å¼è¡¨ä¸­æœå¯»æ³¨é‡Šã€‚æ³¨é‡Šä¸­åŒ…å«äº†æ ‡é¢˜ï¼ˆé€šå¸¸æ˜¯æ¨¡å—åç§°ï¼‰ã€æè¿°ä¿¡æ¯ã€ç¤ºä¾‹HTMLä»£ç å’Œç”¨æ¥è¡¨ç¤ºè¯¥æ¨¡å—åœ¨ç›®å½•ä¸­ä½ç½®çš„Styleguideæ³¨é‡Šã€‚è¿™å‡ ä¸ªéƒ¨åˆ†ä¹‹é—´é€šè¿‡ç©ºç™½è¡Œå½¼æ­¤é—´éš”ï¼Œä¾¿äºKSSåŒºåˆ†å®ƒä»¬ã€‚ä¸¥æ ¼æ¥è®²ï¼Œåªæœ‰æœ€åçš„Styleguideæ³¨é‡Šæ˜¯KSSå¿…éœ€çš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œï¼ŒKSSå°±ä¼šå¿½ç•¥æ•´ä¸ªæ³¨é‡Šå—ã€‚</p>
<div><pre><code><span>/*
Dropdown  // æ–‡æ¡£æ ‡é¢˜

// ä¸€äº›æè¿°ï¼Œä½¿ç”¨Markdownè¯­æ³•
A dropdown menu. Clicking the toggle button opens
and closes the drawer.

Use JavaScript to toggle the `is-open` class in
order to open and close the dropdown.

Markup: // ç”¨æ¥ä¸¾ä¾‹è¯´æ˜æ¨¡å—çš„ç”¨æ³•ã€‚KSSæŠŠè¿™äº›HTMLè½¬åŒ–æˆæ¨¡å¼åº“ï¼Œä»¥ä¾¿è¯»è€…é¢„è§ˆæ•ˆæœï¼Œå¤åˆ¶ç²˜è´´ã€‚
&lt;div>
  &lt;button>Open menu&lt;/button>
  &lt;div>
    Drawer contents
  &lt;/div>
&lt;/div>

Styleguide Dropdown // åœ¨KSSç›®å½•ä¸­å‡ºç°çš„åå­—ï¼Œæœ€å¤šå¯æœ‰ä¸‰çº§ï¼Œå†™æ³•ä¸º one.two.threeã€‚å¯ç”¨äºåˆ†ç»„
*/</span>
<span>.dropdown</span> <span>{</span>
  ...
<span>}</span>
...
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br></div></div><div><p>æ³¨æ„</p>
<p>è¦ç‰¢è®°HTMLç‰‡æ®µä¸­ä¸èƒ½æœ‰ç©ºç™½è¡Œï¼Œå› ä¸ºå¯¹KSSæ¥è®²ï¼Œç©ºç™½è¡Œå°±æ„å‘³ç€markupè¿™éƒ¨åˆ†ç»“æŸäº†ã€‚<br>
KSSç”Ÿæˆæ–°é¡µé¢çš„æ—¶å€™ä¸ä¼šä¸»åŠ¨åˆ é™¤æ—§é¡µé¢ã€‚å¦‚æœé‡å‘½åæˆ–è€…ç§»åŠ¨æºç ä¸­çš„ä¸€éƒ¨åˆ†æ–‡æ¡£ï¼Œdocsç›®å½•ä¸‹çš„ç›¸åº”æ–‡ä»¶è¿˜åœ¨åŸåœ°ï¼Œä¸æ–°æ–‡ä»¶å…±å­˜ã€‚</p>
</div>
<hr>
<p>KSSæä¾›äº†é˜è¿°å¤šé‡å˜ä½“çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ¨¡å¼åº“é‡ŒæŠŠæ¯ä¸ªéƒ½æ¸²æŸ“å‡ºæ¥ã€‚<br>
<code>{{modifier_class}}</code>æ³¨é‡ŠæŒ‡æ˜ä¿®é¥°ç¬¦ç±»æ‰€å±çš„ä½ç½®ã€‚Markupåé¢ä¸€æ®µåˆ™ä¸ºå¯ç”¨ä¿®é¥°ç¬¦åˆ—è¡¨ã€‚</p>
<div><pre><code><span>/*
Buttons

Buttons are available in a number of sizes and
colors. You may mix and match any size with any
color.

Markup:
&lt;button>
  click here
&lt;/button>

.button--success  - A green success button
.button--danger   - A red danger button
.button--small    - A small button
.button--large    - A large button

Styleguide Buttons
*/</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><hr>
<p>æ¦‚è§ˆæ–‡ä»¶<br>
æ¨¡å¼åº“çš„ä¸»é¡µã€‚åœ¨cssç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªåä¸ºhomepage.mdçš„æ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªmarkdownæ ¼å¼çš„æ–‡ä»¶ï¼Œç”¨æ¥æ•´ä½“ä»‹ç»æ¨¡å¼åº“ã€‚</p>
<div><p>æ³¨æ„</p>
<p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ç›®å½•ä¸­Overviewé“¾æ¥ä»ç„¶ä¸èƒ½å·¥ä½œï¼Œå› ä¸ºç°åœ¨æ˜¯åœ¨ç£ç›˜ä¸Šç›´æ¥æ‰“å¼€æ¨¡å¼åº“æ–‡ä»¶ï¼ŒKSSæŠŠOverviewé“¾æ¥æŒ‡å‘äº†ï¼/è€Œä¸æ˜¯index.htmlã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡HTTPæœåŠ¡å™¨è®¿é—®æ¨¡å¼åº“ï¼Œè¿™æ ·ï¼/åœ¨æµè§ˆå™¨é‡Œä¼šé“¾æ¥åˆ°index.htmlã€‚</p>
</div>
<hr>
<p>JS<br>
æœ‰äº›æ¨¡å—éœ€è¦JavaScripté…åˆä¸€èµ·å·¥ä½œã€‚è¿™æ—¶å€™ï¼Œè¦ä¸ºé¡µé¢æ·»åŠ ä¸€äº›ç®€å•çš„JavaScriptæ¥æ¼”ç¤ºæ¨¡å—çš„è¡Œä¸ºã€‚æ²¡å¿…è¦åœ¨æ¨¡å¼åº“é‡Œå¼•å…¥ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„JavaScriptåº“ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåˆ‡æ¢ä¸åŒçš„çŠ¶æ€ç±»å°±å¤Ÿäº†ã€‚<br>
KSSä¼šæŠŠjsæ•°ç»„é‡Œåˆ—å‡ºçš„æ‰€æœ‰è„šæœ¬æ–‡ä»¶éƒ½æ·»åŠ åˆ°é¡µé¢ä¸Šã€‚æˆ‘ä»¬å¯ä»¥æŠŠä»£ç å†™åˆ°è¿™äº›è„šæœ¬æ–‡ä»¶ä¸­ï¼Œä¸ºæ¨¡å—æä¾›æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚</p>
<div><pre><code><span>(</span><span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>var</span> dropdowns <span>=</span> document<span>.</span><span>querySelectorAll</span><span>(</span><span>'.dropdown__toggle'</span><span>)</span><span>;</span>
  <span>Array</span><span>.</span>prototype<span>.</span><span>forEach</span><span>.</span><span>call</span><span>(</span>dropdowns<span>,</span> <span>function</span><span>(</span><span>dropdown</span><span>)</span> <span>{</span>
    dropdown<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>function</span> <span>(</span><span>event</span><span>)</span> <span>{</span>
      event<span>.</span>target<span>.</span>parentNode<span>.</span>classList<span>.</span><span>toggle</span><span>(</span><span>'is-open'</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span><span>(</span><span>)</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">CSS é¢„å¤„ç†å™¨</title>
    <id>https://kigane.github.io/note/js/css-sass/</id>
    <link href="https://kigane.github.io/note/js/css-sass/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="sass"> Sass</h2>
<p>é¢„å¤„ç†å™¨çš„å·¥ä½œåŸç†æ˜¯æŠŠæˆ‘ä»¬å†™çš„æºæ–‡ä»¶è½¬è¯‘æˆè¾“å‡ºæ–‡ä»¶ï¼Œå³å¸¸è§„CSSæ ·å¼è¡¨ã€‚</p>
<h3 id="å®‰è£…"> å®‰è£…</h3>
<ol>
<li>æ–°å»ºé¡¹ç›®ç›®å½•å¹¶è¿›å…¥</li>
<li>npm init -y åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„npmé¡¹ç›®ï¼Œåˆ›å»ºpackage.jsonæ–‡ä»¶ã€‚</li>
<li>npm install --save-dev node-sass å®‰è£…node-sassåŒ…ï¼Œå¹¶æŠŠå®ƒä½œä¸ºå¼€å‘ä¾èµ–å†™å…¥package.jsonã€‚åœ¨Windowsç³»ç»Ÿä¸­ï¼Œéœ€è¦å…ˆå®‰è£…node-gypåŒ…ã€‚(-gå…¨å±€å®‰è£…)</li>
</ol>
<div><p>é€‰æ‹©è¯­æ³•</p>
<p>Sassæ”¯æŒä¸¤ç§è¯­æ³•ï¼šSasså’ŒSCSSã€‚å®ƒä»¬çš„è¯­è¨€ç‰¹æ€§ä¸€æ ·ï¼Œä½†Sassè¯­æ³•å»æ‰äº†æ‰€æœ‰çš„å¤§æ‹¬å·å’Œåˆ†å·ï¼Œä¸¥æ ¼ä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç ç»“æ„ï¼Œå†™æ³•ç±»ä¼¼pythonã€‚SCSSè¯­æ³•ä½¿ç”¨å¤§æ‹¬å·å’Œåˆ†å·ï¼Œæ›´åƒå¸¸è§„CSSã€‚</p>
<p>SCSSæ–‡ä»¶ä½¿ç”¨ï¼scssæ‰©å±•åï¼ŒSassæ–‡ä»¶ä½¿ç”¨ï¼sassæ‰©å±•åã€‚</p>
</div>
<h3 id="è¿è¡Œ"> è¿è¡Œ</h3>
<ol>
<li>åœ¨é¡¹ç›®ç›®å½•æ–°å»ºä¸¤ä¸ªå­æ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«å«ä½œsasså’Œbuildã€‚æºæ–‡ä»¶æ”¾åœ¨sassæ–‡ä»¶å¤¹ï¼ŒSassä¼šä½¿ç”¨è¿™äº›æ–‡ä»¶æ¥ç”ŸæˆCSSæ–‡ä»¶ï¼Œå¹¶æ”¾åˆ°buildæ–‡ä»¶å¤¹ã€‚</li>
<li>ç¼–è¾‘package.jsonæ–‡ä»¶ï¼Œåœ¨è„šæœ¬ä¸­æ·»åŠ ä¸€æ¡å‘½ä»¤<code>&quot;sass&quot;: &quot;sass sass/index.scss build/styles.css&quot;</code>ã€‚è¿™æ ·å°±å®šä¹‰äº†ä¸€æ¡sasså‘½ä»¤ï¼Œè¿è¡Œçš„æ—¶å€™ä¼šæŠŠsass/index.scssç¼–è¯‘æˆbuild/styles.cssè¿™ä¸ªæ–°æ–‡ä»¶ã€‚</li>
<li>å†™ä»£ç ï¼Œnpm run sassï¼Œå¾—åˆ°styles.css</li>
</ol>
<h3 id="æ ¸å¿ƒç‰¹æ€§"> æ ¸å¿ƒç‰¹æ€§</h3>
<p>æºscss</p>
<div><pre><code><span><span>$brand-blue</span></span><span>:</span> #0086b3<span>;</span>

<span>a:link </span><span>{</span>
    <span>color</span><span>:</span> <span>$brand-blue</span><span>;</span>
<span>}</span>

<span>.page-heading </span><span>{</span>
    <span>font-size</span><span>:</span> 1.6rem<span>;</span>
    <span>color</span><span>:</span> <span>$brand-blue</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>å¤„ç†åç”Ÿæˆçš„css</p>
<div><pre><code><span>a:link</span> <span>{</span>
  <span>color</span><span>:</span> #0086b3<span>;</span>
<span>}</span>

<span>.page-heading</span> <span>{</span>
  <span>font-size</span><span>:</span> 1.6rem<span>;</span>
  <span>color</span><span>:</span> #0086b3<span>;</span>
<span>}</span><span>/*# sourceMappingURL=index.css.map */</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><div><p>æºæ˜ å°„</p>
<p>æºæ˜ å°„:ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶(.map)ï¼Œè®¡ç®—æœºå¯ä»¥ç”¨å®ƒæ¥è¿½è¸ªç”Ÿæˆåçš„ä»£ç ï¼ˆåœ¨æˆ‘ä»¬è¿™é‡Œæ˜¯CSSï¼‰ä¸­æ¯ä¸€è¡Œå¯¹åº”çš„æºä»£ç ä¸­çš„é‚£ä¸€è¡Œï¼ˆSassï¼‰ã€‚è¿™ä¸ªæ˜ å°„æ–‡ä»¶å¯ä»¥ç”¨åœ¨ä¸€äº›è°ƒè¯•å™¨ä¸­ï¼ŒåŒ…æ‹¬æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ã€‚</p>
</div>
<h4 id="è¡Œå†…è®¡ç®—"> è¡Œå†…è®¡ç®—</h4>
<p>Sassæ”¯æŒä½¿ç”¨+ã€-ã€*ã€/å’Œ%è¿›è¡Œè¡Œå†…è®¡ç®—ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»ä¸€ä¸ªåˆå§‹å€¼è·å¾—å¤šä¸ªå€¼ã€‚è¿™ä¸ªç‰¹æ€§åœ¨ä¸¤ä¸ªå€¼ç›¸å…³ä½†ä¸åŒçš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<h4 id="åµŒå¥—é€‰æ‹©å™¨"> åµŒå¥—é€‰æ‹©å™¨</h4>
<p>Sasså…è®¸åœ¨ä»£ç å—å†…åµŒå¥—é€‰æ‹©å™¨ã€‚ä½ å¯ä»¥ä½¿ç”¨åµŒå¥—æŠŠæœ‰å…³è”çš„ä»£ç åˆ†åˆ°ä¸€ç»„ã€‚Sassä¼šæŠŠå¤–å±‚å£°æ˜å—çš„é€‰æ‹©å™¨ä¸åµŒå¥—é€‰æ‹©å™¨åˆå¹¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤–å±‚çš„é€‰æ‹©å™¨ä¼šè‡ªåŠ¨æ·»åŠ åˆ°ç¼–è¯‘ä»£ç çš„æ¯ä¸ªé€‰æ‹©å™¨å‰é¢ï¼Œæ‹¼æ¥çš„ä½ç½®è¿˜ä¼šæ’å…¥ä¸€ä¸ªç©ºæ ¼ã€‚è¦ä¿®æ”¹é»˜è®¤æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨&amp;ç¬¦å·ä»£è¡¨å¤–å±‚é€‰æ‹©å™¨æƒ³è¦æ’å…¥çš„ä½ç½®ã€‚</p>
<div><pre><code><span>.site-nav </span><span>{</span>
    <span>display</span><span>:</span> flex<span>;</span>

    <span>> li </span><span>{</span>
        <span>margin-top</span><span>:</span> 0<span>;</span>

        <span><span>&amp;</span>.is-active </span><span>{</span>
            <span>display</span><span>:</span> block<span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>

<span>/* ä¹Ÿå¯ä»¥åœ¨å£°æ˜å—å†…åµŒå¥—åª’ä½“æŸ¥è¯¢ */</span>
<span>html </span><span>{</span>
    <span>font-size</span><span>:</span> 1rem<span>;</span>

    <span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 45em<span>)</span></span> <span>{</span>
        <span>font-size</span><span>:</span> 1.25rem<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><p>ç¼–è¯‘å</p>
<div><pre><code><span>.site-nav</span> <span>{</span>
  <span>display</span><span>:</span> flex<span>;</span>
<span>}</span>
<span>.site-nav > li</span> <span>{</span>
  <span>margin-top</span><span>:</span> 0<span>;</span>
<span>}</span>
<span>.site-nav > li.is-active</span> <span>{</span>
  <span>display</span><span>:</span> block<span>;</span>
<span>}</span>

<span>html</span> <span>{</span>
  <span>font-size</span><span>:</span> 1rem<span>;</span>
<span>}</span>
<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 45em<span>)</span></span> <span>{</span>
  <span>html</span> <span>{</span>
    <span>font-size</span><span>:</span> 1.25rem<span>;</span>
  <span>}</span>
<span>}</span><span>/*# sourceMappingURL=index.css.map */</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><h4 id="å±€éƒ¨æ–‡ä»¶-import"> å±€éƒ¨æ–‡ä»¶--@import</h4>
<p>å±€éƒ¨æ–‡ä»¶å¯ä»¥å…è®¸ä½ æŠŠæ ·å¼åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼ŒSassä¼šæŠŠè¿™äº›æ–‡ä»¶æ‹¼æ¥åœ¨ä¸€èµ·ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ã€‚ä½¿ç”¨å±€éƒ¨æ–‡ä»¶å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•éšæ„ç»„ç»‡æ–‡ä»¶ï¼Œä½†æœ€ç»ˆåªæä¾›ç»™æµè§ˆå™¨ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚çš„æ•°é‡ã€‚</p>
<p>å°†æ ·å¼æ–‡ä»¶æ‹†åˆ†ä¸ºä¸€ç³»åˆ—å±€éƒ¨æ–‡ä»¶ï¼Œåœ¨index.scssä¸­ä½¿ç”¨<code>@import &quot;path&quot;</code>å¼•å…¥ï¼Œè¿è¡ŒSassçš„æ—¶å€™ï¼Œå±€éƒ¨æ–‡ä»¶ä¼šè¢«ç¼–è¯‘ï¼Œç„¶åæ’å…¥åˆ°@importè§„åˆ™æŒ‡å®šçš„åœ°æ–¹ã€‚ç›¸å½“äºCçš„#includeã€‚</p>
<h4 id="æ··å…¥-mixin"> æ··å…¥(mixin)</h4>
<p>æ··å…¥æ˜¯ä¸€å°æ®µCSSä»£ç å—ï¼Œå¯ä»¥åœ¨æ ·å¼è¡¨ä»»æ„åœ°æ–¹å¤ç”¨ã€‚ä½¿ç”¨@mixinè§„åˆ™æ¥å®šä¹‰ï¼Œä½¿ç”¨@includeè§„åˆ™æ¥è°ƒç”¨ã€‚ä¾‹å¦‚</p>
<div><pre><code><span>@mixin</span> <span>clrfix </span><span>{</span>
    <span><span>&amp;</span>::before </span><span>{</span>
        <span>display</span><span>:</span> table<span>;</span>
        <span>content</span><span>:</span> <span>" "</span><span>;</span>
    <span>}</span>

    <span><span>&amp;</span>::after </span><span>{</span>
        <span>clear</span><span>:</span> both<span>;</span>
    <span>}</span>
<span>}</span>

<span>.media </span><span>{</span>
    <span>@include</span> clrfix<span>;</span>
    <span>background-color</span><span>:</span> #eee<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><p>ç¼–è¯‘å</p>
<div><pre><code><span>.media</span> <span>{</span>
  <span>background-color</span><span>:</span> #eee<span>;</span>
<span>}</span>
<span>.media::before</span> <span>{</span>
  <span>display</span><span>:</span> table<span>;</span>
  <span>content</span><span>:</span> <span>" "</span><span>;</span>
<span>}</span>
<span>.media::after</span> <span>{</span>
  <span>clear</span><span>:</span> both<span>;</span>
<span>}</span><span>/*# sourceMappingURL=index.css.map */</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><hr>
<p>è¿˜å¯ä»¥å®šä¹‰å¸¦å‚æ•°çš„æ··å…¥ï¼Œå°±åƒå¹³æ—¶ç¼–ç¨‹ä¸­ä½¿ç”¨çš„å‡½æ•°ä¸€æ ·ã€‚</p>
<div><pre><code><span>@mixin</span> <span>alert-color</span><span>(</span><span>$color</span><span>,</span> <span>$bg-color</span><span>)</span> <span>{</span>
    <span>color</span><span>:</span> <span>$color</span><span>;</span>
    <span>background-color</span><span>:</span> <span>$bg-color</span><span>;</span>
<span>}</span>

<span>.media-info </span><span>{</span>
    <span>@include</span> <span>alert-color</span><span>(</span>blue<span>,</span> lightblue<span>)</span><span>;</span>
<span>}</span>
<span>.media-info </span><span>{</span>
    <span>@include</span> <span>alert-color</span><span>(</span>red<span>,</span> pink<span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>ç¼–è¯‘å</p>
<div><pre><code><span>.media-info</span> <span>{</span>
  <span>color</span><span>:</span> blue<span>;</span>
  <span>background-color</span><span>:</span> lightblue<span>;</span>
<span>}</span>

<span>.media-info</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
  <span>background-color</span><span>:</span> pink<span>;</span>
<span>}</span><span>/*# sourceMappingURL=index.css.map */</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><h4 id="æ‰©å±•-extend"> æ‰©å±•(extend)</h4>
<p>sassè¿˜æ”¯æŒ@extendè§„åˆ™ã€‚å’Œmixinç±»ä¼¼ï¼Œä½†ç¼–è¯‘æ–¹å¼æœ‰æ‰€ä¸åŒã€‚å¯¹äºæ‰©å±•ï¼Œsassä¸ä¼šå¤šæ¬¡å¤åˆ¶ç›¸åŒçš„å£°æ˜ï¼Œè€Œæ˜¯æŠŠé€‰æ‹©å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·å®ƒä»¬å°±ä¼šåŒ…å«åŒæ ·çš„è§„åˆ™ã€‚</p>
<div><pre><code><span>.message </span><span>{</span>
    <span>padding</span><span>:</span> .3em .5em<span>;</span>
    <span>border-radius</span><span>:</span> .5em<span>;</span>
<span>}</span>

<span>.message-info </span><span>{</span>
    <span>@extend</span> .message<span>;</span>
    <span>color</span><span>:</span> blue<span>;</span>
    <span>background-color</span><span>:</span> lightblue<span>;</span>
<span>}</span>

<span>.message-danger </span><span>{</span>
    <span>@extend</span> .message<span>;</span>
    <span>color</span><span>:</span> red<span>;</span>
    <span>background-color</span><span>:</span> pink<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>ç¼–è¯‘å</p>
<div><pre><code><span>.message, .message-danger, .message-info</span> <span>{</span>
  <span>padding</span><span>:</span> 0.3em 0.5em<span>;</span>
  <span>border-radius</span><span>:</span> 0.5em<span>;</span>
<span>}</span>

<span>.message-info</span> <span>{</span>
  <span>color</span><span>:</span> blue<span>;</span>
  <span>background-color</span><span>:</span> lightblue<span>;</span>
<span>}</span>

<span>.message-danger</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
  <span>background-color</span><span>:</span> pink<span>;</span>
<span>}</span><span>/*# sourceMappingURL=index.css.map */</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><p>Sasså¤åˆ¶äº†ï¼message-infoå’Œï¼message-dangeré€‰æ‹©å™¨ï¼Œå¹¶ä¸Šç§»åˆ°ç¬¬ä¸€ä¸ªè§„åˆ™é›†ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æ ‡è®°åªéœ€è¦å¼•ç”¨ä¸€ä¸ªç±»ï¼Œæ— é¡»ä¸¤ä¸ªéƒ½å¼•å…¥ï¼Œä»<code>&lt;divclass=&quot;message message-info&quot;&gt;</code>å˜æˆäº†<code>&lt;div class=&quot;message-info&quot;&gt;</code>ã€‚</p>
<div><p>æç¤º</p>
<p>@extendçš„è¾“å‡ºé•¿åº¦é€šå¸¸ä¼šæ¯”mixinçŸ­ä¸€äº›ã€‚è¿™æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä¹Ÿå¾ˆå®¹æ˜“æƒ³åˆ°@extendæ›´å¥½ä¸€äº›ï¼Œå› ä¸ºå®ƒæœ€ç»ˆè¾“å‡ºçš„æ ·å¼è¡¨æ›´å°ï¼ˆå› æ­¤ç½‘ç»œä¼ è¾“é€Ÿåº¦æ›´å¿«ï¼‰ã€‚ä½†ä¹Ÿè¦çŸ¥é“mixinäº§ç”Ÿçš„å¤§é‡é‡å¤ä»£ç ï¼Œä½¿ç”¨gzipå¯ä»¥å‹ç¼©å¾—æ¯”è¾ƒå°ã€‚åªè¦ä½ çš„æœåŠ¡å™¨ä½¿ç”¨gzipå‹ç¼©å¤„ç†è¿‡æ‰€æœ‰çš„ç½‘ç»œä¼ è¾“ï¼ˆå½“ç„¶ï¼Œä¹Ÿåº”è¯¥è¿™ä¹ˆåšï¼‰ï¼Œå¢åŠ çš„è¿™äº›é‡å¤ä»£ç é€šå¸¸ä¼šæ¯”é¢„æœŸå°å¾—å¤šã€‚</p>
</div>
<h4 id="é¢œè‰²å¤„ç†"> é¢œè‰²å¤„ç†</h4>
<p>Sassè¿˜æœ‰ä¸ªä¸é”™çš„ç‰¹æ€§ï¼Œå®ƒæœ‰ä¸€å †å¤„ç†é¢œè‰²çš„å‡½æ•°ã€‚<a href="http://jackiebalzer.com/color" target="_blank" rel="noopener noreferrer">å‚è€ƒï¼šAVisual Guide to Sass &amp; Compass Color Functions</a></p>
<h4 id="å¾ªç¯"> å¾ªç¯</h4>
<p>ä½¿ç”¨<code>@for $var from start through/to end {}</code></p>
<ul>
<li>through åŒ…æ‹¬ end</li>
<li>to ä¸åŒ…æ‹¬ end</li>
</ul>
<div><pre><code><span><span>$base-color</span></span><span>:</span> #036<span>;</span>

<span>@for</span> <span>$i</span> <span>from</span> 1 <span>through</span> <span>3 </span><span>{</span>
  <span>ul</span><span>:</span><span>nth-child</span><span>(</span>3n <span>+</span> <span>#{$i}</span><span>)</span> <span>{</span>
    <span>background-color</span><span>:</span> <span>lighten</span><span>(</span><span>$base-color</span><span>,</span> <span>$i</span> <span>*</span> 5%<span>)</span><span>;</span>
  <span>}</span>
<span>}</span>

<span>@for</span> <span>$i</span> <span>from</span> <span>1 to 3 </span><span>{</span>
  <span>ol</span><span>:</span><span>nth-child</span><span>(</span>3n <span>+</span> <span>#{$i}</span><span>)</span> <span>{</span>
    <span>background-color</span><span>:</span> <span>lighten</span><span>(</span><span>$base-color</span><span>,</span> <span>$i</span> <span>*</span> 5%<span>)</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>ç¼–è¯‘å</p>
<div><pre><code><span>ul:nth-child(3n+1)</span> <span>{</span>
  <span>background-color</span><span>:</span> #004080<span>;</span>
<span>}</span>

<span>ul:nth-child(3n+2)</span> <span>{</span>
  <span>background-color</span><span>:</span> #004d99<span>;</span>
<span>}</span>

<span>ul:nth-child(3n+3)</span> <span>{</span>
  <span>background-color</span><span>:</span> #0059b3<span>;</span>
<span>}</span>

<span>ol:nth-child(3n+1)</span> <span>{</span>
  <span>background-color</span><span>:</span> #004080<span>;</span>
<span>}</span>

<span>ol:nth-child(3n+2)</span> <span>{</span>
  <span>background-color</span><span>:</span> #004d99<span>;</span>
<span>}</span><span>/*# sourceMappingURL=index.css.map */</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><div><p>æç¤º</p>
<p>sassä¸­çš„<code>#{expr}</code>ç§°ä¸ºInterpolationï¼Œç”¨äºå°†sassä¸­çš„exprå€¼è®¡ç®—å‡ºæ¥ï¼ŒåµŒå…¥CSSå—ä¸­ã€‚é€šå¸¸ç”¨äºå±æ€§ï¼Œé€‰æ‹©å™¨ï¼Œ@è§„åˆ™ï¼Œè¿˜æœ‰ä¾‹å­ä¸­çš„nth-childå‚æ•°éƒ¨åˆ†ç­‰ç­‰ã€‚è€Œåœ¨å±æ€§å€¼ç”¨<code>#{expr}</code>ï¼Œç­‰äºæ²¡ç”¨ã€‚</p>
</div>
<div><pre><code><span>@mixin</span> <span>corner-icon</span><span>(</span><span>$name</span><span>,</span> <span>$top-or-bottom</span><span>,</span> <span>$left-or-right</span><span>)</span> <span>{</span>
  <span>.icon-<span>#{$name}</span> </span><span>{</span>
    <span>background-image</span><span>:</span> <span>url</span><span>(</span><span>"/icons/#{$name}.svg"</span><span>)</span><span>;</span>
    <span>position</span><span>:</span> absolute<span>;</span>
    <span><span>#{$top-or-bottom}</span></span><span>:</span> 0<span>;</span>
    <span><span>#{$left-or-right}</span></span><span>:</span> 0<span>;</span>
  <span>}</span>
<span>}</span>

<span>@include</span> <span>corner-icon</span><span>(</span><span>"mail"</span><span>,</span> top<span>,</span> left<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">css å°æŠ€å·§</title>
    <id>https://kigane.github.io/note/js/css-tricks/</id>
    <link href="https://kigane.github.io/note/js/css-tricks/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯ä¸è¾¹æ¡†"> èƒŒæ™¯ä¸è¾¹æ¡†</h2>
<h3 id="é€æ˜è¾¹æ¡†"> é€æ˜è¾¹æ¡†</h3>
<p>å…ƒç´ çš„èƒŒæ™¯é»˜è®¤ä¼šå æ®border+padding+contentåŒºåŸŸã€‚å³background-clip: border-boxã€‚<br>
è¦å®ç°å…ƒç´ èƒŒæ™¯å¤–æœ‰ä¸€åœˆé€æ˜è¾¹æ¡†ï¼Œéœ€è¦ä¿®æ”¹background-clipä¸ºpadding-boxã€‚åˆ™èƒŒæ™¯åªå æ®padding+contentåŒºåŸŸã€‚å†å°†è¾¹æ¡†è®¾ä¸ºé€æ˜å³å¯ã€‚</p>
<h3 id="å¤šé‡è¾¹æ¡†"> å¤šé‡è¾¹æ¡†</h3>
<p>box-shadow:ä¸€ä¸ªæ­£å€¼çš„æ‰©å¼ åŠå¾„åŠ ä¸Šä¸¤ä¸ªä¸ºé›¶çš„åç§»é‡ä»¥åŠä¸ºé›¶çš„æ¨¡ç³Šå€¼ï¼Œå¾—åˆ°çš„â€œæŠ•å½±â€å…¶å®å°±åƒä¸€é“å®çº¿è¾¹æ¡†ã€‚å¹¶ä¸”ï¼Œå®ƒæ”¯æŒé€—å·åˆ†éš”è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä»»æ„æ•°é‡çš„æŠ•å½±ã€‚</p>
<div><p>æ³¨æ„</p>
<ol>
<li>box-shadowä¸ä¼šå½±å“å¸ƒå±€ã€‚æ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡marginæˆ–paddingæ¨¡æ‹Ÿè¾¹æ¡†å æ®çš„ç©ºé—´ã€‚</li>
<li>box-shadowä¸ä¼šå“åº”é¼ æ ‡äº‹ä»¶ï¼Œè¿™å¯ä»¥é€šè¿‡ä½¿ç”¨å†…åœˆè¾¹æ¡†(åŠ  inset å…³é”®å­—)è§£å†³ã€‚</li>
</ol>
</div>
<hr>
<p>outline:å¦‚æœåªéœ€è¦ä¸¤å±‚è¾¹æ¡†ï¼Œé‚£å°±å¯ä»¥å…ˆè®¾ç½®ä¸€å±‚å¸¸è§„è¾¹æ¡†ï¼Œå†åŠ ä¸Šoutline(æè¾¹)å±æ€§æ¥äº§ç”Ÿå¤–å±‚çš„è¾¹æ¡†ã€‚ç›¸æ¯”äºbox-shadowåªèƒ½äº§ç”Ÿå®ç°è¾¹æ¡†ï¼Œoutlineå’Œborderä¸€æ ·ï¼Œæœ‰æ›´å¤šè¾¹æ¡†æ ·å¼ã€‚<br>
outline-offset:æ§åˆ¶outlineå’Œborderçš„é—´è·ï¼Œå¯ä»¥å–è´Ÿå€¼ï¼Œå®ç°ç®€å•çš„ç¼è¾¹æ•ˆæœã€‚å¦‚æœè´Ÿå€¼å’Œborderçš„å®½åº¦ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªè¾¹æ¡†ä¼šé‡åˆï¼Œoutlineåœ¨ä¸Šã€‚</p>
<div><p>æ³¨æ„</p>
<p>outlineä¸ä¸€å®šä¼šè´´åˆborder-radiuså±æ€§äº§ç”Ÿçš„åœ†è§’ï¼Œå› æ­¤å¦‚æœå…ƒç´ æ˜¯åœ†è§’çš„ï¼Œå®ƒçš„æè¾¹å¯èƒ½è¿˜æ˜¯ç›´è§’çš„ã€‚è¿™ç§è¡Œä¸ºè¢«CSSå·¥ä½œç»„è®¤ä¸ºæ˜¯ä¸€ä¸ªbugï¼Œå› æ­¤æœªæ¥å¯èƒ½ä¼šæ”¹ä¸ºè´´åˆborder-radiusåœ†è§’ã€‚</p>
</div>
<h3 id="è¾¹æ¡†å†…åœ†è§’"> è¾¹æ¡†å†…åœ†è§’</h3>
<p>ä½¿ç”¨ä¸¤ä¸ªå®¹å™¨ï¼Œå¤–å±‚è®¾ç½®èƒŒæ™¯+paddingï¼Œå†…å±‚è®¾ç½®border-radiuså³å¯ã€‚</p>
<h3 id="æ¡çº¹èƒŒæ™¯"> æ¡çº¹èƒŒæ™¯</h3>
<p>backgound-img: linear-gradient(...)</p>
<ul>
<li>å¦‚æœå¤šä¸ªè‰²æ ‡å…·æœ‰ç›¸åŒçš„ä½ç½®ï¼Œå®ƒä»¬ä¼šäº§ç”Ÿä¸€ä¸ªæ— é™å°çš„è¿‡æ¸¡åŒºåŸŸï¼Œè¿‡æ¸¡çš„èµ·æ­¢è‰²åˆ†åˆ«æ˜¯ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæŒ‡å®šå€¼ã€‚ä»æ•ˆæœä¸Šçœ‹ï¼Œé¢œè‰²ä¼šåœ¨é‚£ä¸ªä½ç½®çªç„¶å˜åŒ–ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¹³æ»‘çš„æ¸å˜è¿‡ç¨‹ã€‚</li>
<li>å¦‚æœæŸä¸ªè‰²æ ‡çš„ä½ç½®å€¼æ¯”æ•´ä¸ªåˆ—è¡¨ä¸­åœ¨å®ƒä¹‹å‰çš„è‰²æ ‡çš„ä½ç½®å€¼éƒ½è¦å°ï¼Œåˆ™è¯¥è‰²æ ‡çš„ä½ç½®å€¼ä¼šè¢«è®¾ç½®ä¸ºå®ƒå‰é¢æ‰€æœ‰è‰²æ ‡ä½ç½®å€¼çš„æœ€å¤§å€¼ã€‚</li>
</ul>
<div><pre><code><span>backgound-img</span><span>:</span> <span>linear-gradient</span><span>(</span>to right<span>,</span> black 30%<span>,</span> white 0<span>,</span> white 70%<span>,</span> black 0<span>)</span>  <span>/* é»‘ç™½é»‘ */</span>
</code></pre>
<div><span>1</span><br></div></div><hr>
<p>æ–œå‘æ¡çº¹</p>
<div><pre><code><span>background-image</span><span>:</span> <span>repeating-linear-gradient</span><span>(</span>-45deg<span>,</span> black<span>,</span> black 10px<span>,</span> azure 0<span>,</span> azure 20px<span>)</span><span>;</span>
<span>/*
ç›¸å½“äº
linear-gradient(-45deg, 
black, black 10px, azure 0, azure 20px
black 20px, black 30px, azure 0, azure 40px
black 40px, black 50px, azure 0, azure 60px
...)
*/</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><h2 id="å¸ƒå±€"> å¸ƒå±€</h2>
<p>https://1linelayouts.glitch.me/</p>
<h3 id="ç´§è´´åº•éƒ¨çš„é¡µè„š"> ç´§è´´åº•éƒ¨çš„é¡µè„š</h3>
<p>æƒ³è¦çš„æ•ˆæœæ˜¯ï¼Œé¡µå¤´å’Œé¡µè„šçš„é«˜åº¦ç”±å…¶å†…éƒ¨å› ç´ æ¥å†³å®šï¼Œè€Œå†…å®¹åŒºå—çš„é«˜åº¦åº”è¯¥å¯ä»¥è‡ªåŠ¨ä¼¸å±•å¹¶å æ»¡æ‰€æœ‰çš„å¯ç”¨ç©ºé—´ã€‚</p>
<div><pre><code><span>/*
&lt;div>
    &lt;header>&lt;h1>Site Name&lt;/h1>&lt;/header>
    &lt;main>
        &lt;p>haha There should have some content&lt;/p>
        &lt;p>haha There should have some content&lt;/p>
        &lt;p>haha There should have some content&lt;/p>
    &lt;/main>
    &lt;footer>
        &lt;p>copyright &amp;copy; 2021&lt;/p>
    &lt;/footer>
&lt;/div>
*/</span>

<span>.sf-container</span> <span>{</span>
    <span>display</span><span>:</span> flex<span>;</span>
    <span>flex-direction</span><span>:</span> column<span>;</span>
    <span>min-height</span><span>:</span> 98vh<span>;</span>
<span>}</span>

<span>main</span> <span>{</span>
    <span>flex</span><span>:</span> 1<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><h2 id="oneline-css"> oneline css</h2>
<h3 id="æ°´å¹³-å‚ç›´å±…ä¸­"> æ°´å¹³ï¼Œå‚ç›´å±…ä¸­</h3>
<div><pre><code><span>.parent</span> <span>{</span>
    <span>display</span><span>:</span> grid<span>;</span>
    <span>place-items</span><span>:</span>center<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="the-deconstructed-pancake"> The Deconstructed Pancake</h3>
<div><pre><code><span>.parent</span> <span>{</span>
    <span>display</span><span>:</span> flex<span>;</span>
    <span>flex-wrap</span><span>:</span> wrap<span>;</span>
    <span>justify-content</span><span>:</span> center<span>;</span>
<span>}</span>

<span>.box</span> <span>{</span>
    <span>flex</span><span>:</span> 1 1 150px<span>;</span> <span>/*  Stretching: */</span>
    <span>/* flex: 0 1 150px;   No stretching: */</span>
    <span>margin</span><span>:</span> 5px<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h3 id="sidebar"> sidebar</h3>
<p>å·¦ä¾§è¾¹æ æœ€å°150pxï¼Œæœ€å¤§25%ã€‚å…¶ä½™ç©ºé—´ç”±å†…å®¹å æ®ã€‚</p>
<div><pre><code><span>.parent</span> <span>{</span>
    <span>display</span><span>:</span> grid<span>;</span>
    <span>grid-template-columns</span><span>:</span> <span>minmax</span><span>(</span>150px<span>,</span> 25%<span>)</span> 1fr<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="pancake-stack"> Pancake Stack</h3>
<p>display:gridä¸­çš„autoè¡¨ç¤ºå…ƒç´ æ‰©å±•åˆ°èƒ½å®¹çº³ç½‘æ ¼å…ƒç´ å†…å®¹ã€‚<br>
frç±»ä¼¼flexä¸­çš„å¢é•¿å› å­ã€‚</p>
<div><pre><code><span>.parent</span> <span>{</span>
    <span>display</span><span>:</span> grid<span>;</span>
    <span>grid-template-rows</span><span>:</span> auto 1fr auto<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="ç»å…¸åœ£æ¯å¸ƒå±€"> ç»å…¸åœ£æ¯å¸ƒå±€</h3>
<div><pre><code><span>.parent</span> <span>{</span>
    <span>display</span><span>:</span> grid<span>;</span>
    <span>grid-template</span><span>:</span> auto 1fr auto / auto 1fr auto<span>;</span>
<span>}</span>
  
<span>header</span> <span>{</span>
    <span>padding</span><span>:</span> 2rem<span>;</span>
    <span>grid-column</span><span>:</span> 1 / 4<span>;</span>
<span>}</span>

<span>.left-side</span> <span>{</span>
    <span>grid-column</span><span>:</span> 1 / 2<span>;</span>
<span>}</span>

<span>main</span> <span>{</span>
    <span>grid-column</span><span>:</span> 2 / 3<span>;</span>
<span>}</span>

<span>.right-side</span> <span>{</span>
    <span>grid-column</span><span>:</span> 3 / 4<span>;</span>
<span>}</span>

<span>footer</span> <span>{</span>
    <span>grid-column</span><span>:</span> 1 / 4<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div><h3 id="_12-span-ç½‘æ ¼å¸ƒå±€"> 12-span(ç½‘æ ¼å¸ƒå±€)</h3>
<div><pre><code><span>.parent</span> <span>{</span>
    <span>display</span><span>:</span> grid<span>;</span>
    <span>grid-template-columns</span><span>:</span> <span>repeat</span><span>(</span>12<span>,</span> 1fr<span>)</span><span>;</span>
<span>}</span>
  
<span>.span-12</span> <span>{</span>
    <span>grid-column</span><span>:</span> 1 / span 12<span>;</span>
<span>}</span>

<span>.span-6</span> <span>{</span>
    <span>grid-column</span><span>:</span> 1 / span 6<span>;</span>
<span>}</span>

<span>.span-4</span> <span>{</span>
    <span>grid-column</span><span>:</span> 4 / span 4<span>;</span>
<span>}</span>

<span>.span-2</span> <span>{</span>
    <span>grid-column</span><span>:</span> 3 / span 2<span>;</span>
<span>}</span>

<span>/* centering text */</span>
<span>.section</span> <span>{</span>
    <span>display</span><span>:</span> grid<span>;</span>
    <span>place-items</span><span>:</span> center<span>;</span>
    <span>text-align</span><span>:</span> center
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><h3 id="ram"> RAM</h3>
<ul>
<li>auto-fill ä¼šå°½å¯èƒ½å¤šçš„äº§ç”Ÿç½‘æ ¼åˆ—ï¼Œå› æ­¤ï¼Œå’Œrepeatï¼Œminmaxåˆç”¨æ—¶ï¼Œå½“å®¹å™¨ç‰¹åˆ«å®½æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä½™çš„è½¨é“ç©ºå‡ºæ¥ã€‚</li>
<li>auto-fit åŒauto-fillï¼Œä½†å½“å®¹å™¨ç‰¹åˆ«å®½æ—¶å·²æœ‰å…ƒç´ æˆ–è½¨é“ä¼šæ‰©å±•ï¼Œç›´åˆ°å æ»¡å®¹å™¨å®½åº¦ã€‚</li>
<li>å½“å®¹å™¨å®½åº¦è¾ƒå°æ—¶ï¼Œä¸¤è€…è¡¨ç°ç›¸åŒã€‚</li>
</ul>
<div><pre><code><span>.parent</span> <span>{</span>
    <span>display</span><span>:</span> grid<span>;</span>
    <span>grid-gap</span><span>:</span> 1rem<span>;</span>
    <span>grid-template-columns</span><span>:</span> <span>repeat</span><span>(</span>auto-fit<span>,</span> <span>minmax</span><span>(</span>150px<span>,</span> 1fr<span>)</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h2 id="å›åˆ°é¡¶éƒ¨"> å›åˆ°é¡¶éƒ¨</h2>
<ul>
<li>åˆ©ç”¨aæ ‡ç­¾hrefä¸º#æ—¶ä¼šè‡ªåŠ¨ä¼šåˆ°é¡¶éƒ¨çš„ç‰¹æ€§ã€‚</li>
<li>cssä¸­è®¾ç½® <code>* { scroll-behavior:smooth }</code></li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">JS åŸºç¡€</title>
    <id>https://kigane.github.io/note/js/js-base/</id>
    <link href="https://kigane.github.io/note/js/js-base/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å˜é‡"> å˜é‡</h2>
<p>æŒ‰ç…§ECMA-262çš„å®šä¹‰ï¼ŒJavaScriptçš„å˜é‡åªæ˜¯åœ¨ç‰¹å®šæ—¶é—´ç”¨äºä¿å­˜ç‰¹å®šå€¼çš„ä¸€ä¸ªåå­—è€Œå·²ã€‚</p>
<h3 id="å˜é‡åŸºç¡€"> å˜é‡åŸºç¡€</h3>
<h4 id="ç±»å‹"> ç±»å‹</h4>
<p>ECMAScriptå˜é‡å¯èƒ½åŒ…å«ä¸¤ç§ä¸åŒæ•°æ®ç±»å‹çš„å€¼ï¼šåŸºæœ¬ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼ã€‚</p>
<ul>
<li>åŸºæœ¬ç±»å‹å€¼æŒ‡çš„æ˜¯ç®€å•çš„æ•°æ®æ®µï¼šåŒ…æ‹¬ Undefinedã€Nullã€Booleanã€Numberå’ŒString è¿™äº”ç§ã€‚</li>
<li>å¼•ç”¨ç±»å‹å€¼æŒ‡é‚£äº›å¯èƒ½ç”±å¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ã€‚å¼•ç”¨ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ã€‚ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼ŒJavaScriptä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä¸­çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å†…å­˜ç©ºé—´ã€‚åœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ“ä½œå¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å®é™…çš„å¯¹è±¡ã€‚(åˆ›å»ºçš„å¯¹è±¡åªä¸ç»™ä½ ç›´æ¥è®¿é—®çš„æ–¹å¼ï¼Œå¯¹å¯¹è±¡çš„æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯é€šè¿‡æŒ‡é’ˆè¿›è¡Œçš„)</li>
</ul>
<h4 id="å€¼ä¼ é€’"> å€¼ä¼ é€’</h4>
<p>JavaScriptä¸­ï¼Œå˜é‡çš„èµ‹å€¼ï¼Œå‡½æ•°çš„ä¼ å‚éƒ½åªæœ‰ä¸€ç§æ–¹å¼--æŒ‰å€¼ä¼ é€’ã€‚åŸºæœ¬ç±»å‹ä¸å¿…å¤šè¯´ã€‚å¼•ç”¨ç±»å‹çš„â€œå€¼ä¼ é€’â€å®é™…ä¸Šç±»ä¼¼äºC/C++ä¸­çš„æŒ‰æŒ‡é’ˆä¼ é€’ï¼Œå°±æ˜¯å°†æŒ‡é’ˆçš„å€¼å¤åˆ¶ä¸€ä»½ã€‚</p>
<h4 id="ç±»å‹æ£€æµ‹"> ç±»å‹æ£€æµ‹</h4>
<p>typeofæ“ä½œç¬¦æ˜¯ç¡®å®šä¸€ä¸ªå˜é‡æ˜¯å­—ç¬¦ä¸²ã€æ•°å€¼ã€å¸ƒå°”å€¼ï¼Œè¿˜æ˜¯undefinedçš„æœ€ä½³å·¥å…·ã€‚å¯¹äºå¯¹è±¡ï¼Œè¿”å›Objectã€‚å¯¹äºå‡½æ•°(å®ç°äº†<code>[[Call]]</code>æ–¹æ³•çš„å¯¹è±¡)ï¼Œè¿”å›Functionã€‚</p>
<p>instanceofæ“ä½œç¬¦ã€‚ç”¨æ³•ä¸ºï¼š<code>result = variable instanceof Constructor</code>ã€‚
å¦‚æœå˜é‡æ˜¯ç»™å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼Œå°±æ ¹æ®å®ƒçš„åŸå‹é“¾æ¥è¯†åˆ«ï¼Œå³æ£€æŸ¥variableçš„åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨Constructor.prototypeï¼Œæœ‰åˆ™è¿”å›trueã€‚</p>
<p>æ ¹æ®è§„å®šï¼Œæ‰€æœ‰å¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯Objectçš„å®ä¾‹ã€‚å› æ­¤ï¼Œåœ¨æ£€æµ‹ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼å’ŒObjectæ„é€ å‡½æ•°æ—¶ï¼Œinstanceofæ“ä½œç¬¦å§‹ç»ˆä¼šè¿”å›trueã€‚å½“ç„¶ï¼Œå¦‚æœä½¿ç”¨instanceofæ“ä½œç¬¦æ£€æµ‹åŸºæœ¬ç±»å‹çš„å€¼ï¼Œåˆ™è¯¥æ“ä½œç¬¦å§‹ç»ˆä¼šè¿”å›falseï¼Œå› ä¸ºåŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ã€‚</p>
<h3 id="æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ"> æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ</h3>
<p>æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼Œä¹Ÿç§°â€œç¯å¢ƒâ€ï¼‰å®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œå†³å®šäº†å®ƒä»¬å„è‡ªçš„è¡Œä¸ºã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œä½†è§£æå™¨åœ¨å¤„ç†æ•°æ®æ—¶ä¼šåœ¨åå°ä½¿ç”¨å®ƒã€‚</p>
<p>å…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å›´çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒã€‚æ ¹æ®ECMAScriptå®ç°æ‰€åœ¨çš„å®¿ä¸»ç¯å¢ƒä¸åŒï¼Œè¡¨ç¤ºæ‰§è¡Œç¯å¢ƒçš„å¯¹è±¡ä¹Ÿä¸ä¸€æ ·ã€‚</p>
<ul>
<li>åœ¨Webæµè§ˆå™¨ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒè¢«è®¤ä¸ºæ˜¯windowå¯¹è±¡ã€‚</li>
<li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒã€‚å½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ã€‚è€Œåœ¨å‡½æ•°æ‰§è¡Œä¹‹åï¼Œæ ˆå°†å…¶ç¯å¢ƒå¼¹å‡ºï¼ŒæŠŠæ§åˆ¶æƒè¿”å›ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚</li>
</ul>
<p>å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚ç”¨äºä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯ï¼Œå§‹ç»ˆéƒ½æ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶<strong>æ´»åŠ¨å¯¹è±¡</strong>ä½œä¸ºå˜é‡å¯¹è±¡ã€‚æ´»åŠ¨å¯¹è±¡åœ¨æœ€å¼€å§‹æ—¶åªåŒ…å«ä¸€ä¸ªå˜é‡ï¼Œå³argumentså¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡åœ¨å…¨å±€ç¯å¢ƒä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼‰ã€‚ä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªåŒ…å«ï¼ˆå¤–éƒ¨ï¼‰ç¯å¢ƒï¼Œè€Œå†ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡åˆ™æ¥è‡ªä¸‹ä¸€ä¸ªåŒ…å«ç¯å¢ƒã€‚è¿™æ ·ï¼Œä¸€ç›´å»¶ç»­åˆ°å…¨å±€æ‰§è¡Œç¯å¢ƒï¼›å…¨å±€æ‰§è¡Œç¯å¢ƒçš„å˜é‡å¯¹è±¡å§‹ç»ˆéƒ½æ˜¯ä½œç”¨åŸŸé“¾ä¸­çš„æœ€åä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>æ ‡è¯†ç¬¦è§£ææ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§åœ°æœç´¢æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ã€‚æœç´¢è¿‡ç¨‹å§‹ç»ˆä»ä½œç”¨åŸŸé“¾çš„å‰ç«¯å¼€å§‹ï¼Œç„¶åé€çº§åœ°å‘åå›æº¯ï¼Œç›´è‡³æ‰¾åˆ°æ ‡è¯†ç¬¦ä¸ºæ­¢ï¼ˆæ‰¾ä¸åˆ°å°±æŠ¥é”™ï¼‰ã€‚
å†…éƒ¨ç¯å¢ƒå¯ä»¥é€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®æ‰€æœ‰çš„å¤–éƒ¨ç¯å¢ƒï¼Œä½†å¤–éƒ¨ç¯å¢ƒä¸èƒ½è®¿é—®å†…éƒ¨ç¯å¢ƒä¸­çš„ä»»ä½•å˜é‡å’Œå‡½æ•°(ä½œç”¨åŸŸé“¾æ˜¯ä¸ªå•å‘é“¾è¡¨ğŸ¤”)ã€‚
<strong>å‡½æ•°å‚æ•°ä¹Ÿè¢«å½“ä½œå˜é‡æ¥å¯¹å¾…</strong>ï¼Œå› æ­¤å…¶è®¿é—®è§„åˆ™ä¸æ‰§è¡Œç¯å¢ƒä¸­çš„å…¶ä»–å˜é‡ç›¸åŒã€‚</p>
<h3 id="åƒåœ¾æ”¶é›†"> åƒåœ¾æ”¶é›†</h3>
<p>JavaScriptå…·æœ‰è‡ªåŠ¨åƒåœ¾æ”¶é›†æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œç¯å¢ƒä¼šè´Ÿè´£ç®¡ç†ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨çš„å†…å­˜ã€‚ä¸»è¦æœ‰ä¸¤ç§ç­–ç•¥</p>
<h4 id="æ ‡è®°æ¸…é™¤-mark-and-sweep"> æ ‡è®°æ¸…é™¤ï¼ˆmark-and-sweepï¼‰</h4>
<p>åƒåœ¾æ”¶é›†å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ã€‚ç„¶åï¼Œå®ƒä¼šå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ã€‚è€Œåœ¨æ­¤ä¹‹åä»æœ‰æ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ï¼ŒåŸå› æ˜¯ç¯å¢ƒä¸­çš„å˜é‡å·²ç»æ— æ³•è®¿é—®åˆ°è¿™äº›å˜é‡äº†ã€‚æœ€åï¼Œåƒåœ¾æ”¶é›†å™¨å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>
<h4 id="å¼•ç”¨è®¡æ•°-reference-counting"> å¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰</h4>
<p>é‡Šæ”¾é‚£äº›å¼•ç”¨æ¬¡æ•°ä¸ºé›¶çš„å€¼æ‰€å ç”¨çš„å†…å­˜ã€‚éœ€è¦ç‰¹åˆ«å°å¿ƒâ€œå¾ªç¯å¼•ç”¨â€é—®é¢˜ã€‚</p>
<h4 id="æ€§èƒ½"> æ€§èƒ½</h4>
<p>åƒåœ¾æ”¶é›†å™¨æ˜¯å‘¨æœŸæ€§è¿è¡Œçš„ï¼Œè€Œä¸”å¦‚æœä¸ºå˜é‡åˆ†é…çš„å†…å­˜æ•°é‡å¾ˆå¯è§‚ï¼Œé‚£ä¹ˆå›æ”¶å·¥ä½œé‡ä¹Ÿæ˜¯ç›¸å½“å¤§çš„ã€‚
åƒåœ¾æ”¶é›†å™¨æ˜¯æ ¹æ®å†…å­˜åˆ†é…é‡è¿è¡Œçš„ï¼Œå…·ä½“ä¸€ç‚¹è¯´å°±æ˜¯256ä¸ªå˜é‡ã€4096ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰å­—é¢é‡å’Œæ•°ç»„å…ƒç´ ï¼ˆslotï¼‰æˆ–è€…64KBçš„å­—ç¬¦ä¸²ã€‚è¾¾åˆ°ä¸Šè¿°ä»»ä½•ä¸€ä¸ª<strong>ä¸´ç•Œå€¼</strong>ï¼Œåƒåœ¾æ”¶é›†å™¨å°±ä¼šè¿è¡Œã€‚
å¦‚æœåƒåœ¾æ”¶é›†ä¾‹ç¨‹å›æ”¶çš„å†…å­˜åˆ†é…é‡ä½äº15%ï¼Œåˆ™å˜é‡ã€å­—é¢é‡å’Œï¼ˆæˆ–ï¼‰æ•°ç»„å…ƒç´ çš„ä¸´ç•Œå€¼å°±ä¼šåŠ å€ã€‚å¦‚æœä¾‹ç¨‹å›æ”¶äº†85%çš„å†…å­˜åˆ†é…é‡ï¼Œåˆ™å°†å„ç§ä¸´ç•Œå€¼é‡ç½®å›é»˜è®¤å€¼ã€‚(æ¯”å›ºå®šä¸´ç•Œå€¼æ€§èƒ½å¥½å¾ˆå¤š)</p>
<h4 id="å†…å­˜ç®¡ç†"> å†…å­˜ç®¡ç†</h4>
<p>ä¸€æ—¦æ•°æ®ä¸å†æœ‰ç”¨ï¼Œæœ€å¥½é€šè¿‡å°†å…¶å€¼è®¾ç½®ä¸ºnullæ¥é‡Šæ”¾å…¶å¼•ç”¨â€”â€”è¿™ä¸ªåšæ³•å«åšè§£é™¤å¼•ç”¨ï¼ˆdereferencingï¼‰ã€‚è¿™ä¸€åšæ³•é€‚ç”¨äºå¤§å¤šæ•°å…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚å±€éƒ¨å˜é‡ä¼šåœ¨å®ƒä»¬ç¦»å¼€æ‰§è¡Œç¯å¢ƒæ—¶è‡ªåŠ¨è¢«è§£é™¤å¼•ç”¨</p>
<h2 id="å‡½æ•°"> å‡½æ•°</h2>
<p>å‡½æ•°å£°æ˜</p>
<div><pre><code><span>function</span> <span>funcName</span><span>(</span><span>args</span><span>)</span><span>{</span>
    <span>// function body</span>
<span>}</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>å‡½æ•°è¡¨è¾¾å¼</p>
<div><pre><code><span>var</span> <span>func1</span> <span>=</span> <span>function</span><span>(</span><span>args</span><span>)</span><span>{</span>
    <span>// function body</span>
<span>}</span><span>;</span> <span>// åŒ¿åå‡½æ•° </span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>ä¸€ä¸ªå…¸å‹é”™è¯¯</p>
<div><pre><code><span>if</span> <span>(</span>condition<span>)</span>
<span>{</span>
    <span>function</span> <span>sayHi</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"Hi"</span><span>)</span><span>;</span><span>}</span><span>;</span>
<span>}</span>
<span>else</span>
<span>{</span>
    <span>function</span> <span>sayHi</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"Hello"</span><span>)</span><span>;</span><span>}</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>è¡¨é¢ä¸Šçœ‹ï¼Œä»¥ä¸Šä»£ç è¡¨ç¤ºåœ¨conditionä¸ºtrueæ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªsayHi()çš„å®šä¹‰ï¼›å¦åˆ™ï¼Œå°±ä½¿ç”¨å¦ä¸€ä¸ªå®šä¹‰ã€‚å®é™…ä¸Šï¼Œè¿™åœ¨ECMAScriptä¸­å±äºæ— æ•ˆè¯­æ³•ï¼ŒJavaScriptå¼•æ“ä¼šå°è¯•ä¿®æ­£é”™è¯¯ï¼Œå°†å…¶è½¬æ¢ä¸ºåˆç†çš„çŠ¶æ€ã€‚ä½†é—®é¢˜æ˜¯æµè§ˆå™¨å°è¯•ä¿®æ­£é”™è¯¯çš„åšæ³•å¹¶ä¸ä¸€è‡´ã€‚å¤§å¤šæ•°æµè§ˆå™¨ä¼šè¿”å›ç¬¬äºŒä¸ªå£°æ˜ï¼Œå¿½ç•¥condition; Firefoxä¼šåœ¨conditionä¸ºtrueæ—¶è¿”å›ç¬¬ä¸€ä¸ªå£°æ˜ã€‚è¿™é‡Œç”¨å‡½æ•°è¡¨è¾¾å¼å°±æ²¡é—®é¢˜äº†</p>
<div><pre><code><span>var</span> func<span>;</span>
<span>if</span> <span>(</span>condition<span>)</span>
<span>{</span>
    <span>func</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"Hi"</span><span>)</span><span>;</span><span>}</span><span>;</span>
<span>}</span>
<span>else</span>
<span>{</span>
    <span>func</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"Hello"</span><span>)</span><span>;</span><span>}</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><h3 id="é€’å½’"> é€’å½’</h3>
<p>ç»å…¸ä¾‹å­+ç»å…¸é”™è¯¯</p>
<div><pre><code><span>function</span> <span>factorial</span><span>(</span><span>num</span><span>)</span>
<span>{</span>
    <span>if</span> <span>(</span>num <span>&lt;=</span> <span>1</span><span>)</span><span>{</span><span>return</span> num<span>;</span><span>}</span>
    <span>else</span><span>{</span> <span>return</span> num <span>*</span> <span>factorial</span><span>(</span>num<span>-</span><span>1</span><span>)</span><span>;</span><span>}</span>
    <span>// return num * arguments.callee(num - 1) å³å¯ã€‚</span>
<span>}</span>

<span>var</span> <span>F</span> <span>=</span> factorial<span>;</span>
factorial <span>=</span> <span>null</span><span>;</span>
<span>F</span><span>(</span><span>5</span><span>)</span><span>;</span> <span>// TypeError: factorial is not a function</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><p>å› ä¸ºï¼ŒF(5)å†…éƒ¨è°ƒç”¨çš„è¿˜æ˜¯factorial(4)ï¼Œä½†factorialå·²ç»è¢«è®¾ä¸ºnulläº†ã€‚æ‰€ä»¥åœ¨ç¼–å†™é€’å½’å‡½æ•°æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½ä½¿ç”¨arguments.callee(arguments.calleeæ˜¯ä¸€ä¸ªæŒ‡å‘æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„æŒ‡é’ˆ)ã€‚</p>
<p>ä½†åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸èƒ½é€šè¿‡è„šæœ¬è®¿é—®arguments.calleeï¼Œè®¿é—®è¿™ä¸ªå±æ€§ä¼šå¯¼è‡´é”™è¯¯ã€‚ä¸è¿‡ï¼Œå¯ä»¥ä½¿ç”¨å‘½åå‡½æ•°è¡¨è¾¾å¼æ¥è¾¾æˆç›¸åŒçš„ç»“æœ</p>
<div><pre><code><span>var</span> factorial <span>=</span> <span>(</span><span>function</span> <span>f</span><span>(</span><span>num</span><span>)</span><span>{</span>
        <span>if</span> <span>(</span>num <span>&lt;=</span> <span>1</span><span>)</span><span>{</span><span>return</span> num<span>;</span><span>}</span>
        <span>else</span><span>{</span> <span>return</span> num <span>*</span> <span>f</span><span>(</span>num<span>-</span><span>1</span><span>)</span><span>;</span><span>}</span>
    <span>}</span><span>)</span><span>;</span>
<span>var</span> <span>F</span> <span>=</span> factorial<span>;</span>
factorial <span>=</span> <span>null</span><span>;</span>
<span>F</span><span>(</span><span>5</span><span>)</span><span>;</span> <span>// 120</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h3 id="é—­åŒ…"> é—­åŒ…</h3>
<p><strong>é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°</strong>ã€‚åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>å½“æŸä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰åŠç›¸åº”çš„ä½œç”¨åŸŸé“¾ã€‚ç„¶åï¼Œä½¿ç”¨argumentså’Œå…¶ä»–å‘½åå‚æ•°çš„å€¼æ¥åˆå§‹åŒ–å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ã€‚ä½†åœ¨ä½œç”¨åŸŸé“¾ä¸­ï¼Œå¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡å§‹ç»ˆå¤„äºç¬¬äºŒä½ï¼Œå¤–éƒ¨å‡½æ•°çš„å¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡å¤„äºç¬¬ä¸‰ä½ï¼Œâ€¦â€¦ç›´è‡³ä½œä¸ºä½œç”¨åŸŸé“¾ç»ˆç‚¹çš„å…¨å±€æ‰§è¡Œç¯å¢ƒã€‚</p>
<p>åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ä¼šå°†åŒ…å«å‡½æ•°ï¼ˆå³å¤–éƒ¨å‡½æ•°ï¼‰çš„æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°å®ƒçš„ä½œç”¨åŸŸé“¾ä¸­ã€‚<strong>å½“å¤–éƒ¨å‡½æ•°è¿”å›åï¼Œå…¶æ‰§è¡Œç¯å¢ƒçš„ä½œç”¨åŸŸé“¾ä¼šè¢«é”€æ¯ï¼Œä½†å®ƒçš„æ´»åŠ¨å¯¹è±¡ä»ç„¶ä¼šç•™åœ¨å†…å­˜ä¸­</strong>ã€‚</p>
<p>ç”±äºé—­åŒ…ä¼šæºå¸¦åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å ç”¨æ›´å¤šçš„å†…å­˜ã€‚è¿‡åº¦ä½¿ç”¨é—­åŒ…å¯èƒ½ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šï¼Œæˆ‘ä»¬å»ºè®®è¯»è€…åªåœ¨ç»å¯¹å¿…è¦æ—¶å†è€ƒè™‘ä½¿ç”¨é—­åŒ…ã€‚è™½ç„¶åƒV8ç­‰ä¼˜åŒ–åçš„JavaScriptå¼•æ“ä¼šå°è¯•å›æ”¶è¢«é—­åŒ…å ç”¨çš„å†…å­˜ï¼Œä½†è¯·å¤§å®¶è¿˜æ˜¯è¦æ…é‡ä½¿ç”¨é—­åŒ…ã€‚</p>
<h4 id="ç»å…¸é”™è¯¯"> ç»å…¸é”™è¯¯</h4>
<div><pre><code><span>function</span> <span>createFunc</span><span>(</span><span>)</span><span>{</span>
    <span>var</span> result <span>=</span> <span>new</span> <span>Array</span><span>(</span><span>)</span><span>;</span>
    <span>for</span> <span>(</span><span>var</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>10</span><span>;</span> i<span>++</span><span>)</span>
    <span>{</span>
        result<span>[</span>i<span>]</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>return</span> i<span>}</span><span>;</span>
    <span>}</span>
    <span>return</span> result<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>è¡¨é¢ä¸Šçœ‹ï¼Œä¼¼ä¹æ¯ä¸ªå‡½æ•°éƒ½åº”è¯¥è¿”è‡ªå·±çš„ç´¢å¼•å€¼ï¼Œå³ä½ç½®0çš„å‡½æ•°è¿”å›0ï¼Œä½ç½®1çš„å‡½æ•°è¿”å›1ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½†å®é™…ä¸Šï¼Œæ¯ä¸ªå‡½æ•°éƒ½è¿”å›10ã€‚å› ä¸ºæ¯ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­éƒ½ä¿å­˜ç€createFunctions()å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬å¼•ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå˜é‡iã€‚
é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ã€‚</p>
<h4 id="this-å¯¹è±¡"> this å¯¹è±¡</h4>
<p>thiså¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒç»‘å®šçš„ï¼šåœ¨å…¨å±€å‡½æ•°ä¸­ï¼Œthisç­‰äºwindowï¼Œè€Œå½“å‡½æ•°è¢«ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthisç­‰äºé‚£ä¸ªå¯¹è±¡ã€‚ä¸è¿‡ï¼ŒåŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œå› æ­¤å…¶thiså¯¹è±¡é€šå¸¸æŒ‡å‘windowã€‚(å½“ç„¶ï¼Œå¯ä»¥ç”¨call, applyä¿®æ”¹thiså¯¹è±¡)</p>
<p><strong>æ¯ä¸ªå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶éƒ½ä¼šè‡ªåŠ¨å–å¾—ä¸¤ä¸ªç‰¹æ®Šå˜é‡ï¼šthiså’Œargumentsã€‚å†…éƒ¨å‡½æ•°åœ¨æœç´¢è¿™ä¸¤ä¸ªå˜é‡æ—¶ï¼Œåªä¼šæœç´¢åˆ°å…¶æ´»åŠ¨å¯¹è±¡ä¸ºæ­¢ï¼Œå› æ­¤æ°¸è¿œä¸å¯èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­çš„è¿™ä¸¤ä¸ªå˜é‡ã€‚</strong></p>
<div><pre><code><span>var</span> name <span>=</span> <span>"The Window"</span><span>;</span>
<span>var</span> object <span>=</span> <span>{</span>
    name<span>:</span> <span>"the object"</span><span>,</span>
    <span>getName</span><span>:</span> <span>function</span><span>(</span><span>)</span><span>{</span>
        <span>return</span> <span>this</span><span>.</span>name<span>;</span>
    <span>}</span>
<span>}</span><span>;</span>
object<span>.</span><span>getName</span><span>(</span><span>)</span> <span>// "the object" </span>

<span>var</span> object1 <span>=</span> <span>{</span>
    name<span>:</span> <span>"the object1"</span><span>,</span>
    <span>getName</span><span>:</span> <span>function</span><span>(</span><span>)</span><span>{</span>
        <span>return</span> <span>function</span><span>(</span><span>)</span><span>{</span>
            <span>return</span> <span>this</span><span>.</span>name<span>;</span>
        <span>}</span><span>;</span>
    <span>}</span>
<span>}</span><span>;</span>
object1<span>.</span><span>getName</span><span>(</span><span>)</span><span>(</span><span>)</span> <span>// "The Window"</span>

<span>var</span> object2 <span>=</span> <span>{</span>
    name<span>:</span> <span>"the object2"</span><span>,</span>
    <span>getName</span><span>:</span> <span>function</span><span>(</span><span>)</span><span>{</span>
        <span>var</span> that <span>=</span> <span>this</span><span>;</span> <span>// ä½¿ç”¨é—­åŒ…ä¿å­˜äº†this</span>
        <span>return</span> <span>function</span><span>(</span><span>)</span><span>{</span>
            <span>return</span> that<span>.</span>name<span>;</span>
        <span>}</span><span>;</span>
    <span>}</span>
<span>}</span><span>;</span>
object2<span>.</span><span>getName</span><span>(</span><span>)</span><span>(</span><span>)</span> <span>// "the object2" </span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br></div></div><h4 id="é—­åŒ…å¼•èµ·çš„å†…å­˜æ³„éœ²"> é—­åŒ…å¼•èµ·çš„å†…å­˜æ³„éœ²</h4>
<div><pre><code><span>function</span> <span>assignHandler</span><span>(</span><span>)</span><span>{</span>
    <span>var</span> elem <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>"some-id"</span><span>)</span><span>;</span>
    elem<span>.</span><span>onclick</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span>
        <span>alert</span><span>(</span>elem<span>.</span>id<span>)</span><span>;</span>
    <span>}</span><span>;</span> <span>// elem-->DOMå…ƒç´ , DOMå…ƒç´ çš„onclickæ˜¯æŒ‡å‘é—­åŒ…ï¼Œé—­åŒ…ä¸­åˆæœ‰elemã€‚å› æ­¤äº§ç”Ÿäº†å¾ªç¯å¼•ç”¨ã€‚</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>è§£å†³æ–¹æ³•æ˜¯</p>
<div><pre><code><span>function</span> <span>assignHandler</span><span>(</span><span>)</span><span>{</span>
    <span>var</span> elem <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>"some-id"</span><span>)</span><span>;</span>
    <span>var</span> id <span>=</span> elem<span>.</span>id<span>;</span>
    elem<span>.</span><span>onclick</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span>
        <span>alert</span><span>(</span>id<span>)</span><span>;</span>
    <span>}</span><span>;</span> 
    elem <span>=</span> <span>null</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h3 id="æ¨¡ä»¿å—çº§ä½œç”¨åŸŸ"> æ¨¡ä»¿å—çº§ä½œç”¨åŸŸ</h3>
<p>ç”¨ä½œå—çº§ä½œç”¨åŸŸï¼ˆé€šå¸¸ç§°ä¸ºç§æœ‰ä½œç”¨åŸŸï¼‰çš„åŒ¿åå‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div><pre><code><span>(</span><span>function</span><span>(</span><span>)</span><span>{</span>
    <span>// è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ</span>
<span>}</span><span>)</span><span>(</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>JavaScriptå°†functionå…³é”®å­—å½“ä½œä¸€ä¸ªå‡½æ•°å£°æ˜çš„å¼€å§‹ï¼Œè€Œå‡½æ•°å£°æ˜åé¢ä¸èƒ½è·Ÿåœ†æ‹¬å·(ä¸èƒ½è¿™æ ·<code>function(){}()</code>)ã€‚ç„¶è€Œï¼Œå‡½æ•°è¡¨è¾¾å¼çš„åé¢å¯ä»¥è·Ÿåœ†æ‹¬å·ã€‚è¦å°†å‡½æ•°å£°æ˜è½¬æ¢æˆå‡½æ•°è¡¨è¾¾å¼ï¼Œåªè¦åƒä¸Šé¢è¿™æ ·ç»™å®ƒåŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·å³å¯ã€‚</p>
<p>è¿™ç§æŠ€æœ¯ç»å¸¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¢«ç”¨åœ¨å‡½æ•°å¤–éƒ¨ï¼Œä»è€Œé™åˆ¶å‘å…¨å±€ä½œç”¨åŸŸä¸­æ·»åŠ è¿‡å¤šçš„å˜é‡å’Œå‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥å°½é‡å°‘å‘å…¨å±€ä½œç”¨åŸŸä¸­æ·»åŠ å˜é‡å’Œå‡½æ•°ã€‚åœ¨ä¸€ä¸ªç”±å¾ˆå¤šå¼€å‘äººå‘˜å…±åŒå‚ä¸çš„å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œè¿‡å¤šçš„å…¨å±€å˜é‡å’Œå‡½æ•°å¾ˆå®¹æ˜“å¯¼è‡´å‘½åå†²çªã€‚è€Œé€šè¿‡åˆ›å»ºç§æœ‰ä½œç”¨åŸŸï¼Œæ¯ä¸ªå¼€å‘äººå‘˜æ—¢å¯ä»¥ä½¿ç”¨è‡ªå·±çš„å˜é‡ï¼Œåˆä¸å¿…æ‹…å¿ƒæä¹±å…¨å±€ä½œç”¨åŸŸã€‚ä¾‹å¦‚</p>
<div><pre><code><span>(</span><span>function</span><span>(</span><span>)</span><span>{</span>
    <span>var</span> now <span>=</span> <span>new</span> <span>Date</span><span>(</span><span>)</span><span>;</span>
    <span>if</span> <span>(</span>now<span>.</span><span>getMonth</span><span>(</span><span>)</span> <span>==</span> <span>0</span> <span>&amp;&amp;</span> now<span>.</span><span>getDate</span><span>(</span><span>)</span> <span>==</span> <span>1</span><span>)</span><span>{</span>
        <span>alert</span><span>(</span><span>"Happy New Year!"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span><span>)</span><span>(</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h3 id="ç§æœ‰å˜é‡å’Œå•ä¾‹æ¨¡å¼"> ç§æœ‰å˜é‡å’Œå•ä¾‹æ¨¡å¼</h3>
<p>ä¸¥æ ¼æ¥è®²ï¼ŒJavaScriptä¸­æ²¡æœ‰ç§æœ‰æˆå‘˜çš„æ¦‚å¿µï¼›æ‰€æœ‰å¯¹è±¡å±æ€§éƒ½æ˜¯å…¬æœ‰çš„ã€‚ä¸è¿‡ï¼Œå€’æ˜¯æœ‰ä¸€ä¸ªç§æœ‰å˜é‡çš„æ¦‚å¿µã€‚ä»»ä½•åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰å˜é‡ï¼Œå› ä¸ºä¸èƒ½åœ¨å‡½æ•°çš„å¤–éƒ¨è®¿é—®è¿™äº›å˜é‡ã€‚</p>
<p>// TODO</p>
<h3 id="scoped"> <code>[[scoped]]</code></h3>
<p><code>[[scoped]]</code>æ˜¯Chormeå¼€å‘è€…å·¥å…·å†…éƒ¨ä½¿ç”¨çš„ç§æœ‰å±æ€§ï¼Œæ˜¾ç¤ºäº†å‡½æ•°å¯è®¿é—®çš„å˜é‡(å³å‡½æ•°çš„ä½œç”¨åŸŸä¸­çš„å˜é‡)ã€‚</p>
<div><pre><code><span>function</span> <span>a</span><span>(</span><span>)</span> <span>{</span>
  <span>var</span> foo <span>=</span> <span>'foo'</span><span>;</span>
  <span>var</span> obj <span>=</span> <span>{</span>
    <span>bar</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
      <span>return</span> foo<span>;</span>
    <span>}</span>
  <span>}</span><span>;</span>
  console<span>.</span><span>log</span><span>(</span>obj<span>)</span><span>;</span>
<span>}</span>
<span>a</span><span>(</span><span>)</span><span>;</span>

<span>// obj.bar</span>
<span>// [[Scopes]]: Scopes[2]</span>
<span>// 0: Closure (a)</span>
<span>//   foo: "foo"</span>
<span>// 1: Global</span>
<span>//   (all global variables)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">BOM&amp;DOM&amp;Event</title>
    <id>https://kigane.github.io/note/js/js-bom-dom/</id>
    <link href="https://kigane.github.io/note/js/js-bom-dom/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="bom"> BOM</h2>
<ul>
<li>window
<ul>
<li>windowå¯¹è±¡æ˜¯JSçš„å…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰å…¨å±€ä½œç”¨åŸŸçš„å˜é‡å’Œå‡½æ•°ï¼Œéƒ½ä¼šå˜æˆwindowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</li>
<li>å…¨å±€å˜é‡å’Œå®šä¹‰åœ¨windowå¯¹è±¡ä¸Šçš„å±æ€§é—´çš„å”¯ä¸€å·®åˆ«æ˜¯ï¼Œå…¨å±€å˜é‡ä¸èƒ½deleteï¼Œè€Œwindowå¯¹è±¡ä¸Šçš„å±æ€§å¯ä»¥ã€‚</li>
<li>è®¿é—®æœªå£°æ˜çš„å…¨å±€å˜é‡ä¼šæŠ›å‡ºé”™è¯¯ï¼Œè€Œè®¿é—®æœªå£°æ˜çš„windowå¯¹è±¡å±æ€§ä¼šè¿”å›undefinedã€‚</li>
<li>é¡µé¢ä¸­æ¯ä¸ªframeéƒ½æœ‰è‡ªå·±çš„windowå¯¹è±¡ï¼Œæ¯ä¸ªwindowå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªnameå±æ€§ï¼Œ<code>window.frames[name]</code>å¯ä»¥è®¿é—®æŒ‡å®šframe</li>
<li>window.topå¯¹è±¡å§‹ç»ˆæŒ‡å‘æœ€å¤–å±‚çš„frameï¼Œå³æµè§ˆå™¨çª—å£ã€‚</li>
<li>window.parentæŒ‡å‘å¤–å±‚çš„frame</li>
<li>window.self === window</li>
<li>window.open(url, windowOrFrameName, features, replaceInHistory) åœ¨windowOrFrameNameä¸Šæ‰“å¼€æ–°çš„urlï¼Œå¦‚æœwindowOrFrameNameä¸å­˜åœ¨ï¼Œç”¨æŒ‡å®šçš„featuresåˆ›å»ºæ–°çª—å£ã€‚è¢«opençš„çª—å£çš„window.openeræŒ‡å‘åŸçª—å£ï¼ŒåŸçª—å£å¯¹è¢«opençš„çª—å£ä¸€æ— æ‰€çŸ¥ã€‚</li>
<li>å¯¹è¯æ¡†ï¼šalert, confirm, prompt</li>
</ul>
</li>
<li>location
<ul>
<li>window.location === document.location</li>
<li>location.href å®Œæ•´çš„urlã€‚</li>
<li>location.host hostname:port</li>
<li>location.hostname</li>
<li>location.port</li>
<li>location.pathname</li>
<li>location.search ä»¥?å¼€å¤´çš„æŸ¥è¯¢å­—ç¬¦ä¸²</li>
<li>location.hash urlä¸­#+åé¢éƒ¨åˆ†ã€‚é™¤äº†è¯¥å±æ€§ï¼Œä¿®æ”¹å…¶ä»–å±æ€§éƒ½ä¼šå¯¼è‡´æµè§ˆå™¨é‡æ–°åŠ è½½ã€‚</li>
<li>location.replace(url) åŠ è½½æ–°urlï¼ŒåŸurlä¸ä¼šæ·»åŠ åˆ°å†å²è®°å½•ä¸­ã€‚</li>
<li>location.reload(bImpose) é‡æ–°åŠ è½½(false: å¯èƒ½ä»ç¼“å­˜ä¸­åŠ è½½ï¼Œtrue: ä»æœåŠ¡å™¨é‡æ–°åŠ è½½)</li>
</ul>
</li>
<li>navigator
<ul>
<li>navigator.cookieEnabled</li>
<li>navigator.userAgent &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36 Edg/93.0.961.38&quot;</li>
</ul>
</li>
<li>history
<ul>
<li>history.back() å›é€€ä¸€é¡µ</li>
<li>history.forward() å‰è¿›ä¸€é¡µ</li>
<li>history.go(num) num&gt;0æ—¶å‰è¿›ï¼Œåä¹‹åé€€ã€‚</li>
</ul>
</li>
</ul>
<h3 id="é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨"> é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨</h3>
<ul>
<li>setTimeout(CallBackFn, time-ms) ç»è¿‡time-msåå°†å½“å‰ä»»åŠ¡æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ç«‹å³æ‰§è¡Œï¼Œå¦åˆ™ï¼Œç­‰å¾…ã€‚</li>
<li>setInterval(CallBackFn, time-ms)</li>
<li>ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ªidæ ‡è¯†ç¬¦ï¼Œå¯ä»¥è°ƒç”¨ç›¸åº”çš„clearTimeout(id), clearInterval(id)å–æ¶ˆè°ƒç”¨ã€‚</li>
<li>ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸­æ‰§è¡Œçš„ã€‚æ— è®ºåœ¨å“ªé‡Œè°ƒç”¨ã€‚</li>
<li>é€šå¸¸å¾ˆå°‘ç”¨setIntervalï¼Œå› ä¸ºåä¸€ä¸ªé—´æ­‡è°ƒç”¨å¯èƒ½ä¼šåœ¨å‰ä¸€ä¸ªé—´æ­‡è°ƒç”¨ç»“æŸå‰å¯åŠ¨ã€‚</li>
</ul>
<div><pre><code><span>var</span> num <span>=</span> <span>0</span>
<span>var</span> max <span>=</span> <span>10</span>

<span>function</span> <span>incrementNum</span><span>(</span><span>)</span> <span>{</span>
    num<span>++</span>
    <span>if</span> <span>(</span>num <span>&lt;</span> max<span>)</span> <span>{</span>
        <span>setTimeout</span><span>(</span>incrementNum<span>,</span> <span>500</span><span>)</span>
    <span>}</span> <span>else</span> <span>{</span>
        <span>alert</span><span>(</span><span>"Done"</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>setTimeout</span><span>(</span>incrementNum<span>,</span> <span>500</span><span>)</span>

<span>// ç›¸å½“äºsetInterval(incrementNum, 500)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h2 id="event"> Event</h2>
<h3 id="äº‹ä»¶æµ"> äº‹ä»¶æµ</h3>
<p>äº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢æ¥å—äº‹ä»¶çš„é¡ºåºã€‚</p>
<ul>
<li>äº‹ä»¶å†’æ³¡ï¼šäº‹ä»¶å¼€å§‹æ—¶ç”±åµŒå¥—æœ€æ·±çš„å…ƒç´ æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­ã€‚</li>
<li>äº‹ä»¶æ•è·ï¼šäº‹ä»¶å¼€å§‹æ—¶ç”±windowå¯¹è±¡æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸‹ä¼ æ’­åˆ°åµŒå¥—æœ€æ·±çš„å…ƒç´ ã€‚</li>
<li>DOM2çº§äº‹ä»¶ï¼šè§„å®šäº‹ä»¶æµåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µ
<ul>
<li>äº‹ä»¶æ•è·é˜¶æ®µ 1</li>
<li>å¤„äºç›®æ ‡é˜¶æ®µ 2</li>
<li>äº‹ä»¶å†’æ³¡é˜¶æ®µ 3</li>
</ul>
</li>
</ul>
<h3 id="äº‹ä»¶å¤„ç†ç¨‹åº"> äº‹ä»¶å¤„ç†ç¨‹åº</h3>
<p>å³å“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°ã€‚</p>
<div><pre><code><span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>"</span>Button<span>"</span></span> <span>value</span><span><span>=</span><span>"</span>Click Me<span>"</span></span> <span><span>onclick</span><span><span>=</span><span>"</span><span><span>showMessage</span><span>(</span><span>)</span></span><span>"</span></span></span><span>/></span></span>
</code></pre>
<div><span>1</span><br></div></div><ul>
<li>è¿™é‡ŒshowMessageä¸ºäº‹ä»¶å¤„ç†ç¨‹åºè°ƒç”¨çš„å‡½æ•°ã€‚åœ¨è¯¥å‡½æ•°å†…éƒ¨ï¼Œthisä¸ºäº‹ä»¶çš„ç›®æ ‡å…ƒç´ (æœ¬ä¾‹ä¸­ä¸ºinput)ã€‚</li>
<li>åœ¨è¿™ä¸ªå‡½æ•°ä½œç”¨åŸŸå†…ï¼Œå¯ä»¥åƒè®¿é—®å±€éƒ¨å˜é‡ä¸€æ ·è®¿é—®documentå’Œå…ƒç´ æœ¬èº«çš„æˆå‘˜ã€‚å¦‚æœå½“å‰å…ƒç´ æ˜¯ä¸€ä¸ªè¡¨å•å…ƒç´ (åœ¨formå†…)ï¼Œåˆ™ä½œç”¨åŸŸä¸­è¿˜ä¼šåŒ…å«formå…ƒç´ ã€‚</li>
<li>åœ¨htmlä¸­æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºå¯èƒ½ä¼šæœ‰æ—¶å·®é—®é¢˜ï¼Œå³htmlå…ƒç´ æ¸²æŸ“å¥½äº†ï¼Œä½†showMessageå‡½æ•°è¿˜ä¸å¯ç”¨ï¼Œå³JSè¿˜æ²¡æ‰§è¡Œåˆ°ã€‚</li>
<li>DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åºï¼šç”¨JSé€‰ä¸­DOMå¯¹è±¡ä¸­çš„æŒ‡å®šå…ƒç´ ï¼Œå†å°†ä¸€ä¸ªå‡½æ•°èµ‹ç»™äº‹ä»¶å¤„ç†ç¨‹åº(ä¾‹å¦‚ï¼Œel.onclick)ã€‚</li>
<li>DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºï¼šä½¿ç”¨
<ul>
<li>addEventListener(eventName, EventCallBackFn, isCapture)</li>
<li>removeEventListener(eventName, EventCallBackFn, isCapture)</li>
<li>isCaptureä¸ºtrueï¼Œè¡¨ç¤ºåœ¨æ•è·é˜¶æ®µå¤„ç†äº‹ä»¶ï¼Œä¸ºfalseè¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µå¤„ç†äº‹ä»¶ã€‚</li>
<li>removeæ—¶çš„å‚æ•°å¿…é¡»å’Œaddæ—¶çš„å‚æ•°ä¸€æ¨¡ä¸€æ ·ã€‚å¦‚æœaddæ—¶ä½¿ç”¨çš„æ˜¯åŒ¿åå‡½æ•°ï¼Œåˆ™æ— æ³•removeã€‚</li>
<li>è¿™ç§æ–¹å¼å¯ä»¥ä¸ºåŒä¸€ä¸ªäº‹ä»¶è®¾ç½®å¤šä¸ªå¤„ç†å‡½æ•°ã€‚æŒ‰ç…§æ·»åŠ é¡ºåºè§¦å‘ã€‚</li>
</ul>
</li>
</ul>
<h3 id="äº‹ä»¶å¯¹è±¡"> äº‹ä»¶å¯¹è±¡</h3>
<p>æµè§ˆå™¨ä¼šå°†eventå¯¹è±¡ä¼ å…¥äº‹ä»¶å¤„ç†ç¨‹åºä¸­ã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§/æ–¹æ³•</th>
<th>ç±»å‹</th>
<th>åªè¯»</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>String</td>
<td>Y</td>
<td>äº‹ä»¶çš„ç±»å‹</td>
</tr>
<tr>
<td>target</td>
<td>Element</td>
<td>Y</td>
<td>äº‹ä»¶çš„ç›®æ ‡ã€‚(æœ€ä¸Šå±‚å…ƒç´ ï¼Ÿ)</td>
</tr>
<tr>
<td>currentTarget</td>
<td>Element</td>
<td>Y</td>
<td>å½“å‰æ­£åœ¨å¤„ç†äº‹ä»¶çš„å…ƒç´ ã€‚äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„thisã€‚</td>
</tr>
<tr>
<td>eventPhase</td>
<td>Integer</td>
<td>Y</td>
<td>è¡¨æ˜äº‹ä»¶å¤„ç†ç¨‹åºçš„é˜¶æ®µ</td>
</tr>
<tr>
<td>bubbles</td>
<td>Boolean</td>
<td>Y</td>
<td>è¡¨æ˜äº‹ä»¶æ˜¯å¦å†’æ³¡</td>
</tr>
<tr>
<td>detail</td>
<td>Integer</td>
<td>Y</td>
<td>äº‹ä»¶ç›¸å…³ç»†èŠ‚ä¿¡æ¯</td>
</tr>
<tr>
<td>cancelable</td>
<td>Boolean</td>
<td>Y</td>
<td>è¡¨æ˜æ˜¯å¦å¯ä»¥å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</td>
</tr>
<tr>
<td>preventDefault()</td>
<td>Function</td>
<td>Y</td>
<td>å¦‚æœcancelableä¸ºtrueï¼Œå–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</td>
</tr>
<tr>
<td>defaultPrevented</td>
<td>Boolean</td>
<td>Y</td>
<td>ä¸ºtrueï¼Œè¯´æ˜å·²ç»è°ƒç”¨äº†preventDefault()</td>
</tr>
<tr>
<td>stopImmediatePropagation()</td>
<td>Function</td>
<td>Y</td>
<td>å–æ¶ˆäº‹ä»¶è¿›ä¸€æ­¥æ•è·æˆ–å†’æ³¡ï¼ŒåŒæ—¶é˜»æ­¢ä»»ä½•äº‹ä»¶è¢«è°ƒç”¨ã€‚</td>
</tr>
<tr>
<td>stopPropagation()</td>
<td>Function</td>
<td>Y</td>
<td>å¦‚æœbubblesä¸ºtrueï¼Œå–æ¶ˆäº‹ä»¶è¿›ä¸€æ­¥æ•è·æˆ–å†’æ³¡ã€‚</td>
</tr>
<tr>
<td>trusted</td>
<td>Boolean</td>
<td>Y</td>
<td>ä¸ºtrueè¡¨æ˜æ˜¯æµè§ˆå™¨ç”Ÿæˆçš„ï¼Œä¸ºfalseè¡¨ç¤ºç”±JSç”Ÿæˆçš„</td>
</tr>
</tbody>
</table>
<h3 id="äº‹ä»¶ç±»å‹"> äº‹ä»¶ç±»å‹</h3>
<h4 id="uiäº‹ä»¶"> UIäº‹ä»¶</h4>
<ul>
<li>load
<ul>
<li>å½“é¡µé¢å®Œå…¨åŠ è½½åï¼ˆåŒ…æ‹¬æ‰€æœ‰å›¾åƒã€JavaScriptæ–‡ä»¶ã€CSSæ–‡ä»¶ç­‰å¤–éƒ¨èµ„æºï¼‰ï¼Œå°±ä¼šè§¦å‘windowä¸Šé¢çš„loadäº‹ä»¶ã€‚</li>
<li>EventUtil.addHandler(window, &quot;load&quot;, function(e) {...})ã€‚å»ºè®®ä½¿ç”¨ã€‚</li>
<li>æˆ–åœ¨bodyå…ƒç´ ä¸­æ·»åŠ onloadå±æ€§ã€‚</li>
<li>imgå…ƒç´ ä¹Ÿæœ‰loadäº‹ä»¶ï¼Œåœ¨å›¾ç‰‡åŠ è½½å®Œæˆæ—¶è§¦å‘ã€‚</li>
</ul>
</li>
<li>unloadï¼šåœ¨æ–‡æ¡£è¢«å®Œå…¨å¸è½½åè§¦å‘ã€‚åªè¦ç”¨æˆ·ä»ä¸€ä¸ªé¡µé¢åˆ‡æ¢åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œå°±ä¼šå‘ç”Ÿunloadäº‹ä»¶ã€‚è€Œåˆ©ç”¨è¿™ä¸ªäº‹ä»¶æœ€å¤šçš„æƒ…å†µæ˜¯æ¸…é™¤å¼•ç”¨ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼ã€‚</li>
<li>selectï¼šå½“ç”¨æˆ·é€‰æ‹©æ–‡æœ¬æ¡†ï¼ˆ<code>&lt;input&gt;</code>æˆ–<code>&lt;texterea&gt;</code>ï¼‰ä¸­çš„ä¸€æˆ–å¤šä¸ªå­—ç¬¦æ—¶è§¦å‘ã€‚</li>
<li>resizeï¼šå½“çª—å£æˆ–æ¡†æ¶çš„å¤§å°å˜åŒ–æ—¶åœ¨windowæˆ–æ¡†æ¶ä¸Šé¢è§¦å‘ã€‚</li>
<li>scrollï¼šå½“ç”¨æˆ·æ»šåŠ¨å¸¦æ»šåŠ¨æ¡çš„å…ƒç´ ä¸­çš„å†…å®¹æ—¶ï¼Œåœ¨è¯¥å…ƒç´ ä¸Šé¢è§¦å‘ã€‚</li>
<li>resizeå’Œscrollè§¦å‘é¢‘ç‡å¾ˆé«˜ã€‚æ³¨æ„ä»£ç çš„ç®€æ´ã€‚</li>
</ul>
<h4 id="ç„¦ç‚¹äº‹ä»¶"> ç„¦ç‚¹äº‹ä»¶</h4>
<ul>
<li>blurï¼šåœ¨å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ã€‚è¿™ä¸ªäº‹ä»¶ä¸ä¼šå†’æ³¡ã€‚</li>
<li>focusï¼šåœ¨å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ã€‚ä¸å†’æ³¡</li>
<li>focusinï¼šå†’æ³¡ç‰ˆfocus</li>
<li>focusoutï¼šå†’æ³¡ç‰ˆblur</li>
</ul>
<h4 id="é¼ æ ‡å’Œæ»šè½®äº‹ä»¶"> é¼ æ ‡å’Œæ»šè½®äº‹ä»¶</h4>
<ul>
<li>clickï¼šåœ¨ç”¨æˆ·å•å‡»ä¸»é¼ æ ‡æŒ‰é’®æˆ–è€…æŒ‰ä¸‹å›è½¦é”®æ—¶è§¦å‘ã€‚</li>
<li>dblclickï¼šåœ¨ç”¨æˆ·åŒå‡»ä¸»é¼ æ ‡æŒ‰é’®æ—¶è§¦å‘ã€‚</li>
<li>mousedownï¼šåœ¨ç”¨æˆ·æŒ‰ä¸‹äº†ä»»æ„é¼ æ ‡æŒ‰é’®æ—¶è§¦å‘ã€‚ä¸èƒ½é€šè¿‡é”®ç›˜è§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚</li>
<li>mouseupï¼šåœ¨ç”¨æˆ·é‡Šæ”¾é¼ æ ‡æŒ‰é’®æ—¶è§¦å‘ã€‚
<ul>
<li>event.button:0è¡¨ç¤ºä¸»é¼ æ ‡æŒ‰é’®ï¼Œ1è¡¨ç¤ºä¸­é—´çš„é¼ æ ‡æ»šè½®æŒ‰é’®,2è¡¨ç¤ºæ¬¡é¼ æ ‡æŒ‰é’®ã€‚</li>
</ul>
</li>
<li>mousemoveï¼šå½“é¼ æ ‡æŒ‡é’ˆåœ¨å…ƒç´ å†…éƒ¨ç§»åŠ¨æ—¶é‡å¤åœ°è§¦å‘ã€‚ä¸èƒ½é€šè¿‡é”®ç›˜è§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚</li>
<li>mouseoutï¼šåœ¨é¼ æ ‡æŒ‡é’ˆä½äºä¸€ä¸ªå…ƒç´ ä¸Šæ–¹ï¼Œç„¶åç”¨æˆ·å°†å…¶ç§»å…¥å¦ä¸€ä¸ªå…ƒç´ æ—¶è§¦å‘ã€‚ä»Aå…ƒç´ ç§»åŠ¨åˆ°Bå…ƒç´ ä¸Šï¼Œä¼šè§¦å‘Açš„mouseoutï¼ŒBçš„mouseoverï¼ŒAçš„relatedTargetæ˜¯Bï¼ŒBçš„relatedTargetæ˜¯Aã€‚</li>
<li>mouseoverï¼šåœ¨é¼ æ ‡æŒ‡é’ˆä½äºä¸€ä¸ªå…ƒç´ å¤–éƒ¨ï¼Œç„¶åç”¨æˆ·å°†å…¶é¦–æ¬¡ç§»å…¥å¦ä¸€ä¸ªå…ƒç´ è¾¹ç•Œä¹‹å†…æ—¶è§¦å‘ã€‚</li>
<li>äº‹ä»¶è§¦å‘é¡ºåºï¼šmousedown-&gt;mouseup-&gt;click-&gt;mousedown-&gt;mouseup-&gt;click-&gt;dbclick</li>
<li>mousewheelï¼šæ»šåŠ¨é¼ æ ‡æ»šè½®æ—¶è§¦å‘ã€‚ä¸mousewheeläº‹ä»¶å¯¹åº”çš„eventå¯¹è±¡é™¤åŒ…å«é¼ æ ‡äº‹ä»¶çš„æ‰€æœ‰æ ‡å‡†ä¿¡æ¯å¤–ï¼Œè¿˜åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„wheelDeltaå±æ€§ã€‚å½“ç”¨æˆ·å‘å‰æ»šåŠ¨é¼ æ ‡æ»šè½®æ—¶ï¼ŒwheelDeltaæ˜¯120çš„å€æ•°ï¼›å½“ç”¨æˆ·å‘åæ»šåŠ¨é¼ æ ‡æ»šè½®æ—¶ï¼ŒwheelDeltaæ˜¯-120çš„å€æ•°ã€‚</li>
</ul>
<hr>
<ul>
<li>è§†å£åæ ‡ä½ç½®ï¼šäº‹ä»¶å¯¹è±¡çš„clientXå’ŒclientYå±æ€§ï¼Œè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿæ—¶é¼ æ ‡æŒ‡é’ˆåœ¨è§†å£ä¸­çš„æ°´å¹³å’Œå‚ç›´åæ ‡ã€‚</li>
<li>é¡µé¢åæ ‡ä½ç½®ï¼šäº‹ä»¶å¯¹è±¡çš„pageXå’ŒpageYå±æ€§ï¼Œèƒ½å‘Šè¯‰ä½ äº‹ä»¶æ˜¯åœ¨é¡µé¢ä¸­çš„ä»€ä¹ˆä½ç½®å‘ç”Ÿçš„ã€‚</li>
<li>å±å¹•åæ ‡ä½ç½®ï¼šäº‹ä»¶å¯¹è±¡çš„screenXå’ŒscreenYå±æ€§ï¼Œè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿæ—¶é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºæ•´ä¸ªå±å¹•çš„æ°´å¹³å’Œå‚ç›´åæ ‡ã€‚</li>
<li>ä¿®é¥°é”®ï¼šäº‹ä»¶å¯¹è±¡çš„shiftKeyã€ctrlKeyã€altKeyå’ŒmetaKeyå±æ€§ï¼Œå¦‚æœç›¸åº”çš„é”®è¢«æŒ‰ä¸‹äº†ï¼Œåˆ™å€¼ä¸ºtrueã€‚</li>
</ul>
<h4 id="é”®ç›˜å’Œæ–‡æœ¬äº‹ä»¶"> é”®ç›˜å’Œæ–‡æœ¬äº‹ä»¶</h4>
<ul>
<li>keydownï¼šå½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ä»»æ„é”®æ—¶è§¦å‘ï¼Œè€Œä¸”å¦‚æœæŒ‰ä½ä¸æ”¾çš„è¯ï¼Œä¼šé‡å¤è§¦å‘æ­¤äº‹ä»¶ã€‚</li>
<li>keypressï¼šå½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„å­—ç¬¦é”®æ—¶è§¦å‘ï¼Œè€Œä¸”å¦‚æœæŒ‰ä½ä¸æ”¾çš„è¯ï¼Œä¼šé‡å¤è§¦å‘æ­¤äº‹ä»¶ã€‚æŒ‰ä¸‹Escé”®ä¹Ÿä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚</li>
<li>keyupï¼šå½“ç”¨æˆ·é‡Šæ”¾é”®ç›˜ä¸Šçš„é”®æ—¶è§¦å‘ã€‚</li>
<li>textInputï¼šè¿™ä¸ªäº‹ä»¶æ˜¯å¯¹keypressçš„è¡¥å……ï¼Œç”¨æ„æ˜¯åœ¨å°†æ–‡æœ¬æ˜¾ç¤ºç»™ç”¨æˆ·ä¹‹å‰æ›´å®¹æ˜“æ‹¦æˆªæ–‡æœ¬ã€‚åœ¨æ–‡æœ¬æ’å…¥æ–‡æœ¬æ¡†ä¹‹å‰ä¼šè§¦å‘textInputäº‹ä»¶ã€‚
<ul>
<li>ä»»ä½•å¯ä»¥è·å¾—ç„¦ç‚¹çš„å…ƒç´ éƒ½å¯ä»¥è§¦å‘keypressäº‹ä»¶ï¼Œä½†åªæœ‰å¯ç¼–è¾‘åŒºåŸŸæ‰èƒ½è§¦å‘textInputäº‹ä»¶ã€‚</li>
<li>textInputäº‹ä»¶åªä¼šåœ¨ç”¨æˆ·æŒ‰ä¸‹èƒ½å¤Ÿè¾“å…¥å®é™…å­—ç¬¦çš„é”®æ—¶æ‰ä¼šè¢«è§¦å‘ï¼Œè€Œkeypressäº‹ä»¶åˆ™åœ¨æŒ‰ä¸‹é‚£äº›èƒ½å¤Ÿå½±å“æ–‡æœ¬æ˜¾ç¤ºçš„é”®æ—¶ä¹Ÿä¼šè§¦å‘ï¼ˆä¾‹å¦‚é€€æ ¼é”®ï¼‰ã€‚</li>
<li>event.inputMethod
<ul>
<li>0ï¼Œè¡¨ç¤ºæµè§ˆå™¨ä¸ç¡®å®šæ˜¯æ€ä¹ˆè¾“å…¥çš„ã€‚</li>
<li>1ï¼Œè¡¨ç¤ºæ˜¯ä½¿ç”¨é”®ç›˜è¾“å…¥çš„ã€‚</li>
<li>2ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯ç²˜è´´è¿›æ¥çš„ã€‚</li>
<li>3ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯æ‹–æ”¾è¿›æ¥çš„ã€‚</li>
<li>4ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯ä½¿ç”¨IMEè¾“å…¥çš„ã€‚</li>
<li>5ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯é€šè¿‡åœ¨è¡¨å•ä¸­é€‰æ‹©æŸä¸€é¡¹è¾“å…¥çš„ã€‚</li>
<li>6ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯é€šè¿‡æ‰‹å†™è¾“å…¥çš„ï¼ˆæ¯”å¦‚ä½¿ç”¨æ‰‹å†™ç¬”ï¼‰ã€‚</li>
<li>7ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯é€šè¿‡è¯­éŸ³è¾“å…¥çš„ã€‚</li>
<li>8ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯é€šè¿‡å‡ ç§æ–¹æ³•ç»„åˆè¾“å…¥çš„ã€‚</li>
<li>9ï¼Œè¡¨ç¤ºæ–‡æœ¬æ˜¯é€šè¿‡è„šæœ¬è¾“å…¥çš„ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>é”®ç›˜äº‹ä»¶ä¸é¼ æ ‡äº‹ä»¶ä¸€æ ·ï¼Œéƒ½æ”¯æŒç›¸åŒçš„ä¿®æ”¹é”®ã€‚è€Œä¸”ï¼Œé”®ç›˜äº‹ä»¶çš„äº‹ä»¶å¯¹è±¡ä¸­ä¹Ÿæœ‰shiftKeyã€ctrlKeyã€altKeyå’ŒmetaKeyå±æ€§ã€‚</li>
</ul>
<p><img src="/assets/img/js-keycode.png" alt="KeyCode" />
keyCode: å³ç›¸åº”å­—ç¬¦å¯¹åº”çš„ASCIIç </p>
<h4 id="å˜åŠ¨äº‹ä»¶"> å˜åŠ¨äº‹ä»¶</h4>
<ul>
<li>DOMSubtreeModifiedï¼šåœ¨DOMç»“æ„ä¸­å‘ç”Ÿä»»ä½•å˜åŒ–æ—¶è§¦å‘ã€‚è¿™ä¸ªäº‹ä»¶åœ¨å…¶ä»–ä»»ä½•äº‹ä»¶è§¦å‘åéƒ½ä¼šè§¦å‘ã€‚</li>
<li>DOMNodeInsertedï¼šåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºå­èŠ‚ç‚¹è¢«æ’å…¥åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸­æ—¶è§¦å‘ã€‚</li>
<li>DOMNodeRemovedï¼šåœ¨èŠ‚ç‚¹ä»å…¶çˆ¶èŠ‚ç‚¹ä¸­è¢«ç§»é™¤æ—¶è§¦å‘ã€‚</li>
<li>DOMNodeInsertedIntoDocumentï¼šåœ¨ä¸€ä¸ªèŠ‚ç‚¹è¢«ç›´æ¥æ’å…¥æ–‡æ¡£æˆ–é€šè¿‡å­æ ‘é—´æ¥æ’å…¥æ–‡æ¡£ä¹‹åè§¦å‘ã€‚è¿™ä¸ªäº‹ä»¶åœ¨DOMNodeInsertedä¹‹åè§¦å‘ã€‚</li>
<li>DOMNodeRemovedFromDocumentï¼šåœ¨ä¸€ä¸ªèŠ‚ç‚¹è¢«ç›´æ¥ä»æ–‡æ¡£ä¸­ç§»é™¤æˆ–é€šè¿‡å­æ ‘é—´æ¥ä»æ–‡æ¡£ä¸­ç§»é™¤ä¹‹å‰è§¦å‘ã€‚è¿™ä¸ªäº‹ä»¶åœ¨DOMNodeRemovedä¹‹åè§¦å‘ã€‚</li>
<li>DOMAttrModifiedï¼šåœ¨ç‰¹æ€§è¢«ä¿®æ”¹ä¹‹åè§¦å‘ã€‚</li>
<li>DOMCharacterDataModifiedï¼šåœ¨æ–‡æœ¬èŠ‚ç‚¹çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ã€‚</li>
</ul>
<h4 id="html5äº‹ä»¶"> HTML5äº‹ä»¶</h4>
<ul>
<li>contextmenuäº‹ä»¶ï¼šå³é”®å•å‡»æ—¶è§¦å‘ï¼Œä½¿ç”¨event.preventDefalut()å–æ¶ˆé»˜è®¤èœå•ã€‚å› ä¸ºcontextmenuäº‹ä»¶å±äºé¼ æ ‡äº‹ä»¶ï¼Œæ‰€ä»¥å…¶äº‹ä»¶å¯¹è±¡ä¸­åŒ…å«ä¸å…‰æ ‡ä½ç½®æœ‰å…³çš„æ‰€æœ‰å±æ€§ã€‚é€šå¸¸ä½¿ç”¨contextmenuäº‹ä»¶æ¥æ˜¾ç¤ºè‡ªå®šä¹‰çš„ä¸Šä¸‹æ–‡èœå•ï¼Œè€Œä½¿ç”¨onclickäº‹ä»¶å¤„ç†ç¨‹åºæ¥éšè—è¯¥èœå•ã€‚</li>
<li>DOMContentLoadedäº‹ä»¶ï¼šåœ¨å½¢æˆå®Œæ•´çš„DOMæ ‘ä¹‹åå°±ä¼šè§¦å‘ï¼Œä¸ç†ä¼šå›¾åƒã€JavaScriptæ–‡ä»¶ã€CSSæ–‡ä»¶æˆ–å…¶ä»–èµ„æºæ˜¯å¦å·²ç»ä¸‹è½½å®Œæ¯•ã€‚</li>
<li>hashchangeäº‹ä»¶ï¼šHTML5æ–°å¢äº†hashchangeäº‹ä»¶ï¼Œä»¥ä¾¿åœ¨URLçš„å‚æ•°åˆ—è¡¨ï¼ˆåŠURLä¸­â€œ#â€å·åé¢çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼‰å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å¼€å‘äººå‘˜ã€‚ä¹‹æ‰€ä»¥æ–°å¢è¿™ä¸ªäº‹ä»¶ï¼Œæ˜¯å› ä¸ºåœ¨Ajaxåº”ç”¨ä¸­ï¼Œå¼€å‘äººå‘˜ç»å¸¸è¦åˆ©ç”¨URLå‚æ•°åˆ—è¡¨æ¥ä¿å­˜çŠ¶æ€æˆ–å¯¼èˆªä¿¡æ¯ã€‚</li>
</ul>
<h3 id="å†…å­˜å’Œæ€§èƒ½"> å†…å­˜å’Œæ€§èƒ½</h3>
<p>åœ¨JavaScriptä¸­ï¼Œæ·»åŠ åˆ°é¡µé¢ä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºæ•°é‡å°†ç›´æ¥å…³ç³»åˆ°é¡µé¢çš„æ•´ä½“è¿è¡Œæ€§èƒ½ã€‚å¯¼è‡´è¿™ä¸€é—®é¢˜çš„åŸå› æ˜¯å¤šæ–¹é¢çš„ã€‚</p>
<ol>
<li>æ¯ä¸ªå‡½æ•°éƒ½æ˜¯å¯¹è±¡ï¼Œéƒ½ä¼šå ç”¨å†…å­˜ï¼›å†…å­˜ä¸­çš„å¯¹è±¡è¶Šå¤šï¼Œæ€§èƒ½å°±è¶Šå·®ã€‚</li>
<li>å¿…é¡»äº‹å…ˆæŒ‡å®šæ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºè€Œå¯¼è‡´çš„DOMè®¿é—®æ¬¡æ•°ï¼Œä¼šå»¶è¿Ÿæ•´ä¸ªé¡µé¢çš„äº¤äº’å°±ç»ªæ—¶é—´ã€‚</li>
</ol>
<h4 id="äº‹ä»¶å§”æ‰˜"> äº‹ä»¶å§”æ‰˜</h4>
<p>clickã€mousedownã€mouseupã€keydownã€keyupå’Œkeypressäº‹ä»¶é€‚åˆé‡‡ç”¨äº‹ä»¶å§”æ‰˜æŠ€æœ¯ã€‚åˆ©ç”¨äº†äº‹ä»¶å†’æ³¡ï¼Œåœ¨äº‹ä»¶å†’æ³¡åˆ°è¾ƒé«˜å±‚æ¬¡æ—¶ç»Ÿä¸€å¤„ç†ï¼Œè¿™æ ·åªæŒ‡å®šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±å¯ä»¥ç®¡ç†æŸä¸€ç±»å‹çš„æ‰€æœ‰äº‹ä»¶ã€‚</p>
<div><pre><code><span>var</span> list <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>"#app"</span><span>)</span>

EventUtil<span>.</span><span>addHandler</span><span>(</span>list<span>,</span> <span>"click"</span><span>,</span> <span>function</span><span>(</span><span>e</span><span>)</span><span>{</span>
    event <span>=</span> EventUtil<span>.</span><span>getEvent</span><span>(</span>event<span>)</span><span>;</span>
    <span>var</span> target <span>=</span> EventUtil<span>.</span><span>getTarget</span><span>(</span>event<span>)</span>

    <span>switch</span> <span>(</span>target<span>.</span>id<span>)</span> <span>{</span>
        <span>case</span><span>:</span> <span>"aBtn"</span><span>:</span>
            document<span>.</span>title <span>=</span> <span>"I changed the document's title"</span>
            <span>break</span>
        <span>case</span> <span>"bBtn"</span><span>:</span>
            location<span>.</span>href <span>=</span> <span>"http://www.baidu.com"</span>
            <span>break</span>
        <span>case</span><span>:</span> <span>"cBtn"</span><span>:</span>
            <span>alert</span><span>(</span><span>"Hi"</span><span>)</span>
            <span>break</span><span>;</span>
    <span>}</span>
<span>}</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><h4 id="ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº"> ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº</h4>
<p>å†…å­˜ä¸­ç•™æœ‰é‚£äº›è¿‡æ—¶ä¸ç”¨çš„â€œç©ºäº‹ä»¶å¤„ç†ç¨‹åºâ€ï¼ˆdangling event handlerï¼‰ï¼Œä¹Ÿæ˜¯é€ æˆWebåº”ç”¨ç¨‹åºå†…å­˜ä¸æ€§èƒ½é—®é¢˜çš„ä¸»è¦åŸå› ã€‚</p>
<p>åœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šé€ æˆä¸Šè¿°é—®é¢˜ã€‚</p>
<ol>
<li>ä»æ–‡æ¡£ä¸­ç§»é™¤å¸¦æœ‰äº‹ä»¶å¤„ç†ç¨‹åºçš„å…ƒç´ ã€‚è¿™å¯èƒ½æ˜¯é€šè¿‡çº¯ç²¹çš„DOMæ“ä½œï¼Œä¾‹å¦‚ä½¿ç”¨removeChild()å’ŒreplaceChild()æ–¹æ³•ï¼Œä½†æ›´å¤šåœ°æ˜¯å‘ç”Ÿåœ¨ä½¿ç”¨innerHTMLæ›¿æ¢é¡µé¢ä¸­æŸä¸€éƒ¨åˆ†çš„æ—¶å€™ã€‚å¦‚æœå¸¦æœ‰äº‹ä»¶å¤„ç†ç¨‹åºçš„å…ƒç´ è¢«innerHTMLåˆ é™¤äº†ï¼Œé‚£ä¹ˆåŸæ¥æ·»åŠ åˆ°å…ƒç´ ä¸­çš„äº‹ä»¶å¤„ç†ç¨‹åºææœ‰å¯èƒ½æ— æ³•è¢«å½“ä½œåƒåœ¾å›æ”¶ã€‚(å…ƒç´ ç§»é™¤äº†ï¼Œä½†äº‹ä»¶å¤„ç†ç¨‹åºè¿˜å’Œå…ƒç´ ä¿æŒç€å¼•ç”¨å…³ç³»ï¼Œæµè§ˆå™¨å¾ˆå¯èƒ½æ— æ³•å¤„ç†ï¼Œè€Œå°†å…ƒç´ å’Œå¯¹äº‹ä»¶å¤„ç†ç¨‹åºçš„å¼•ç”¨éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå› è€Œæ— æ³•é€šè¿‡GCå›æ”¶)</li>
<li>å¸è½½é¡µé¢çš„æ—¶å€™ã€‚å¦‚æœåœ¨é¡µé¢è¢«å¸è½½ä¹‹å‰æ²¡æœ‰æ¸…ç†å¹²å‡€äº‹ä»¶å¤„ç†ç¨‹åºï¼Œé‚£å®ƒä»¬å°±ä¼šæ»ç•™åœ¨å†…å­˜ä¸­ã€‚æ¯æ¬¡åŠ è½½å®Œé¡µé¢å†å¸è½½é¡µé¢æ—¶ï¼ˆå¯èƒ½æ˜¯åœ¨ä¸¤ä¸ªé¡µé¢é—´æ¥å›åˆ‡æ¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å•å‡»äº†â€œåˆ·æ–°â€æŒ‰é’®ï¼‰ï¼Œå†…å­˜ä¸­æ»ç•™çš„å¯¹è±¡æ•°ç›®å°±ä¼šå¢åŠ ï¼Œå› ä¸ºäº‹ä»¶å¤„ç†ç¨‹åºå ç”¨çš„å†…å­˜å¹¶æ²¡æœ‰è¢«é‡Šæ”¾ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½çš„åšæ³•æ˜¯åœ¨é¡µé¢å¸è½½ä¹‹å‰ï¼Œå…ˆé€šè¿‡onunloadäº‹ä»¶å¤„ç†ç¨‹åºç§»é™¤æ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºã€‚åœ¨æ­¤ï¼Œäº‹ä»¶å§”æ‰˜æŠ€æœ¯å†æ¬¡è¡¨ç°å‡ºå®ƒçš„ä¼˜åŠ¿â€”â€”éœ€è¦è·Ÿè¸ªçš„äº‹ä»¶å¤„ç†ç¨‹åºè¶Šå°‘ï¼Œç§»é™¤å®ƒä»¬å°±è¶Šå®¹æ˜“ã€‚</li>
</ol>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">JS å¯¹è±¡</title>
    <id>https://kigane.github.io/note/js/js-object/</id>
    <link href="https://kigane.github.io/note/js/js-object/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<p>ECMA-262æŠŠå¯¹è±¡å®šä¹‰ä¸ºï¼šâ€œæ— åºå±æ€§çš„é›†åˆï¼Œå…¶å±æ€§å¯ä»¥åŒ…å«åŸºæœ¬å€¼ï¼Œå¯¹è±¡æˆ–å‡½æ•°ã€‚â€<br>
ç®€å•åœ°è¯´ï¼Œå¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ•£åˆ—è¡¨ï¼ŒåŒ…å«ä¸€ç³»åˆ— key-value å¯¹ï¼Œå…¶ä¸­å€¼å¯ä»¥æ˜¯æ•°æ®æˆ–å‡½æ•°ã€‚</p>
<h2 id="ç†è§£å¯¹è±¡"> ç†è§£å¯¹è±¡</h2>
<p>ECMAScript ä¸­æœ‰ä¸¤ç±»å±æ€§(property)ï¼šæ•°æ®å±æ€§å’Œè®¿é—®å™¨å±æ€§ã€‚<br>
å±æ€§çš„ç‰¹å¾ç”± ECMA å®šä¹‰çš„å†…éƒ¨ç‰¹æ€§(attribute)æè¿°ã€‚</p>
<h3 id="æ•°æ®å±æ€§çš„ç‰¹æ€§"> æ•°æ®å±æ€§çš„ç‰¹æ€§</h3>
<ol>
<li><code>[[Configurable]]</code>ï¼šè¡¨ç¤º
<ul>
<li>èƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§ä»è€Œå¯ä»¥é‡æ–°å®šä¹‰å±æ€§</li>
<li>èƒ½å¦ä¿®æ”¹å±æ€§çš„ç‰¹æ€§</li>
<li>èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§</li>
</ul>
</li>
<li><code>[[Enumerable]]</code>ï¼šè¡¨ç¤ºèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›å±æ€§ã€‚</li>
<li><code>[[Writable]]</code>ï¼šè¡¨ç¤ºèƒ½å¦ä¿®æ”¹å±æ€§çš„å€¼ã€‚</li>
<li><code>[[Value]]</code>ï¼šä¿å­˜è¿™ä¸ªå±æ€§çš„æ•°æ®å€¼ã€‚è¯»å–å±æ€§å€¼çš„æ—¶å€™ï¼Œä»è¿™ä¸ªä½ç½®è¯»ï¼›å†™å…¥å±æ€§å€¼çš„æ—¶å€™ï¼ŒæŠŠæ–°å€¼ä¿å­˜åœ¨è¿™ä¸ªä½ç½®ã€‚é»˜è®¤å€¼ä¸º undefinedã€‚<br>
å¯¹äºä½¿ç”¨å­—é¢é‡ç›´æ¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰çš„å±æ€§(<code>var obj = {name: 'jack'}</code>)ï¼Œ<code>[[Configurable]]</code>,<code>[[Enumerable]]</code>,<code>[[Writable]]</code>é»˜è®¤ä¸º true,<code>[[Value]]</code>ä¸ºè®¾ç½®çš„å€¼ã€‚</li>
</ol>
<h3 id="è®¿é—®å™¨å±æ€§çš„ç‰¹æ€§"> è®¿é—®å™¨å±æ€§çš„ç‰¹æ€§</h3>
<p>è®¿é—®å™¨å±æ€§ä¸åŒ…å«æ•°æ®å€¼ï¼›å®ƒä»¬åŒ…å«ä¸€å¯¹ getter å’Œ setter å‡½æ•°ï¼ˆéƒ½éå¿…éœ€ï¼‰ã€‚åœ¨è¯»å–è®¿é—®å™¨å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨ getter å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£è¿”å›æœ‰æ•ˆçš„å€¼ï¼›åœ¨å†™å…¥è®¿é—®å™¨å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨ setter å‡½æ•°å¹¶ä¼ å…¥æ–°å€¼ï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£å†³å®šå¦‚ä½•å¤„ç†æ•°æ®ã€‚è®¿é—®å™¨å±æ€§å¿…é¡»ç”¨Object.defineProperty()æ¥å®šä¹‰ã€‚
è®¿é—®å™¨å±æ€§æœ‰å¦‚ä¸‹4ä¸ªç‰¹æ€§ã€‚</p>
<ol>
<li><code>[[Configurable]]</code>ï¼šè¡¨ç¤º
<ul>
<li>èƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§ä»è€Œå¯ä»¥é‡æ–°å®šä¹‰å±æ€§</li>
<li>èƒ½å¦ä¿®æ”¹å±æ€§çš„ç‰¹æ€§</li>
<li>èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºæ•°æ®å±æ€§</li>
</ul>
</li>
<li><code>[[Enumerable]]</code>ï¼šè¡¨ç¤ºèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›å±æ€§ã€‚</li>
<li><code>[[Get]]</code>ï¼šåœ¨è¯»å–å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚é»˜è®¤å€¼ä¸ºundefinedã€‚</li>
<li><code>[[Set]]</code>ï¼šåœ¨å†™å…¥å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚é»˜è®¤å€¼ä¸ºundefinedã€‚
è®¿é—®å™¨å±æ€§ä¸èƒ½ç›´æ¥å®šä¹‰ï¼Œå¿…é¡»ä½¿ç”¨ Object.defineProperty() æ¥å®šä¹‰ã€‚</li>
</ol>
<h3 id="object-defineproperty"> Object.defineProperty()</h3>
<p>è¦ä¿®æ”¹å±æ€§é»˜è®¤çš„ç‰¹æ€§ï¼Œå¿…é¡»ä½¿ç”¨ ECMAScript 5 çš„ Object.defineProperty() æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šå±æ€§æ‰€åœ¨çš„å¯¹è±¡ã€å±æ€§çš„åå­—å’Œä¸€ä¸ªæè¿°ç¬¦å¯¹è±¡ã€‚å…¶ä¸­ï¼Œæè¿°ç¬¦ï¼ˆdescriptorï¼‰å¯¹è±¡çš„å±æ€§å¿…é¡»æ˜¯ï¼šconfigurableã€enumerableã€writable&amp;valueæˆ–è€…get&amp;setã€‚è®¾ç½®å…¶ä¸­çš„ä¸€æˆ–å¤šä¸ªå€¼ï¼Œå¯ä»¥ä¿®æ”¹å¯¹åº”çš„ç‰¹æ€§å€¼ã€‚</p>
<p>è®¾ç½®è®¿é—®å™¨å±æ€§æ—¶ï¼Œå¯ä»¥åŒæ—¶æŒ‡å®šgetterå’Œsetterã€‚åªæŒ‡å®šgetteræ„å‘³ç€å±æ€§æ˜¯ä¸èƒ½å†™ï¼Œå°è¯•å†™å…¥å±æ€§ä¼šè¢«å¿½ç•¥ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°è¯•å†™å…¥åªæŒ‡å®šäº†getterå‡½æ•°çš„å±æ€§ä¼šæŠ›å‡ºé”™è¯¯ã€‚ç±»ä¼¼åœ°ï¼ŒåªæŒ‡å®šsetterå‡½æ•°çš„å±æ€§ä¹Ÿä¸èƒ½è¯»ï¼Œå¦åˆ™åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè¿”å›undefinedï¼Œè€Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<div><p>æ³¨æ„</p>
<p>åœ¨è°ƒç”¨ Object.defineProperty() æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œconfigurableã€enumerable å’Œ writable ç‰¹æ€§çš„é»˜è®¤å€¼éƒ½æ˜¯ falseã€‚è€Œä¸”ï¼Œä¸€æ—¦æŠŠå±æ€§å®šä¹‰ä¸ºä¸å¯é…ç½®çš„ï¼Œå°±ä¸èƒ½å†æŠŠå®ƒå˜å›å¯é…ç½®äº†ï¼Œå› ä¸ºå®ƒå·²ç»ä¸å¯é…ç½®äº†ğŸ¤£ã€‚é€šå¸¸ä¸ç”¨ç‰¹æ„å°†configurableè®¾ä¸ºtrueï¼Œå› ä¸ºå¾ˆå°‘ä¼šæœ‰ä¿®æ”¹ç‰¹æ€§çš„éœ€æ±‚ã€‚</p>
</div>
<p>ECMAScript 5åˆå®šä¹‰äº†ä¸€ä¸ªObject.defineProperties()æ–¹æ³•ã€‚åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡æè¿°ç¬¦ä¸€æ¬¡å®šä¹‰å¤šä¸ªå±æ€§ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå¯¹è±¡å‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ·»åŠ å’Œä¿®æ”¹å…¶å±æ€§çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§ä¸ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸­è¦æ·»åŠ æˆ–ä¿®æ”¹çš„å±æ€§ä¸€ä¸€å¯¹åº”ã€‚</p>
<div><pre><code><span>var</span> book <span>=</span> <span>{</span><span>}</span>

Object<span>.</span><span>defineProperties</span><span>(</span>book<span>,</span> <span>{</span>
    _year<span>:</span> <span>{</span>
        writable<span>:</span> <span>true</span><span>,</span>
        value<span>:</span> <span>2000</span>
    <span>}</span><span>,</span>
    edition<span>:</span> <span>{</span>
        writable<span>:</span> <span>true</span><span>,</span>
        value<span>:</span> <span>0</span>
    <span>}</span><span>,</span>
    year<span>:</span> <span>{</span>
        <span>get</span><span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
            <span>return</span> <span>this</span><span>.</span>_year
        <span>}</span><span>,</span>
        <span>set</span><span>:</span> <span>function</span><span>(</span><span>y</span><span>)</span> <span>{</span>
            <span>this</span><span>.</span>_year <span>=</span> year
            <span>this</span><span>.</span>edition<span>++</span>
        <span>}</span>
    <span>}</span>
<span>}</span><span>)</span>

<span>// å¯¹bookç”¨for-inå¾ªç¯ï¼Œå•¥ä¹Ÿæ‰“å°ä¸å‡ºæ¥ã€‚</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><p>ä½¿ç”¨ECMAScript 5çš„Object.getOwnPropertyDescriptor()æ–¹æ³•ï¼Œå¯ä»¥å–å¾—ç»™å®šå±æ€§çš„æè¿°ç¬¦ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå±æ€§æ‰€åœ¨çš„å¯¹è±¡å’Œè¦è¯»å–å…¶æè¿°ç¬¦çš„å±æ€§åç§°ã€‚è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯è®¿é—®å™¨å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§æœ‰configurableã€enumerableã€getå’Œsetï¼›å¦‚æœæ˜¯æ•°æ®å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§æœ‰configurableã€enumerableã€writableå’Œvalueã€‚<br>
Object.getOwnPropertyDescriptors(obj)ï¼Œå–å¾—objçš„æ‰€æœ‰å±æ€§æè¿°ç¬¦ã€‚</p>
<h2 id="åˆ›å»ºå¯¹è±¡"> åˆ›å»ºå¯¹è±¡</h2>
<p>Objectæ„é€ å‡½æ•°æˆ–å¯¹è±¡å­—é¢é‡éƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºå•ä¸ªå¯¹è±¡ï¼Œä½†è¿™äº›æ–¹å¼æœ‰ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼šä¼šäº§ç”Ÿå¤§é‡çš„é‡å¤ä»£ç ã€‚</p>
<div><pre><code><span>var</span> p1 <span>=</span> <span>{</span>
    name<span>:</span> <span>"wyz"</span><span>,</span>
    age<span>:</span> <span>21</span><span>,</span>
    <span>sayHi</span><span>:</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"says Hi"</span><span>)</span><span>}</span>
<span>}</span><span>;</span>
<span>var</span> p2 <span>=</span> <span>{</span>
    name<span>:</span> <span>"gtl"</span><span>,</span>
    age<span>:</span> <span>22</span><span>,</span>
    <span>sayHi</span><span>:</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"says Hi"</span><span>)</span><span>}</span>
<span>}</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h3 id="å·¥å‚æ¨¡å¼"> å·¥å‚æ¨¡å¼</h3>
<div><pre><code><span>function</span> <span>createPerson</span><span>(</span><span>name<span>,</span> age</span><span>)</span>
<span>{</span>
    <span>var</span> o <span>=</span> <span>new</span> <span>Object</span><span>(</span><span>)</span><span>;</span>
    o<span>.</span>name <span>=</span> name<span>;</span>
    o<span>.</span>age <span>=</span> age<span>;</span>
    o<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"says Hi"</span><span>)</span><span>}</span><span>;</span>
    <span>return</span> o<span>;</span>
<span>}</span>

<span>var</span> p1 <span>=</span> <span>createPerson</span><span>(</span><span>"wyz"</span><span>,</span> <span>21</span><span>)</span><span>;</span> 
<span>var</span> p2 <span>=</span> <span>createPerson</span><span>(</span><span>"gtl"</span><span>,</span> <span>22</span><span>)</span><span>;</span> 
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>å·¥å‚æ¨¡å¼è™½ç„¶è§£å†³äº†åˆ›å»ºå¤šä¸ªç›¸ä¼¼å¯¹è±¡ä»£ç é‡å¤çš„é—®é¢˜ï¼Œä½†å´æ²¡æœ‰è§£å†³å¯¹è±¡è¯†åˆ«çš„é—®é¢˜ï¼ˆå³æ€æ ·çŸ¥é“ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ï¼‰ã€‚</p>
<h3 id="æ„é€ å‡½æ•°æ¨¡å¼"> æ„é€ å‡½æ•°æ¨¡å¼</h3>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>name<span>,</span> age</span><span>)</span>
<span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
    <span>this</span><span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"says Hi"</span><span>)</span><span>}</span><span>;</span>
<span>}</span>

<span>var</span> p1 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"wyz"</span><span>,</span> <span>21</span><span>)</span><span>;</span>
<span>var</span> p2 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"gtl"</span><span>,</span> <span>22</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>æ³¨æ„åˆ°æ„é€ å‡½æ•° Person() çš„ç‰¹ç‚¹</p>
<ul>
<li>æ²¡æœ‰æ˜¾å¼åœ°åˆ›å»ºå¯¹è±¡</li>
<li>ç›´æ¥å°†å±æ€§å’Œæ–¹æ³•èµ‹ç»™äº†thiså¯¹è±¡</li>
<li>æ²¡æœ‰returnè¯­å¥</li>
</ul>
<p>è¦åˆ›å»ºPersonçš„æ–°å®ä¾‹ï¼Œå¿…é¡»ä½¿ç”¨newæ“ä½œç¬¦ã€‚ä»¥è¿™ç§æ–¹å¼è°ƒç”¨æ„é€ å‡½æ•°å®é™…ä¸Šä¼šç»å†ä»¥ä¸‹4ä¸ªæ­¥éª¤</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼›</li>
<li>å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤thiså°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ğŸ¤” ï¼›</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ï¼›</li>
<li>è¿”å›æ–°å¯¹è±¡ã€‚</li>
</ol>
<p>ä½¿ç”¨æ„é€ å‡½æ•°çš„ä¸»è¦é—®é¢˜ï¼Œå°±æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½è¦åœ¨æ¯ä¸ªå®ä¾‹ä¸Šé‡æ–°åˆ›å»ºä¸€éã€‚</p>
<div><p>æç¤º</p>
<p>p1å’Œp2éƒ½æœ‰ä¸€ä¸ªåä¸ºsayHi()çš„æ–¹æ³•ï¼Œä½†é‚£ä¸¤ä¸ªæ–¹æ³•ä¸æ˜¯åŒä¸€ä¸ªFunctionçš„å®ä¾‹ã€‚å³ p1.sayHi != p2.sayHi</p>
</div>
<h3 id="åŸå‹æ¨¡å¼"> åŸå‹æ¨¡å¼</h3>
<p>æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeï¼ˆåŸå‹ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„<strong>æ‰€æœ‰å®ä¾‹å…±äº«</strong>çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>)</span><span>{</span><span>}</span>
<span>Person</span><span>.</span>prototype<span>.</span>name <span>=</span> <span>"wyz"</span><span>;</span>
<span>Person</span><span>.</span>prototype<span>.</span>age <span>=</span> <span>21</span><span>;</span>
<span>Person</span><span>.</span>prototype<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span><span>}</span><span>;</span>

<span>var</span> p1 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>)</span><span>;</span>
p1<span>.</span><span>sayHi</span><span>(</span><span>)</span><span>;</span> <span>// "wyz"</span>
<span>var</span> p2 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>)</span><span>;</span>
p2<span>.</span>name <span>=</span> <span>"gtl"</span><span>;</span>
p2<span>.</span><span>sayHi</span><span>(</span><span>)</span><span>;</span> <span>// "gtl"</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><div><p>æç¤º</p>
<p>ç†è§£ECMAScriptä¸­åŸå‹å¯¹è±¡çš„æ€§è´¨ï¼š</p>
<ol>
<li>æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œåªè¦åˆ›å»ºäº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå°±ä¼šæ ¹æ®ä¸€ç»„ç‰¹å®šçš„è§„åˆ™ä¸º<strong>è¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªprototypeå±æ€§</strong>ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘(å¯ä»¥ç†è§£ä¸ºæŒ‡é’ˆğŸ˜)å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚æ‰€æœ‰åŸå‹å¯¹è±¡éƒ½ä¼šé»˜è®¤è·å¾—ä¸€ä¸ªconstructorå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡å‘prototypeå±æ€§æ‰€å±å‡½æ•°çš„æŒ‡é’ˆï¼ˆPerson.prototype.constructor == Personï¼‰ã€‚è€Œé€šè¿‡è¿™ä¸ªæ„é€ å‡½æ•°å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜å¯ç»§ç»­ä¸ºåŸå‹å¯¹è±¡æ·»åŠ å…¶ä»–å±æ€§å’Œæ–¹æ³•ã€‚åˆ›å»ºäº†è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ä¹‹åï¼Œå…¶åŸå‹å¯¹è±¡é»˜è®¤åªä¼šå–å¾—constructorå±æ€§ï¼›è‡³äºå…¶ä»–æ–¹æ³•ï¼Œåˆ™éƒ½æ˜¯ä»Objectç»§æ‰¿è€Œæ¥çš„ã€‚</li>
<li>å½“è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹åï¼Œè¯¥<strong>å®ä¾‹çš„å†…éƒ¨å°†åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</strong>(p1.__proto__ == Person.prototype)ã€‚ECMA-262ç¬¬5ç‰ˆä¸­ç®¡è¿™ä¸ªæŒ‡é’ˆå«<code>[[Prototype]]</code>ã€‚è™½ç„¶åœ¨è„šæœ¬ä¸­æ²¡æœ‰æ ‡å‡†çš„æ–¹å¼è®¿é—®<code>[[Prototype]]</code>ï¼Œä½†Firefoxã€Safariå’ŒChromeåœ¨æ¯ä¸ªå¯¹è±¡ä¸Šéƒ½æ”¯æŒä¸€ä¸ªå±æ€§__proto__ï¼›è€Œåœ¨å…¶ä»–å®ç°ä¸­ï¼Œè¿™ä¸ªå±æ€§å¯¹è„šæœ¬åˆ™æ˜¯å®Œå…¨ä¸å¯è§çš„ã€‚</li>
<li>ECMAScript 5å¢åŠ äº†ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå«Object.getPrototypeOf()ï¼Œåœ¨æ‰€æœ‰æ”¯æŒçš„å®ç°ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›<code>[[Prototype]]</code>çš„å€¼ã€‚ğŸ˜‚</li>
</ol>
</div>
<h4 id="æ›´ç®€å•çš„åŸå‹è¯­æ³•"> æ›´ç®€å•çš„åŸå‹è¯­æ³•</h4>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>)</span><span>{</span><span>}</span><span>;</span>
<span>var</span> p1 <span>=</span> <span>Person</span><span>(</span><span>)</span><span>;</span> <span>// æŠŠè¿™ä¸€è¡Œç§»åŠ¨åˆ° Person.prototype èµ‹å€¼åå°±æ²¡é—®é¢˜äº†</span>
<span>Person</span><span>.</span>prototype <span>=</span> <span>{</span>ã€
    <span>// constructor: Person, // æœ€å¥½ä¹ŸåŠ ä¸Šè¿™è¡Œ</span>
    name<span>:</span> <span>"wyz"</span><span>,</span>
    age<span>:</span> <span>21</span><span>,</span>
    <span>sayHi</span><span>:</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span><span>}</span>
<span>}</span>
p1<span>.</span><span>sayHi</span><span>(</span><span>)</span><span>;</span> <span>// error p1.__proto__ æŒ‡å‘çš„è€å¯¹è±¡æ²¡æœ‰ sayHi å‡½æ•°</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>æ­¤æ—¶ï¼Œinstanceofæ“ä½œç¬¦ä¼šè¿”å›æ­£ç¡®çš„ç»“æœã€‚</p>
<div><p>ç‰¹åˆ«å°å¿ƒ</p>
<p>å› ä¸º Person.prototype å’Œ p1.__proto__ éƒ½æ˜¯æŒ‡é’ˆã€‚ç»è¿‡è¿™æ ·&quot;ç®€å•&quot;çš„èµ‹å€¼ä¹‹åï¼Œ Person.prototype æŒ‡å‘æ–°çš„å¯¹è±¡ï¼Œè€Œ p1.__proto__ ä»ç„¶æŒ‡å‘åŸæ¥çš„åŸå‹å¯¹è±¡ğŸ’€ã€‚å¹¶ä¸”ï¼Œæ–°çš„å¯¹è±¡çš„ constructor ç­‰äº Object è€Œä¸æ˜¯ Person äº†ï¼Œè€Œä¸” constructor çš„ç‰¹æ€§ <code>[[enumarable]]</code> ä¹Ÿä»é»˜è®¤çš„ false å˜æˆäº† trueã€‚</p>
</div>
<h4 id="æŸ¥æ‰¾å¯¹è±¡å±æ€§"> æŸ¥æ‰¾å¯¹è±¡å±æ€§</h4>
<p>æ¯å½“ä»£ç è¯»å–æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡æœç´¢ï¼Œç›®æ ‡æ˜¯å…·æœ‰ç»™å®šåå­—çš„å±æ€§ã€‚æœç´¢é¦–å…ˆä»å¯¹è±¡å®ä¾‹æœ¬èº«å¼€å§‹ã€‚å¦‚æœåœ¨å®ä¾‹ä¸­æ‰¾åˆ°äº†å…·æœ‰ç»™å®šåå­—çš„å±æ€§ï¼Œåˆ™è¿”å›è¯¥å±æ€§çš„å€¼ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ç»§ç»­æœç´¢æŒ‡é’ˆæŒ‡å‘çš„åŸå‹å¯¹è±¡ï¼Œåœ¨åŸå‹å¯¹è±¡ä¸­æŸ¥æ‰¾å…·æœ‰ç»™å®šåå­—çš„å±æ€§ã€‚å¦‚æœåœ¨åŸå‹å¯¹è±¡ä¸­æ‰¾åˆ°äº†è¿™ä¸ªå±æ€§ï¼Œåˆ™è¿”å›è¯¥å±æ€§çš„å€¼ã€‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å®ä¾‹ä¸­æ·»åŠ äº†ä¸€ä¸ªå±æ€§ï¼Œè€Œè¯¥å±æ€§ä¸å®ä¾‹åŸå‹ä¸­çš„ä¸€ä¸ªå±æ€§åŒåï¼Œé‚£æˆ‘ä»¬å°±åœ¨å®ä¾‹ä¸­åˆ›å»ºè¯¥å±æ€§ï¼Œè¯¥å±æ€§å°†ä¼šå±è”½åŸå‹ä¸­çš„é‚£ä¸ªå±æ€§ã€‚(å°±è¿‘åŸåˆ™ğŸ˜)</p>
<div><p>æç¤º</p>
<p>ä½¿ç”¨hasOwnProperty()æ–¹æ³•(ä»Objectç»§æ‰¿æ¥çš„)å¯ä»¥æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å­˜åœ¨äºå®ä¾‹ä¸­(è¿”å›true)ï¼Œè¿˜æ˜¯å­˜åœ¨äºåŸå‹ä¸­ã€‚(åŠ äº†Ownçš„éƒ½åªèƒ½æ“ä½œå®ä¾‹æœ¬èº«çš„å±æ€§ğŸ˜„)</p>
</div>
<p>è¦å–å¾—å¯¹è±¡ä¸Šæ‰€æœ‰å¯æšä¸¾çš„å®ä¾‹å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ECMAScript 5çš„Object.keys()æ–¹æ³•ã€‚
å¦‚æœä½ æƒ³è¦å¾—åˆ°æ‰€æœ‰å®ä¾‹å±æ€§ï¼Œæ— è®ºå®ƒæ˜¯å¦å¯æšä¸¾ï¼Œéƒ½å¯ä»¥ä½¿ç”¨Object.getOwnPropertyNames()æ–¹æ³•ã€‚</p>
<h4 id="åŸå‹çš„åŠ¨æ€æ€§"> åŸå‹çš„åŠ¨æ€æ€§</h4>
<p>ç”±äºåœ¨åŸå‹ä¸­æŸ¥æ‰¾å€¼çš„è¿‡ç¨‹æ˜¯ä¸€æ¬¡æœç´¢ï¼Œå› æ­¤æˆ‘ä»¬å¯¹åŸå‹å¯¹è±¡æ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½èƒ½å¤Ÿç«‹å³ä»å®ä¾‹ä¸Šåæ˜ å‡ºæ¥â€”â€”å³ä½¿æ˜¯å…ˆåˆ›å»ºäº†å®ä¾‹åä¿®æ”¹åŸå‹ä¹Ÿç…§æ ·å¦‚æ­¤</p>
<h4 id="åŸå‹æ¨¡å¼çš„ç¼ºç‚¹"> åŸå‹æ¨¡å¼çš„ç¼ºç‚¹</h4>
<p>åŸå‹æ¨¡å¼çš„æœ€å¤§é—®é¢˜æ˜¯ç”±å…¶å…±äº«çš„æœ¬æ€§æ‰€å¯¼è‡´çš„ã€‚
åŸå‹ä¸­æ‰€æœ‰å±æ€§æ˜¯è¢«å¾ˆå¤šå®ä¾‹å…±äº«çš„ï¼Œè¿™ç§å…±äº«å¯¹äºå‡½æ•°éå¸¸åˆé€‚ã€‚å¯¹äºé‚£äº›åŒ…å«åŸºæœ¬å€¼çš„å±æ€§å€’ä¹Ÿè¯´å¾—è¿‡å»ï¼Œæ¯•ç«Ÿï¼Œé€šè¿‡åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€ä¸ªåŒåå±æ€§ï¼Œå¯ä»¥éšè—åŸå‹ä¸­çš„å¯¹åº”å±æ€§ã€‚ç„¶è€Œï¼Œå¯¹äºåŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å±æ€§æ¥è¯´ï¼Œé—®é¢˜å°±æ¯”è¾ƒçªå‡ºäº†ã€‚</p>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>)</span><span>{</span><span>}</span><span>;</span>
<span>Person</span><span>.</span>prototype <span>=</span> <span>{</span>
    name<span>:</span> <span>"wyz"</span><span>,</span>
    age<span>:</span> <span>21</span><span>,</span>
    friends<span>:</span> <span>[</span><span>"cl"</span><span>,</span> <span>"gtl"</span><span>]</span><span>,</span>
    <span>sayHi</span><span>:</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span><span>}</span>
<span>}</span>
<span>var</span> p1 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>)</span><span>;</span>
p1<span>.</span>friends<span>.</span><span>push</span><span>(</span><span>"jiege"</span><span>)</span><span>;</span>
<span>var</span> p2 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>)</span><span>;</span>
<span>alert</span><span>(</span>p2<span>.</span>friends<span>)</span><span>;</span> <span>// "cl", "glt", "jiege"</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h3 id="ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼"> ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼</h3>
<p>åˆ›å»ºè‡ªå®šä¹‰ç±»å‹çš„æœ€å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼ã€‚æ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼Œè€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«çš„å±æ€§ã€‚
è¿™æ ·ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¼šæœ‰è‡ªå·±çš„ä¸€ä»½å®ä¾‹å±æ€§çš„å‰¯æœ¬ï¼Œä½†åŒæ—¶åˆå…±äº«ç€å¯¹æ–¹æ³•çš„å¼•ç”¨ï¼Œæœ€å¤§é™åº¦åœ°èŠ‚çœäº†å†…å­˜ã€‚å¦å¤–ï¼Œè¿™ç§æ··æˆæ¨¡å¼è¿˜æ”¯æŒå‘æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ï¼›å¯è°“æ˜¯é›†ä¸¤ç§æ¨¡å¼ä¹‹é•¿ã€‚ğŸ‘</p>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>name<span>,</span> age</span><span>)</span>
<span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
<span>}</span>

<span>Person</span><span>.</span>prototype <span>=</span> <span>{</span>
    constructor<span>:</span> Person<span>,</span>
    <span>sayHi</span><span>:</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
        <span>alert</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span>
    <span>}</span>
<span>}</span>

<span>var</span> p1 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"wyz"</span><span>,</span> <span>21</span><span>)</span><span>;</span>
<span>var</span> p2 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"gtl"</span><span>,</span> <span>22</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h3 id="åŠ¨æ€åŸå‹æ¨¡å¼"> åŠ¨æ€åŸå‹æ¨¡å¼</h3>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>name<span>,</span> age</span><span>)</span>
<span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>this</span><span>.</span>age <span>=</span> age<span>;</span>

    <span>if</span> <span>(</span><span>typeof</span> <span>this</span><span>.</span>sayHi <span>!=</span> <span>"function"</span><span>)</span>
    <span>{</span>
        <span>Person</span><span>.</span>prototype<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"says Hi"</span><span>)</span><span>}</span><span>;</span>
    <span>}</span>
    <span>...</span>
<span>}</span>

<span>var</span> p1 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"wyz"</span><span>,</span> <span>21</span><span>)</span><span>;</span>
<span>var</span> p2 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"gtl"</span><span>,</span> <span>22</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><p>ifè¯­å¥æ£€æŸ¥çš„å¯ä»¥æ˜¯åˆå§‹åŒ–ä¹‹ååº”è¯¥å­˜åœ¨çš„ä»»ä½•å±æ€§æˆ–æ–¹æ³•â€”â€”ä¸å¿…ç”¨ä¸€å¤§å †ifè¯­å¥æ£€æŸ¥æ¯ä¸ªå±æ€§å’Œæ¯ä¸ªæ–¹æ³•ï¼›åªè¦æ£€æŸ¥å…¶ä¸­ä¸€ä¸ªå³å¯ã€‚</p>
<h3 id="å¯„ç”Ÿæ„é€ å‡½æ•°"> å¯„ç”Ÿæ„é€ å‡½æ•°</h3>
<p>è¿™ç§æ¨¡å¼çš„åŸºæœ¬æ€æƒ³æ˜¯åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨ä»…ä»…æ˜¯å°è£…åˆ›å»ºå¯¹è±¡çš„ä»£ç ï¼Œç„¶åå†è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡</p>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>name<span>,</span> age</span><span>)</span>
<span>{</span>
    <span>var</span> o <span>=</span> <span>new</span> <span>Object</span><span>(</span><span>)</span><span>;</span> <span>// å¾—åˆ°æ‰©å……ç‰ˆObjectå¯¹è±¡(æˆ–Arrayå¯¹è±¡ç­‰)</span>
    o<span>.</span>name <span>=</span> name<span>;</span>
    o<span>.</span>age <span>=</span> age<span>;</span>
    o<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"says Hi"</span><span>)</span><span>}</span><span>;</span>
    <span>return</span> o<span>;</span>
<span>}</span>

<span>var</span> p1 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"wyz"</span><span>,</span> <span>21</span><span>)</span><span>;</span>
<span>var</span> p2 <span>=</span> <span>new</span> <span>Person</span><span>(</span><span>"gtl"</span><span>,</span> <span>22</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>é™¤äº†ä½¿ç”¨newæ“ä½œç¬¦å¹¶æŠŠä½¿ç”¨çš„åŒ…è£…å‡½æ•°å«åšæ„é€ å‡½æ•°ä¹‹å¤–ï¼Œè¿™ä¸ªæ¨¡å¼è·Ÿå·¥å‚æ¨¡å¼å…¶å®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼å¯ä»¥åœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹ç”¨æ¥ä¸ºå¯¹è±¡åˆ›å»ºæ„é€ å‡½æ•°ã€‚å‡è®¾æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå…·æœ‰é¢å¤–æ–¹æ³•çš„ç‰¹æ®Šæ•°ç»„ã€‚ç”±äºä¸èƒ½ç›´æ¥ä¿®æ”¹Arrayæ„é€ å‡½æ•°ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¨¡å¼ã€‚</p>
<p>å…³äºå¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ï¼Œæœ‰ä¸€ç‚¹éœ€è¦è¯´æ˜ï¼šé¦–å…ˆï¼Œè¿”å›çš„å¯¹è±¡ä¸æ„é€ å‡½æ•°æˆ–è€…ä¸æ„é€ å‡½æ•°çš„åŸå‹å±æ€§ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸åœ¨æ„é€ å‡½æ•°å¤–éƒ¨åˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚ä¸ºæ­¤ï¼Œä¸èƒ½ä¾èµ–instanceofæ“ä½œç¬¦æ¥ç¡®å®šå¯¹è±¡ç±»å‹ã€‚</p>
<h3 id="ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼"> ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼</h3>
<p>æ‰€è°“ç¨³å¦¥å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰å…¬å…±å±æ€§ï¼Œè€Œä¸”å…¶æ–¹æ³•ä¹Ÿä¸å¼•ç”¨thisçš„å¯¹è±¡ã€‚ç¨³å¦¥å¯¹è±¡æœ€é€‚åˆåœ¨ä¸€äº›å®‰å…¨çš„ç¯å¢ƒä¸­ï¼ˆè¿™äº›ç¯å¢ƒä¸­ä¼šç¦æ­¢ä½¿ç”¨thiså’Œnewï¼‰ï¼Œæˆ–è€…åœ¨é˜²æ­¢æ•°æ®è¢«å…¶ä»–åº”ç”¨ç¨‹åºï¼ˆå¦‚Mashupç¨‹åºï¼‰æ”¹åŠ¨æ—¶ä½¿ç”¨ã€‚ä¸å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå®ä¾‹ä¸ç”¨newæ“ä½œç¬¦æ„é€ (å› æ­¤æ–¹æ³•ä¸å¼•ç”¨thiså¯¹è±¡)ï¼Œè€Œä¸”åªå®šä¹‰æ–¹æ³•ï¼Œä¸å®šä¹‰å±æ€§ã€‚</p>
<div><pre><code><span>function</span> <span>Person</span><span>(</span><span>name<span>,</span> age</span><span>)</span>
<span>{</span>
    <span>var</span> o <span>=</span> <span>new</span> <span>Object</span><span>(</span><span>)</span><span>;</span>
    <span>// è¿™é‡Œå¯ä»¥å®šä¹‰ç§æœ‰å˜é‡å’Œå‡½æ•°ã€‚ç§æœ‰å˜é‡å¾ˆå®‰å…¨ï¼Œåªæœ‰ç§æœ‰å‡½æ•°èƒ½è®¿é—®ã€‚</span>
    o<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span>name<span>)</span><span>}</span><span>;</span>
    <span>return</span> o<span>;</span>
<span>}</span>

<span>var</span> p1 <span>=</span> <span>Person</span><span>(</span><span>"wyz"</span><span>,</span> <span>21</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>å˜é‡p1ä¸­ä¿å­˜çš„æ˜¯ä¸€ä¸ªç¨³å¦¥å¯¹è±¡ï¼Œè€Œé™¤äº†è°ƒç”¨sayHi()æ–¹æ³•å¤–ï¼Œæ²¡æœ‰åˆ«çš„æ–¹å¼å¯ä»¥è®¿é—®å…¶æ•°æ®æˆå‘˜ã€‚å³ä½¿æœ‰å…¶ä»–ä»£ç ä¼šç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ æ–¹æ³•æˆ–æ•°æ®æˆå‘˜ï¼Œä½†ä¹Ÿä¸å¯èƒ½æœ‰åˆ«çš„åŠæ³•è®¿é—®ä¼ å…¥åˆ°æ„é€ å‡½æ•°ä¸­çš„åŸå§‹æ•°æ®ã€‚</p>
<p>ä¸å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ç±»ä¼¼ï¼Œä½¿ç”¨ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡ä¸æ„é€ å‡½æ•°ä¹‹é—´ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œå› æ­¤instanceofæ“ä½œç¬¦å¯¹è¿™ç§å¯¹è±¡ä¹Ÿæ²¡æœ‰æ„ä¹‰ã€‚</p>
<h2 id="ç»§æ‰¿"> ç»§æ‰¿</h2>
<h3 id="åŸå‹é“¾"> åŸå‹é“¾</h3>
<p>ECMAScriptä¸­æè¿°äº†åŸå‹é“¾çš„æ¦‚å¿µï¼Œå¹¶å°†åŸå‹é“¾ä½œä¸ºå®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹æ³•ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•ã€‚
åŸºæœ¬æ¨¡å¼å¦‚ä¸‹</p>
<div><div><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br></div><pre><code><span>function</span> <span>BaseClass</span><span>(</span><span>)</span><span>{</span><span>this</span><span>.</span>baseProp <span>=</span> <span>"base"</span><span>;</span><span>}</span>
<span>BaseClass</span><span>.</span>prototype<span>.</span><span>baseFunc</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span>
    <span>return</span> <span>this</span><span>.</span>baseProp<span>;</span>
<span>}</span><span>;</span>

<span>function</span> <span>DerivedClass</span><span>(</span><span>)</span><span>{</span><span>this</span><span>.</span>derivedProp <span>=</span> <span>"derived"</span><span>;</span><span>}</span><span>;</span>
<span>// ç»§æ‰¿äº†BaseClass</span>
<span>DerivedClass</span><span>.</span>prototype <span>=</span> <span>new</span> <span>BaseClass</span><span>(</span><span>)</span><span>;</span> <span>// æ›¿æ¢åŸå‹å¿…é¡»åœ¨æ·»åŠ æ–¹æ³•å‰ï¼Œå¦åˆ™ç™½åŠ ã€‚</span>
<span>DerivedClass</span><span>.</span>prototype<span>.</span><span>derivedFunc</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span>
    <span>return</span> <span>this</span><span>.</span>derivedProp<span>;</span>
<span>}</span><span>;</span>

<span>var</span> instance <span>=</span> <span>new</span> <span>DerivedClass</span><span>(</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>instance<span>.</span><span>baseFunc</span><span>(</span><span>)</span><span>)</span><span>;</span> <span>// "base"</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><p>æœ¬ä¾‹çš„åŸå‹é“¾å¤§æ¦‚é•¿è¿™æ ·ğŸ˜†
instance.__proto__--&gt;DerivedClass.prototype(å³new BaseClass())--&gt;BaseClass.prototype--&gt;Object.prototype</p>
<p>åŸå‹é“¾çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ¥è‡ªåŒ…å«å¼•ç”¨ç±»å‹å€¼çš„åŸå‹ã€‚åŒ…å«å¼•ç”¨ç±»å‹å€¼çš„åŸå‹å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼›è€Œè¿™ä¹Ÿæ­£æ˜¯ä¸ºä»€ä¹ˆè¦åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œè€Œä¸æ˜¯åœ¨åŸå‹å¯¹è±¡ä¸­å®šä¹‰å±æ€§çš„åŸå› ã€‚</p>
<p>åŸå‹é“¾çš„ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼šåœ¨åˆ›å»ºå­ç±»å‹çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’å‚æ•°ã€‚å®é™…ä¸Šï¼Œåº”è¯¥è¯´æ˜¯æ²¡æœ‰åŠæ³•åœ¨ä¸å½±å“æ‰€æœ‰å¯¹è±¡å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œç»™è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ã€‚</p>
<h3 id="å€Ÿç”¨æ„é€ å‡½æ•°-constructor-stealing"> å€Ÿç”¨æ„é€ å‡½æ•°(constructor stealing)</h3>
<p>è¿™ç§æŠ€æœ¯çš„åŸºæœ¬æ€æƒ³ç›¸å½“ç®€å•ï¼Œå³åœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°ã€‚</p>
<div><div><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br></div><pre><code><span>function</span> <span>Base</span><span>(</span><span>)</span><span>{</span>
    <span>this</span><span>.</span>colors <span>=</span> <span>[</span><span>"red"</span><span>,</span> <span>"green"</span><span>,</span> <span>"blue"</span><span>]</span><span>;</span>
<span>}</span><span>;</span>

<span>function</span> <span>Derived</span><span>(</span><span>)</span><span>{</span>
    <span>// ç»§æ‰¿ã€‚ç”¨ apply(this)ä¹Ÿè¡Œ</span>
    <span>Base</span><span>.</span><span>call</span><span>(</span><span>this</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
<span>var</span> instance1 <span>=</span> <span>new</span> <span>Derived</span><span>(</span><span>)</span><span>;</span>
instance1<span>.</span>colors<span>.</span><span>push</span><span>(</span><span>"black"</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>instance1<span>.</span>colors<span>)</span><span>;</span><span>// å¤šä¸€ä¸ª "black"</span>
<span>var</span> instance2 <span>=</span> <span>new</span> <span>Derived</span><span>(</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>instance1<span>.</span>colors<span>)</span><span>;</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><p>è¿™æ ·ä¸€æ¥ï¼Œå°±ä¼šåœ¨æ–°SubTypeå¯¹è±¡ä¸Šæ‰§è¡ŒSuperType()å‡½æ•°ä¸­å®šä¹‰çš„æ‰€æœ‰å¯¹è±¡åˆå§‹åŒ–ä»£ç ã€‚ç»“æœï¼ŒSubTypeçš„æ¯ä¸ªå®ä¾‹å°±éƒ½ä¼šå…·æœ‰è‡ªå·±çš„colorså±æ€§çš„å‰¯æœ¬äº†ã€‚</p>
<p>ç›¸å¯¹äºåŸå‹é“¾è€Œè¨€ï¼Œå€Ÿç”¨æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œå³å¯ä»¥åœ¨å­ç±»å‹æ„é€ å‡½æ•°ä¸­å‘è¶…ç±»å‹æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ã€‚</p>
<div><div><br><br><br><br><br><br><div>&nbsp;</div><br><br><br></div><pre><code><span>function</span> <span>Base</span><span>(</span><span>name</span><span>)</span><span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
<span>}</span><span>;</span>

<span>function</span> <span>Derived</span><span>(</span><span>)</span><span>{</span>
    <span>// ç»§æ‰¿ã€‚ç”¨ apply(this)ä¹Ÿè¡Œ</span>
    <span>Base</span><span>.</span><span>call</span><span>(</span><span>this</span><span>,</span> <span>"wyz"</span><span>)</span><span>;</span>
    <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
<span>}</span><span>;</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>è¿™è¿˜ä¸å¤Ÿã€‚</p>
<h3 id="ç»„åˆç»§æ‰¿"> ç»„åˆç»§æ‰¿</h3>
<div><pre><code><span>function</span> <span>Base</span><span>(</span><span>name</span><span>)</span><span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>this</span><span>.</span>colors <span>=</span> <span>[</span><span>"red"</span><span>,</span> <span>"green"</span><span>,</span> <span>"blue"</span><span>]</span><span>;</span>
<span>}</span><span>;</span>
<span>Base</span><span>.</span>prototype<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span><span>}</span><span>;</span>

<span>function</span> <span>Derived</span><span>(</span><span>name<span>,</span> age</span><span>)</span><span>{</span>
    <span>// ç»§æ‰¿å±æ€§</span>
    <span>Base</span><span>.</span><span>call</span><span>(</span><span>this</span><span>,</span> name<span>)</span><span>;</span>
    <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
<span>}</span><span>;</span>
<span>// ç»§æ‰¿æ–¹æ³•</span>
<span>Derived</span><span>.</span>prototype <span>=</span> <span>new</span> <span>Base</span><span>(</span><span>)</span><span>;</span>
<span>Derived</span><span>.</span>prototype<span>.</span>constructor <span>=</span> Derived<span>;</span>
<span>// å­ç±»å®šä¹‰æ–°æ–¹æ³•</span>
<span>Derived</span><span>.</span>prototype<span>.</span><span>printAge</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>age<span>;</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p>ä½¿ç”¨å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ï¼Œä½¿ç”¨åŸå‹é“¾ç»§æ‰¿æ–¹æ³•ã€‚ğŸ‘ğŸ‘ğŸ‘</p>
<h3 id="åŸå‹å¼ç»§æ‰¿"> åŸå‹å¼ç»§æ‰¿</h3>
<div><pre><code><span>function</span> <span>object</span><span>(</span><span>o</span><span>)</span>
<span>{</span>
    <span>function</span> <span>F</span><span>(</span><span>)</span><span>{</span><span>}</span><span>;</span>
    <span>F</span><span>.</span>prototype <span>=</span> o<span>;</span>
    <span>return</span> <span>new</span> <span>F</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>åœ¨object()å‡½æ•°å†…éƒ¨ï¼Œå…ˆåˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ€§çš„æ„é€ å‡½æ•°ï¼Œç„¶åå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºè¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ï¼Œæœ€åè¿”å›äº†è¿™ä¸ªä¸´æ—¶ç±»å‹çš„ä¸€ä¸ªæ–°å®ä¾‹ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œobject()å¯¹ä¼ å…¥å…¶ä¸­çš„å¯¹è±¡æ‰§è¡Œäº†ä¸€æ¬¡æµ…å¤åˆ¶ã€‚
å…‹ç½—å…‹ç¦å¾·ä¸»å¼ çš„è¿™ç§åŸå‹å¼ç»§æ‰¿ï¼Œè¦æ±‚ä½ å¿…é¡»æœ‰ä¸€ä¸ªå¯¹è±¡å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸºç¡€ã€‚å¦‚æœæœ‰è¿™ä¹ˆä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œå¯ä»¥æŠŠå®ƒä¼ é€’ç»™object()å‡½æ•°ï¼Œç„¶åå†æ ¹æ®å…·ä½“éœ€æ±‚å¯¹å¾—åˆ°çš„å¯¹è±¡åŠ ä»¥ä¿®æ”¹å³å¯ã€‚</p>
<p>ECMAScript 5é€šè¿‡æ–°å¢Object.create()æ–¹æ³•è§„èŒƒåŒ–äº†åŸå‹å¼ç»§æ‰¿ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªç”¨ä½œæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡å’Œï¼ˆå¯é€‰çš„ï¼‰ä¸€ä¸ªä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡ã€‚åœ¨ä¼ å…¥ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼ŒObject.create()ä¸object()æ–¹æ³•çš„è¡Œä¸ºç›¸åŒã€‚</p>
<p>åœ¨åªæƒ³<strong>è®©ä¸€ä¸ªå¯¹è±¡ä¸å¦ä¸€ä¸ªå¯¹è±¡ä¿æŒç±»ä¼¼</strong>çš„æƒ…å†µä¸‹ï¼ŒåŸå‹å¼ç»§æ‰¿æ˜¯å®Œå…¨å¯ä»¥èƒœä»»çš„ã€‚ä¸è¿‡åˆ«å¿˜äº†ï¼ŒåŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å±æ€§å§‹ç»ˆéƒ½ä¼šå…±äº«ç›¸åº”çš„å€¼ï¼Œå°±åƒä½¿ç”¨åŸå‹æ¨¡å¼ä¸€æ ·ã€‚</p>
<h3 id="å¯„ç”Ÿå¼ç»§æ‰¿"> å¯„ç”Ÿå¼ç»§æ‰¿</h3>
<div><pre><code><span>function</span> <span>another</span><span>(</span><span>original</span><span>)</span>
<span>{</span>
    clone <span>=</span> <span>object</span><span>(</span>original<span>)</span><span>;</span>
    clone<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>"Hi"</span><span>)</span><span>}</span><span>;</span>
    <span>return</span> clone<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>another() è¿”å›çš„å¯¹è±¡åŸå‹æ˜¯originalï¼Œå¹¶æ·»åŠ äº†é¢å¤–çš„sayHi()å‡½æ•°ã€‚å…¶å®å°±æ˜¯æŠŠæ·»åŠ å‡½æ•°çš„è¡Œä¸ºç¡¬ç¼–ç åˆ°å‡½æ•°ä¸­å»äº†ã€‚</p>
<p>åœ¨ä¸»è¦è€ƒè™‘å¯¹è±¡è€Œä¸æ˜¯è‡ªå®šä¹‰ç±»å‹å’Œæ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿ä¹Ÿæ˜¯ä¸€ç§æœ‰ç”¨çš„æ¨¡å¼ã€‚å‰é¢ç¤ºèŒƒç»§æ‰¿æ¨¡å¼æ—¶ä½¿ç”¨çš„object()å‡½æ•°ä¸æ˜¯å¿…éœ€çš„ï¼›ä»»ä½•èƒ½å¤Ÿè¿”å›æ–°å¯¹è±¡çš„å‡½æ•°éƒ½é€‚ç”¨äºæ­¤æ¨¡å¼ã€‚</p>
<p>ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ä¸ºå¯¹è±¡æ·»åŠ å‡½æ•°ï¼Œä¼šç”±äºä¸èƒ½åšåˆ°å‡½æ•°å¤ç”¨è€Œé™ä½æ•ˆç‡ï¼›è¿™ä¸€ç‚¹ä¸æ„é€ å‡½æ•°æ¨¡å¼ç±»ä¼¼ã€‚</p>
<h3 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"> å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h3>
<p>å‰é¢è¯´è¿‡ï¼Œç»„åˆç»§æ‰¿æ˜¯JavaScriptæœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼ï¼›ä¸è¿‡ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„ä¸è¶³ã€‚<strong>ç»„åˆç»§æ‰¿æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œéƒ½ä¼šè°ƒç”¨ä¸¤æ¬¡è¶…ç±»å‹æ„é€ å‡½æ•°</strong>ï¼šä¸€æ¬¡æ˜¯åœ¨åˆ›å»ºå­ç±»å‹åŸå‹çš„æ—¶å€™ï¼Œå¦ä¸€æ¬¡æ˜¯åœ¨å­ç±»å‹æ„é€ å‡½æ•°å†…éƒ¨ã€‚æ²¡é”™ï¼Œå­ç±»å‹æœ€ç»ˆä¼šåŒ…å«è¶…ç±»å‹å¯¹è±¡çš„å…¨éƒ¨å®ä¾‹å±æ€§ï¼Œä½†æˆ‘ä»¬ä¸å¾—ä¸åœ¨è°ƒç”¨å­ç±»å‹æ„é€ å‡½æ•°æ—¶é‡å†™è¿™äº›å±æ€§</p>
<p>å¥½åœ¨æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†è§£å†³è¿™ä¸ªé—®é¢˜æ–¹æ³•â€”â€”å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ã€‚æ‰€è°“å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œå³é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§ï¼Œé€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•ã€‚å…¶èƒŒåçš„åŸºæœ¬æ€è·¯æ˜¯ï¼šä¸å¿…ä¸ºäº†æŒ‡å®šå­ç±»å‹çš„åŸå‹è€Œè°ƒç”¨è¶…ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„æ— éå°±æ˜¯è¶…ç±»å‹åŸå‹çš„ä¸€ä¸ªå‰¯æœ¬è€Œå·²ã€‚æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿è¶…ç±»å‹çš„åŸå‹ï¼Œç„¶åå†å°†ç»“æœæŒ‡å®šç»™å­ç±»å‹çš„åŸå‹ã€‚å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„åŸºæœ¬æ¨¡å¼å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<div><pre><code><span>function</span> <span>inheritPrototype</span><span>(</span><span>Derived<span>,</span> Base</span><span>)</span><span>{</span>
    <span>var</span> prototype <span>=</span> <span>object</span><span>(</span><span>Base</span><span>.</span>prototype<span>)</span><span>;</span>    <span>// åˆ›å»ºå¯¹è±¡</span>
    prototype<span>.</span>constructor <span>=</span> Derived<span>;</span> <span>//å¢å¼ºå¯¹è±¡</span>
    <span>Derived</span><span>.</span>prototype <span>=</span> prototype<span>;</span>   <span>// æŒ‡å®šå¯¹è±¡</span>
<span>}</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>åº”ç”¨æ–¹æ³•</p>
<div><div><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br></div><pre><code><span>function</span> <span>Base</span><span>(</span><span>name</span><span>)</span><span>{</span>
    <span>this</span><span>.</span>name <span>=</span> name<span>;</span>
    <span>this</span><span>.</span>colors <span>=</span> <span>[</span><span>"red"</span><span>,</span> <span>"green"</span><span>,</span> <span>"blue"</span><span>]</span><span>;</span>
<span>}</span><span>;</span>
<span>Base</span><span>.</span>prototype<span>.</span><span>sayHi</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span><span>alert</span><span>(</span><span>this</span><span>.</span>name<span>)</span><span>;</span><span>}</span><span>;</span>

<span>function</span> <span>Derived</span><span>(</span><span>name<span>,</span> age</span><span>)</span><span>{</span>
    <span>Base</span><span>.</span><span>call</span><span>(</span><span>this</span><span>,</span> name<span>)</span><span>;</span>
    <span>this</span><span>.</span>age <span>=</span> age<span>;</span>
<span>}</span><span>;</span>
<span>// ç»§æ‰¿æ–¹æ³•</span>
<span>inheritPrototype</span><span>(</span>Derived<span>,</span> Base<span>)</span><span>;</span> <span>// è¿™é‡Œçœäº†ä¸€ä¸ª new Base()</span>
<span>// å­ç±»å®šä¹‰æ–°æ–¹æ³•</span>
<span>Derived</span><span>.</span>prototype<span>.</span><span>printAge</span> <span>=</span> <span>function</span><span>(</span><span>)</span><span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>age<span>;</span><span>)</span><span>;</span>
<span>}</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>Derived</span><span>.</span>prototype<span>.</span>__proto__ <span>==</span> <span>Base</span><span>.</span>prototype<span>)</span><span>// true</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p>è¿™ä¸ªä¾‹å­çš„é«˜æ•ˆç‡ä½“ç°åœ¨å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡SuperTypeæ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨SubType.prototypeä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨instanceofå’ŒisPrototypeOf()ã€‚å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">èµ„æºä¸å·¥å…·</title>
    <id>https://kigane.github.io/note/js/resources/</id>
    <link href="https://kigane.github.io/note/js/resources/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="è°·æ­Œå­—ä½“"> è°·æ­Œå­—ä½“</h2>
<p><a href="https://fonts.google.com/" target="_blank" rel="noopener noreferrer">è°·æ­Œå­—ä½“ç½‘ç«™</a><br>
é€‰ä¸­å­—ä½“åï¼Œç‚¹å‡»select this styleã€‚åœ¨å³è¾¹å¼¹çª—ä¸­å¤åˆ¶<code>&lt;lilnk&gt;</code>éƒ¨åˆ†åˆ°htmlä¸­ï¼Œå¤åˆ¶<code>@import</code>éƒ¨åˆ†åˆ°cssä¸­ã€‚è¦ä½¿ç”¨å­—ä½“æ—¶ï¼Œå¤åˆ¶ä¸‹æ–¹çš„CSS ruleså³å¯æŒ‡å®šå­—ä½“ã€‚</p>
<h2 id="font-awesome"> font-awesome</h2>
<p><a href="https://fontawesome.com/v5/cheatsheet" target="_blank" rel="noopener noreferrer">FontAwesome</a><br>
åœ¨index.htmlçš„headæœ€åæ·»åŠ : <code>&lt;script src=&quot;https://kit.fontawesome.com/b9d02be592.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;</code></p>
<h2 id="serve"> serve</h2>
<p>npm i -g serve<br>
serve -s /path/to/dist</p>
<h2 id="json-serve"> json-serve</h2>
<p>npm i -g json-server<br>
json-server --watch db.json --port 5000</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">OpenGLåŸºç¡€</title>
    <id>https://kigane.github.io/note/opengl/</id>
    <link href="https://kigane.github.io/note/opengl/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Vue.js</title>
    <id>https://kigane.github.io/note/js/vue/</id>
    <link href="https://kigane.github.io/note/js/vue/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="åŸºç¡€"> åŸºç¡€</h2>
<h2 id="æ·±å…¥"> æ·±å…¥</h2>
<h3 id="data"> data</h3>
<p>vueç»„ä»¶ä¸­dataä¸­å®šä¹‰çš„æ•°ç»„ï¼Œå¯¹è±¡ï¼Œå®é™…ç±»å‹æ˜¯Proxyï¼Œéƒ½ä½¿ç”¨äº†ä»£ç†ã€‚</p>
<h3 id="å…¨å±€å˜é‡"> å…¨å±€å˜é‡</h3>
<div><pre><code><span>const</span> app <span>=</span> <span>createApp</span><span>(</span>App<span>)</span>
app<span>.</span>config<span>.</span>globalProperties<span>.</span>$foo <span>=</span> <span>'bar'</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p>æˆ–ä½¿ç”¨provide/inject<br>
çˆ¶ç»„ä»¶ä¸­ç”¨provideé€‰é¡¹æä¾›æ•°æ®ï¼Œå­ç»„ä»¶ä¸­ç”¨injecté€‰é¡¹ä½¿ç”¨è¯¥æ•°æ®ã€‚</p>
<div><pre><code><span>/*
Root
â””â”€ TodoList
   â”œâ”€ TodoItem
   â””â”€ TodoListFooter
      â”œâ”€ ClearTodosButton
      â””â”€ TodoListStatistics
*/</span>

<span>const</span> app <span>=</span> Vue<span>.</span><span>createApp</span><span>(</span><span>{</span><span>}</span><span>)</span>

app<span>.</span><span>component</span><span>(</span><span>'todo-list'</span><span>,</span> <span>{</span>
  <span>data</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>{</span>
      todos<span>:</span> <span>[</span><span>'Feed a cat'</span><span>,</span> <span>'Buy tickets'</span><span>]</span>
    <span>}</span>
  <span>}</span><span>,</span>
  <span>provide</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>{</span>
        user<span>:</span> <span>'John Doe'</span>
    <span>}</span>
  <span>}</span><span>,</span>
  template<span>:</span> <span><span>`</span><span>
    &lt;div>
      {{ todos.length }}
      &lt;!-- rest of the template -->
    &lt;/div>
  </span><span>`</span></span>
<span>}</span><span>)</span>

app<span>.</span><span>component</span><span>(</span><span>'todo-list-statistics'</span><span>,</span> <span>{</span>
  inject<span>:</span> <span>[</span><span>'user'</span><span>]</span><span>,</span>
  <span>created</span><span>(</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span><span>`</span><span>Injected property: </span><span><span>${</span><span>this</span><span>.</span>user<span>}</span></span><span>`</span></span><span>)</span> <span>// > Injected property: John Doe</span>
  <span>}</span>
<span>}</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br></div></div><h3 id="router-link"> router-link</h3>
<ul>
<li>å½“router-linkçš„ç›®æ ‡è·¯å¾„å¯ä»¥å’Œå½“å‰è·¯å¾„åŒ¹é…(ä¾‹å¦‚ï¼Œå½“å‰/foo/barï¼Œå¯ä»¥åŒ¹é…/,/foo,/foo/barä¸‰ä¸ªç›®æ ‡è·¯å¾„)æ—¶ï¼Œè¯¥router-linkæ ‡ç­¾ä¼šè‡ªåŠ¨æ·»åŠ ç±».router-link-active</li>
<li>å½“router-linkçš„ç›®æ ‡è·¯å¾„å¯ä»¥å’Œå½“å‰è·¯å¾„å®Œå…¨åŒ¹é…(ä¸€æ¨¡ä¸€æ ·)æ—¶ï¼Œè¯¥router-linkæ ‡ç­¾ä¼šè‡ªåŠ¨æ·»åŠ ç±».router-link-exact-active</li>
<li>å¯ä»¥åœ¨router-linkæ ‡ç­¾ä¸ŠåŠ exactå±æ€§ï¼Œè¿™æ ·åªæœ‰åœ¨å®Œå…¨åŒ¹é…æ—¶æ‰ä¼šæ·»åŠ ç±».router-link-activeã€‚é€šå¸¸ä¼šç”¨äºto='/'çš„router-link</li>
<li><code>&lt;router-link to=&quot;/foo/bar&quot;&gt;&lt;/router-link&gt;</code> æ™®é€šçš„router-linkå†™æ³•</li>
<li><code>&lt;router-link :to=&quot;{name = 'Foo', params = {id : 'bar'}}&quot;&gt;&lt;/router-link&gt;</code> è½¬åˆ°å·²å‘½åçš„è·¯ç”±çš„router-linkå†™æ³•</li>
<li>å¦ä¸€ç§åŠ¨æ€é“¾æ¥å†™æ³•</li>
</ul>
<div><pre><code><span><span><span>&lt;</span>router-link</span> <span>:to</span><span><span>=</span><span>"</span>`/foo/${id}`<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>router-link</span><span>></span></span> 
</code></pre>
<div><span>1</span><br></div></div><h3 id="nested-router-view"> nested router-view</h3>
<p>Homeç»„ä»¶ä¸­æœ‰ä¸€ä¸ªrouter-viewï¼Œè¿™ä¸ªrouter-viewå¯¹åº”çš„ç»„ä»¶ä¸­è¿˜æœ‰ä¸€ä¸ªrouter-viewã€‚åˆ™å†…å±‚router-viewå¯ä»¥å£°æ˜å¦‚ä¸‹ã€‚</p>
<div><pre><code><span>{</span>
    path<span>:</span> <span>'/home'</span><span>,</span>
    name<span>:</span> <span>'Home'</span><span>,</span>
    <span>component</span><span>:</span> <span>(</span><span>)</span> <span>=></span> <span>import</span><span>(</span><span>'@/views/Home.vue'</span><span>)</span><span>,</span>
    children<span>:</span> <span>[</span>
      <span>{</span>
        path<span>:</span> <span>':id'</span><span>,</span> <span>// åŒ¹é…/home/:id</span>
        name<span>:</span> <span>'Main'</span><span>,</span>
        <span>component</span><span>:</span> <span>(</span><span>)</span> <span>=></span> <span>import</span><span>(</span><span>'@/views/Main.vue'</span><span>)</span><span>,</span>
        props<span>:</span> <span>true</span> <span>// è®©Homeç»„ä»¶ä¸­çš„router-linkä¸­çš„è·¯å¾„å‚æ•°å¯ä»¥ä¼ å…¥Mainç»„ä»¶ï¼Œç”¨Mainçš„propsæ¥æ”¶ã€‚</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h3 id="named-router-view"> named router-view</h3>
<p>æ™®é€šçš„<code>&lt;router-view /&gt;</code>é»˜è®¤ä½¿ç”¨routesä¸­çš„componentæŒ‡å®šçš„ç»„ä»¶ã€‚å¦‚æœä¸€ä¸ªé¡µé¢è¦æœ‰å¤šä¸ªrouter-viewï¼Œæ¯ä¸ªrouter-viewå¯¹åº”ä¸åŒçš„ç»„ä»¶ï¼Œåˆ™éœ€è¦ä¸ºrouter-viewæŒ‡å®šnameã€‚</p>
<div><pre><code><span>&lt;</span>router<span>-</span>view <span>/</span><span>></span>
<span>&lt;</span>router<span>-</span>view name<span>=</span><span>'a'</span> <span>/</span><span>></span>
<span>&lt;</span>router<span>-</span>view name<span>=</span><span>'b'</span> <span>/</span><span>></span>

<span>// åœ¨routesä¸­ï¼Œè¦ä¸ºæ¯ä¸ªrouter-viewæŒ‡å®šå¥½ç»„ä»¶ã€‚</span>
<span>{</span>
  path<span>:</span> <span>'xxx'</span><span>,</span>
  name<span>:</span> <span>'yyy'</span><span>,</span>
  component<span>:</span> <span>{</span>
    <span>default</span><span>:</span> ComponentDefault<span>,</span>
    a<span>:</span> ComponentA<span>,</span>
    b<span>:</span> ComponentB<span>,</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><h3 id="routeè·¯å¾„å‚æ•°-åŠ¨æ€é“¾æ¥"> routeè·¯å¾„å‚æ•°(åŠ¨æ€é“¾æ¥)</h3>
<div><pre><code><span>const</span> router <span>=</span> <span>new</span> <span>VueRouter</span><span>(</span><span>{</span>
  routes<span>:</span> <span>[</span>
    <span>// dynamic segments start with a colon</span>
    <span>{</span> path<span>:</span> <span>'/user/:id'</span><span>,</span> component<span>:</span> User<span>,</span> props<span>:</span> <span>true</span> <span>}</span>
  <span>]</span>
<span>}</span><span>)</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>pathä¸­çš„:idç§°ä¸ºdynamic segmentã€‚å¦‚æœpathåŒ¹é…åˆ°äº†ï¼Œåˆ™å¯ä»¥é€šè¿‡$route.params.idè®¿é—®åŒ¹é…åˆ°çš„idå€¼ã€‚<br>
å¦‚æœè·¯ç”±å¯¹è±¡çš„propsè®¾ä¸ºtrueï¼Œåˆ™å¯ç”±componentçš„propså±æ€§æ¥æ”¶è·¯å¾„å‚æ•°ã€‚</p>
<h3 id="å¦‚ä½•è·å–äº‹ä»¶çš„eventå¯¹è±¡"> å¦‚ä½•è·å–äº‹ä»¶çš„eventå¯¹è±¡</h3>
<p><code>@event=&quot;onEvent($event)</code>ï¼Œ<code>$event</code>ä¸ºåŸç”ŸDOMçš„äº‹ä»¶å¯¹è±¡ã€‚</p>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">eigenåº“</title>
    <id>https://kigane.github.io/note/opengl/eigen/</id>
    <link href="https://kigane.github.io/note/opengl/eigen/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="åŸºç¡€"> åŸºç¡€</h2>
<p>eigenåº“æ˜¯çº¯æ¨¡æ¿åº“ã€‚</p>
<h3 id="matrix"> Matrix</h3>
<ul>
<li><code>Matrix&lt;typename Scalar, int RowsAtCompileTime, int ColsAtCompileTime&gt;</code></li>
<li><code>typedef Matrix&lt;float, 4, 4&gt; Matrix4f;</code></li>
<li>æˆå‘˜å˜é‡
<ul>
<li>rows()</li>
<li>cols()</li>
<li>size() = rows() x cols()</li>
</ul>
</li>
</ul>
<h3 id="vector"> Vector</h3>
<ul>
<li>å‘é‡å®šä¹‰ä¸ºç‰¹æ®Šçš„çŸ©é˜µã€‚</li>
<li>é»˜è®¤ä¸ºåˆ—å‘é‡ï¼Œ<code>typedef Matrix&lt;float, 3, 1&gt; Vector3f;</code></li>
<li>è¡Œå‘é‡ï¼Œ<code>typedef Matrix&lt;int, 1, 2&gt; RowVector2i;</code></li>
</ul>
<h3 id="ç‰¹æ®Šå€¼dynamic"> ç‰¹æ®Šå€¼Dynamic</h3>
<ul>
<li>çŸ©é˜µçš„ç»´åº¦åœ¨ç¼–è¯‘æ—¶ä¸èƒ½ç¡®å®šæ—¶ï¼Œç”¨Dynamicè¡¨ç¤ºã€‚</li>
<li><code>typedef Matrix&lt;double, Dynamic, Dynamic&gt; MatrixXd;</code> è¡Œåˆ—éƒ½æœªçŸ¥</li>
<li><code>Matrix&lt;float, 3, Dynamic&gt;</code> å¯ä»¥åªæœ‰ä¸€ç»´æ˜¯æœªçŸ¥çš„</li>
</ul>
<h3 id="æ„é€ å™¨"> æ„é€ å™¨</h3>
<p>åªåˆ†é…å†…å­˜ï¼Œä¸ä¼šåˆå§‹åŒ–ã€‚æŒ‡å®šå¤§å°æ—¶å…ˆè¡Œååˆ—ã€‚</p>
<h3 id="è®¿é—®"> è®¿é—®</h3>
<p>çŸ©é˜µå’Œå‘é‡éƒ½å¯ä»¥ä½¿ç”¨å°æ‹¬å·è®¿é—®ã€‚å‘é‡è¿˜å¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·è®¿é—®ï¼Œå› ä¸ºC++ä¸å…è®¸ä¸­æ‹¬å·æ“ä½œç¬¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥çŸ©é˜µä¸èƒ½ç”¨ä¸­æ‹¬å·è®¿é—®ã€‚</p>
<h3 id="comma-initializer"> comma-initializer</h3>
<div><pre><code>Matrix3f m<span>;</span>
m <span>&lt;&lt;</span> <span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>,</span> <span>6</span><span>,</span> <span>7</span><span>,</span> <span>8</span><span>,</span> <span>9</span><span>;</span>
<span>/*
  1 2 3
  4 5 6
  7 8 9
*/</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h3 id="ç®—æœ¯è¿ç®—"> ç®—æœ¯è¿ç®—</h3>
<ul>
<li>çŸ©é˜µç»´åº¦å¿…é¡»ç›¸åŒï¼Œå…ƒç´ ç±»å‹ä¹Ÿå¿…é¡»ç›¸åŒã€‚eigenä¸ä¼šè‡ªåŠ¨åšç±»å‹è½¬æ¢ã€‚</li>
<li>çŸ©é˜µå’Œæ ‡é‡çš„é™¤æ³•ï¼Œæ ‡é‡å¿…é¡»æ˜¯é™¤æ•°ã€‚</li>
<li>eigenåœ¨è¿ç®—æ—¶è¿”å›çš„ä¸æ˜¯Matrixå¯¹è±¡ï¼Œè€Œæ˜¯&quot;experssion object&quot;ï¼Œè¿ç®—ç¬¦é‡è½½ä¸­æ²¡æœ‰å®é™…è¿›è¡Œè¿ç®—ï¼Œæœ€åèµ‹å€¼æ—¶ç»Ÿä¸€è¿›è¡Œï¼Œä»¥ä¾¿äºè®¡ç®—çš„ä¼˜åŒ–ã€‚</li>
<li>è½¬ç½®ï¼Œå…±è½­ï¼Œä¼´éšï¼Œé€†
<ul>
<li>m.transpose()</li>
<li>m.transposeInPlace() eigenå®ç°ä¸­a=a.transpose()ä¸ä¼šæ­£å¸¸å·¥ä½œï¼Œéœ€è¦ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</li>
<li>m.conjugate()</li>
<li>m.adjoint() For real matrices, conjugate() is a no-operation, and so adjoint() is equivalent to transpose().</li>
<li>m.inverse()</li>
</ul>
</li>
<li>ç‚¹ç§¯ï¼Œå‰ç§¯
<ul>
<li>v.dot(w) ç‚¹å‡»å¯ä»¥ä½¿ç”¨ä»»æ„ç»´åº¦çš„å‘é‡</li>
<li>v.cross(w) å‰ç§¯åªèƒ½ç”¨äºä¸‰ç»´å‘é‡</li>
</ul>
</li>
<li>reduction operations
<ul>
<li>m.sum() æ‰€æœ‰å…ƒç´ ä¹‹å’Œ</li>
<li>m.prod() æ‰€æœ‰å…ƒç´ ä¹‹ç§¯</li>
<li>m.mean() æ‰€æœ‰å…ƒç´ çš„å‡å€¼</li>
<li>m.maxCoeff() çŸ©é˜µä¸­çš„æœ€å¤§å…ƒç´ çš„å€¼</li>
<li>m.maxCoeff(&amp;i, &amp;j) çŸ©é˜µä¸­çš„æœ€å¤§å…ƒç´ çš„ä½ç½®å­˜å‚¨äºi,jä¸­ã€‚</li>
<li>m.minCoeff() çŸ©é˜µä¸­çš„æœ€å°å…ƒç´ çš„å€¼</li>
<li>m.minCoeff(&amp;i, &amp;j) çŸ©é˜µä¸­çš„æœ€å°å…ƒç´ çš„ä½ç½®å­˜å‚¨äºi,jä¸­ã€‚</li>
<li>m.trace() çŸ©é˜µçš„è¿¹ã€‚å¯¹è§’çº¿å…ƒç´ ä¹‹å’Œ</li>
</ul>
</li>
<li>Matrix3d.Random() ç”Ÿæˆ[-1, 1]ä¹‹é—´çš„éšæœºæ•°å¡«å……çŸ©é˜µã€‚å¯¹äºDynamicçš„çŸ©é˜µï¼Œéœ€è¦åˆ¶å®šè¡Œåˆ—æ•°ã€‚</li>
</ul>
<h3 id="array"> Array</h3>
<p>ä¸åŒäºMatrixç”¨äºå®ç°çº¿æ€§ä»£æ•°çš„è¿ç®—ã€‚Arrayä¸»è¦ç”¨äºåšä¸€äº›é€å…ƒç´ çš„æ“ä½œï¼Œæ¯”å¦‚å‘é‡çš„æ¯ä¸ªå…ƒç´ åŒæ—¶åŠ ä¸ŠæŸä¸ªå€¼ï¼Œæˆ–ä¸¤ä¸ªå‘é‡é€å…ƒç´ ç›¸ä¹˜ã€‚</p>
<ul>
<li><code>Array&lt;typename Scalar, int RowsAtCompileTime, int ColsAtCompileTime&gt;</code></li>
<li><code>typedef Array&lt;float,Dynamic,1&gt; ArrayXf</code></li>
<li><code>typedef Array&lt;float,3,1&gt; Array3f</code></li>
<li><code>typedef Array&lt;double,Dynamic,Dynamic&gt; ArrayXXd</code></li>
<li><code>typedef Array&lt;double,3,3&gt; Array33d</code></li>
</ul>
<h3 id="block"> Block</h3>
<h4 id="matrix-2"> Matrix</h4>
<p>Block of size (p,q), starting at (i,j)</p>
<ul>
<li>matrix.block(i,j,p,q);</li>
<li><code>matrix.block&lt;p,q&gt;(i,j)</code>;</li>
</ul>
<h4 id="vector-2"> Vector</h4>
<p>Block containing the first n elements *</p>
<ul>
<li>vector.head(n);</li>
<li><code>vector.head&lt;n&gt;()</code>;
Block containing the last n elements *</li>
<li>vector.tail(n);</li>
<li><code>vector.tail&lt;n&gt;()</code>;
Block containing n elements, starting at position i *</li>
<li>vector.segment(i,n);</li>
<li><code>vector.segment&lt;n&gt;(i)</code>;</li>
</ul>
<h2 id="ç¤ºä¾‹"> ç¤ºä¾‹</h2>
<div><pre><code><span><span>#</span><span>include</span> <span>&lt;iostream></span></span>
<span><span>#</span><span>include</span> <span>&lt;Eigen/Eigen></span></span>

<span>using</span> <span>namespace</span> std<span>;</span>
<span>using</span> <span>namespace</span> Eigen<span>;</span>

<span><span>#</span><span>define</span> <span>printe</span><span><span>(</span>x<span>)</span> cout <span>&lt;&lt;</span> endl <span>&lt;&lt;</span> x <span>&lt;&lt;</span> endl<span>;</span></span></span>

<span>void</span> <span>test1</span><span>(</span><span>)</span>
<span>{</span>
    Matrix2i mat<span>;</span>
    <span>mat</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>)</span> <span>=</span> <span>1</span><span>;</span>
    <span>mat</span><span>(</span><span>0</span><span>,</span> <span>1</span><span>)</span> <span>=</span> <span>2</span><span>;</span>
    <span>mat</span><span>(</span><span>1</span><span>,</span> <span>0</span><span>)</span> <span>=</span> <span>3</span><span>;</span>
    <span>mat</span><span>(</span><span>1</span><span>,</span> <span>1</span><span>)</span> <span>=</span> <span>4</span><span>;</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    <span>// çŸ©é˜µå¸¸è§åˆå§‹åŒ–æ“ä½œ</span>
    <span>// æ–¹å¼ä¸€</span>
    mat<span>.</span><span>setZero</span><span>(</span><span>)</span><span>;</span>  <span>// å…¨è®¾ä¸º0</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    mat<span>.</span><span>setOnes</span><span>(</span><span>)</span><span>;</span> <span>// å…¨è®¾ä¸º1</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    mat<span>.</span><span>setIdentity</span><span>(</span><span>)</span><span>;</span> <span>// å•ä½çŸ©é˜µ</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    mat<span>.</span><span>setConstant</span><span>(</span><span>7</span><span>)</span><span>;</span> <span>// å…¨è®¾ä¸ºæŸä¸ªå€¼</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    <span>// æ–¹å¼äºŒ</span>
    mat <span>=</span> <span>MatrixXi</span><span>::</span><span>Zero</span><span>(</span><span>2</span><span>,</span> <span>2</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    mat <span>=</span> <span>MatrixXi</span><span>::</span><span>Ones</span><span>(</span><span>2</span><span>,</span> <span>2</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    mat <span>=</span> <span>MatrixXi</span><span>::</span><span>Identity</span><span>(</span><span>2</span><span>,</span> <span>2</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    mat <span>=</span> <span>MatrixXi</span><span>::</span><span>Constant</span><span>(</span><span>2</span><span>,</span> <span>2</span><span>,</span> <span>7</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>
<span>}</span>

<span>void</span> <span>test2</span><span>(</span><span>)</span>
<span>{</span>
    <span>// block æ“ä½œ</span>
    Matrix4i mat<span>;</span>
    <span>int</span> k <span>=</span> <span>1</span><span>;</span>
    <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>4</span><span>;</span> i<span>++</span><span>)</span>
    <span>{</span>
        <span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> <span>4</span><span>;</span> j<span>++</span><span>)</span>
        <span>{</span>
            <span>mat</span><span>(</span>i<span>,</span> j<span>)</span> <span>=</span> k<span>++</span><span>;</span>
        <span>}</span>
    <span>}</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    MatrixXi mat_partitions<span>;</span>
    mat_partitions <span>=</span> mat<span>.</span><span>block</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>2</span><span>,</span> <span>2</span><span>)</span><span>;</span> <span>// å·¦ä¸Šè§’2x2çŸ©é˜µ</span>
    <span>//mat_partitions = mat.block(1, 1, 2, 2); // ä¸­é—´2x2çŸ©é˜µ</span>
    <span>printe</span><span>(</span>mat_partitions<span>)</span><span>;</span>

    mat<span>.</span><span>block</span><span>(</span><span>1</span><span>,</span> <span>1</span><span>,</span> <span>2</span><span>,</span> <span>2</span><span>)</span> <span>=</span> <span>MatrixXi</span><span>::</span><span>Constant</span><span>(</span><span>2</span><span>,</span> <span>2</span><span>,</span> <span>9</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>mat<span>)</span><span>;</span>

    <span>printe</span><span>(</span>mat<span>.</span><span>row</span><span>(</span><span>0</span><span>)</span><span>)</span><span>;</span>

    <span>printe</span><span>(</span>mat<span>.</span><span>col</span><span>(</span><span>0</span><span>)</span><span>)</span><span>;</span>

    <span>// ä½¿ç”¨å‘é‡æ„é€ å¯¹è§’çŸ©é˜µ</span>
    Vector3i vec<span>;</span>
    vec <span>&lt;&lt;</span> <span>1</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>;</span>
    MatrixXi diag<span>;</span>
    diag <span>=</span> vec<span>.</span><span>asDiagonal</span><span>(</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>diag<span>)</span><span>;</span>
<span>}</span>

<span>void</span> <span>test3</span><span>(</span><span>)</span>
<span>{</span>
    Matrix2d A<span>;</span>
    A <span>&lt;&lt;</span> <span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>;</span>
    Matrix2d G<span>;</span>
    G <span>=</span> A<span>.</span><span>inverse</span><span>(</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>G<span>)</span><span>;</span>
    <span>printe</span><span>(</span>A <span>*</span> G<span>)</span><span>;</span>
    A<span>.</span><span>transposeInPlace</span><span>(</span><span>)</span><span>;</span>
    <span>printe</span><span>(</span>A<span>)</span><span>;</span>
<span>}</span>

<span>int</span> <span>main</span><span>(</span><span>)</span>
<span>{</span> 
    <span>//test1();</span>
    <span>test2</span><span>(</span><span>)</span><span>;</span>
    <span>//test3();</span>
    cin<span>.</span><span>get</span><span>(</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br></div></div>]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">å¸§ç¼“å†²(FrameBuffer)</title>
    <id>https://kigane.github.io/note/opengl/gl-framebuffer/</id>
    <link href="https://kigane.github.io/note/opengl/gl-framebuffer/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<p>é»˜è®¤çš„å¸§ç¼“å†²æ˜¯åœ¨ä½ åˆ›å»ºçª—å£çš„æ—¶å€™ç”Ÿæˆå’Œé…ç½®çš„ï¼ŒåŒ…æ‹¬é¢œè‰²ç¼“å†²ï¼Œæ·±åº¦ç¼“å†²ï¼Œæ¨¡æ¿ç¼“å†²ç­‰ã€‚OpenGLæ”¯æŒè‡ªå®šä¹‰å¸§ç¼“å†²ã€‚å°†åœºæ™¯æ¸²æŸ“åˆ°ä¸åŒçš„å¸§ç¼“å†²èƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨åœºæ™¯ä¸­åŠ å…¥ç±»ä¼¼é•œå­çš„ä¸œè¥¿ï¼Œæˆ–è€…åšå‡ºå¾ˆé…·çš„åæœŸå¤„ç†æ•ˆæœã€‚</p>
<h2 id="åˆ›å»ºå¸§ç¼“å†²"> åˆ›å»ºå¸§ç¼“å†²</h2>
<div><pre><code><span>unsigned</span> <span>int</span> fbo<span>;</span>
<span>glGenFramebuffers</span><span>(</span><span>1</span><span>,</span> <span>&amp;</span>fbo<span>)</span><span>;</span>
<span>glBindFramebuffer</span><span>(</span>GL_FRAMEBUFFER<span>,</span> fbo<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>åœ¨ç»‘å®šåˆ°GL_FRAMEBUFFERç›®æ ‡ä¹‹åï¼Œæ‰€æœ‰çš„è¯»å–å’Œå†™å…¥å¸§ç¼“å†²çš„æ“ä½œå°†ä¼šå½±å“å½“å‰ç»‘å®šçš„å¸§ç¼“å†²ã€‚ç°åœ¨çš„å¸§ç¼“å†²è¿˜ä¸èƒ½ä½¿ç”¨ï¼Œå› ä¸ºå®ƒè¿˜ä¸å®Œæ•´ï¼Œä¸€ä¸ªå®Œæ•´çš„å¸§ç¼“å†²éœ€è¦æ»¡è¶³ä»¥ä¸‹çš„æ¡ä»¶ï¼š</p>
<ul>
<li>é™„åŠ è‡³å°‘ä¸€ä¸ªç¼“å†²ï¼ˆé¢œè‰²ã€æ·±åº¦æˆ–æ¨¡æ¿ç¼“å†²ï¼‰ã€‚</li>
<li>è‡³å°‘æœ‰ä¸€ä¸ªé¢œè‰²é™„ä»¶(Attachment)ã€‚</li>
<li>æ‰€æœ‰çš„é™„ä»¶éƒ½å¿…é¡»æ˜¯å®Œæ•´çš„ï¼ˆä¿ç•™äº†å†…å­˜ï¼‰ã€‚</li>
<li>æ¯ä¸ªç¼“å†²éƒ½åº”è¯¥æœ‰ç›¸åŒçš„æ ·æœ¬æ•°ã€‚</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦ä¸ºå¸§ç¼“å†²åˆ›å»ºä¸€äº›é™„ä»¶ï¼Œå¹¶å°†é™„ä»¶é™„åŠ åˆ°å¸§ç¼“å†²ä¸Šã€‚åœ¨å®Œæˆæ‰€æœ‰çš„æ¡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä»¥GL_FRAMEBUFFERä¸ºå‚æ•°è°ƒç”¨glCheckFramebufferStatusï¼Œæ£€æŸ¥å¸§ç¼“å†²æ˜¯å¦å®Œæ•´ã€‚</p>
<div><pre><code><span>if</span><span>(</span><span>glCheckFramebufferStatus</span><span>(</span>GL_FRAMEBUFFER<span>)</span> <span>==</span> GL_FRAMEBUFFER_COMPLETE<span>)</span>
  <span>// ç¡®å®å®Œæ•´äº†</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p>ä¹‹åæ‰€æœ‰çš„æ¸²æŸ“æ“ä½œå°†ä¼šæ¸²æŸ“åˆ°å½“å‰ç»‘å®šå¸§ç¼“å†²çš„é™„ä»¶ä¸­ã€‚ç”±äºå½“å‰å¸§ç¼“å†²ä¸æ˜¯é»˜è®¤å¸§ç¼“å†²ï¼Œæ¸²æŸ“æŒ‡ä»¤å°†ä¸ä¼šå¯¹çª—å£çš„è§†è§‰è¾“å‡ºæœ‰ä»»ä½•å½±å“ã€‚å› æ­¤ï¼Œæ¸²æŸ“åˆ°ä¸€ä¸ªä¸åŒçš„å¸§ç¼“å†²è¢«å«åšç¦»å±æ¸²æŸ“(Off-screen Rendering)ã€‚è¦ä¿è¯æ‰€æœ‰çš„æ¸²æŸ“æ“ä½œåœ¨ä¸»çª—å£ä¸­æœ‰è§†è§‰æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦å†æ¬¡æ¿€æ´»é»˜è®¤å¸§ç¼“å†²ï¼Œå³å°†å®ƒç»‘å®šåˆ°0</p>
<div><pre><code><span>glBindFramebuffer</span><span>(</span>GL_FRAMEBUFFER<span>,</span> <span>0</span><span>)</span><span>;</span>
<span>glDeleteFramebuffers</span><span>(</span><span>1</span><span>,</span> <span>&amp;</span>fbo<span>)</span><span>;</span> <span>// ä¸è¦çš„æ—¶å€™è®°å¾—åˆ äº†</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><h2 id="çº¹ç†é™„ä»¶"> çº¹ç†é™„ä»¶</h2>
<p>å½“æŠŠä¸€ä¸ªçº¹ç†é™„åŠ åˆ°å¸§ç¼“å†²çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ¸²æŸ“æŒ‡ä»¤å°†ä¼šå†™å…¥åˆ°è¿™ä¸ªçº¹ç†ä¸­ã€‚ä½¿ç”¨çº¹ç†çš„ä¼˜ç‚¹æ˜¯ï¼Œæ‰€æœ‰æ¸²æŸ“æ“ä½œçš„ç»“æœå°†ä¼šè¢«å‚¨å­˜åœ¨ä¸€ä¸ªçº¹ç†å›¾åƒä¸­ï¼Œä¹‹åå¯ä»¥åœ¨ç€è‰²å™¨ä¸­å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨å®ƒã€‚</p>
<div><pre><code><span>unsigned</span> <span>int</span> texture<span>;</span>
<span>glGenTextures</span><span>(</span><span>1</span><span>,</span> <span>&amp;</span>texture<span>)</span><span>;</span>
<span>glBindTexture</span><span>(</span>GL_TEXTURE_2D<span>,</span> texture<span>)</span><span>;</span>

<span>glTexImage2D</span><span>(</span>GL_TEXTURE_2D<span>,</span> <span>0</span><span>,</span> GL_RGB<span>,</span> <span>800</span><span>,</span> <span>600</span><span>,</span> <span>0</span><span>,</span> GL_RGB<span>,</span> GL_UNSIGNED_BYTE<span>,</span> <span>NULL</span><span>)</span><span>;</span>

<span>glTexParameteri</span><span>(</span>GL_TEXTURE_2D<span>,</span> GL_TEXTURE_MIN_FILTER<span>,</span> GL_LINEAR<span>)</span><span>;</span>
<span>glTexParameteri</span><span>(</span>GL_TEXTURE_2D<span>,</span> GL_TEXTURE_MAG_FILTER<span>,</span> GL_LINEAR<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>å’Œæ™®é€šçš„çº¹ç†åŒºåˆ«åœ¨äºï¼šglTexImage2Dçš„å®½é«˜è®¾ç½®ä¸ºè§†å£çš„å¤§å°ï¼Œä¸”æœ€åä¸€ä¸ªå‚æ•°dataè®¾ç½®ä¸ºNULLã€‚è¡¨ç¤ºä»…ä»…åˆ†é…äº†å†…å­˜è€Œæ²¡æœ‰å¡«å……å®ƒã€‚å¡«å……ä¼šåœ¨æ¸²æŸ“åœºæ™¯åˆ°å¸§ç¼“å†²ä¹‹åè¿›è¡Œã€‚</p>
<div><p>æç¤º</p>
<p>å¦‚æœä½ æƒ³å°†ä½ çš„å±å¹•æ¸²æŸ“åˆ°ä¸€ä¸ªæ›´å°æˆ–æ›´å¤§çš„çº¹ç†ä¸Šï¼Œéœ€è¦åœ¨æ¸²æŸ“åœºæ™¯åˆ°å¸§ç¼“å†²ä¹‹å‰ä½¿ç”¨çº¹ç†çš„æ–°ç»´åº¦ä½œä¸ºå‚æ•°å†æ¬¡è°ƒç”¨glViewportï¼Œå¦åˆ™åªæœ‰ä¸€å°éƒ¨åˆ†çš„çº¹ç†æˆ–å±å¹•ä¼šè¢«æ¸²æŸ“åˆ°è¿™ä¸ªçº¹ç†ä¸Šã€‚</p>
</div>
<div><pre><code><span>glFramebufferTexture2D</span><span>(</span>GL_FRAMEBUFFER<span>,</span> GL_COLOR_ATTACHMENT0<span>,</span> GL_TEXTURE_2D<span>,</span> texture<span>,</span> <span>0</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><p>glFramebufferTexture2D</p>
<ul>
<li>targetï¼šå¸§ç¼“å†²çš„ç›®æ ‡</li>
<li>attachmentï¼šæˆ‘ä»¬æƒ³è¦é™„åŠ çš„é™„ä»¶ç±»å‹ã€‚å½“å‰æˆ‘ä»¬æ­£åœ¨é™„åŠ ä¸€ä¸ªé¢œè‰²é™„ä»¶ã€‚æ³¨æ„æœ€åçš„0æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é™„åŠ å¤šä¸ªé¢œè‰²é™„ä»¶ã€‚</li>
<li>textargetï¼šä½ å¸Œæœ›é™„åŠ çš„çº¹ç†ç±»å‹</li>
<li>textureï¼šè¦é™„åŠ çš„çº¹ç†æœ¬èº«</li>
<li>levelï¼šå¤šçº§æ¸è¿œçº¹ç†çš„çº§åˆ«ã€‚æˆ‘ä»¬å°†å®ƒä¿ç•™ä¸º0ã€‚</li>
</ul>
<p>å¯¹äºæ·±åº¦ç¼“å†²ï¼šé™„ä»¶ç±»å‹è®¾ç½®ä¸ºGL_DEPTH_ATTACHMENTã€‚çº¹ç†çš„å†…éƒ¨æ ¼å¼å˜ä¸ºGL_DEPTH_COMPONENTã€‚</p>
<p>å¯¹äºæ¨¡æ¿ç¼“å†²ï¼šé™„ä»¶ç±»å‹è®¾ç½®ä¸ºGL_STENCIL_ATTACHMENTï¼Œå¹¶å°†çº¹ç†çš„å†…éƒ¨æ ¼å¼è®¾å®šä¸ºGL_STENCIL_INDEXã€‚</p>
<p>ä¹Ÿå¯ä»¥å°†æ·±åº¦ç¼“å†²å’Œæ¨¡æ¿ç¼“å†²é™„åŠ ä¸ºä¸€ä¸ªå•ç‹¬çš„çº¹ç†ã€‚çº¹ç†çš„æ¯32ä½æ•°å€¼å°†åŒ…å«24ä½çš„æ·±åº¦ä¿¡æ¯å’Œ8ä½çš„æ¨¡æ¿ä¿¡æ¯ã€‚é™„ä»¶ç±»å‹ä½¿ç”¨GL_DEPTH_STENCIL_ATTACHMENTï¼Œçº¹ç†çš„å†…éƒ¨æ ¼å¼ä½¿ç”¨GL_UNSIGNED_INT_24_8ã€‚ä¾‹å¦‚</p>
<div><pre><code><span>glTexImage2D</span><span>(</span>
  GL_TEXTURE_2D<span>,</span> <span>0</span><span>,</span> GL_DEPTH24_STENCIL8<span>,</span> <span>800</span><span>,</span> <span>600</span><span>,</span> <span>0</span><span>,</span> 
  GL_DEPTH_STENCIL<span>,</span> GL_UNSIGNED_INT_24_8<span>,</span> <span>NULL</span>
<span>)</span><span>;</span>

<span>glFramebufferTexture2D</span><span>(</span>GL_FRAMEBUFFER<span>,</span> GL_DEPTH_STENCIL_ATTACHMENT<span>,</span> GL_TEXTURE_2D<span>,</span> texture<span>,</span> <span>0</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h2 id="æ¸²æŸ“ç¼“å†²å¯¹è±¡-renderbuffer-object-é™„ä»¶"> æ¸²æŸ“ç¼“å†²å¯¹è±¡(Renderbuffer Object)é™„ä»¶</h2>
<p>å’Œçº¹ç†å›¾åƒä¸€æ ·ï¼Œæ¸²æŸ“ç¼“å†²å¯¹è±¡æ˜¯ä¸€ä¸ªçœŸæ­£çš„ç¼“å†²ï¼Œå³ä¸€ç³»åˆ—çš„å­—èŠ‚ã€æ•´æ•°ã€åƒç´ ç­‰ã€‚æ¸²æŸ“ç¼“å†²å¯¹è±¡ç›´æ¥å°†æ‰€æœ‰çš„æ¸²æŸ“æ•°æ®å‚¨å­˜åˆ°å®ƒçš„ç¼“å†²ä¸­ï¼Œä¸ä¼šåšä»»ä½•é’ˆå¯¹çº¹ç†æ ¼å¼çš„è½¬æ¢ï¼Œæ‰€ä»¥æ›´å¿«(å› ä¸ºä½¿ç”¨åŸç”Ÿæ ¼å¼ï¼Œæ‰€ä»¥äº¤æ¢ç¼“å†²è¿™æ ·çš„æ“ä½œå¾ˆå¿«)ã€‚ç„¶è€Œï¼Œæ¸²æŸ“ç¼“å†²å¯¹è±¡é€šå¸¸éƒ½æ˜¯åªå†™çš„ï¼Œæ‰€ä»¥ä½ ä¸èƒ½è¯»å–å®ƒä»¬ï¼ˆæ¯”å¦‚ä½¿ç”¨çº¹ç†è®¿é—®ï¼‰ã€‚å½“ç„¶è¿˜æ˜¯èƒ½å¤Ÿä½¿ç”¨glReadPixelsæ¥è¯»å–å®ƒï¼Œè¿™ä¼šä»å½“å‰ç»‘å®šçš„å¸§ç¼“å†²ä¸­è¿”å›ç‰¹å®šåŒºåŸŸçš„åƒç´ ï¼Œè€Œéé™„ä»¶æœ¬èº«ã€‚</p>
<p>ç”±äºæ¸²æŸ“ç¼“å†²å¯¹è±¡é€šå¸¸éƒ½æ˜¯åªå†™çš„ï¼Œæ‰€ä»¥ç»å¸¸ç”¨äºæ·±åº¦å’Œæ¨¡æ¿é™„ä»¶ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æ—¶é—´æˆ‘ä»¬éƒ½ä¸éœ€è¦ä»æ·±åº¦å’Œæ¨¡æ¿ç¼“å†²ä¸­è¯»å–å€¼ï¼Œåªå…³å¿ƒæ·±åº¦å’Œæ¨¡æ¿æµ‹è¯•èƒ½å¦é€šè¿‡ã€‚å½“<strong>ä¸éœ€è¦ä»ç¼“å†²ä¸­é‡‡æ ·çš„æ—¶å€™</strong>ï¼Œé€šå¸¸éƒ½ä¼šé€‰æ‹©æ¸²æŸ“ç¼“å†²å¯¹è±¡ã€‚</p>
<div><pre><code><span>unsigned</span> <span>int</span> rbo<span>;</span>
<span>glGenRenderbuffers</span><span>(</span><span>1</span><span>,</span> <span>&amp;</span>rbo<span>)</span><span>;</span>
<span>glBindRenderbuffer</span><span>(</span>GL_RENDERBUFFER<span>,</span> rbo<span>)</span><span>;</span>
<span>// åˆ›å»ºä¸€ä¸ªæ·±åº¦å’Œæ¨¡æ¿æ¸²æŸ“ç¼“å†²å¯¹è±¡</span>
<span>glRenderbufferStorage</span><span>(</span>GL_RENDERBUFFER<span>,</span> GL_DEPTH24_STENCIL8<span>,</span> <span>800</span><span>,</span> <span>600</span><span>)</span><span>;</span>
<span>// é™„åŠ </span>
<span>glFramebufferRenderbuffer</span><span>(</span>GL_FRAMEBUFFER<span>,</span> GL_DEPTH_STENCIL_ATTACHMENT<span>,</span> GL_RENDERBUFFER<span>,</span> rbo<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id="æ¸²æŸ“åˆ°çº¹ç†"> æ¸²æŸ“åˆ°çº¹ç†</h2>
<p>è¦æƒ³ç»˜åˆ¶åœºæ™¯åˆ°ä¸€ä¸ªçº¹ç†ä¸Šï¼Œæˆ‘ä»¬éœ€è¦é‡‡å–ä»¥ä¸‹çš„æ­¥éª¤ï¼š</p>
<ol>
<li>å°†æ–°çš„å¸§ç¼“å†²ç»‘å®šä¸ºæ¿€æ´»çš„å¸§ç¼“å†²ï¼Œå’Œå¾€å¸¸ä¸€æ ·æ¸²æŸ“åœºæ™¯</li>
<li>ç»‘å®šé»˜è®¤çš„å¸§ç¼“å†²</li>
<li>ç»˜åˆ¶ä¸€ä¸ªæ¨ªè·¨æ•´ä¸ªå±å¹•çš„å››è¾¹å½¢ï¼Œå°†å¸§ç¼“å†²çš„é¢œè‰²ç¼“å†²ä½œä¸ºå®ƒçš„çº¹ç†ã€‚</li>
</ol>
<h2 id="åæœŸå¤„ç†"> åæœŸå¤„ç†</h2>
<p>æ—¢ç„¶æ•´ä¸ªåœºæ™¯éƒ½è¢«æ¸²æŸ“åˆ°äº†ä¸€ä¸ªçº¹ç†ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€šè¿‡ä¿®æ”¹çº¹ç†æ•°æ®åˆ›å»ºå‡ºä¸€äº›éå¸¸æœ‰æ„æ€çš„æ•ˆæœã€‚</p>
<h3 id="åç›¸"> åç›¸</h3>
<p>æˆ‘ä»¬ç°åœ¨èƒ½å¤Ÿè®¿é—®æ¸²æŸ“è¾“å‡ºçš„æ¯ä¸ªé¢œè‰²ï¼Œæ‰€ä»¥åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­è¿”å›è¿™äº›é¢œè‰²çš„åç›¸(Inversion)å¹¶ä¸æ˜¯å¾ˆéš¾ã€‚æˆ‘ä»¬å°†ä¼šä»å±å¹•çº¹ç†ä¸­å–é¢œè‰²å€¼ï¼Œç„¶åç”¨1.0å‡å»å®ƒï¼Œå¯¹å®ƒè¿›è¡Œåç›¸ï¼š</p>
<div><pre><code><span>void</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
    FragColor <span>=</span> <span>vec4</span><span>(</span><span>vec3</span><span>(</span><span>1.0</span> <span>-</span> <span>texture</span><span>(</span>screenTexture<span>,</span> TexCoords<span>)</span><span>)</span><span>,</span> <span>1.0</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h3 id="ç°åº¦"> ç°åº¦</h3>
<p>ç§»é™¤åœºæ™¯ä¸­é™¤äº†é»‘ç™½ç°ä»¥å¤–æ‰€æœ‰çš„é¢œè‰²ï¼Œè®©æ•´ä¸ªå›¾åƒç°åº¦åŒ–(Grayscale)ã€‚å¾ˆç®€å•çš„å®ç°æ–¹å¼æ˜¯ï¼Œå–æ‰€æœ‰çš„é¢œè‰²åˆ†é‡ï¼Œå°†å®ƒä»¬å¹³å‡åŒ–ï¼š</p>
<div><pre><code><span>void</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
    FragColor <span>=</span> <span>texture</span><span>(</span>screenTexture<span>,</span> TexCoords<span>)</span><span>;</span>
    <span>float</span> average <span>=</span> <span>(</span>FragColor<span>.</span>r <span>+</span> FragColor<span>.</span>g <span>+</span> FragColor<span>.</span>b<span>)</span> <span>/</span> <span>3.0</span><span>;</span>
    FragColor <span>=</span> <span>vec4</span><span>(</span>average<span>,</span> average<span>,</span> average<span>,</span> <span>1.0</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>ä½†äººçœ¼ä¼šå¯¹ç»¿è‰²æ›´åŠ æ•æ„Ÿä¸€äº›ï¼Œè€Œå¯¹è“è‰²ä¸é‚£ä¹ˆæ•æ„Ÿï¼Œæ‰€ä»¥ä¸ºäº†è·å–ç‰©ç†ä¸Šæ›´ç²¾ç¡®çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åŠ æƒçš„é€šé“ï¼š</p>
<div><pre><code><span>void</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
    FragColor <span>=</span> <span>texture</span><span>(</span>screenTexture<span>,</span> TexCoords<span>)</span><span>;</span>
    <span>float</span> average <span>=</span> <span>0.2126</span> <span>*</span> FragColor<span>.</span>r <span>+</span> <span>0.7152</span> <span>*</span> FragColor<span>.</span>g <span>+</span> <span>0.0722</span> <span>*</span> FragColor<span>.</span>b<span>;</span>
    FragColor <span>=</span> <span>vec4</span><span>(</span>average<span>,</span> average<span>,</span> average<span>,</span> <span>1.0</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h3 id="æ ¸æ•ˆæœ"> æ ¸æ•ˆæœ</h3>
<p>åœ¨ä¸€ä¸ªçº¹ç†å›¾åƒä¸ŠåšåæœŸå¤„ç†çš„å¦å¤–ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»çº¹ç†çš„å…¶å®ƒåœ°æ–¹é‡‡æ ·é¢œè‰²å€¼ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰çº¹ç†åæ ‡çš„å‘¨å›´å–ä¸€å°å—åŒºåŸŸï¼Œå¯¹å½“å‰çº¹ç†å€¼å‘¨å›´çš„å¤šä¸ªçº¹ç†å€¼è¿›è¡Œé‡‡æ ·ã€‚</p>
<p>æ ¸(Kernel)ï¼ˆæˆ–å·ç§¯çŸ©é˜µ(Convolution Matrix)ï¼‰æ˜¯ä¸€ä¸ªç±»çŸ©é˜µçš„æ•°å€¼æ•°ç»„ï¼Œå®ƒçš„ä¸­å¿ƒä¸ºå½“å‰çš„åƒç´ ï¼Œå®ƒä¼šç”¨å®ƒçš„æ ¸å€¼ä¹˜ä»¥å‘¨å›´çš„åƒç´ å€¼ï¼Œå¹¶å°†ç»“æœç›¸åŠ å˜æˆä¸€ä¸ªå€¼ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬ä¸Šæˆ‘ä»¬æ˜¯åœ¨å¯¹å½“å‰åƒç´ å‘¨å›´çš„çº¹ç†åæ ‡æ·»åŠ ä¸€ä¸ªå°çš„åç§»é‡ï¼Œå¹¶æ ¹æ®æ ¸å°†ç»“æœåˆå¹¶ã€‚</p>
<div><p>æç¤º</p>
<p>å¤§éƒ¨åˆ†æ ¸å°†æ‰€æœ‰çš„æƒé‡åŠ èµ·æ¥ä¹‹åéƒ½åº”è¯¥ä¼šç­‰äº1ï¼Œå¦‚æœå®ƒä»¬åŠ èµ·æ¥ä¸ç­‰äº1ï¼Œè¿™å°±æ„å‘³ç€æœ€ç»ˆçš„çº¹ç†é¢œè‰²å°†ä¼šæ¯”åŸçº¹ç†å€¼æ›´äº®æˆ–è€…æ›´æš—äº†ã€‚</p>
</div>
<p>ä¾‹å¦‚ï¼š</p>
<div><pre><code><span>const</span> <span>float</span> offset <span>=</span> <span>1.0</span> <span>/</span> <span>300.0</span><span>;</span>  

<span>void</span> <span>main</span><span>(</span><span>)</span>
<span>{</span>
    <span>vec2</span> offsets<span>[</span><span>9</span><span>]</span> <span>=</span> <span>vec2</span><span>[</span><span>]</span><span>(</span>
        <span>vec2</span><span>(</span><span>-</span>offset<span>,</span>  offset<span>)</span><span>,</span> <span>// å·¦ä¸Š</span>
        <span>vec2</span><span>(</span> <span>0.0f</span><span>,</span>    offset<span>)</span><span>,</span> <span>// æ­£ä¸Š</span>
        <span>vec2</span><span>(</span> offset<span>,</span>  offset<span>)</span><span>,</span> <span>// å³ä¸Š</span>
        <span>vec2</span><span>(</span><span>-</span>offset<span>,</span>  <span>0.0f</span><span>)</span><span>,</span>   <span>// å·¦</span>
        <span>vec2</span><span>(</span> <span>0.0f</span><span>,</span>    <span>0.0f</span><span>)</span><span>,</span>   <span>// ä¸­</span>
        <span>vec2</span><span>(</span> offset<span>,</span>  <span>0.0f</span><span>)</span><span>,</span>   <span>// å³</span>
        <span>vec2</span><span>(</span><span>-</span>offset<span>,</span> <span>-</span>offset<span>)</span><span>,</span> <span>// å·¦ä¸‹</span>
        <span>vec2</span><span>(</span> <span>0.0f</span><span>,</span>   <span>-</span>offset<span>)</span><span>,</span> <span>// æ­£ä¸‹</span>
        <span>vec2</span><span>(</span> offset<span>,</span> <span>-</span>offset<span>)</span>  <span>// å³ä¸‹</span>
    <span>)</span><span>;</span>

    <span>float</span> kernel<span>[</span><span>9</span><span>]</span> <span>=</span> <span>float</span><span>[</span><span>]</span><span>(</span>
        <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span><span>,</span>
        <span>-</span><span>1</span><span>,</span>  <span>9</span><span>,</span> <span>-</span><span>1</span><span>,</span>
        <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span>
    <span>)</span><span>;</span>

    <span>vec3</span> sampleTex<span>[</span><span>9</span><span>]</span><span>;</span>
    <span>for</span><span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>9</span><span>;</span> i<span>++</span><span>)</span>
    <span>{</span>
        sampleTex<span>[</span>i<span>]</span> <span>=</span> <span>vec3</span><span>(</span><span>texture</span><span>(</span>screenTexture<span>,</span> TexCoords<span>.</span>st <span>+</span> offsets<span>[</span>i<span>]</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
    <span>vec3</span> col <span>=</span> <span>vec3</span><span>(</span><span>0.0</span><span>)</span><span>;</span>
    <span>for</span><span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>9</span><span>;</span> i<span>++</span><span>)</span>
        col <span>+=</span> sampleTex<span>[</span>i<span>]</span> <span>*</span> kernel<span>[</span>i<span>]</span><span>;</span>

    FragColor <span>=</span> <span>vec4</span><span>(</span>col<span>,</span> <span>1.0</span><span>)</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br></div></div><h3 id="å¸¸è§çš„æ ¸"> å¸¸è§çš„æ ¸</h3>
<div><pre><code><span>// é”åŒ–</span>
<span>float</span> kernel<span>[</span><span>9</span><span>]</span> <span>=</span> <span>float</span><span>[</span><span>]</span><span>(</span>
        <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span><span>,</span>
        <span>-</span><span>1</span><span>,</span>  <span>9</span><span>,</span> <span>-</span><span>1</span><span>,</span>
        <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span><span>,</span> <span>-</span><span>1</span>
    <span>)</span><span>;</span>

<span>// æ¨¡ç³Š</span>
<span>float</span> kernel<span>[</span><span>9</span><span>]</span> <span>=</span> <span>float</span><span>[</span><span>]</span><span>(</span>
    <span>1.0</span> <span>/</span> <span>16</span><span>,</span> <span>2.0</span> <span>/</span> <span>16</span><span>,</span> <span>1.0</span> <span>/</span> <span>16</span><span>,</span>
    <span>2.0</span> <span>/</span> <span>16</span><span>,</span> <span>4.0</span> <span>/</span> <span>16</span><span>,</span> <span>2.0</span> <span>/</span> <span>16</span><span>,</span>
    <span>1.0</span> <span>/</span> <span>16</span><span>,</span> <span>2.0</span> <span>/</span> <span>16</span><span>,</span> <span>1.0</span> <span>/</span> <span>16</span>  
<span>)</span><span>;</span>

<span>// è¾¹ç¼˜æ£€æµ‹(Edge-detection)</span>
<span>float</span> kernel<span>[</span><span>9</span><span>]</span> <span>=</span> <span>float</span><span>[</span><span>]</span><span>(</span>
        <span>1</span><span>,</span>  <span>1</span><span>,</span>  <span>1</span><span>,</span>
        <span>1</span><span>,</span> <span>-</span><span>8</span><span>,</span>  <span>1</span><span>,</span>
        <span>1</span><span>,</span>  <span>1</span><span>,</span>  <span>1</span>
    <span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><div><p>æç¤º</p>
<p>æ³¨æ„ï¼Œæ ¸åœ¨å¯¹å±å¹•çº¹ç†çš„è¾¹ç¼˜è¿›è¡Œé‡‡æ ·çš„æ—¶å€™ï¼Œç”±äºè¿˜ä¼šå¯¹ä¸­å¿ƒåƒç´ å‘¨å›´çš„8ä¸ªåƒç´ è¿›è¡Œé‡‡æ ·ï¼Œå…¶å®ä¼šå–åˆ°çº¹ç†ä¹‹å¤–çš„åƒç´ ã€‚ç”±äºç¯ç»•æ–¹å¼é»˜è®¤æ˜¯GL_REPEATï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰è®¾ç½®çš„æƒ…å†µä¸‹å–åˆ°çš„æ˜¯å±å¹•å¦ä¸€è¾¹çš„åƒç´ ï¼Œè€Œå¦ä¸€è¾¹çš„åƒç´ æœ¬ä¸åº”è¯¥å¯¹ä¸­å¿ƒåƒç´ äº§ç”Ÿå½±å“ï¼Œè¿™å°±å¯èƒ½ä¼šåœ¨å±å¹•è¾¹ç¼˜äº§ç”Ÿå¾ˆå¥‡æ€ªçš„æ¡çº¹ã€‚ä¸ºäº†æ¶ˆé™¤è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†å±å¹•çº¹ç†çš„ç¯ç»•æ–¹å¼éƒ½è®¾ç½®ä¸ºGL_CLAMP_TO_EDGEã€‚è¿™æ ·å­åœ¨å–åˆ°çº¹ç†å¤–çš„åƒç´ æ—¶ï¼Œå°±èƒ½å¤Ÿé‡å¤è¾¹ç¼˜çš„åƒç´ æ¥æ›´ç²¾ç¡®åœ°ä¼°è®¡æœ€ç»ˆçš„å€¼äº†ã€‚</p>
</div>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">OpenCV</title>
    <id>https://kigane.github.io/note/opengl/opencv/</id>
    <link href="https://kigane.github.io/note/opengl/opencv/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"> ç®€ä»‹</h2>
<p>OpenCVæ˜¯ä¸€ä¸ªå›¾åƒå¤„ç†åº“ã€‚å›¾åƒçŸ©é˜µç±»Matä¸»è¦æœ‰ä¸¤ä¸ªéƒ¨åˆ†,headeréƒ¨åˆ†è®°å½•å›¾åƒçŸ©é˜µçš„æè¿°æ€§ä¿¡æ¯ï¼Œå¦‚å¤§å°ï¼Œå…ƒç´ å‚¨å­˜æ–¹å¼ç­‰ç­‰ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘çŸ©é˜µå­˜å‚¨çš„å†…å­˜ã€‚æœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œä¸”ä½¿ç”¨äº†å¼•ç”¨è®¡æ•°ç³»ç»Ÿï¼ŒMatçš„èµ‹å€¼ï¼Œå¤åˆ¶æ„é€ å‡½æ•°åªä¼šå¤åˆ¶headeréƒ¨åˆ†ï¼ŒæŒ‡é’ˆéƒ¨åˆ†æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œæœ€åä¸€ä¸ªæŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆè´Ÿè´£å›æ”¶å†…å­˜ã€‚å…¶æŒ‡å®šå­˜å‚¨æ–¹å¼çš„æ ¼å¼ä¸º:<code>CV_[The number of bits per item][Signed or Unsigned][Type Prefix]C[The channel number]</code>ã€‚Matçš„è¾“å‡ºæ ¼å¼å¯ä»¥ç”¨<code>format(mat, Formatter::FMT_PYTHON)</code>æŒ‡å®š(<code>cout&lt;&lt;format(mat,...)</code>)ã€‚<br>
PSï¼šOpenCVæŒ‰BGRé¡ºåºå­˜å‚¨RGBé¢œè‰²ã€‚</p>
<h2 id="éå†å›¾åƒçŸ©é˜µ"> éå†å›¾åƒçŸ©é˜µ</h2>
<ul>
<li>cv::Mat::isContinuous() æ£€æŸ¥å†…å­˜æ˜¯å¦åœ¨åŒä¸€è¡Œ</li>
<li>æ£€æŸ¥å›¾åƒæ˜¯å¦åŠ è½½æˆåŠŸå¯ä»¥çœ‹I.dataæ˜¯å¦ä¸ºNULLï¼Œä¸ºNULLåˆ™åŠ è½½å¤±è´¥ã€‚</li>
<li>éå†çŸ©é˜µå…ƒç´ çš„æ–¹å¼
<ul>
<li>mat.depth()æŸ¥çœ‹itemçš„ç±»å‹ï¼Œmat.channels()æŸ¥çœ‹å…ƒç´ çš„é€šé“æ•°ã€‚</li>
<li>mat.rowsæŸ¥çœ‹å…ƒç´ è¡Œæ•°,mat.colsæŸ¥çœ‹å…ƒç´ åˆ—æ•°ï¼Œmat.cols*mat.channels()æ˜¯itemæ€»æ•°ã€‚</li>
<li><code>mat.ptr&lt;typename&gt;(i)</code> å–å¾—æŒ‡å‘çŸ©é˜µç¬¬iè¡Œè¡Œé¦–çš„æŒ‡é’ˆã€‚</li>
<li><code>MatIterator_&lt;typename&gt; it</code> ä¸åŒç±»å‹çš„è¿­ä»£å™¨ï¼Œæ¨èä½¿ç”¨ï¼Œåœ¨å†…å­˜æ¢è¡Œæ—¶æœ‰ç‚¹ä¼˜åŒ–ã€‚
<ul>
<li><code>mat.begin&lt;typename&gt;()</code> å–å¾—ä½äºçŸ©é˜µå¼€å¤´çš„è¿­ä»£å™¨ã€‚å¸¸ç”¨çš„RGB3é€šé“å¯¹åº”typenameä¸ºVec3b</li>
<li><code>mat.end&lt;typename&gt;()</code></li>
</ul>
</li>
</ul>
</li>
<li>cv::Mat::at(row,col) å–å¾—ç¬¬rowè¡Œï¼Œç¬¬colåˆ—çš„å…ƒç´ çš„åœ°å€ï¼Œå¹¶è¿”å›å¼•ç”¨ã€‚</li>
<li>cv::LUT(src,lut,dest) <code>dest[i]=lut[src[i]+d]</code>ã€‚å¦‚æœsrcæ˜¯æ— ç¬¦å·ç±»å‹ï¼Œåˆ™d=0ï¼Œæœ‰ç¬¦å·ç±»å‹åˆ™d=128ã€‚æœ€å¿«ã€‚</li>
</ul>
<h2 id="å›¾åƒæ“ä½œ"> å›¾åƒæ“ä½œ</h2>
<ul>
<li>Mat img = imread(filename); é»˜è®¤ä¸º3é€šé“</li>
<li>Mat img = imread(filename, IMREAD_GRAYSCALE); å•é€šé“</li>
<li>imwrite(filename, img); ä¿å­˜åˆ°æ–‡ä»¶</li>
<li>imshow(&quot;image&quot;, img); æ˜¾ç¤ºå›¾åƒ</li>
<li>cvtColor(img, grey, COLOR_BGR2GRAY);  æ”¹å˜é¢œè‰²ç©ºé—´ã€‚</li>
<li>src.convertTo(dst, CV_32F); æ”¹å˜å›¾åƒç±»å‹</li>
<li>Rect r(10, 10, 100, 100); Mat smallImg = img(r); å°†RectæŒ‡å®šçš„åŒºåŸŸå‚¨å­˜ä¸ºå¦ä¸€ä¸ªå›¾åƒ</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">Blog Home</title>
    <id>https://kigane.github.io/</id>
    <link href="https://kigane.github.io/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">è½¯ä»¶æ¸²æŸ“å™¨</title>
    <id>https://kigane.github.io/note/opengl/software-renderer/</id>
    <link href="https://kigane.github.io/note/opengl/software-renderer/"/>
    <updated>2021-10-03T02:18:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="æ•´ç†"> æ•´ç†</h2>
<ul>
<li>ç»™å®šç‰©ä½“å’Œç›¸æœºä½ç½®</li>
<li>æ‘†å¥½ä½ç½®</li>
<li>æŠ•å½±å˜æ¢</li>
<li>è§†å£å˜æ¢</li>
<li>å…‰æ …åŒ–
<ul>
<li>é‡‡æ ·</li>
<li>æŠ—é”¯é½¿</li>
<li>z-buffer</li>
</ul>
</li>
<li>ç€è‰² é‡å¿ƒæ’å€¼</li>
</ul>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-10-03T02:18:05.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
  <entry>
    <title type="html">è®ºæ–‡åé—®</title>
    <id>https://kigane.github.io/thesis/</id>
    <link href="https://kigane.github.io/thesis/"/>
    <updated>2021-12-13T15:53:11.000Z</updated>
    <content type="html"><![CDATA[<ol>
<li>è®ºæ–‡è¯•å›¾è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li>
<li>è¿™æ˜¯å¦æ˜¯ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Ÿ</li>
<li>è¿™ç¯‡æ–‡ç« è¦éªŒè¯ä¸€ä¸ªä»€ä¹ˆç§‘å­¦å‡è®¾ï¼Ÿ</li>
<li>æœ‰å“ªäº›ç›¸å…³ç ”ç©¶ï¼Ÿå¦‚ä½•å½’ç±»ï¼Ÿè°æ˜¯è¿™ä¸€è¯¾é¢˜åœ¨é¢†åŸŸå†…å€¼å¾—å…³æ³¨çš„ç ”ç©¶å‘˜ï¼Ÿ</li>
<li>è®ºæ–‡ä¸­æåˆ°çš„è§£å†³æ–¹æ¡ˆä¹‹å…³é”®æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>è®ºæ–‡ä¸­çš„å®éªŒæ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</li>
<li>ç”¨äºå®šé‡è¯„ä¼°çš„æ•°æ®é›†æ˜¯ä»€ä¹ˆï¼Ÿä»£ç æœ‰æ²¡æœ‰å¼€æºï¼Ÿ</li>
<li>è®ºæ–‡ä¸­çš„å®éªŒåŠç»“æœæœ‰æ²¡æœ‰å¾ˆå¥½åœ°æ”¯æŒéœ€è¦éªŒè¯çš„ç§‘å­¦å‡è®¾ï¼Ÿ</li>
<li>è¿™ç¯‡è®ºæ–‡åˆ°åº•æœ‰ä»€ä¹ˆè´¡çŒ®ï¼Ÿ</li>
<li>ä¸‹ä¸€æ­¥å‘¢ï¼Ÿæœ‰ä»€ä¹ˆå·¥ä½œå¯ä»¥ç»§ç»­æ·±å…¥ï¼Ÿ</li>
</ol>
]]></content>
    <author>
      <name>Leonhardt</name>
    </author>
    <category term="Thesis"/>
    <contributor>
      <name>Leonhardt</name>
    </contributor>
    <published>2021-12-13T00:00:00.000Z</published>
    <rights>Copyright by Leonhardt</rights>
  </entry>
</feed>