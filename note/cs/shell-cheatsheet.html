<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>shell | My Documentations</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.e2252f52.css" as="style"><link rel="preload" href="/assets/js/app.523f1097.js" as="script"><link rel="preload" href="/assets/js/2.f48cadb2.js" as="script"><link rel="preload" href="/assets/js/27.a6d15ed1.js" as="script"><link rel="prefetch" href="/assets/js/10.f922feea.js"><link rel="prefetch" href="/assets/js/11.ab976a51.js"><link rel="prefetch" href="/assets/js/12.6ec19b62.js"><link rel="prefetch" href="/assets/js/13.e893bc98.js"><link rel="prefetch" href="/assets/js/14.3d7e994c.js"><link rel="prefetch" href="/assets/js/15.11ee17a3.js"><link rel="prefetch" href="/assets/js/16.e9b99332.js"><link rel="prefetch" href="/assets/js/17.0687b577.js"><link rel="prefetch" href="/assets/js/18.4799e02a.js"><link rel="prefetch" href="/assets/js/19.0c5255de.js"><link rel="prefetch" href="/assets/js/20.921f217f.js"><link rel="prefetch" href="/assets/js/21.2c3bdd9c.js"><link rel="prefetch" href="/assets/js/22.92cd500d.js"><link rel="prefetch" href="/assets/js/23.22f5b0be.js"><link rel="prefetch" href="/assets/js/24.92ff5f10.js"><link rel="prefetch" href="/assets/js/25.dc57a4c8.js"><link rel="prefetch" href="/assets/js/26.c6500db9.js"><link rel="prefetch" href="/assets/js/28.7fa52111.js"><link rel="prefetch" href="/assets/js/29.8a110bf0.js"><link rel="prefetch" href="/assets/js/3.f82e4ec7.js"><link rel="prefetch" href="/assets/js/30.97c9174f.js"><link rel="prefetch" href="/assets/js/31.793baabd.js"><link rel="prefetch" href="/assets/js/32.63184320.js"><link rel="prefetch" href="/assets/js/33.cf56ab6b.js"><link rel="prefetch" href="/assets/js/34.9ab2e06c.js"><link rel="prefetch" href="/assets/js/35.74b15d06.js"><link rel="prefetch" href="/assets/js/36.09773ba5.js"><link rel="prefetch" href="/assets/js/37.357e1e9c.js"><link rel="prefetch" href="/assets/js/38.be034994.js"><link rel="prefetch" href="/assets/js/39.0496f0cd.js"><link rel="prefetch" href="/assets/js/4.fec41962.js"><link rel="prefetch" href="/assets/js/40.6f17c5a7.js"><link rel="prefetch" href="/assets/js/41.bdd64624.js"><link rel="prefetch" href="/assets/js/42.3c77f84c.js"><link rel="prefetch" href="/assets/js/43.874e213d.js"><link rel="prefetch" href="/assets/js/44.c8aad4d1.js"><link rel="prefetch" href="/assets/js/45.64bb9676.js"><link rel="prefetch" href="/assets/js/46.87b35d72.js"><link rel="prefetch" href="/assets/js/47.2b524b2f.js"><link rel="prefetch" href="/assets/js/48.1cbe730f.js"><link rel="prefetch" href="/assets/js/49.8895dbde.js"><link rel="prefetch" href="/assets/js/5.915b5f5e.js"><link rel="prefetch" href="/assets/js/50.bc48df1c.js"><link rel="prefetch" href="/assets/js/6.3a2a2487.js"><link rel="prefetch" href="/assets/js/7.5c7949ba.js"><link rel="prefetch" href="/assets/js/8.5bc311ea.js"><link rel="prefetch" href="/assets/js/9.ccf15d5a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2252f52.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/ChernoLogo.png" alt="My Documentations" class="logo"> <span class="site-name can-hide">My Documentations</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow down"></span></button> <button type="button" aria-label="Note" class="mobile-dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/cg/" class="nav-link">
  Computer Graphics
</a></li><li class="dropdown-item"><!----> <a href="/note/gea/" class="nav-link">
  Game Engine Architecture
</a></li><li class="dropdown-item"><!----> <a href="/note/cpp/" class="nav-link">
  C/C++
</a></li><li class="dropdown-item"><!----> <a href="/note/cs/" class="nav-link router-link-active">
  Computer Science
</a></li><li class="dropdown-item"><!----> <a href="/note/opengl/" class="nav-link">
  OpenGL
</a></li><li class="dropdown-item"><!----> <a href="/note/js/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/hazel/" class="nav-link">
  Hazel
</a></div> <a href="https://github.com/kigane/MyBlogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow down"></span></button> <button type="button" aria-label="Note" class="mobile-dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/cg/" class="nav-link">
  Computer Graphics
</a></li><li class="dropdown-item"><!----> <a href="/note/gea/" class="nav-link">
  Game Engine Architecture
</a></li><li class="dropdown-item"><!----> <a href="/note/cpp/" class="nav-link">
  C/C++
</a></li><li class="dropdown-item"><!----> <a href="/note/cs/" class="nav-link router-link-active">
  Computer Science
</a></li><li class="dropdown-item"><!----> <a href="/note/opengl/" class="nav-link">
  OpenGL
</a></li><li class="dropdown-item"><!----> <a href="/note/js/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/hazel/" class="nav-link">
  Hazel
</a></div> <a href="https://github.com/kigane/MyBlogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/note/cs/" aria-current="page" class="sidebar-link">计算机概述</a></li><li><a href="/note/cs/asm-memo.html" class="sidebar-link">汇编</a></li><li><a href="/note/cs/gdb-cheatsheet.html" class="sidebar-link">gdb</a></li><li><a href="/note/cs/shell-cheatsheet.html" aria-current="page" class="active sidebar-link">shell</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/cs/shell-cheatsheet.html#shell-是什么" class="sidebar-link">shell 是什么</a></li><li class="sidebar-sub-header"><a href="/note/cs/shell-cheatsheet.html#shell-基础" class="sidebar-link">shell 基础</a></li><li class="sidebar-sub-header"><a href="/note/cs/shell-cheatsheet.html#shell脚本" class="sidebar-link">shell脚本</a></li><li class="sidebar-sub-header"><a href="/note/cs/shell-cheatsheet.html#shell工具" class="sidebar-link">shell工具</a></li><li class="sidebar-sub-header"><a href="/note/cs/shell-cheatsheet.html#shell中的重要命令" class="sidebar-link">shell中的重要命令</a></li><li class="sidebar-sub-header"><a href="/note/cs/shell-cheatsheet.html#cheatsheet" class="sidebar-link">cheatsheet</a></li></ul></li><li><a href="/note/cs/vim.html" class="sidebar-link">vim</a></li><li><a href="/note/cs/git.html" class="sidebar-link">git</a></li><li><a href="/note/cs/regex.html" class="sidebar-link">正则表达式</a></li><li><a href="/note/cs/linux.html" class="sidebar-link">Linux - Ubantu</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="shell-是什么"><a href="#shell-是什么" class="header-anchor">#</a> shell 是什么</h2> <p>核心功能：允许你执行程序，输入并获取某种半结构化的输出。</p> <h2 id="shell-基础"><a href="#shell-基础" class="header-anchor">#</a> shell 基础</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hostname:~$ <span class="token comment"># 主机名:当前目录 $显示当前并非root用户</span>
hostname:~$ <span class="token builtin class-name">echo</span> hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>shell 基于空格分割命令并进行解析，执行第一个单词代表的程序，后续单词将作为程序访问的参数</p> <h3 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h3> <p>shell去哪里找需要执行的程序呢？shell是一个编程环境，有变量，条件，循环和函数，在shell中执行命令就是在执行一段shell可以理解的代码。如果执行的命令不是shell的关键字，shell就会咨询<strong>环境变量$PATH</strong>，其中，不同的路径由&quot;:&quot;分割。</p> <p>当然，不用$PATH，直接给出执行程序的路径也可以。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
/bin/echo <span class="token environment constant">$PATH</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ls-l-chmod"><a href="#ls-l-chmod" class="header-anchor">#</a> ls -l &amp; chmod</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#权限     TODO  TODO  TODO 文件大小(B)  最后修改时间 文件名</span>
-rw-r--r-- <span class="token number">1</span>   user  user    <span class="token number">220</span>     May <span class="token number">25</span> 02:38 .bash_logout
-rw-r--r-- <span class="token number">1</span>   user  user   <span class="token number">3771</span>     May <span class="token number">25</span> 02:38 .bashrc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>权限由10个字符表示：</p> <ul><li>第一个：d 表示这是一个目录</li> <li>后面每3个一组： 表示文件所有者(u,user)，用户组(g,group)，其他所有人(o,other)所具有的权限</li> <li><ul><li>表示相应无权限</li></ul></li> <li>-rwx 分别表示<strong>读，写，执行</strong>权限</li></ul> <p><code>chmod 0777 FILE</code>: 表示将FILE权限设为-rwxrwxrwx。第一个参数不知道什么意思。如果不是4个数，会在前面补0，如4实际为0004。
<code>chmod u+x FILE</code>: 表示为用户添加FILE执行权限。[ugoa][+-=][rwx]</p> <h3 id="在程序间创建连接"><a href="#在程序间创建连接" class="header-anchor">#</a> 在程序间创建连接</h3> <p>shell中程序有两个主要的流：</p> <ul><li>输入流：键盘</li> <li>输出流：显示器</li></ul> <p>当然，可以重定向</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> hello <span class="token operator">&gt;</span> hello.txt <span class="token comment"># hello</span>
<span class="token function">cat</span> <span class="token operator">&lt;</span> hello.txt <span class="token operator">&gt;</span> hello2.txt <span class="token comment"># hello2.txt 中内容: hello</span>
<span class="token builtin class-name">echo</span> world <span class="token operator">&gt;&gt;</span> hello.txt <span class="token comment"># hello\nworld</span>
<span class="token comment"># echo \ world &gt;&gt; hello.txt # hello\n world 空格需要转义</span>
<span class="token comment"># echo ' world' &gt;&gt; hello.txt # hello\n world 或用引号(单，双都可)包裹</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>&gt;, &lt; 用于重定向流，&gt;&gt;用于追加内容。</p> <p>管道(pipes)：&quot;|&quot; 操作符，用于将一个程序的输出和另一个程序的输入连接起来。</p> <h3 id="root"><a href="#root" class="header-anchor">#</a> root</h3> <p>sudo 可以让用户以root的身份执行紧跟着的程序。</p> <p>只有根用户才能做的操作：向<code>sysfs</code>文件写入内容，该文件暴露了一些内核参数，所以用户可以在运行时配置系统内核。系统被挂载在<code>/sys</code>下。</p> <h2 id="shell脚本"><a href="#shell脚本" class="header-anchor">#</a> shell脚本</h2> <ul><li>变量赋值：<code>foo=bar</code>，不能有空格</li> <li>访问变量：<code>$foo</code></li> <li>字符串：单引号表示原义字符串，其中的变量不会被转义。而双引号中变量会被转义。</li></ul> <h3 id="bash函数"><a href="#bash函数" class="header-anchor">#</a> bash函数</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function-name function">mcd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">mkdir</span> -p <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
    <span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>bash使用很多特殊变量表示参数</p> <table><thead><tr><th style="text-align:center;">符号</th> <th style="text-align:left;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">$0</td> <td style="text-align:left;">脚本名</td></tr> <tr><td style="text-align:center;">$1~$9</td> <td style="text-align:left;">第n个参数</td></tr> <tr><td style="text-align:center;">$@</td> <td style="text-align:left;">所有参数</td></tr> <tr><td style="text-align:center;">$#</td> <td style="text-align:left;">参数个数</td></tr> <tr><td style="text-align:center;">$?</td> <td style="text-align:left;">前一个命令的返回值</td></tr> <tr><td style="text-align:center;">$$</td> <td style="text-align:left;">当前脚本的进程识别码</td></tr> <tr><td style="text-align:center;">!!</td> <td style="text-align:left;">完整的上一条命令，包括参数</td></tr> <tr><td style="text-align:center;">$_</td> <td style="text-align:left;">上一条命令的最后一个参数</td></tr></tbody></table> <p>命令通常使用<code>STDOUT</code>返回输出值，使用<code>STDERR</code>返回错误码。返回值0表示正常执行，其他都表示有错误发生。可以搭配短路运算符(<code>&amp;&amp;</code>,<code>||</code>)进行条件判断。</p> <ul><li>同一行的多个命令可以用 ; 分隔</li> <li>命令替换 (command substitution):以变量的形式获取一个命令的输出。通过 $(CMD) 这样的方式来执行CMD这个命令时，它的输出结果会替换掉$(CMD)。例如，如果执行 for file in $(ls) ，shell首先将调用ls ，然后遍历得到的这些返回值。</li></ul> <p>示例</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Starting program at <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span>&quot;</span> <span class="token comment"># date会被替换成日期和时间</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Running program <span class="token variable">$0</span> with <span class="token variable">$#</span> arguments with pid <span class="token variable">$$</span>&quot;</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token function">grep</span> foobar <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null
    <span class="token comment"># 如果模式没有找到，则grep退出状态为 1</span>
    <span class="token comment"># 我们将标准输出流和标准错误流重定向到Null，因为我们并不关心这些信息</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$?</span> -ne <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># [[ 中的命令必须前后空一格 ]]</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;File <span class="token variable">$file</span> does not have any foobar, adding one&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;# foobar&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>在bash中进行比较时，尽量使用双方括号 [[ ]] 而不是单方括号 [ ]，这样会降低犯错的几率，尽管这样并不能兼容 sh。</p> <p>在shebang行(脚本第一行)中使用env命令(!/usr/bin/env bash)是一种好的实践，env会用PATH环境变量来进行定位，从而提高脚本的可移植性。</p> <ul><li>函数只能用与shell使用相同的语言，脚本可以使用任意语言。因此在脚本中包含 shebang 是很重要的。</li> <li>函数仅在定义时被加载，脚本会在每次被执行时加载。这让函数的加载比脚本略快一些，但每次修改函数定义，都要重新加载一次。</li> <li>函数会在当前的shell环境中执行，脚本会在单独的进程中执行。因此，函数可以对环境变量进行更改，比如改变当前工作目录，脚本则不行。脚本需要使用export将环境变量导出，并将值传递给环境变量。</li></ul> <h3 id="文件描述符"><a href="#文件描述符" class="header-anchor">#</a> 文件描述符</h3> <ul><li>0 STDIN  标准输入 键盘</li> <li>1 STDOUT 标准输出 显示器</li> <li>2 STDERR 标准错误</li></ul> <p>当文件描述符(0,1,2)与重定向符号&quot;&lt;, &gt;&quot;组合之后，就可以重新定向输入，输出，及错误。</p> <ul><li><code>command 2&gt;file1</code> 命令执行的错误信息保存到了file1文件中。显示屏只是显示正确的信息。</li> <li><code>command 1&gt;file1 2&gt;file2</code> 命令执行后，没有显示。因为正确输出到file1，错误定向到file2</li> <li><code>command &amp;&gt;file1</code> 命令执行后，输出和错误都定向到file1中
PS:2&gt;file 可以放在命令的前面，也可以放在后面。效果一样。</li></ul> <p>在shell脚本中，进行流的重定向</p> <ul><li>exec 1&gt; file1</li> <li>exec 2&gt; file2</li> <li>exec 0&lt; file0</li></ul> <p>指定命令的输出传到STDERR指定的文件: <code>echo &quot;some output&quot; &gt;&amp;2</code></p> <h2 id="shell工具"><a href="#shell工具" class="header-anchor">#</a> shell工具</h2> <h3 id="查找文件"><a href="#查找文件" class="header-anchor">#</a> 查找文件</h3> <p>find命令会递归地搜索符合条件的文件或文件夹。例如</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查找所有名称为src的文件夹</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name src -type d
<span class="token comment"># 查找所有文件夹路径中包含test的python文件</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -path <span class="token string">'*/test/*.py'</span> -type f
<span class="token comment"># 查找前一天修改的所有文件</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -mtime -1
<span class="token comment"># 查找所有大小在500k至10M的tar.gz文件</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -size +500k -size -10M -name <span class="token string">'*.tar.gz'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>除了列出所寻找的文件之外，find还能对所有查找到的文件进行操作。这能极大地简化一些单调的任务。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 删除全部扩展名为.tmp 的文件</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">'*.tmp'</span> -exec <span class="token function">rm</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
<span class="token comment"># 查找全部的 PNG 文件并将其转换为 JPG</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">'*.png'</span> -exec convert <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>.jpg <span class="token punctuation">\</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="查找代码"><a href="#查找代码" class="header-anchor">#</a> 查找代码</h3> <p>grep 有很多选项，如 -C ：获取查找结果的上下文（Context）；-v 将对结果进行反选（Invert），也就是输出不匹配的结果。例如， grep -C 5 会输出匹配结果前后五行。当需要搜索大量文件的时候，使用 -R 会递归地进入子目录并搜索所有的文本文件。</p> <h3 id="文件夹导航"><a href="#文件夹导航" class="header-anchor">#</a> 文件夹导航</h3> <p>fasd和autojump这两个工具来查找最常用或最近使用的文件和目录。</p> <p>Fasd 基于frecency对文件和文件排序，也就是说它会同时针对频率（frequency ）和时效（ recency）进行排序。默认情况下，fasd使用命令 z 帮助我们快速切换到最常访问的目录。例如， 如果您经常访问/home/user/files/cool_project 目录，那么可以直接使用 z cool 跳转到该目录。对于 autojump，则使用j cool代替即可。</p> <h2 id="shell中的重要命令"><a href="#shell中的重要命令" class="header-anchor">#</a> shell中的重要命令</h2> <h2 id="cheatsheet"><a href="#cheatsheet" class="header-anchor">#</a> cheatsheet</h2> <table><thead><tr><th style="text-align:center;">命令</th> <th style="text-align:left;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">man</td> <td style="text-align:left;">用户手册</td></tr> <tr><td style="text-align:center;">cd</td> <td style="text-align:left;">切换目录</td></tr> <tr><td style="text-align:center;">pwd</td> <td style="text-align:left;">当前工作目录</td></tr> <tr><td style="text-align:center;">which</td> <td style="text-align:left;">确定某个程序名代表的是哪个具体程序</td></tr> <tr><td style="text-align:center;">ls</td> <td style="text-align:left;">显示目录包含的文件</td></tr> <tr><td style="text-align:center;">mv</td> <td style="text-align:left;">移动或重命名文件</td></tr> <tr><td style="text-align:center;">cp</td> <td style="text-align:left;">复制文件</td></tr> <tr><td style="text-align:center;">rm</td> <td style="text-align:left;">删除文件</td></tr> <tr><td style="text-align:center;">mkdir</td> <td style="text-align:left;">新建文件夹</td></tr> <tr><td style="text-align:center;">touch</td> <td style="text-align:left;">创建文件或修改文件时间</td></tr> <tr><td style="text-align:center;">chmod [mode] FILE</td> <td style="text-align:left;">修改文件权限</td></tr> <tr><td style="text-align:center;">grep [pattern] FILE</td> <td style="text-align:left;">打印pattern匹配成功的行</td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:left;"></td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/cs/gdb-cheatsheet.html" class="prev">
        gdb
      </a></span> <span class="next"><a href="/note/cs/vim.html">
        vim
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.523f1097.js" defer></script><script src="/assets/js/2.f48cadb2.js" defer></script><script src="/assets/js/27.a6d15ed1.js" defer></script>
  </body>
</html>
